var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function a(){return Object.create(null)}function o(e){e.forEach(r)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(e,t,n){e.$$.on_destroy.push(c(t,n))}function h(e,t,n,r){if(e){const i=f(e,t,n,r);return e[0](i)}}function f(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function d(e,t,n,r,i,a,o){const s=function(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}(t,r,i,a);if(s){const i=f(t,n,r,o);e.p(i,s)}}function p(e){return null==e?"":e}function m(e,t,n=t){return e.set(n),t}const g="undefined"!=typeof window;let v=g?()=>window.performance.now():()=>Date.now(),y=g?e=>requestAnimationFrame(e):e;const b=new Set;function k(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&y(k)}function w(e,t){e.appendChild(t)}function _(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function j(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function E(){return S(" ")}function O(){return S("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function P(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t){e.value=null==t?"":t}function N(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function F(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function L(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function M(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class K{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=x(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)_(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const B=new Set;let D,z=0;function q(e,t,n,r,i,a,o,s=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*a(e);c+=100*e+`%{${o(r,1-r)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,f=e.ownerDocument;B.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(x("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${i}ms 1 both`,z+=1,h}function V(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),z-=i,z||y((()=>{z||(B.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),B.clear())})))}function H(e){D=e}function U(){if(!D)throw new Error("Function called outside component initialization");return D}function G(){const e=U();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=R(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}const W=[],X=[],Y=[],J=[],Q=Promise.resolve();let Z=!1;function ee(e){Y.push(e)}function te(e){J.push(e)}let ne=!1;const re=new Set;function ie(){if(!ne){ne=!0;do{for(let e=0;e<W.length;e+=1){const t=W[e];H(t),ae(t.$$)}for(H(null),W.length=0;X.length;)X.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];re.has(t)||(re.add(t),t())}Y.length=0}while(W.length);for(;J.length;)J.pop()();Z=!1,ne=!1,re.clear()}}function ae(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}let oe;function se(e,t,n){e.dispatchEvent(R(`${t?"intro":"outro"}${n}`))}const le=new Set;let ce;function ue(){ce={r:0,c:[],p:ce}}function he(){ce.r||o(ce.c),ce=ce.p}function fe(e,t){e&&e.i&&(le.delete(e),e.i(t))}function de(e,t,n,r){if(e&&e.o){if(le.has(e))return;le.add(e),ce.c.push((()=>{le.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const pe={duration:0};function me(n,r,i,a){let l=r(n,i),c=a?0:1,u=null,h=null,f=null;function d(){f&&V(n,f)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:i=0,duration:a=300,easing:s=t,tick:m=e,css:g}=l||pe,w={start:v()+i,b:r};r||(w.group=ce,ce.r+=1),u||h?h=w:(g&&(d(),f=q(n,c,r,a,i,s,g)),r&&m(0,1),u=p(w,a),ee((()=>se(n,r,"start"))),function(e){let t;0===b.size&&y(k),new Promise((n=>{b.add(t={c:e,f:n})}))}((e=>{if(h&&e>h.start&&(u=p(h,a),h=null,se(n,u.b,"start"),g&&(d(),f=q(n,c,u.b,u.duration,0,s,l.css))),u)if(e>=u.end)m(c=u.b,1-c),se(n,u.b,"end"),h||(u.b?d():--u.group.r||o(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*s(t/u.duration),m(c,1-c)}return!(!u&&!h)})))}return{run(e){s(l)?(oe||(oe=Promise.resolve(),oe.then((()=>{oe=null}))),oe).then((()=>{l=l(),m(e)})):m(e)},end(){d(),u=h=null}}}function ge(e,t){const n={},r={},i={$$scope:1};let a=e.length;for(;a--;){const o=e[a],s=t[a];if(s){for(const e in o)e in s||(r[e]=1);for(const e in s)i[e]||(n[e]=s[e],i[e]=1);e[a]=s}else for(const e in o)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function ve(e){return"object"==typeof e&&null!==e?e:{}}function ye(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function be(e){e&&e.c()}function ke(e,t,n,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),i||ee((()=>{const t=l.map(r).filter(s);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(ee)}function we(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _e(e,t){-1===e.$$.dirty[0]&&(W.push(e),Z||(Z=!0,Q.then(ie)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(t,n,r,i,s,l,c=[-1]){const u=D;H(t);const h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:a(),dirty:c,skip_bound:!1};let f=!1;if(h.ctx=r?r(t,n.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&s(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),f&&_e(t,e)),n})):[],h.update(),f=!0,o(h.before_update),h.fragment=!!i&&i(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach($)}else h.fragment&&h.fragment.c();n.intro&&fe(t.$$.fragment),ke(t,n.target,n.anchor,n.customElement),ie()}H(u)}class Ce{$destroy(){we(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var xe=function(){return(xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function je(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var Se=Object.keys,Ee=Array.isArray,Oe="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function Ae(e,t){return"object"!=typeof t||Se(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||Oe.Promise||(Oe.Promise=Promise);var Ie=Object.getPrototypeOf,Pe={}.hasOwnProperty;function Te(e,t){return Pe.call(e,t)}function Ne(e,t){"function"==typeof t&&(t=t(Ie(e))),Se(t).forEach((function(n){Le(e,n,t[n])}))}var Fe=Object.defineProperty;function Le(e,t,n,r){Fe(e,t,Ae(n&&Te(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Me(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Le(e.prototype,"constructor",e),{extend:Ne.bind(null,e.prototype)}}}}var Re=Object.getOwnPropertyDescriptor;function Ke(e,t){var n;return Re(e,t)||(n=Ie(e))&&Ke(n,t)}var Be=[].slice;function De(e,t,n){return Be.call(e,t,n)}function ze(e,t){return t(e)}function qe(e){if(!e)throw new Error("Assertion Failed")}function Ve(e){Oe.setImmediate?setImmediate(e):setTimeout(e,0)}function He(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Ue(e,t){if(Te(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=Ue(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return void 0===s?void 0:Ue(s,t.substr(o+1))}}function Ge(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){qe("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Ge(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var o=t.substr(0,a),s=t.substr(a+1);if(""===s)void 0===n?Ee(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var l=e[o];l||(l=e[o]={}),Ge(l,s,n)}}else void 0===n?Ee(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function We(e,t){"string"==typeof t?Ge(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Ge(e,t,void 0)}))}function Xe(e){var t={};for(var n in e)Te(e,n)&&(t[n]=e[n]);return t}var Ye=[].concat;function Je(e){return Ye.apply([],e)}var Qe="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Je([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return Oe[e]})),Ze=Qe.map((function(e){return Oe[e]})),et=He(Qe,(function(e){return[e,!0]}));function tt(e){if(!e||"object"!=typeof e)return e;var t;if(Ee(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(tt(e[n]))}else if(Ze.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)Te(e,i)&&(t[i]=tt(e[i]));return t}var nt={}.toString;function rt(e){return nt.call(e).slice(8,-1)}var it=function(e,t){return"Array"===t?""+e.map((function(e){return it(e,rt(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function at(e,t,n,r){return n=n||{},r=r||"",Se(e).forEach((function(i){if(Te(t,i)){var a=e[i],o=t[i];if("object"==typeof a&&"object"==typeof o&&a&&o){var s=rt(a),l=rt(o);s===l?et[s]?it(a,s)!==it(o,l)&&(n[r+i]=t[i]):at(a,o,n,r+i+"."):n[r+i]=t[i]}else a!==o&&(n[r+i]=t[i])}else n[r+i]=void 0})),Se(t).forEach((function(i){Te(e,i)||(n[r+i]=t[i])})),n}var ot="undefined"!=typeof Symbol&&Symbol.iterator,st=ot?function(e){var t;return null!=e&&(t=e[ot])&&t.apply(e)}:function(){return null},lt={};function ct(e){var t,n,r,i;if(1===arguments.length){if(Ee(e))return e.slice();if(this===lt&&"string"==typeof e)return[e];if(i=st(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ut="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},ht="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(e,t){ht=e,dt=t}var dt=function(){return!0},pt=!new Error("").stack;function mt(){if(pt)try{throw new Error}catch(e){return e}return new Error}function gt(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(dt).map((function(e){return"\n"+e})).join("")):""}var vt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],yt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(vt),bt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function kt(e,t){this._e=mt(),this.name=e,this.message=t}function wt(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function _t(e,t,n,r){this._e=mt(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=wt(e,t)}function $t(e,t){this._e=mt(),this.name="BulkError",this.failures=t,this.message=wt(e,t)}Me(kt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+gt(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Me(_t).from(kt),Me($t).from(kt);var Ct=yt.reduce((function(e,t){return e[t]=t+"Error",e}),{}),xt=kt,jt=yt.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=mt(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=bt[t]||n,this.inner=null)}return Me(r).from(xt),e[t]=r,e}),{});jt.Syntax=SyntaxError,jt.Type=TypeError,jt.Range=RangeError;var St=vt.reduce((function(e,t){return e[t+"Error"]=jt[t],e}),{});var Et=yt.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=jt[t]),e}),{});function Ot(){}function At(e){return e}function It(e,t){return null==e||e===At?t:function(n){return t(e(n))}}function Pt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Tt(e,t){return e===Ot?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Pt(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Pt(i,this.onerror):i),void 0!==a?a:n}}function Nt(e,t){return e===Ot?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Pt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Pt(r,this.onerror):r)}}function Ft(e,t){return e===Ot?t:function(n){var r=e.apply(this,arguments);Ae(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Pt(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Pt(a,this.onerror):a),void 0===r?void 0===o?void 0:o:Ae(r,o)}}function Lt(e,t){return e===Ot?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Mt(e,t){return e===Ot?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}Et.ModifyError=_t,Et.DexieError=kt,Et.BulkError=$t;var Rt={},Kt="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Bt=Kt[0],Dt=Kt[1],zt=Kt[2],qt=Dt&&Dt.then,Vt=Bt&&Bt.constructor,Ht=!!zt,Ut=!1,Gt=zt?function(){zt.then(vn)}:Oe.setImmediate?setImmediate.bind(null,vn):Oe.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){vn(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(vn,0)},Wt=function(e,t){rn.push([e,t]),Yt&&(Gt(),Yt=!1)},Xt=!0,Yt=!0,Jt=[],Qt=[],Zt=null,en=At,tn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:zn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{zn(e[0],e[1])}catch(e){}}))}},nn=tn,rn=[],an=0,on=[];function sn(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ot,this._lib=!1;var t=this._PSD=nn;if(ht&&(this._stackHolder=mt(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Rt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&hn(this,this._value))}this._state=null,this._value=null,++t.ref,un(this,e)}var ln={get:function(){var e=nn,t=Sn;function n(n,r){var i=this,a=!e.global&&(e!==nn||t!==Sn),o=a&&!In(),s=new sn((function(t,s){dn(i,new cn(Kn(n,e,a,o),Kn(r,e,a,o),t,s,e))}));return ht&&gn(s,this),s}return n.prototype=Rt,n},set:function(e){Le(this,"then",e&&e.prototype===Rt?ln:{get:function(){return e},set:ln.set})}};function cn(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function un(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&yn();t&&"function"==typeof t.then?un(e,(function(e,n){t instanceof sn?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,fn(e)),n&&bn()}}),hn.bind(null,e))}catch(t){hn(e,t)}}function hn(e,t){if(Qt.push(t),null===e._state){var n=e._lib&&yn();t=en(t),e._state=!1,e._value=t,ht&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=Ke(t,"stack");t._promise=e,Le(t,"stack",{get:function(){return Ut?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Jt.some((function(t){return t._value===e._value}))||Jt.push(e)}(e),fn(e),n&&bn()}}function fn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)dn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===an&&(++an,Wt((function(){0==--an&&kn()}),[]))}function dn(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++an,Wt(pn,[n,e,t])}else e._listeners.push(t)}function pn(e,t,n){try{Zt=t;var r,i=t._value;t._state?r=e(i):(Qt.length&&(Qt=[]),r=e(i),-1===Qt.indexOf(i)&&function(e){var t=Jt.length;for(;t;)if(Jt[--t]._value===e._value)return void Jt.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Zt=null,0==--an&&kn(),--n.psd.ref||n.psd.finalize()}}function mn(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,a,o=e._value;null!=o?(i=o.name||"Error",a=o.message||o,r=gt(o,0)):(i=o,a=""),t.push(i+(a?": "+a:"")+r)}return ht&&((r=gt(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&mn(e._prev,t,n)),t}function gn(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function vn(){yn()&&bn()}function yn(){var e=Xt;return Xt=!1,Yt=!1,e}function bn(){var e,t,n;do{for(;rn.length>0;)for(e=rn,rn=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(rn.length>0);Xt=!0,Yt=!0}function kn(){var e=Jt;Jt=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=on.slice(0),n=t.length;n;)t[--n]()}function wn(e){return new sn(Rt,!1,e)}function _n(e,t){var n=nn;return function(){var r=yn(),i=nn;try{return Fn(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Fn(i,!1),r&&bn()}}}Ne(sn.prototype,{then:ln,_then:function(e,t){dn(this,new cn(null,null,e,t,nn))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):wn(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):wn(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),wn(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Ut=!0;var e=mn(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ut=!1}}},timeout:function(e,t){var n=this;return e<1/0?new sn((function(r,i){var a=setTimeout((function(){return i(new jt.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Le(sn.prototype,Symbol.toStringTag,"Dexie.Promise"),tn.env=Ln(),Ne(sn,{all:function(){var e=ct.apply(null,arguments).map(Pn);return new sn((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,a){return sn.resolve(i).then((function(n){e[a]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof sn)return e;if(e&&"function"==typeof e.then)return new sn((function(t,n){e.then(t,n)}));var t=new sn(Rt,!0,e);return gn(t,Zt),t},reject:wn,race:function(){var e=ct.apply(null,arguments).map(Pn);return new sn((function(t,n){e.map((function(e){return sn.resolve(e).then(t,n)}))}))},PSD:{get:function(){return nn},set:function(e){return nn=e}},totalEchoes:{get:function(){return Sn}},newPSD:On,usePSD:Mn,scheduler:{get:function(){return Wt},set:function(e){Wt=e}},rejectionMapper:{get:function(){return en},set:function(e){en=e}},follow:function(e,t){return new sn((function(n,r){return On((function(t,n){var r=nn;r.unhandleds=[],r.onunhandled=n,r.finalize=Pt((function(){var e=this;!function(e){function t(){e(),on.splice(on.indexOf(t),1)}on.push(t),++an,Wt((function(){0==--an&&kn()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Vt&&(Vt.allSettled&&Le(sn,"allSettled",(function(){var e=ct.apply(null,arguments).map(Pn);return new sn((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return sn.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Vt.any&&"undefined"!=typeof AggregateError&&Le(sn,"any",(function(){var e=ct.apply(null,arguments).map(Pn);return new sn((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,a){return sn.resolve(e).then((function(e){return t(e)}),(function(e){i[a]=e,--r||n(new AggregateError(i))}))}))}))})));var $n={awaits:0,echoes:0,id:0},Cn=0,xn=[],jn=0,Sn=0,En=0;function On(e,t,n,r){var i=nn,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++En;var o=tn.env;a.env=Ht?{Promise:sn,PromiseProp:{value:sn,configurable:!0,writable:!0},all:sn.all,race:sn.race,allSettled:sn.allSettled,any:sn.any,resolve:sn.resolve,reject:sn.reject,nthen:Bn(o.nthen,a),gthen:Bn(o.gthen,a)}:{},t&&Ae(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Mn(a,e,n,r);return 0===a.ref&&a.finalize(),s}function An(){return $n.id||($n.id=++Cn),++$n.awaits,$n.echoes+=100,$n.id}function In(){return!!$n.awaits&&(0==--$n.awaits&&($n.id=0),$n.echoes=100*$n.awaits,!0)}function Pn(e){return $n.echoes&&e&&e.constructor===Vt?(An(),e.then((function(e){return In(),e}),(function(e){return In(),qn(e)}))):e}function Tn(e){++Sn,$n.echoes&&0!=--$n.echoes||($n.echoes=$n.id=0),xn.push(nn),Fn(e,!0)}function Nn(){var e=xn[xn.length-1];xn.pop(),Fn(e,!1)}function Fn(e,t){var n=nn;if((t?!$n.echoes||jn++&&e===nn:!jn||--jn&&e===nn)||Rn(t?Tn.bind(null,e):Nn),e!==nn&&(nn=e,n===tn&&(tn.env=Ln()),Ht)){var r=tn.env.Promise,i=e.env;Dt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ln(){var e=Oe.Promise;return Ht?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Oe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Dt.then,gthen:e.prototype.then}:{}}function Mn(e,t,n,r,i){var a=nn;try{return Fn(e,!0),t(n,r,i)}finally{Fn(a,!1)}}function Rn(e){qt.call(Bt,e)}function Kn(e,t,n,r){return"function"!=typeof e?e:function(){var i=nn;n&&An(),Fn(t,!0);try{return e.apply(this,arguments)}finally{Fn(i,!1),r&&Rn(In)}}}function Bn(e,t){return function(n,r){return e.call(this,Kn(n,t),Kn(r,t))}}-1===(""+qt).indexOf("[native code]")&&(An=In=Ot);var Dn="unhandledrejection";function zn(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(Oe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Dn,!0,!0),Ae(r,i)):Oe.CustomEvent&&Ae(r=new CustomEvent(Dn,{detail:i}),i),r&&Oe.dispatchEvent&&(dispatchEvent(r),!Oe.PromiseRejectionEvent&&Oe.onunhandledrejection))try{Oe.onunhandledrejection(r)}catch(e){}ht&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var qn=sn.reject;function Vn(e,t,n,r){if(e._state.openComplete||nn.letThrough){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(e){return qn(e)}return i._promise(t,(function(e,t){return On((function(){return nn.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return qn(new jt.DatabaseClosed);e.open().catch(Ot)}return e._state.dbReadyPromise.then((function(){return Vn(e,t,n,r)}))}var Hn="3.0.3",Un=String.fromCharCode(65535),Gn=-1/0,Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xn="String expected.",Yn=[],Jn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Qn=Jn,Zn=Jn,er=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},tr="__dbnames",nr="readonly",rr="readwrite";function ir(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ar={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function or(e){return function(t){return void 0===Ue(t,e)&&We(t=tt(t),e),t}}var sr=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||nn.trans,i=this.name;function a(e,n,r){if(!r.schema[i])throw new jt.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=yn();try{return r&&r.db===this.db?r===nn.trans?r._promise(e,a,n):On((function(){return r._promise(e,a,n)}),{trans:r,transless:nn.transless||nn}):Vn(this.db,e,[this.name],a)}finally{o&&bn()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Ee(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=Se(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Un)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&ht&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function a(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var o=t.reduce((function(t,n){var i=t[0],o=t[1],s=r[n],l=e[n];return[i||s,i||!s?ir(o,s&&s.multi?function(e){var t=Ue(e,n);return Ee(t)&&t.some((function(e){return a(l,e)}))}:function(e){return a(l,Ue(e,n))}):o]}),[null,null]),s=o[0],l=o[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Ee(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(Te(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){Ae(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=or(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?sn.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{Ge(e,a,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||Ee(t))throw new jt.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Ee(e))return this.where(":id").equals(e).modify(t);Se(t).forEach((function(n){Ge(e,n,t[n])}));var n=Ue(e,this.schema.primKey.keyPath);return void 0===n?qn(new jt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=or(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?sn.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{Ge(e,a,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?sn.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ar})})).then((function(e){return e.numFailures?sn.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,s=n.keyPath;if(s&&i)throw new jt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new jt.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&o?e.map(or(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;if(0===t)return a?n:i;throw new $t(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,s=n.keyPath;if(s&&i)throw new jt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new jt.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&o?e.map(or(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;if(0===t)return a?n:i;throw new $t(r.name+".bulkPut(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,a=e.failures;if(0===r)return i;throw new $t(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",a)}))},e}();function lr(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[n].subscribe.apply(null,a),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(e,r,i){if("object"==typeof e)return o(e);r||(r=Lt),i||(i=Ot);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,i)}};return t[e]=n[e]=a,a}function o(e){Se(e).forEach((function(t){var n=e[t];if(Ee(n))a(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new jt.InvalidArgument("Invalid event config");var r=a(t,At,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Ve((function(){e.apply(null,t)}))}))}))}}))}}function cr(e,t){return Me(t).from({prototype:e}),t}function ur(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function hr(e,t){e.filter=ir(e.filter,t)}function fr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return ir(r(),t())}:t,e.justLimit=n&&!r}function dr(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new jt.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function pr(e,t,n){var r=dr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function mr(e,t,n,r){var i=e.replayFilter?ir(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var o=n.primaryKey,s=""+o;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(o)),Te(a,s)||(a[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(o,n),gr(pr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return gr(pr(e,r,n),ir(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function gr(e,t,n,r){var i=_n(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=Ot}),(function(t){e.fail(t),n=Ot}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var vr=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,qn.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,qn.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ir(t.algorithm,e)},e.prototype._iterate=function(e,t){return mr(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&Ae(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return mr(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(ur(n,!0))return r.count({trans:e,query:{index:dr(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return mr(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function s(e,t){var n=a(e,i),r=a(t,i);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&ur(n,!0)&&n.limit>0){var r=n.valueMapper,i=dr(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var a=[];return mr(n,(function(e){return a.push(e)}),e,n.table.core).then((function(){return a}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,ur(t)?fr(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):fr(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),fr(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return hr(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return hr(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=ir(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&ur(t,!0)&&t.limit>0)return this._read((function(e){var n=dr(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return hr(this._ctx,(function(e){var t=e.primaryKey.toString(),r=Te(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var a=Se(e),o=a.length;i=function(t){for(var n=!1,r=0;r<o;++r){var i=a[r],s=e[i];Ue(t,i)!==s&&(Ge(t,i,s),n=!0)}return n}}var s=n.table.core,l=s.schema.primaryKey,c=l.outbound,u=l.extractKey,h="testmode"in li?1:2e3,f=t.db.core.cmp,d=[],p=0,m=[],g=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;for(var i=0,a=Se(n);i<a.length;i++){var o=a[i];d.push(n[o])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var a=Math.min(h,e.length-n);return s.getMany({trans:r,keys:e.slice(n,n+a)}).then((function(o){for(var l=[],d=[],p=c?[]:null,m=[],v=0;v<a;++v){var y=o[v],b={value:tt(y),primKey:e[n+v]};!1!==i.call(b,b.value,b)&&(null==b.value?m.push(e[n+v]):c||0===f(u(y),u(b.value))?(d.push(b.value),c&&p.push(e[n+v])):(m.push(e[n+v]),l.push(b.value)))}return Promise.resolve(l.length>0&&s.mutate({trans:r,type:"add",values:l}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);g(l.length,e)}))).then((function(e){return d.length>0&&s.mutate({trans:r,type:"put",keys:p,values:d}).then((function(e){return g(d.length,e)}))})).then((function(){return m.length>0&&s.mutate({trans:r,type:"delete",keys:m}).then((function(e){return g(m.length,e)}))})).then((function(){return e.length>n+a&&t(n+h)}))}))};return t(0).then((function(){if(d.length>0)throw new _t("Error modifying one or more objects",d,p,m);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return ur(e)&&(e.isPrimKey&&!Zn||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new _t("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function yr(e,t){return e<t?-1:e===t?0:1}function br(e,t){return e>t?-1:e===t?0:1}function kr(e,t,n){var r=e instanceof jr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function wr(e){return new e.Collection(e,(function(){return xr("")})).limit(0)}function _r(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),s=-1,l=0;l<o;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],c)<0&&(s=l)}return o<r.length&&"next"===a?e+n.substr(e.length):o<e.length&&"prev"===a?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function $r(e,t,n,r){var i,a,o,s,l,c,u,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return kr(e,Xn);function f(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),a=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),o="next"===e?yr:br;var t=n.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}f("next");var d=new e.Collection(e,(function(){return Cr(s[0],l[h-1]+r)}));d._ondirectionchange=function(e){f(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=a(i);if(t(f,l,p))return!0;for(var d=null,m=p;m<h;++m){var g=_r(i,f,s[m],l[m],o,c);null===g&&null===d?p=m+1:(null===d||o(d,g)>0)&&(d=g)}return n(null!==d?function(){e.continue(d+u)}:r),!1})),d}function Cr(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function xr(e){return{type:1,lower:e,upper:e}}var jr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?wr(this):new this.Collection(this,(function(){return Cr(e,t,!n,!r)}))}catch(e){return kr(this,Wn)}},e.prototype.equals=function(e){return null==e?kr(this,Wn):new this.Collection(this,(function(){return xr(e)}))},e.prototype.above=function(e){return null==e?kr(this,Wn):new this.Collection(this,(function(){return Cr(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?kr(this,Wn):new this.Collection(this,(function(){return Cr(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?kr(this,Wn):new this.Collection(this,(function(){return Cr(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?kr(this,Wn):new this.Collection(this,(function(){return Cr(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?kr(this,Xn):this.between(e,e+Un,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):$r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Un)},e.prototype.equalsIgnoreCase=function(e){return $r(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=ct.apply(lt,arguments);return 0===e.length?wr(this):$r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=ct.apply(lt,arguments);return 0===e.length?wr(this):$r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Un)},e.prototype.anyOf=function(){var e=this,t=ct.apply(lt,arguments),n=this._cmp;try{t.sort(n)}catch(e){return kr(this,Wn)}if(0===t.length)return wr(this);var r=new this.Collection(this,(function(){return Cr(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,a){for(var o=e.key;n(o,t[i])>0;)if(++i===t.length)return r(a),!1;return 0===n(o,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Gn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=ct.apply(lt,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return kr(this,Wn)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Gn,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,o=this._min,s=this._max;if(0===e.length)return wr(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return kr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",jt.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var u,h=i;function f(e,t){return h(e[0],t[0])}try{(u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=o(a[0],t[0]),a[1]=s(a[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(f)}catch(e){return kr(this,Wn)}var d=0,p=c?function(e){return i(e,u[d][1])>0}:function(e){return i(e,u[d][1])>=0},m=l?function(e){return a(e,u[d][0])>0}:function(e){return a(e,u[d][0])>=0};var g=p,v=new this.Collection(this,(function(){return Cr(u[0][0],u[u.length-1][1],!l,!c)}));return v._ondirectionchange=function(e){"next"===e?(g=p,h=i):(g=m,h=a),u.sort(f)},v._addAlgorithm((function(e,t,r){for(var a=e.key;g(a);)if(++d===u.length)return t(r),!1;return!!function(e){return!p(e)&&!m(e)}(a)||(0===n._cmp(a,u[d][1])||0===n._cmp(a,u[d][0])||t((function(){h===i?e.continue(u[d][0]):e.continue(u[d][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=ct.apply(lt,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?wr(this):this.inAnyRange(e.map((function(e){return[e,e+Un]}))):kr(this,"startsWithAnyOf() only works with strings")},e}();function Sr(e){return 1===e.length?e[0]:e}function Er(e){try{return e.only([[]]),[[]]}catch(e){return Un}}function Or(e){return _n((function(t){return Ar(t),e(t.target.error),!1}))}function Ar(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ir=function(){function e(){}return e.prototype._lock=function(){return qe(!nn.global),++this._reculock,1!==this._reculock||nn.global||(nn.lockOwnerFor=this),this},e.prototype._unlock=function(){if(qe(!nn.global),0==--this._reculock)for(nn.global||(nn.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Mn(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&nn.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(qe(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new jt.DatabaseClosed(r);case"MissingAPIError":throw new jt.MissingAPI(r.message,r);default:throw new jt.OpenFailed(r)}if(!this.active)throw new jt.TransactionInactive;return qe(null===this._completion._state),(e=this.idbtrans=e||n.transaction(Sr(this.storeNames),this.mode)).onerror=_n((function(n){Ar(n),t._reject(e.error)})),e.onabort=_n((function(n){Ar(n),t.active&&t._reject(new jt.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=_n((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return qn(new jt.ReadOnly("Transaction is readonly"));if(!this.active)return qn(new jt.TransactionInactive);if(this._locked())return new sn((function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},nn])}));if(n)return On((function(){var e=new sn((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new sn((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=sn.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new sn((function(e,r){n.then((function(n){return t._waitingQueue.push(_n(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(_n(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new jt.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(Te(t,e))return t[e];var n=this.schema[e];if(!n)throw new jt.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function Pr(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Tr(t)}}function Tr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Nr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:He(n,(function(e){return[e.name,e]}))}}function Fr(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return Ue(t,e)}}(e):function(t){return Ue(t,e)}}function Lr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Mr(e){return[].slice.call(e)}var Rr=0;function Kr(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Br(e,t,n,r){var i=t.cmp.bind(t);function a(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,a=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!a):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!a)}var o=function(e,t){var n=Mr(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=Ee(t),i=null==t,a={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Fr(t)},indexes:Mr(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,o={name:t,compound:Ee(i),keyPath:i,unique:n,multiEntry:r,extractKey:Fr(i)};return a[Kr(i)]=o,o})),getIndexByKeyPath:function(e){return a[Kr(e)]}};return a[":id"]=o.primaryKey,null!=t&&(a[Kr(t)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=o.schema,l=o.hasGetAll,c=s.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,o=n.keys,s=n.values,l=n.range,c=n.wantResults;return new Promise((function(n,u){n=_n(n);var h=r.objectStore(t),f=null==h.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var m,g=c&&je(o||Lr(e.primaryKey,{type:i,keys:o,values:s})),v=[],y=0,b=function(e){++y,Ar(e),g&&(g[e.target._reqno]=void 0),v[e.target._reqno]=e.target.error},k=function(e){var t=e.target;g[t._reqno]=t.result};if("deleteRange"===i){if(4===l.type)return n({numFailures:y,failures:v,results:g,lastResult:void 0});m=3===l.type?h.clear():h.delete(a(l))}else{var w=d?f?[s,o]:[s,null]:[o,null],_=w[0],$=w[1];if(d)for(var C=0;C<p;++C)(m=$&&void 0!==$[C]?h[i](_[C],$[C]):h[i](_[C]))._reqno=C,g&&void 0===g[C]&&(m.onsuccess=k),m.onerror=b;else for(C=0;C<p;++C)(m=h[i](_[C]))._reqno=C,m.onerror=b}var x=function(e){var t=e.target.result;g&&(g[p-1]=t),n({numFailures:y,failures:v,results:g,lastResult:t})};m.onerror=function(e){b(e),x(e)},m.onsuccess=x}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=_n(e);for(var a,o=n.objectStore(t),s=r.length,l=new Array(s),c=0,u=0,h=function(t){var n=t.target;l[n._pos]=n.result,++u===c&&e(l)},f=Or(i),d=0;d<s;++d)null!=r[d]&&((a=o.get(r[d]))._pos=d,a.onsuccess=h,a.onerror=f,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=_n(e);var a=n.objectStore(t).get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=Or(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=_n(r);var o=n.trans,s=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,h=c.index,f=c.range,d=o.objectStore(t),p=h.isPrimaryKey?d:d.index(h.name),m=a(f);if(0===l)return r({result:[]});if(e){var g=s?p.getAll(m,u):p.getAllKeys(m,u);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=Or(i)}else{var v=0,y=s||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),b=[];y.onsuccess=function(e){var t=y.result;return t?(b.push(s?t.value:t.primaryKey),++v===l?r({result:b}):void t.continue()):r({result:b})},y.onerror=Or(i)}}))}}(l),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,o=e.reverse,s=e.unique;return new Promise((function(e,l){e=_n(e);var c=i.index,u=i.range,h=n.objectStore(t),f=c.isPrimaryKey?h:h.index(c.name),d=o?s?"prevunique":"prev":s?"nextunique":"next",p=r||!("openKeyCursor"in f)?f.openCursor(a(u),d):f.openKeyCursor(a(u),d);p.onerror=Or(l),p.onsuccess=_n((function(t){var r=p.result;if(r){r.___id=++Rr,r.done=!1;var i=r.continue.bind(r),a=r.continuePrimaryKey;a&&(a=a.bind(r));var o=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=_n(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=_n(e),p.onerror=Or(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=_n((function(e){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=a,r.advance=o,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,o=n.range;return new Promise((function(e,n){var s=r.objectStore(t),l=i.isPrimaryKey?s:s.index(i.name),c=a(o),u=c?l.count(c):l.count();u.onsuccess=_n((function(t){return e(t.target.result)})),u.onerror=Or(n)}))}}}(e)})),u={};return c.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:Er(n),schema:s}}function Dr(e,t,n,r){var i=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return xe(xe({},e),n(e))}),e)}(Br(t,n.indexedDB,i,r),e.dbcore)}}function zr(e,t){var n=t.db,r=Dr(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function qr(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=Ke(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?Le(t,n,{get:function(){return this.table(n)},set:function(e){Fe(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Vr(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function Hr(e,t){return e._cfg.version-t._cfg.version}function Ur(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),s=nn.transless||nn;On((function(){nn.trans=a,nn.transless=s,0===t?(Se(i).forEach((function(e){Wr(n,e,i[e].primKey,i[e].indexes)})),zr(e,n),sn.follow((function(){return e.on.populate.fire(a)})).catch(o)):function(e,t,n,r){var i=[],a=e._versions,o=e._dbSchema=Yr(e,e.idbdb,r),s=!1;function l(){return i.length?sn.resolve(i.shift()(n.idbtrans)).then(l):sn.resolve()}return a.filter((function(e){return e._cfg.version>=t})).forEach((function(a){i.push((function(){var i=o,l=a._cfg.dbschema;Jr(e,i,r),Jr(e,l,r),o=e._dbSchema=l;var c=Gr(i,l);c.add.forEach((function(e){Wr(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new jt.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Xr(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Xr(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=a._cfg.contentUpgrade;if(u&&a._cfg.version>t){zr(e,r),n._memoizedTables={},s=!0;var h=Xe(l);c.del.forEach((function(e){h[e]=i[e]})),Vr(e,[e.Transaction.prototype]),qr(e,[e.Transaction.prototype],Se(h),h),n.schema=h;var f,d=ut(u);d&&An();var p=sn.follow((function(){if((f=u(n))&&d){var e=In.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?sn.resolve(f):p.then((function(){return f}))}})),i.push((function(t){s&&Qn||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(a._cfg.dbschema,t);Vr(e,[e.Transaction.prototype]),qr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((function(){var e,t;t=r,Se(e=o).forEach((function(n){t.db.objectStoreNames.contains(n)||Wr(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(o)}))}function Gr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Jn)o.recreate=!0,r.change.push(o);else{var s=i.idxByName,l=a.idxByName,c=void 0;for(c in s)l[c]||o.del.push(c);for(c in l){var u=s[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,a])}return r}function Wr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Xr(i,e)})),i}function Xr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Yr(e,t,n){var r={};return De(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,a=Pr(Tr(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);i=l.keyPath;var c=Pr(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}r[e]=Nr(e,a,o)})),r}function Jr(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var l=o.indexNames[s],c=o.index(l).keyPath,u="string"==typeof c?c:"["+De(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[u];h&&(h.name=l,delete t[a].idxByName[u],t[a].idxByName[l]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Oe.WorkerGlobalScope&&Oe instanceof Oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var Qr,Zr=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){Se(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Pr(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Ee(r),0===t)})),i=r.shift();if(i.multi)throw new jt.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new jt.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new jt.Schema("Index must have a name and cannot be an empty string")})),t[n]=Nr(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?Ae(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){Ae(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Vr(t,[t._allTables,t,t.Transaction.prototype]),qr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Se(i),i),t._storeNames=Se(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function ei(e){return On((function(){return nn.letThrough=!0,e()}))}function ti(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?qn(t.dbOpenError):e}));ht&&(t.openCanceller._stackHolder=mt()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return sn.race([t.openCanceller,new sn((function(r,a){if(!n)throw new jt.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=e.name,s=t.autoSchema?n.open(o):n.open(o,Math.round(10*e.verno));if(!s)throw new jt.MissingAPI("IndexedDB API not available");s.onerror=Or(a),s.onblocked=_n(e._fireOnBlocked),s.onupgradeneeded=_n((function(r){if(i=s.transaction,t.autoSchema&&!e._options.allowEmptyDB){s.onerror=Ar,i.abort(),s.result.close();var l=n.deleteDatabase(o);l.onsuccess=l.onerror=_n((function(){a(new jt.NoSuchDatabase("Database "+o+" doesnt exist"))}))}else{i.onerror=Or(a);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=s.result,Ur(e,c/10,i,a)}}),a),s.onsuccess=_n((function(){i=null;var n=e.idbdb=s.result,a=De(n.objectStoreNames);if(a.length>0)try{var l=n.transaction(Sr(a),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Yr(0,t,n);e._storeNames=De(t.objectStoreNames,0),qr(e,[e._allTables],Se(r),r)}(e,n,l):(Jr(e,e._dbSchema,l),function(e,t){var n=Gr(Yr(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),zr(e,l)}catch(e){}Yn.push(e),n.onversionchange=_n((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),Qr.add(o),r()}),a)}))]).then((function(){return t.onReadyBeingFired=[],sn.resolve(ei(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Mt,Ot);return t.onReadyBeingFired=[],sn.resolve(ei(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,qn(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function ni(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):Ee(a)?Promise.all(a).then(n,r):n(a)}}return i(t)()}function ri(e,t,n){var r=arguments.length;if(r<2)throw new jt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Je(i);return[e,a,n]}function ii(e,t,n,r,i){return sn.resolve().then((function(){var a=nn.transless||nn,o=e._createTransaction(t,n,e._dbSchema,r),s={trans:o,transless:a};r?o.idbtrans=r.idbtrans:o.create();var l,c=ut(i);c&&An();var u=sn.follow((function(){if(l=i.call(o,o))if(c){var e=In.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=ni(l))}),s);return(l&&"function"==typeof l.then?sn.resolve(l).then((function(e){return o.active?e:qn(new jt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return l}))).then((function(e){return r&&o._resolve(),o._completion.then((function(){return e}))})).catch((function(e){return o._reject(e),qn(e)}))}))}function ai(e,t,n){for(var r=Ee(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var oi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return xe(xe({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(e,t,n){var r=Kr(e),s=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u=xe(xe({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:l,extractKey:Fr(e),unique:!c&&n.unique});(s.push(u),u.isPrimaryKey||a.push(u),l>1)&&o(2===l?e[0]:e.slice(0,l-1),t+1,n);return s.sort((function(e,t){return e.keyTail-t.keyTail})),u}var s=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function h(t){var n,r,i=t.query.index;return i.isVirtual?xe(xe({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:ai(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:ai(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}return xe(xe({},n),{schema:xe(xe({},r),{primaryKey:s,indexes:a,getIndexByKeyPath:function(e){var t=i[Kr(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,a=r.isVirtual,o=r.keyLength;if(!a)return n.openCursor(t);return n.openCursor(h(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(ai(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(ai(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(ai(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},si={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return xe(xe({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return xe(xe({},n),{mutate:function(e){var i=nn.trans,a=i.table(t).hook,o=a.deleting,s=a.creating,l=a.updating;switch(e.type){case"add":if(s.fire===Ot)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(s.fire===Ot&&l.fire===Ot)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(o.fire===Ot)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(o.fire===Ot)break;return i._promise("readwrite",(function(){return function(e){return u(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=nn.trans,i=e.keys||Lr(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?xe(xe({},e),{keys:i,wantResults:!0}):xe({},e)).type&&(e.values=je(e.values)),e.keys&&(e.keys=je(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,i).then((function(a){var c=i.map((function(n,i){var c=a[i],u={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){var h=s.fire.call(u,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,r.outbound||Ge(e.values[i],r.keyPath,n))}else{var f=at(c,e.values[i]),d=l.fire.call(u,f,n,c,t);if(d){var p=e.values[i];Object.keys(d).forEach((function(e){Te(p,e)?p[e]=d[e]:Ge(p,e,d[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,o=t.numFailures,s=t.lastResult,l=0;l<i.length;++l){var u=r?r[l]:i[l],h=c[l];null==u?h.onerror&&h.onerror(n[l]):h.onsuccess&&h.onsuccess("put"===e.type&&a[l]?e.values[l]:u)}return{failures:n,results:r,numFailures:o,lastResult:s}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,xe(xe({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}})}})}},li=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=xe({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var o,s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ot,dbReadyPromise:null,cancelOpen:Ot,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new sn((function(e){s.dbReadyResolve=e})),s.openCanceller=new sn((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=lr(this,"populate","blocked","versionchange",{ready:[Mt,Ot]}),this.on.ready.subscribe=ze(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||sn.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var a=r;i||t((function e(){a.on.ready.unsubscribe(n),a.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(o=this,cr(vr.prototype,(function(e,t){this.db=o;var n=ar,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,a=i.table,s=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==At?s:null}}))),this.Table=function(e){return cr(sr.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:lr(null,{creating:[Tt,Ot],reading:[It,At],updating:[Ft,Ot],deleting:[Nt,Ot]})}))}(this),this.Transaction=function(e){return cr(Ir.prototype,(function(t,n,r,i){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=lr(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new sn((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),qn(e)}))}))}(this),this.Version=function(e){return cr(Zr.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return cr(jr.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new jt.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Er(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Yn.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(oi),this.use(si),a.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new jt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new jt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Hr),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||nn.letThrough?e():new sn((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new jt.DatabaseClosed);t.open().catch(Ot)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:null==r?10:r,name:i}),a.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return ti(this)},e.prototype.close=function(){var e=Yn.indexOf(this),t=this._state;if(e>=0&&Yn.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new jt.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new sn((function(e){t.dbReadyResolve=e})),t.openCanceller=new sn((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new sn((function(r,i){var a=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=_n((function(){Qr.remove(e.name),r()})),t.onerror=Or(i),t.onblocked=e._fireOnBlocked};if(t)throw new jt.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return Se(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=ri.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=nn.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,o,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===nr)a=nr;else{if("rw"!=e&&e!=rr)throw new jt.InvalidArgument("Invalid transaction mode: "+e);a=rr}if(i){if(i.mode===nr&&a===rr){if(!s)throw new jt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new jt.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):qn(e)}var l=ii.bind(null,this,a,o,i,n);return i?i._promise(a,l,"lock"):nn.trans?Mn(nn.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!Te(this._allTables,e))throw new jt.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),ci=li;Ne(ci,xe(xe({},Et),{delete:function(e){return new ci(e).delete()},exists:function(e){return new ci(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return Qr?Qr.getDatabaseNames().then(e):sn.resolve([])},defineClass:function(){return function(e){Ae(this,e)}},ignoreTransaction:function(e){return nn.trans?Mn(nn.transless,e):e()},vip:ei,async:function(e){return function(){try{var t=ni(e.apply(this,arguments));return t&&"function"==typeof t.then?t:sn.resolve(t)}catch(e){return qn(e)}}},spawn:function(e,t,n){try{var r=ni(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:sn.resolve(r)}catch(e){return qn(e)}},currentTransaction:{get:function(){return nn.trans||null}},waitFor:function(e,t){var n=sn.resolve("function"==typeof e?ci.ignoreTransaction(e):e).timeout(t||6e4);return nn.trans?nn.trans.waitFor(n):n},Promise:sn,debug:{get:function(){return ht},set:function(e){ft(e,"dexie"===e?function(){return!0}:er)}},derive:Me,extend:Ae,props:Ne,override:ze,Events:lr,getByKeyPath:Ue,setByKeyPath:Ge,delByKeyPath:We,shallowClone:Xe,deepClone:tt,getObjectDiff:at,asap:Ve,minKey:Gn,addons:[],connections:Yn,errnames:Ct,dependencies:function(){try{return{indexedDB:Oe.indexedDB||Oe.mozIndexedDB||Oe.webkitIndexedDB||Oe.msIndexedDB,IDBKeyRange:Oe.IDBKeyRange||Oe.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Hn,version:Hn.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:ci,Dexie:ci})),ci.maxKey=Er(ci.dependencies.IDBKeyRange),function(e){try{Qr=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new li(tr,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?sn.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==tr}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==tr&&t.put({name:e}).catch(Ot)},remove:function(e){return!n&&e!==tr&&t.delete(e).catch(Ot)}}}(e)}catch(e){}}(li.dependencies.indexedDB),sn.rejectionMapper=function(e,t){if(!e||e instanceof kt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!St[e.name])return e;var n=new St[e.name](t||e.message,e);return"stack"in e&&Le(n,"stack",{get:function(){return this.inner.stack}}),n},ft(ht,er);const ui={"":0,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":1,"":2,"":2,"":2,"UP":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"KO":2,"":2,"":2,"UP":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":2,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3,"":3};class hi{MAX_SKILLS=2;MAX_SLOTS=3;db=null;indexeddb=null;charms=null;charmTableName="charms";constructor(e={}){const{isDemoMode:t}=e;t&&(this.charmTableName="demoCharms"),this._init()}sql(e,t){return new Promise(((n,r)=>{this.db.transaction((i=>i.executeSql(e,t,((e,t)=>n({tx:e,result:t})),((...e)=>r(e)))))}))}async _init(){this.db=openDatabase("mhrise-charm-manager","","MHRise charm manager",5e3),await this._createTable(),await this.sql(`alter table ${this.charmTableName} add column imagename varchar(128)`).catch((()=>{})),this.indexeddb=new li(this.charmTableName),this.indexeddb.version(1).stores({images:"name"}),this.updateCharmArray()}async reset(){await this.sql(`drop table if exists ${this.charmTableName}`),await this._createTable()}async registerCharms(e){const t=e.map((e=>`("${e.skills[0]}", ${e.skillLevels[0]}, "${e.skills[1]}", ${e.skillLevels[1]}, ${e.slots.replace(/-/g,", ")}, "${e.imageName}")`)).join(",\n");console.log(t),await this.sql(`insert or ignore into ${this.charmTableName} values ${t}`),this.updateCharmArray()}async searchCharms(e){const{tx:t,result:n}=await this.sql(e);return n.rows}async _createTable(){await this.sql(`create table if not exists ${this.charmTableName}(\n               skill1      varchar(20),\n               skill1Level int,\n               skill2      varchar(20),\n               skill2Level int,\n               slot1       int,\n               slot2       int,\n               slot3       int,\n               imagename   varchar(128),\n               unique (skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3))`),await this.sql(`create index if not exists '${this.charmTableName}.skill1' on ${this.charmTableName}(skill1, skill1Level)`),await this.sql(`create index if not exists '${this.charmTableName}.skill2' on ${this.charmTableName}(skill2, skill2Level)`),await this.sql(`create index if not exists '${this.charmTableName}.slots'  on ${this.charmTableName}(slot1, slot2, slot3)`)}async getScreenshot(e){const t=await this.indexeddb.images.get(e);return cv.matFromArray(t.rows,t.cols,t.type,t.data)}async findSubstitutableCharms(e){const t=[],n=[];for(t[0]=e.skillLevels[0];t[0]>=0;t[0]--)for(t[1]=e.skillLevels[1];t[1]>=0;t[1]--){const r=[...Array(this.MAX_SKILLS).keys()].map((n=>e.skillLevels[n]-t[n]));if(r.reduce(((e,t)=>e+t),0)+e.slots.filter((e=>e)).length>this.MAX_SLOTS)break;const i=[...e.slots,...Array.from({length:r[0]},(()=>ui[e.skills[0]])),...Array.from({length:r[1]},(()=>ui[e.skills[1]]))].filter((e=>e)).sort().reverse(),a=[t[0]?`(skill1 = '${e.skills[0]}' and skill1Level >= ${t[0]})`:"",t[1]?`(skill2 = '${e.skills[1]}' and skill2Level >= ${t[1]})`:""].filter((e=>e)).join(" and "),o=[t[1]?`(skill1 = '${e.skills[1]}' and skill1Level >= ${t[1]})`:"",t[0]?`(skill2 = '${e.skills[0]}' and skill2Level >= ${t[0]})`:""].filter((e=>e)).join(" and "),s=a.length?"("+[`(${a})`,`(${o})`].filter((e=>e)).join(" or ")+") and ":"",l=`select rowid,* from ${this.charmTableName} where ${s} slot1 >= ${i[0]||0} and slot2 >= ${i[1]||0} and slot3 >= ${i[2]||0}`,{result:c}=await this.sql(l);n.push(...[...c.rows].filter((t=>!this._isSameCharm(this._row2obj(t),e))))}return n.sort(((e,t)=>e.rowid<t.rowid?-1:e.rowid>t.rowid?1:0))}async updateCharmArray(){this.charms=[...await this.searchCharms(`select rowid,* from ${this.charmTableName}`)].map((e=>(e.evaluation=ui[e.skill1]*e.skill1Level+ui[e.skill2]*e.skill2Level+e.slot1+e.slot2+e.slot3,e))),this.searchSubstitutableCharms()}async searchSubstitutableCharms(){for(;"function"!=typeof Module.getSubstitutesAll;)await new Promise((e=>setTimeout(e,100)));const e=Module.getSubstitutesAll(JSON.stringify(this.charms)),t=JSON.parse(e);for(const e in this.charms){const[n,r]=t[0]||[Number.MAX_SAFE_INTEGER,[]];this.charms[e].rowid>n?console.log("internal error"):this.charms[e].rowid<n?this.charms[e].substitutableCharms=[]:(this.charms[e].substitutableCharms=r.map((e=>this.charms[e-1])),t.shift())}}_row2obj(e){return{skills:[e.skill1,e.skill2],skillLevels:[e.skill1Level,e.skill2Level],slots:[e.slot1,e.slot2,e.slot3]}}_isSameCharm(e,t){return JSON.stringify(e)===JSON.stringify(t)}}function fi(e){return new Promise((t=>{const n=new Image;n.src=e,n.onload=()=>{const e=cv.imread(n);t(e)}}))}function di(e,t,n,r,i){const a=new cv.Size(t.cols,t.rows),o=new cv.Rect(n,a),s=e.roi(o),l=new cv.Mat;cv.threshold(t,l,r,255,cv.THRESH_BINARY);const c=new cv.Mat;s.copyTo(c,l);const u=new cv.Mat;cv.absdiff(t,c,u),cv.cvtColor(u,u,cv.COLOR_BGR2GRAY);const h=new cv.Mat;return cv.threshold(u,h,i,255,cv.THRESH_BINARY),u.delete(),c.delete(),l.delete(),s.delete(),h}function pi(e,t,n,r=63,i=63,a=(()=>{})){let o=Number.MAX_SAFE_INTEGER,s=null;for(const[l,c]of Object.entries(t)){const t=di(e,c,n,r,i);a(t,l);const u=cv.countNonZero(t);o>u&&(o=u,s=l),t.delete()}return s}function mi(e){return e instanceof Promise?e:Array.isArray(e)?Promise.all(e.map(mi)):"object"==typeof e?function(e){const t=Object.keys(e).map((t=>mi(e[t]).then((e=>({key:t,value:e})))));return Promise.all(t).then((e=>e.reduce(((e,t)=>(e[t.key]=t.value,e)),{})))}(e):Promise.resolve(e)}class gi{MAX_PAGE=34;COLUMNS_PER_PAGE=10;ROWS_PER_PAGE=5;POINT_RARITY=new cv.Point(1190,176);POINT_SLOTS=new cv.Point(1160,200);POINT_SKILL1=new cv.Point(1033,266);POINT_SKILL2=new cv.Point(1033,317);POINT_SKILL_LEVEL1=new cv.Point(1190,290);POINT_SKILL_LEVEL2=new cv.Point(1190,340);POINT_PAGE=new cv.Point(787,582);POINT_CHARM_AREA_LEFT_TOP=new cv.Point(634,359);SIZE_CHARM_AREA=new cv.Size(357,199);indexeddb=null;nCharms=0;charms={};templates=null;async init(){this.templates={frame:fi("img/templates/frame.png"),rare:{7:fi("img/templates/rare/7.jpg"),6:fi("img/templates/rare/6.jpg"),5:fi("img/templates/rare/5.jpg"),4:fi("img/templates/rare/4.jpg")},lvl:{0:fi("img/templates/lvl/0.jpg"),1:fi("img/templates/lvl/1.jpg"),2:fi("img/templates/lvl/2.jpg"),3:fi("img/templates/lvl/3.jpg"),4:fi("img/templates/lvl/4.jpg"),5:fi("img/templates/lvl/5.jpg")},slot:{"0-0-0":fi("img/templates/slot/0.jpg"),"1-0-0":fi("img/templates/slot/1.jpg"),"1-1-0":fi("img/templates/slot/11.jpg"),"1-1-1":fi("img/templates/slot/111.jpg"),"2-0-0":fi("img/templates/slot/2.jpg"),"2-1-0":fi("img/templates/slot/21.jpg"),"2-1-1":fi("img/templates/slot/211.jpg"),"2-2-0":fi("img/templates/slot/22.jpg"),"2-2-1":fi("img/templates/slot/221.jpg"),"3-0-0":fi("img/templates/slot/3.jpg"),"3-1-0":fi("img/templates/slot/31.jpg"),"3-1-1":fi("img/templates/slot/311.jpg"),"3-2-0":fi("img/templates/slot/32.jpg"),"3-2-1":fi("img/templates/slot/321.jpg")},skill:{"KO":fi("img/templates/skill/KO.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"UP":fi("img/templates/skill/UP.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"UP":fi("img/templates/skill/UP.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg"),"":fi("img/templates/skill/.jpg")}},this.templates.page={};for(let e=1;e<=this.MAX_PAGE;e++)this.templates.page[e]=fi(`img/templates/page/${e}.png`);this.templates=await mi(this.templates),this.reset(),this.indexeddb=new li("charms"),this.indexeddb.version(1).stores({images:"name"})}reset(){this.nCharms=0,this.charms={};for(let e=1;e<=this.MAX_PAGE;e++){this.charms[e]={};for(let t=1;t<=this.ROWS_PER_PAGE;t++)this.charms[e][t]={}}}isScaned(e,t,n){return null!=this.charms[e][t][n]}store(e,t){const{page:n,row:r,col:i}=e,{screenshot:a,movieName:o}=t,s=`${o}_${n}-${r}-${i}`;this.indexeddb.images.put({name:s,rows:a.rows,cols:a.cols,type:a.type(),data:a.data.slice(0)}),this.charms[n][r][i]={...e,imageName:s},this.nCharms++}scan(e,t){const n=this._getCurrentPage(e),[r,i]=this._getCurrentCharmPos(e);if(i<.35)return null;const[a,o]=r;if(this.isScaned(n,o,a))return null;const s=this._getRarity(e),l=this._getSlots(e),c=this._getSkills(e),u=this._getSkillLevels(e);this.store({page:n,row:o,col:a,rarity:s,slots:l,skills:c,skillLevels:u},{screenshot:e,movieName:t})}countCharms(){return this.nCharms}generateInsertScript(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push({"":i.skills[0],"":i.skillLevels[0],"":i.skills[1],"":i.skillLevels[1],"":i.slots})}return`const inputs = ${JSON.stringify(e)}\n\neval( await (await fetch('https://code.jquery.com/jquery-3.6.0.slim.min.js')).text() )\n\nfor (const input of inputs) {\n  Object.entries(input).forEach(([key, value]) => {\n    $(\`select[aria-label="\${key}"]\`).val(value)\n    $(\`select[aria-label="\${key}"]\`)[0].dispatchEvent(new Event('change', { bubbles: true }))\n  })\n\n  $('button:contains("")').click()\n}`}exportAsText(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push(`${i.skills[0]},${i.skillLevels[0]},${i.skills[1]},${i.skillLevels[1]},${i.slots.replace(/-/g,",")}`)}return e.join("\n")}getCharms(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push(i)}return e}_getRarity(e){return pi(e,this.templates.rare,this.POINT_RARITY,63,63)}_getSlots(e){return pi(e,this.templates.slot,this.POINT_SLOTS,0,63)}_getSkills(e){return[pi(e,this.templates.skill,this.POINT_SKILL1,0,63),pi(e,this.templates.skill,this.POINT_SKILL2,0,63)]}_getSkillLevels(e){return[pi(e,this.templates.lvl,this.POINT_SKILL_LEVEL1,0,127),pi(e,this.templates.lvl,this.POINT_SKILL_LEVEL2,0,127)]}_getCurrentPage(e){return pi(e,this.templates.page,this.POINT_PAGE,31,63)}_getCurrentCharmPos(e){const t=new cv.Rect(this.POINT_CHARM_AREA_LEFT_TOP,this.SIZE_CHARM_AREA),n=e.roi(t),r=new cv.Mat;cv.matchTemplate(n,this.templates.frame,r,cv.TM_CCOEFF_NORMED);const{maxLoc:i,maxVal:a}=cv.minMaxLoc(r);return r.delete(),n.delete(),[[1+Math.floor(.5+i.x/36),1+Math.floor(.5+i.y/41)],a]}}function vi(t){let n,r,i,a,o,s,l,c,u,h,f;return{c(){n=x("div"),r=x("label"),i=x("input"),a=E(),o=j("svg"),s=j("circle"),l=j("path"),c=j("path"),u=j("path"),I(i,"type","checkbox"),I(i,"class","svelte-vpaeku"),I(s,"cx","50"),I(s,"cy","50"),I(s,"r","30"),I(s,"class","svelte-vpaeku"),I(l,"class","line--1 svelte-vpaeku"),I(l,"d","M0 55l14-10c4.7-3.3 9-5 13-5h72"),I(c,"class","line--2 svelte-vpaeku"),I(c,"d","M0 50h99"),I(u,"class","line--3 svelte-vpaeku"),I(u,"d","M0 45l14 10c4.7 3.3 9 5 13 5h72"),I(o,"viewBox","0 0 100 100"),I(o,"xmlns","http://www.w3.org/2000/svg"),I(r,"class","svelte-vpaeku"),I(n,"class","menu toggle-back svelte-vpaeku")},m(e,d){_(e,n,d),w(n,r),w(r,i),i.checked=t[0],w(r,a),w(r,o),w(o,s),w(o,l),w(o,c),w(o,u),h||(f=A(i,"change",t[1]),h=!0)},p(e,[t]){1&t&&(i.checked=e[0])},i:e,o:e,d(e){e&&$(n),h=!1,f()}}}function yi(e,t,n){let{isOpen:r=!1}=t;return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen)},[r,function(){r=this.checked,n(0,r)}]}class bi extends Ce{constructor(e){super(),$e(this,e,yi,vi,l,{isOpen:0})}}function ki(e){let t,n,r,i,a,o;const s=e[5].default,l=h(s,e,e[4],null);return{c(){t=x("div"),n=x("div"),l&&l.c(),I(n,"class",r=p(e[0])+" svelte-1u332e1"),I(n,"style",e[1]),M(n,"svelte-lightbox-unselectable",e[2]),I(t,"class","clickable svelte-1u332e1")},m(r,s){_(r,t,s),w(t,n),l&&l.m(n,null),i=!0,a||(o=A(t,"click",e[6]),a=!0)},p(e,[t]){l&&l.p&&(!i||16&t)&&d(l,s,e,e[4],t,null,null),(!i||1&t&&r!==(r=p(e[0])+" svelte-1u332e1"))&&I(n,"class",r),(!i||2&t)&&I(n,"style",e[1]),5&t&&M(n,"svelte-lightbox-unselectable",e[2])},i(e){i||(fe(l,e),i=!0)},o(e){de(l,e),i=!1},d(e){e&&$(t),l&&l.d(e),a=!1,o()}}}function wi(e,t,n){let{$$slots:r={},$$scope:i}=t;const a=G();let{thumbnailClasses:o=""}=t,{thumbnailStyle:s=""}=t,{protect:l=!1}=t;return e.$$set=e=>{"thumbnailClasses"in e&&n(0,o=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,s=e.thumbnailStyle),"protect"in e&&n(2,l=e.protect),"$$scope"in e&&n(4,i=e.$$scope)},[o,s,l,a,i,r,()=>a("click")]}class _i extends Ce{constructor(e){super(),$e(this,e,wi,ki,l,{thumbnailClasses:0,thumbnailStyle:1,protect:2})}}function $i(e){const t=e-1;return t*t*t+1}function Ci(e,{delay:n=0,duration:r=400,easing:i=t}={}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*a}}function xi(e,{delay:t=0,duration:n=400,easing:r=$i}={}){const i=getComputedStyle(e),a=+i.opacity,o=parseFloat(i.height),s=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),u=parseFloat(i.marginBottom),h=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*a};height: ${e*o}px;padding-top: ${e*s}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*h}px;border-bottom-width: ${e*f}px;`}}function ji(t){let n,r,i,a,o,s,l;return{c(){n=x("div"),r=x("button"),i=S(""),I(r,"size",t[0]),I(r,"style",t[1]),I(r,"class",a=p(t[3])+" svelte-12yipzn"),I(n,"class",o=p("svelte-lightbox-header "+t[2])+" svelte-12yipzn")},m(e,a){_(e,n,a),w(n,r),w(r,i),s||(l=A(r,"click",t[5]),s=!0)},p(e,[t]){1&t&&I(r,"size",e[0]),2&t&&I(r,"style",e[1]),8&t&&a!==(a=p(e[3])+" svelte-12yipzn")&&I(r,"class",a),4&t&&o!==(o=p("svelte-lightbox-header "+e[2])+" svelte-12yipzn")&&I(n,"class",o)},i:e,o:e,d(e){e&&$(n),s=!1,l()}}}function Si(e,t,n){const r=G();let{size:i="xs"}=t,{style:a=""}=t,{headerClasses:o=""}=t,{buttonClasses:s=""}=t;return e.$$set=e=>{"size"in e&&n(0,i=e.size),"style"in e&&n(1,a=e.style),"headerClasses"in e&&n(2,o=e.headerClasses),"buttonClasses"in e&&n(3,s=e.buttonClasses)},[i,a,o,s,r,()=>r("close")]}class Ei extends Ce{constructor(e){super(),$e(this,e,Si,ji,l,{size:0,style:1,headerClasses:2,buttonClasses:3})}}function Oi(e){let t,n;const r=e[4].default,i=h(r,e,e[3],null);return{c(){t=x("div"),i&&i.c(),I(t,"class","svelte-x9zrc7"),M(t,"svelte-lightbox-image-portrait",e[2])},m(e,r){_(e,t,r),i&&i.m(t,null),n=!0},p(e,a){i&&i.p&&(!n||8&a)&&d(i,r,e,e[3],a,null,null),4&a&&M(t,"svelte-lightbox-image-portrait",e[2])},i(e){n||(fe(i,e),n=!0)},o(e){de(i,e),n=!1},d(e){e&&$(t),i&&i.d(e)}}}function Ai(t){let n,r,i,a,o;return{c(){n=x("img"),n.src!==(r=t[0].src)&&I(n,"src",r),I(n,"alt",i=t[0].alt),I(n,"style",a=t[0].style),I(n,"class",o=t[0].class)},m(e,t){_(e,n,t)},p(e,t){1&t&&n.src!==(r=e[0].src)&&I(n,"src",r),1&t&&i!==(i=e[0].alt)&&I(n,"alt",i),1&t&&a!==(a=e[0].style)&&I(n,"style",a),1&t&&o!==(o=e[0].class)&&I(n,"class",o)},i:e,o:e,d(e){e&&$(n)}}}function Ii(e){let t,n,r,i;const a=[Ai,Oi],o=[];function s(e,t){return e[0].src?0:1}return n=s(e),r=o[n]=a[n](e),{c(){t=x("div"),r.c(),I(t,"class","svelte-lightbox-body svelte-x9zrc7"),M(t,"svelte-lightbox-unselectable",e[1])},m(e,r){_(e,t,r),o[n].m(t,null),i=!0},p(e,[i]){let l=n;n=s(e),n===l?o[n].p(e,i):(ue(),de(o[l],1,1,(()=>{o[l]=null})),he(),r=o[n],r?r.p(e,i):(r=o[n]=a[n](e),r.c()),fe(r,1),r.m(t,null)),2&i&&M(t,"svelte-lightbox-unselectable",e[1])},i(e){i||(fe(r),i=!0)},o(e){de(r),i=!1},d(e){e&&$(t),o[n].d()}}}function Pi(e,t,n){let{$$slots:r={},$$scope:i}=t,{image:a={}}=t,{protect:o=!1}=t,{portrait:s=!1}=t;return e.$$set=e=>{"image"in e&&n(0,a=e.image),"protect"in e&&n(1,o=e.protect),"portrait"in e&&n(2,s=e.portrait),"$$scope"in e&&n(3,i=e.$$scope)},[a,o,s,i,r]}class Ti extends Ce{constructor(e){super(),$e(this,e,Pi,Ii,l,{image:0,protect:1,portrait:2})}}function Ni(e){let t,n,r,i,a,o=e[3]+1+"";return{c(){t=x("p"),n=S("Image "),r=S(o),i=S(" of "),a=S(e[2])},m(e,o){_(e,t,o),w(t,n),w(t,r),w(t,i),w(t,a)},p(e,t){8&t&&o!==(o=e[3]+1+"")&&P(r,o),4&t&&P(a,e[2])},d(e){e&&$(t)}}}function Fi(t){let n,r,i,a,o,s,l=t[2]&&Ni(t);return{c(){n=x("div"),r=x("h2"),i=E(),a=x("h5"),o=E(),l&&l.c(),I(n,"class",s=p("svelte-lightbox-footer "+t[4])+" svelte-1u8lh7d"),I(n,"style",t[5])},m(e,s){_(e,n,s),w(n,r),r.innerHTML=t[0],w(n,i),w(n,a),a.innerHTML=t[1],w(n,o),l&&l.m(n,null)},p(e,[t]){1&t&&(r.innerHTML=e[0]),2&t&&(a.innerHTML=e[1]),e[2]?l?l.p(e,t):(l=Ni(e),l.c(),l.m(n,null)):l&&(l.d(1),l=null),16&t&&s!==(s=p("svelte-lightbox-footer "+e[4])+" svelte-1u8lh7d")&&I(n,"class",s),32&t&&I(n,"style",e[5])},i:e,o:e,d(e){e&&$(n),l&&l.d()}}}function Li(e,t,n){let{title:r=""}=t,{description:i=""}=t,{galleryLength:a}=t,{activeImage:o}=t,{classes:s=""}=t,{style:l=""}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"description"in e&&n(1,i=e.description),"galleryLength"in e&&n(2,a=e.galleryLength),"activeImage"in e&&n(3,o=e.activeImage),"classes"in e&&n(4,s=e.classes),"style"in e&&n(5,l=e.style)},[r,i,a,o,s,l]}class Mi extends Ce{constructor(e){super(),$e(this,e,Li,Fi,l,{title:0,description:1,galleryLength:2,activeImage:3,classes:4,style:5})}}function Ri(e){let t;const n=e[14].default,r=h(n,e,e[25],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||33554432&i)&&d(r,n,e,e[25],i,null,null)},i(e){t||(fe(r,e),t=!0)},o(e){de(r,e),t=!1},d(e){r&&r.d(e)}}}function Ki(e){let t,n,r,i,a,s,l,c,u,h,f,d,m,g,v,y,b,k,C,j;function S(t){e[16](t)}function O(t){e[17](t)}function P(t){e[18](t)}i=new Ei({}),i.$on("close",e[15]);let T={$$slots:{default:[Ri]},$$scope:{ctx:e}};function N(t){e[19](t)}function F(t){e[20](t)}function L(t){e[21](t)}function M(t){e[22](t)}void 0!==e[2]&&(T.image=e[2]),void 0!==e[3]&&(T.protect=e[3]),void 0!==e[4]&&(T.portrait=e[4]),s=new Ti({props:T}),X.push((()=>ye(s,"image",S))),X.push((()=>ye(s,"protect",O))),X.push((()=>ye(s,"portrait",P)));let R={};return void 0!==e[7]&&(R.title=e[7]),void 0!==e[8]&&(R.description=e[8]),void 0!==e[0].length&&(R.galleryLength=e[0].length),void 0!==e[1]&&(R.activeImage=e[1]),f=new Mi({props:R}),X.push((()=>ye(f,"title",N))),X.push((()=>ye(f,"description",F))),X.push((()=>ye(f,"galleryLength",L))),X.push((()=>ye(f,"activeImage",M))),{c(){t=x("div"),n=x("div"),r=x("div"),be(i.$$.fragment),a=E(),be(s.$$.fragment),h=E(),be(f.$$.fragment),I(r,"class","svelte-lightbox svelte-tpon2m"),I(n,"class",y=p(e[9])+" svelte-tpon2m"),I(n,"style",e[5]),I(t,"class","cover clearfix svelte-tpon2m")},m(o,l){_(o,t,l),w(t,n),w(n,r),ke(i,r,null),w(r,a),ke(s,r,null),w(r,h),ke(f,r,null),k=!0,C||(j=[A(r,"click",e[23]),A(n,"click",e[24])],C=!0)},p(t,[r]){e=t;const i={};33554432&r&&(i.$$scope={dirty:r,ctx:e}),!l&&4&r&&(l=!0,i.image=e[2],te((()=>l=!1))),!c&&8&r&&(c=!0,i.protect=e[3],te((()=>c=!1))),!u&&16&r&&(u=!0,i.portrait=e[4],te((()=>u=!1))),s.$set(i);const a={};!d&&128&r&&(d=!0,a.title=e[7],te((()=>d=!1))),!m&&256&r&&(m=!0,a.description=e[8],te((()=>m=!1))),!g&&1&r&&(g=!0,a.galleryLength=e[0].length,te((()=>g=!1))),!v&&2&r&&(v=!0,a.activeImage=e[1],te((()=>v=!1))),f.$set(a),(!k||512&r&&y!==(y=p(e[9])+" svelte-tpon2m"))&&I(n,"class",y),(!k||32&r)&&I(n,"style",e[5])},i(t){k||(fe(i.$$.fragment,t),fe(s.$$.fragment,t),fe(f.$$.fragment,t),ee((()=>{b||(b=me(n,Ci,{duration:e[6]},!0)),b.run(1)})),k=!0)},o(t){de(i.$$.fragment,t),de(s.$$.fragment,t),de(f.$$.fragment,t),b||(b=me(n,Ci,{duration:e[6]},!1)),b.run(0),k=!1},d(e){e&&$(t),we(i),we(s),we(f),e&&b&&b.end(),C=!1,o(j)}}}function Bi(e,t,n){let r,{$$slots:i={},$$scope:a}=t;const o=G();let s,l,{modalClasses:c=""}=t,{modalStyle:u=""}=t,{transitionDuration:h=500}=t,{image:f={}}=t,{protect:d=!1}=t,{portrait:p=!1}=t,{title:m=""}=t,{description:g=""}=t,{gallery:v}=t,{activeImage:y}=t;return e.$$set=e=>{"modalClasses"in e&&n(11,c=e.modalClasses),"modalStyle"in e&&n(5,u=e.modalStyle),"transitionDuration"in e&&n(6,h=e.transitionDuration),"image"in e&&n(2,f=e.image),"protect"in e&&n(3,d=e.protect),"portrait"in e&&n(4,p=e.portrait),"title"in e&&n(12,m=e.title),"description"in e&&n(13,g=e.description),"gallery"in e&&n(0,v=e.gallery),"activeImage"in e&&n(1,y=e.activeImage),"$$scope"in e&&n(25,a=e.$$scope)},e.$$.update=()=>{2048&e.$$.dirty&&n(9,r=`${c} svelte-lightbox-overlay clearfix`),4096&e.$$.dirty&&n(7,s=m),8192&e.$$.dirty&&n(8,l=g),12291&e.$$.dirty&&(!v||m||g||(n(7,s=v[y].title),n(8,l=v[y].description)))},[v,y,f,d,p,u,h,s,l,r,o,c,m,g,i,()=>o("close"),function(e){f=e,n(2,f)},function(e){d=e,n(3,d)},function(e){p=e,n(4,p)},function(e){s=e,n(7,s),n(12,m),n(0,v),n(13,g),n(1,y)},function(e){l=e,n(8,l),n(13,g),n(0,v),n(12,m),n(1,y)},function(t){e.$$.not_equal(v.length,t)&&(v.length=t,n(0,v))},function(e){y=e,n(1,y)},()=>o("modalClick"),()=>o("topModalClick"),a]}class Di extends Ce{constructor(e){super(),$e(this,e,Bi,Ki,l,{modalClasses:11,modalStyle:5,transitionDuration:6,image:2,protect:3,portrait:4,title:12,description:13,gallery:0,activeImage:1})}}function zi(e){let t,n,r,i,a,s,l,c,u,f,p,m,g,v,y,b,k;const C=e[6].default,S=h(C,e,e[5],null);return{c(){t=x("div"),n=x("button"),r=j("svg"),i=j("g"),a=j("path"),l=E(),c=x("div"),S&&S.c(),u=E(),f=x("button"),p=j("svg"),m=j("g"),g=j("path"),I(a,"class","arrow svelte-wwe8hv"),I(a,"d","M8.7,7.22,4.59,11.33a1,1,0,0,0,0,1.41l4,4"),I(r,"viewBox","0 0 24 24"),I(r,"xmlns","http://www.w3.org/2000/svg"),I(r,"class","svelte-wwe8hv"),n.disabled=s=0===e[0],I(n,"class","previous-button svelte-wwe8hv"),I(c,"class","slot svelte-wwe8hv"),I(g,"class","arrow svelte-wwe8hv"),I(g,"d","M15.3,16.78l4.11-4.11a1,1,0,0,0,0-1.41l-4-4"),I(p,"viewBox","0 0 24 24"),I(p,"xmlns","http://www.w3.org/2000/svg"),I(p,"class","svelte-wwe8hv"),f.disabled=v=e[0]===e[2]?.length-1,I(f,"class","next-button svelte-wwe8hv"),I(t,"class","wrapper svelte-wwe8hv")},m(o,s){_(o,t,s),w(t,n),w(n,r),w(r,i),w(i,a),w(t,l),w(t,c),S&&S.m(c,null),e[7](c),w(t,u),w(t,f),w(f,p),w(p,m),w(m,g),y=!0,b||(k=[A(n,"click",e[3]),A(f,"click",e[4])],b=!0)},p(e,[t]){(!y||1&t&&s!==(s=0===e[0]))&&(n.disabled=s),S&&S.p&&(!y||32&t)&&d(S,C,e,e[5],t,null,null),(!y||5&t&&v!==(v=e[0]===e[2]?.length-1))&&(f.disabled=v)},i(e){y||(fe(S,e),y=!0)},o(e){de(S,e),y=!1},d(n){n&&$(t),S&&S.d(n),e[7](null),b=!1,o(k)}}}function qi(e,t,n){let r,i,{$$slots:a={},$$scope:o}=t,{activeImage:s=0}=t;return e.$$set=e=>{"activeImage"in e&&n(0,s=e.activeImage),"$$scope"in e&&n(5,o=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(2,i=r?.children),5&e.$$.dirty&&(console.log(typeof i),i&&s<i.length?(Object.values(i).forEach((e=>(e.hidden=!0,e))),n(2,i[s].hidden=!1,i)):i&&s>=i.length&&console.error("LightboxGallery: Selected image doesn't exist, invalid activeImage"))},[s,r,i,()=>{n(0,s--,s)},()=>{n(0,s++,s)},o,a,function(e){X[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Vi extends Ce{constructor(e){super(),$e(this,e,qi,zi,l,{activeImage:0})}}const Hi=[];function Ui(t,n=e){let r;const i=[];function a(e){if(l(t,e)&&(t=e,r)){const e=!Hi.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),Hi.push(n,t)}if(e){for(let e=0;e<Hi.length;e+=2)Hi[e][0](Hi[e+1]);Hi.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,s=e){const l=[o,s];return i.push(l),1===i.length&&(r=n(a)||e),o(t),()=>{const e=i.indexOf(l);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}const Gi=e=>({}),Wi=e=>({}),Xi=e=>({}),Yi=e=>({}),Ji=e=>({}),Qi=e=>({});function Zi(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,null,null)},i(e){t||(fe(r,e),t=!0)},o(e){de(r,e),t=!1},d(e){r&&r.d(e)}}}function ea(e){let t;const n=e[17].thumbnail,r=h(n,e,e[32],Qi);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,Ji,Qi)},i(e){t||(fe(r,e),t=!0)},o(e){de(r,e),t=!1},d(e){r&&r.d(e)}}}function ta(e){let t,n,r,i;const a=[ea,Zi],o=[];function s(e,t){return e[12]||e[5]?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?o[t].p(e,i):(ue(),de(o[l],1,1,(()=>{o[l]=null})),he(),n=o[t],n?n.p(e,i):(n=o[t]=a[t](e),n.c()),fe(n,1),n.m(r.parentNode,r))},i(e){i||(fe(n),i=!0)},o(e){de(n),i=!1},d(e){o[t].d(e),e&&$(r)}}}function na(e){let t,n,r,i,a,o,s,l,c,u,h,f;function d(t){e[22](t)}function p(t){e[23](t)}function m(t){e[24](t)}function g(t){e[25](t)}function v(t){e[26](t)}function y(t){e[27](t)}function b(t){e[28](t)}function k(t){e[29](t)}function w(t){e[30](t)}function _(t){e[31](t)}let $={$$slots:{default:[sa]},$$scope:{ctx:e}};return void 0!==e[2]&&($.modalClasses=e[2]),void 0!==e[3]&&($.modalStyle=e[3]),void 0!==e[8]&&($.transitionDuration=e[8]),void 0!==e[10]&&($.image=e[10]),void 0!==e[9]&&($.protect=e[9]),void 0!==e[11]&&($.portrait=e[11]),void 0!==e[6]&&($.title=e[6]),void 0!==e[7]&&($.description=e[7]),void 0!==e[5]&&($.gallery=e[5]),void 0!==e[4]&&($.activeImage=e[4]),t=new Di({props:$}),X.push((()=>ye(t,"modalClasses",d))),X.push((()=>ye(t,"modalStyle",p))),X.push((()=>ye(t,"transitionDuration",m))),X.push((()=>ye(t,"image",g))),X.push((()=>ye(t,"protect",v))),X.push((()=>ye(t,"portrait",y))),X.push((()=>ye(t,"title",b))),X.push((()=>ye(t,"description",k))),X.push((()=>ye(t,"gallery",w))),X.push((()=>ye(t,"activeImage",_))),t.$on("close",e[14]),t.$on("topModalClick",e[14]),t.$on("modalClick",e[14]),{c(){be(t.$$.fragment)},m(e,n){ke(t,e,n),f=!0},p(e,f){const d={};4144&f[0]|2&f[1]&&(d.$$scope={dirty:f,ctx:e}),!n&&4&f[0]&&(n=!0,d.modalClasses=e[2],te((()=>n=!1))),!r&&8&f[0]&&(r=!0,d.modalStyle=e[3],te((()=>r=!1))),!i&&256&f[0]&&(i=!0,d.transitionDuration=e[8],te((()=>i=!1))),!a&&1024&f[0]&&(a=!0,d.image=e[10],te((()=>a=!1))),!o&&512&f[0]&&(o=!0,d.protect=e[9],te((()=>o=!1))),!s&&2048&f[0]&&(s=!0,d.portrait=e[11],te((()=>s=!1))),!l&&64&f[0]&&(l=!0,d.title=e[6],te((()=>l=!1))),!c&&128&f[0]&&(c=!0,d.description=e[7],te((()=>c=!1))),!u&&32&f[0]&&(u=!0,d.gallery=e[5],te((()=>u=!1))),!h&&16&f[0]&&(h=!0,d.activeImage=e[4],te((()=>h=!1))),t.$set(d)},i(e){f||(fe(t.$$.fragment,e),f=!0)},o(e){de(t.$$.fragment,e),f=!1},d(e){we(t,e)}}}function ra(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,null,null)},i(e){t||(fe(r,e),t=!0)},o(e){de(r,e),t=!1},d(e){r&&r.d(e)}}}function ia(e){let t,n,r;function i(t){e[21](t)}let a={$$slots:{default:[oa]},$$scope:{ctx:e}};return void 0!==e[4]&&(a.activeImage=e[4]),t=new Vi({props:a}),X.push((()=>ye(t,"activeImage",i))),{c(){be(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,r){const i={};2&r[1]&&(i.$$scope={dirty:r,ctx:e}),!n&&16&r[0]&&(n=!0,i.activeImage=e[4],te((()=>n=!1))),t.$set(i)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),r=!1},d(e){we(t,e)}}}function aa(e){let t;const n=e[17].image,r=h(n,e,e[32],Yi);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,Xi,Yi)},i(e){t||(fe(r,e),t=!0)},o(e){de(r,e),t=!1},d(e){r&&r.d(e)}}}function oa(e){let t,n;const r=e[17].thumbnail,i=h(r,e,e[32],Wi),a=e[17].default,o=h(a,e,e[32],null);return{c(){i&&i.c(),t=E(),o&&o.c()},m(e,r){i&&i.m(e,r),_(e,t,r),o&&o.m(e,r),n=!0},p(e,t){i&&i.p&&(!n||2&t[1])&&d(i,r,e,e[32],t,Gi,Wi),o&&o.p&&(!n||2&t[1])&&d(o,a,e,e[32],t,null,null)},i(e){n||(fe(i,e),fe(o,e),n=!0)},o(e){de(i,e),de(o,e),n=!1},d(e){i&&i.d(e),e&&$(t),o&&o.d(e)}}}function sa(e){let t,n,r,i;const a=[aa,ia,ra],o=[];function s(e,t){return e[12]?0:e[5]?1:2}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?o[t].p(e,i):(ue(),de(o[l],1,1,(()=>{o[l]=null})),he(),n=o[t],n?n.p(e,i):(n=o[t]=a[t](e),n.c()),fe(n,1),n.m(r.parentNode,r))},i(e){i||(fe(n),i=!0)},o(e){de(n),i=!1},d(e){o[t].d(e),e&&$(r)}}}function la(e){let t,n,r,i,a,o,s,l,c;function u(t){e[18](t)}function h(t){e[19](t)}function f(t){e[20](t)}let d={$$slots:{default:[ta]},$$scope:{ctx:e}};void 0!==e[0]&&(d.thumbnailClasses=e[0]),void 0!==e[1]&&(d.thumbnailStyle=e[1]),void 0!==e[9]&&(d.protect=e[9]),t=new _i({props:d}),X.push((()=>ye(t,"thumbnailClasses",u))),X.push((()=>ye(t,"thumbnailStyle",h))),X.push((()=>ye(t,"protect",f))),t.$on("click",e[14]);let p=e[13]&&na(e);return{c(){be(t.$$.fragment),a=E(),p&&p.c(),o=O()},m(n,r){ke(t,n,r),_(n,a,r),p&&p.m(n,r),_(n,o,r),s=!0,l||(c=A(window,"keydown",e[15]),l=!0)},p(e,a){const s={};4128&a[0]|2&a[1]&&(s.$$scope={dirty:a,ctx:e}),!n&&1&a[0]&&(n=!0,s.thumbnailClasses=e[0],te((()=>n=!1))),!r&&2&a[0]&&(r=!0,s.thumbnailStyle=e[1],te((()=>r=!1))),!i&&512&a[0]&&(i=!0,s.protect=e[9],te((()=>i=!1))),t.$set(s),e[13]?p?(p.p(e,a),8192&a[0]&&fe(p,1)):(p=na(e),p.c(),fe(p,1),p.m(o.parentNode,o)):p&&(ue(),de(p,1,1,(()=>{p=null})),he())},i(e){s||(fe(t.$$.fragment,e),fe(p),s=!0)},o(e){de(t.$$.fragment,e),de(p),s=!1},d(e){we(t,e),e&&$(a),p&&p.d(e),e&&$(o),l=!1,c()}}}function ca(e,t,n){let{$$slots:r={},$$scope:i}=t,{thumbnailClasses:a=""}=t,{thumbnailStyle:o=""}=t,{modalClasses:s=""}=t,{modalStyle:l=""}=t,{activeImage:c=0}=t,{gallery:u=!1}=t,{title:h=""}=t,{description:f=""}=t,{transitionDuration:d=500}=t,{protect:p=!1}=t,{image:m={}}=t,{portrait:g=!1}=t,{noScroll:v=!0}=t,{thumbnail:y=!1}=t,b=!1;let k=()=>{};var w;w=()=>{let e=document.body.style.overflow;k=()=>{document.body.style.overflow=b?"hidden":e}},U().$$.on_mount.push(w);return e.$$set=e=>{"thumbnailClasses"in e&&n(0,a=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,o=e.thumbnailStyle),"modalClasses"in e&&n(2,s=e.modalClasses),"modalStyle"in e&&n(3,l=e.modalStyle),"activeImage"in e&&n(4,c=e.activeImage),"gallery"in e&&n(5,u=e.gallery),"title"in e&&n(6,h=e.title),"description"in e&&n(7,f=e.description),"transitionDuration"in e&&n(8,d=e.transitionDuration),"protect"in e&&n(9,p=e.protect),"image"in e&&n(10,m=e.image),"portrait"in e&&n(11,g=e.portrait),"noScroll"in e&&n(16,v=e.noScroll),"thumbnail"in e&&n(12,y=e.thumbnail),"$$scope"in e&&n(32,i=e.$$scope)},[a,o,s,l,c,u,h,f,d,p,m,g,y,b,()=>{n(13,b=!b),v&&k()},e=>{"Escape"===e.code&&n(13,b=!1)},v,r,function(e){a=e,n(0,a)},function(e){o=e,n(1,o)},function(e){p=e,n(9,p)},function(e){c=e,n(4,c)},function(e){s=e,n(2,s)},function(e){l=e,n(3,l)},function(e){d=e,n(8,d)},function(e){m=e,n(10,m)},function(e){p=e,n(9,p)},function(e){g=e,n(11,g)},function(e){h=e,n(6,h)},function(e){f=e,n(7,f)},function(e){u=e,n(5,u)},function(e){c=e,n(4,c)},i]}class ua extends Ce{constructor(e){super(),$e(this,e,ca,la,l,{thumbnailClasses:0,thumbnailStyle:1,modalClasses:2,modalStyle:3,activeImage:4,gallery:5,title:6,description:7,transitionDuration:8,protect:9,image:10,portrait:11,noScroll:16,thumbnail:12},[-1,-1])}}function ha(e){let t,n;return{c(){t=x("img"),t.src!==(n="img/screenshots/charm-scanning.png")&&I(t,"src","img/screenshots/charm-scanning.png"),I(t,"alt","charm scanning")},m(e,n){_(e,t,n)},d(e){e&&$(t)}}}function fa(e){let t,n;return{c(){t=x("img"),t.src!==(n="img/screenshots/charm-img.png")&&I(t,"src","img/screenshots/charm-img.png"),I(t,"alt","charm image")},m(e,n){_(e,t,n)},d(e){e&&$(t)}}}function da(e){let t,n;return{c(){t=x("img"),t.src!==(n="img/screenshots/charm-substitutes.png")&&I(t,"src","img/screenshots/charm-substitutes.png"),I(t,"alt","charm substitutes")},m(e,n){_(e,t,n)},d(e){e&&$(t)}}}function pa(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,p,m,g,v,y,b,k,C,j,S,O,A,P,T,N,F;return h=new ua({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[ha]},$$scope:{ctx:e}}}),k=new ua({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[fa]},$$scope:{ctx:e}}}),j=new ua({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[da]},$$scope:{ctx:e}}}),{c(){t=x("div"),n=x("div"),n.innerHTML='<div class="card-body"><h2 class="svelte-1l76kga"> </h2> \n      <p class="svelte-1l76kga"><br/>\n        <br/> \n        <br/>\n        <br/>\n        <br/></p></div>',r=E(),i=x("div"),a=x("div"),o=x("h2"),o.textContent=" ",s=E(),l=x("p"),l.innerHTML='<br/>\n        Nintendo Switch  30 \n        (<a href="sample/input.mp4"></a>)<br/> \n        <br/>\n        &lt;1&gt;,&lt;1Lv&gt;,&lt;2&gt;,&lt;2Lv&gt;,&lt;1Lv&gt;,&lt;2Lv&gt;,&lt;3Lv&gt; <br/> \n        <a href="https://mhrise.wiki-db.com/sim/"></a> <br/> \n        <br/>\n        ()<br/>\n        - <span style="color: red"></span> ()<br/>\n        - <br/>',c=E(),u=x("div"),be(h.$$.fragment),f=E(),d=x("div"),p=x("div"),m=x("h2"),m.textContent=" ",g=E(),v=x("p"),v.innerHTML='<br/>\n        <br/> \n        <br/>\n         &quot;&quot; <br/> \n        <span class="px-3 font-weight-bold">(Lv)  (Lv) + (Lv)</span><br/>\n        <br/> \n        <br/>\n        : 2, 1,  3-1-0 <br/> \n        <span class="px-3">2  2 + 1  1 + 3 + 1 + 0 = 9</span><br/> \n        <br/>\n        <br/>\n        <br/> \n        <br/>',y=E(),b=x("div"),be(k.$$.fragment),C=E(),be(j.$$.fragment),S=E(),O=x("div"),O.innerHTML='<div class="card-body"><h2 class="svelte-1l76kga"> </h2> \n      <p class="svelte-1l76kga">\n        </p></div>',A=E(),P=x("div"),P.innerHTML='<div class="card-body"><h2 class="svelte-1l76kga"> </h2> \n      <p class="svelte-1l76kga">\n        </p></div>',T=E(),N=x("div"),N.innerHTML='<div class="card-body"><h2 class="svelte-1l76kga"> </h2> \n      <p class="svelte-1l76kga"> <a href="https://github.com/ks-yuzu/mhrise-charm-scanner-web/issues">GitHub issue</a> </p></div>',I(n,"class","card border border-light shadow-sm svelte-1l76kga"),I(o,"class","svelte-1l76kga"),I(l,"class","svelte-1l76kga"),I(u,"class","lightboxes svelte-1l76kga"),I(a,"class","card-body"),I(i,"class","card border border-light shadow-sm svelte-1l76kga"),I(m,"class","svelte-1l76kga"),I(v,"class","svelte-1l76kga"),I(b,"class","lightboxes svelte-1l76kga"),I(p,"class","card-body"),I(d,"class","card border border-light shadow-sm svelte-1l76kga"),I(O,"class","card border border-light shadow-sm svelte-1l76kga"),I(P,"class","card border border-light shadow-sm svelte-1l76kga"),I(N,"class","card border border-light shadow-sm svelte-1l76kga"),I(t,"id","description"),I(t,"class","svelte-1l76kga")},m(e,$){_(e,t,$),w(t,n),w(t,r),w(t,i),w(i,a),w(a,o),w(a,s),w(a,l),w(a,c),w(a,u),ke(h,u,null),w(t,f),w(t,d),w(d,p),w(p,m),w(p,g),w(p,v),w(p,y),w(p,b),ke(k,b,null),w(b,C),ke(j,b,null),w(t,S),w(t,O),w(t,A),w(t,P),w(t,T),w(t,N),F=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),h.$set(n);const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),k.$set(r);const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),j.$set(i)},i(e){F||(fe(h.$$.fragment,e),fe(k.$$.fragment,e),fe(j.$$.fragment,e),F=!0)},o(e){de(h.$$.fragment,e),de(k.$$.fragment,e),de(j.$$.fragment,e),F=!1},d(e){e&&$(t),we(h),we(k),we(j)}}}const ma=Ui(null);function ga(t){let n,r,i,a,s,l,c,u,h,f;return{c(){n=x("div"),r=x("div"),i=x("textarea"),a=E(),s=x("div"),l=x("button"),c=S("export"),I(i,"id","input"),I(i,"class","svelte-1m5otor"),I(l,"class",u="btn btn-primary shadow-0 "+(t[1]?"":"disabled")),I(r,"id","charm-ixporter"),I(r,"class","svelte-1m5otor"),I(n,"class","tab-content svelte-1m5otor")},m(e,o){_(e,n,o),w(n,r),w(r,i),T(i,t[0]),w(r,a),w(r,s),w(s,l),w(l,c),h||(f=[A(i,"input",t[3]),A(l,"click",t[2])],h=!0)},p(e,[t]){1&t&&T(i,e[0]),2&t&&u!==(u="btn btn-primary shadow-0 "+(e[1]?"":"disabled"))&&I(l,"class",u)},i:e,o:e,d(e){e&&$(n),h=!1,o(f)}}}function va(e,t,n){let r;u(e,ma,(e=>n(1,r=e)));let i="";return[i,r,async function(){n(0,i=r.charms.map((e=>{const{skill1:t,skill1Level:n,skill2:r,skill2Level:i,slot1:a,slot2:o,slot3:s}=e;return[t,n,r,i,a,o,s].join(",")})).join("\n"))},function(){i=this.value,n(0,i)}]}const ya=e=>({noResultsText:2&e[0]}),ba=e=>({noResultsText:e[1]});function ka(e,t,n){const r=e.slice();return r[79]=t[n],r[81]=n,r}const wa=e=>({item:131072&e[0],label:131072&e[0]}),_a=e=>({item:e[79].item,label:e[79].highlighted?e[79].highlighted.label:e[79].label});function $a(t){let n,r,i;return{c(){n=x("span"),n.textContent="",I(n,"class","autocomplete-clear-button svelte-77usy")},m(e,a){_(e,n,a),r||(i=A(n,"click",t[27]),r=!0)},p:e,d(e){e&&$(n),r=!1,i()}}}function Ca(e){let t,n;const r=e[50]["no-results"],i=h(r,e,e[49],ba),a=i||function(e){let t;return{c(){t=S(e[1])},m(e,n){_(e,t,n)},p(e,n){2&n[0]&&P(t,e[1])},d(e){e&&$(t)}}}(e);return{c(){t=x("div"),a&&a.c(),I(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,r){_(e,t,r),a&&a.m(t,null),n=!0},p(e,t){i?i.p&&(!n||2&t[0]|262144&t[1])&&d(i,r,e,e[49],t,ya,ba):a&&a.p&&2&t[0]&&a.p(e,t)},i(e){n||(fe(a,e),n=!0)},o(e){de(a,e),n=!1},d(e){e&&$(t),a&&a.d(e)}}}function xa(e){let t,n,r,i=e[17],a=[];for(let t=0;t<i.length;t+=1)a[t]=Aa(ka(e,i,t));const o=e=>de(a[e],1,1,(()=>{a[e]=null}));let s=e[0]>0&&e[17].length>e[0]&&Ia(e);return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=E(),s&&s.c(),n=O()},m(e,i){for(let t=0;t<a.length;t+=1)a[t].m(e,i);_(e,t,i),s&&s.m(e,i),_(e,n,i),r=!0},p(e,r){if(1212417&r[0]|262144&r[1]){let n;for(i=e[17],n=0;n<i.length;n+=1){const o=ka(e,i,n);a[n]?(a[n].p(o,r),fe(a[n],1)):(a[n]=Aa(o),a[n].c(),fe(a[n],1),a[n].m(t.parentNode,t))}for(ue(),n=i.length;n<a.length;n+=1)o(n);he()}e[0]>0&&e[17].length>e[0]?s?s.p(e,r):(s=Ia(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(e){if(!r){for(let e=0;e<i.length;e+=1)fe(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)de(a[e]);r=!1},d(e){C(a,e),e&&$(t),s&&s.d(e),e&&$(n)}}}function ja(e){let t,n,r=e[79]&&Sa(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),_(e,t,i),n=!0},p(e,n){e[79]?r?(r.p(e,n),131072&n[0]&&fe(r,1)):(r=Sa(e),r.c(),fe(r,1),r.m(t.parentNode,t)):r&&(ue(),de(r,1,1,(()=>{r=null})),he())},i(e){n||(fe(r),n=!0)},o(e){de(r),n=!1},d(e){r&&r.d(e),e&&$(t)}}}function Sa(e){let t,n,r,i,a;const s=e[50].item,l=h(s,e,e[49],_a),c=l||function(e){let t;function n(e,t){return e[79].highlighted?Oa:Ea}let r=n(e),i=r(e);return{c(){i.c(),t=O()},m(e,n){i.m(e,n),_(e,t,n)},p(e,a){r===(r=n(e))&&i?i.p(e,a):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&$(t)}}}(e);function u(){return e[53](e[79])}function f(){return e[54](e[81])}return{c(){t=x("div"),c&&c.c(),I(t,"class",n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy")},m(e,n){_(e,t,n),c&&c.m(t,null),r=!0,i||(a=[A(t,"click",u),A(t,"pointerenter",f)],i=!0)},p(i,a){e=i,l?l.p&&(!r||131072&a[0]|262144&a[1])&&d(l,s,e,e[49],a,wa,_a):c&&c.p&&131072&a[0]&&c.p(e,a),(!r||32768&a[0]&&n!==(n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy"))&&I(t,"class",n)},i(e){r||(fe(c,e),r=!0)},o(e){de(c,e),r=!1},d(e){e&&$(t),c&&c.d(e),i=!1,o(a)}}}function Ea(e){let t,n,r=e[79].label+"";return{c(){n=O(),t=new K(n)},m(e,i){t.m(r,e,i),_(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].label+"")&&t.p(r)},d(e){e&&$(n),e&&t.d()}}}function Oa(e){let t,n,r=e[79].highlighted.label+"";return{c(){n=O(),t=new K(n)},m(e,i){t.m(r,e,i),_(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].highlighted.label+"")&&t.p(r)},d(e){e&&$(n),e&&t.d()}}}function Aa(e){let t,n,r=e[79]&&(e[0]<=0||e[81]<e[0])&&ja(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),_(e,t,i),n=!0},p(e,n){e[79]&&(e[0]<=0||e[81]<e[0])?r?(r.p(e,n),131073&n[0]&&fe(r,1)):(r=ja(e),r.c(),fe(r,1),r.m(t.parentNode,t)):r&&(ue(),de(r,1,1,(()=>{r=null})),he())},i(e){n||(fe(r),n=!0)},o(e){de(r),n=!1},d(e){r&&r.d(e),e&&$(t)}}}function Ia(e){let t,n,r,i,a=e[17].length-e[0]+"";return{c(){t=x("div"),n=S("..."),r=S(a),i=S(" results not shown"),I(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,a){_(e,t,a),w(t,n),w(t,r),w(t,i)},p(e,t){131073&t[0]&&a!==(a=e[17].length-e[0]+"")&&P(r,a)},d(e){e&&$(t)}}}function Pa(e){let t,n,r,i,a,s,l,c,u,h,f,d,p,m,g,v=e[11]&&$a(e);const y=[xa,Ca],b=[];function k(e,t){return e[17]&&e[17].length>0?0:e[1]?1:-1}return~(u=k(e))&&(h=b[u]=y[u](e)),{c(){t=x("div"),n=x("input"),s=E(),v&&v.c(),l=E(),c=x("div"),h&&h.c(),I(n,"type","text"),I(n,"class",r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"),I(n,"id",i=e[5]?e[5]:""),I(n,"autocomplete",a=e[8]?"on":"off"),I(n,"placeholder",e[2]),I(n,"name",e[6]),n.disabled=e[12],I(n,"title",e[7]),I(c,"class",f=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"),I(t,"class",d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy")},m(r,i){_(r,t,i),w(t,n),e[51](n),T(n,e[16]),w(t,s),v&&v.m(t,null),w(t,l),w(t,c),~u&&b[u].m(c,null),e[55](c),p=!0,m||(g=[A(window,"click",e[21]),A(n,"input",e[52]),A(n,"input",e[24]),A(n,"focus",e[26]),A(n,"keydown",e[22]),A(n,"click",e[25]),A(n,"keypress",e[23])],m=!0)},p(e,o){(!p||16&o[0]&&r!==(r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"))&&I(n,"class",r),(!p||32&o[0]&&i!==(i=e[5]?e[5]:""))&&I(n,"id",i),(!p||256&o[0]&&a!==(a=e[8]?"on":"off"))&&I(n,"autocomplete",a),(!p||4&o[0])&&I(n,"placeholder",e[2]),(!p||64&o[0])&&I(n,"name",e[6]),(!p||4096&o[0])&&(n.disabled=e[12]),(!p||128&o[0])&&I(n,"title",e[7]),65536&o[0]&&n.value!==e[16]&&T(n,e[16]),e[11]?v?v.p(e,o):(v=$a(e),v.c(),v.m(t,l)):v&&(v.d(1),v=null);let s=u;u=k(e),u===s?~u&&b[u].p(e,o):(h&&(ue(),de(b[s],1,1,(()=>{b[s]=null})),he()),~u?(h=b[u],h?h.p(e,o):(h=b[u]=y[u](e),h.c()),fe(h,1),h.m(c,null)):h=null),(!p||262656&o[0]&&f!==(f=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"))&&I(c,"class",f),(!p||3080&o[0]&&d!==(d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy"))&&I(t,"class",d)},i(e){p||(fe(h),p=!0)},o(e){de(h),p=!1},d(n){n&&$(t),e[51](null),v&&v.d(),~u&&b[u].d(),e[55](null),m=!1,o(g)}}}function Ta(e,t){let n;"function"!=typeof e&&console.error("Not a function: "+e+", argument: "+t);try{n=e(t)}catch(n){console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}let r=n;return null==r&&(r=""),"string"!=typeof r&&(r=r.toString()),r}function Na(e,t,n){let r,{$$slots:a={},$$scope:o}=t,{items:s=[]}=t,{searchFunction:l=!1}=t,{labelFieldName:c}=t,{keywordsFieldName:u=c}=t,{valueFieldName:h}=t,{labelFunction:f=function(e){return null==e?"":c?e[c]:e}}=t,{keywordsFunction:d=function(e){return null==e?"":u?e[u]:f(e)}}=t,{valueFunction:p=function(e){return null==e?e:h?e[h]:e}}=t,{keywordsCleanFunction:m=function(e){return e}}=t,{textCleanFunction:g=function(e){return e}}=t,{beforeChange:v=function(e,t){return!0}}=t,{onChange:y=function(e){}}=t,{selectFirstIfEmpty:b=!1}=t,{minCharactersToSearch:k=1}=t,{maxItemsToShowInList:w=0}=t,{delay:_=0}=t,{localFiltering:$=!0}=t,{noResultsText:C="No results found"}=t,{placeholder:x}=t,{className:j}=t,{inputClassName:S}=t,{inputId:E}=t,{name:O}=t,{title:A}=t,{html5autocomplete:I}=t,{dropdownClassName:P}=t,{hideArrow:T=!1}=t,{showClear:N=!1}=t,{disabled:F=!1}=t,{debug:L=!1}=t,{selectedItem:M}=t,{value:R}=t;const K="sautocomplete-"+Math.floor(1e3*Math.random());let B,D,z,q,V,H=!1,U=-1,G=0,W=[];function Y(e){return Ta(f,e)}function J(e){const t=Ta(d,e);let n=Ta(m,t);return n=n.toLowerCase().trim(),L&&console.log("Extracted keywords: '"+n+"' from item: "+JSON.stringify(e)),n}function Q(){let e;L&&(e=performance.now(),console.log("prepare items to search"),console.log("items: "+JSON.stringify(s))),Array.isArray(s)||(console.warn("Autocomplete items / search function did not return array but",s),n(28,s=[]));const t=s?s.length:0;if(W=new Array(t),t>0&&s.forEach(((e,t)=>{const n=function(e){return{keywords:J(e),label:Y(e),item:e}}(e);null==n&&console.log("Undefined item for: ",e),W[t]=n})),L){const t=performance.now();console.log(W.length+" items to search prepared in "+(t-e)+" milliseconds")}}async function Z(){let e;L&&(e=performance.now(),console.log("Searching user entered text: '"+z+"'"));const t=function(e){if(null==e)return"";const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();if(n(48,G=t.length),k>1&&G<k)return"";const r=g(t).toLowerCase().trim();return L&&console.log("Change user entered text '"+e+"' into '"+r+"'"),r}(z);if(""===t)return n(17,q=W),fe(),void(L&&console.log("User entered text is empty set the list of items to all items"));let r;if(l&&(n(28,s=await l(t)),Q()),$){const e=t.split(" ");r=W.filter((t=>{if(!t)return!1;const n=t.keywords;let r=0;return e.forEach((e=>{n.includes(e)&&r++})),r>=e.length}))}else r=W;const i=de(t,["label"]),a=r.map(i);if(n(17,q=a),fe(),L){const t=performance.now();console.log("Search took "+(t-e)+" milliseconds, found "+q.length+" items")}}function ee(e){if(L&&console.log("selectListItem"),void 0===e)return L&&console.log(`listItem ${i} is undefined. Can not select.`),!1;const t=e.item;return v(M,t)&&n(29,M=t),!0}function te(){L&&console.log("selectItem");ee(q[U])&&ue()}function ne(){L&&console.log("up"),ce(),U>0&&n(15,U--,U),ie()}function re(){L&&console.log("down"),ce(),U<q.length-1&&n(15,U++,U),ie()}function ie(){L&&console.log("highlight");const e=".selected";L&&console.log("Seaching DOM element: .selected in "+D);const t=D&&D.querySelector(e);t?"function"==typeof t.scrollIntoViewIfNeeded?(L&&console.log("Scrolling selected item into view"),t.scrollIntoViewIfNeeded()):L&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):L&&console.warn("Selected item not found to scroll into view")}function ae(e){L&&console.log("onListItemClick"),ee(e)&&ue()}function oe(){Z(),n(15,U=0),ce()}function se(e){L&&console.log("onEsc"),e.stopPropagation(),H&&(B.focus(),ue())}function le(){if(L&&console.log("resetListToAllItemsAndOpen"),n(17,q=W),ce(),M){L&&console.log("Searching currently selected item: "+JSON.stringify(M));for(let e=0;e<W.length;e++){const t=W[e];if(void 0!==t){if(L&&console.log("Item "+e+": "+JSON.stringify(t)),M==t.item){n(15,U=e),L&&console.log("Found selected item: "+e+": "+JSON.stringify(t)),ie();break}}else L&&console.log(`listItem ${e} is undefined. Skipping.`)}}}function ce(){L&&console.log("open"),he()||n(47,H=!0)}function ue(){L&&console.log("close"),n(47,H=!1),!z&&b&&(de=0,te())}function he(){return k>1&&G<k}function fe(){he()&&ue()}function de(e,t){const n="("+e.trim().replace(/\s/g,")(.*)(")+")",r=new RegExp(n,"ig");let i=1;const a=n.split(")(").length+1;let o="";for(;i<a;i++)o+=i%2?`<b>$${i}</b>`:`$${i}`;return e=>{const n=Object.assign({highlighted:{}},e);return t&&t.forEach((e=>{n[e]&&(n.highlighted[e]=n[e].replace(r,o))})),n}}return e.$$set=e=>{"items"in e&&n(28,s=e.items),"searchFunction"in e&&n(31,l=e.searchFunction),"labelFieldName"in e&&n(32,c=e.labelFieldName),"keywordsFieldName"in e&&n(33,u=e.keywordsFieldName),"valueFieldName"in e&&n(34,h=e.valueFieldName),"labelFunction"in e&&n(35,f=e.labelFunction),"keywordsFunction"in e&&n(36,d=e.keywordsFunction),"valueFunction"in e&&n(37,p=e.valueFunction),"keywordsCleanFunction"in e&&n(38,m=e.keywordsCleanFunction),"textCleanFunction"in e&&n(39,g=e.textCleanFunction),"beforeChange"in e&&n(40,v=e.beforeChange),"onChange"in e&&n(41,y=e.onChange),"selectFirstIfEmpty"in e&&n(42,b=e.selectFirstIfEmpty),"minCharactersToSearch"in e&&n(43,k=e.minCharactersToSearch),"maxItemsToShowInList"in e&&n(0,w=e.maxItemsToShowInList),"delay"in e&&n(44,_=e.delay),"localFiltering"in e&&n(45,$=e.localFiltering),"noResultsText"in e&&n(1,C=e.noResultsText),"placeholder"in e&&n(2,x=e.placeholder),"className"in e&&n(3,j=e.className),"inputClassName"in e&&n(4,S=e.inputClassName),"inputId"in e&&n(5,E=e.inputId),"name"in e&&n(6,O=e.name),"title"in e&&n(7,A=e.title),"html5autocomplete"in e&&n(8,I=e.html5autocomplete),"dropdownClassName"in e&&n(9,P=e.dropdownClassName),"hideArrow"in e&&n(10,T=e.hideArrow),"showClear"in e&&n(11,N=e.showClear),"disabled"in e&&n(12,F=e.disabled),"debug"in e&&n(46,L=e.debug),"selectedItem"in e&&n(29,M=e.selectedItem),"value"in e&&n(30,R=e.value),"$$scope"in e&&n(49,o=e.$$scope)},e.$$.update=()=>{536870912&e.$$.dirty[0]&&(n(30,R=p(M)),n(16,z=Y(M)),y(M)),268435456&e.$$.dirty[0]|196608&e.$$.dirty[1]&&n(18,r=H&&(s&&s.length>0||G>0)),268435456&e.$$.dirty[0]&&Q()},[w,C,x,j,S,E,O,A,I,P,T,N,F,B,D,U,z,q,r,K,ae,function(e){L&&console.log("onDocumentClick: "+JSON.stringify(e.target)),e.target.closest("."+K)?(L&&console.log("onDocumentClick inside"),ie()):(L&&console.log("onDocumentClick outside"),ue())},function(e){L&&console.log("onKeyDown");let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const n={Tab:H?re.bind(this):null,ShiftTab:H?ne.bind(this):null,ArrowDown:re.bind(this),ArrowUp:ne.bind(this),Escape:se.bind(this)}[t];"function"==typeof n&&(e.preventDefault(),n(e))},function(e){L&&console.log("onKeyPress"),"Enter"===e.key&&(e.preventDefault(),te())},function(e){L&&console.log("onInput"),n(16,z=e.target.value),V&&clearTimeout(V),_?V=setTimeout(oe,_):oe()},function(){L&&console.log("onInputClick"),le()},function(){L&&console.log("onFocus"),le()},function(){L&&console.log("clear"),n(16,z=""),n(29,M=void 0),setTimeout((()=>{B.focus(),ue()}))},s,M,R,l,c,u,h,f,d,p,m,g,v,y,b,k,_,$,L,H,G,o,a,function(e){X[e?"unshift":"push"]((()=>{B=e,n(13,B)}))},function(){z=this.value,n(16,z)},e=>ae(e),e=>{n(15,U=e)},function(e){X[e?"unshift":"push"]((()=>{D=e,n(14,D)}))}]}class Fa extends Ce{constructor(e){super(),$e(this,e,Na,Pa,l,{items:28,searchFunction:31,labelFieldName:32,keywordsFieldName:33,valueFieldName:34,labelFunction:35,keywordsFunction:36,valueFunction:37,keywordsCleanFunction:38,textCleanFunction:39,beforeChange:40,onChange:41,selectFirstIfEmpty:42,minCharactersToSearch:43,maxItemsToShowInList:0,delay:44,localFiltering:45,noResultsText:1,placeholder:2,className:3,inputClassName:4,inputId:5,name:6,title:7,html5autocomplete:8,dropdownClassName:9,hideArrow:10,showClear:11,disabled:12,debug:46,selectedItem:29,value:30},[-1,-1,-1])}}function La(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}const Ma=e=>({row:8192&e[0]}),Ra=e=>({row:e[36],n:e[38]});function Ka(e,t,n){const r=e.slice();return r[39]=t[n],r}const Ba=e=>({row:8192&e[0]}),Da=e=>({row:e[36],n:e[38]});function za(e,t,n){const r=e.slice();return r[39]=t[n],r}const qa=e=>({sortOrder:2&e[0],sortBy:1&e[0]}),Va=e=>({sortOrder:e[1],sortBy:e[0]});function Ha(e,t,n){const r=e.slice();return r[39]=t[n],r[44]=t,r[45]=n,r}function Ua(e,t,n){const r=e.slice();return r[46]=t[n],r}function Ga(e){let t,n,r,i,a,o=e[12][e[39].key],s=[];for(let t=0;t<o.length;t+=1)s[t]=Xa(Ua(e,o,t));function l(){e[28].call(t,e[39])}return{c(){t=x("select"),n=x("option");for(let e=0;e<s.length;e+=1)s[e].c();n.__value=void 0,n.value=n.__value,I(t,"class",r=p(e[15](e[9]))+" svelte-uczycn"),void 0===e[2][e[39].key]&&ee(l)},m(r,o){_(r,t,o),w(t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null);F(t,e[2][e[39].key]),i||(a=A(t,"change",l),i=!0)},p(n,i){if(e=n,4104&i[0]){let n;for(o=e[12][e[39].key],n=0;n<o.length;n+=1){const r=Ua(e,o,n);s[n]?s[n].p(r,i):(s[n]=Xa(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}512&i[0]&&r!==(r=p(e[15](e[9]))+" svelte-uczycn")&&I(t,"class",r),4108&i[0]&&F(t,e[2][e[39].key])},d(e){e&&$(t),C(s,e),i=!1,a()}}}function Wa(e){let t,n,r;function i(){e[27].call(t,e[39])}return{c(){t=x("input")},m(a,o){_(a,t,o),T(t,e[2][e[39].key]),n||(r=A(t,"input",i),n=!0)},p(n,r){e=n,4108&r[0]&&t.value!==e[2][e[39].key]&&T(t,e[2][e[39].key])},d(e){e&&$(t),n=!1,r()}}}function Xa(e){let t,n,r,i=e[46].name+"";return{c(){t=x("option"),n=S(i),t.__value=r=e[46].value,t.value=t.__value},m(e,r){_(e,t,r),w(t,n)},p(e,a){4104&a[0]&&i!==(i=e[46].name+"")&&P(n,i),4104&a[0]&&r!==(r=e[46].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&$(t)}}}function Ya(e){let t,n;function r(e,t){return void 0!==e[39].searchValue?Wa:void 0!==e[12][e[39].key]?Ga:void 0}let i=r(e),a=i&&i(e);return{c(){t=x("th"),a&&a.c(),n=E()},m(e,r){_(e,t,r),a&&a.m(t,null),w(t,n)},p(e,o){i===(i=r(e))&&a?a.p(e,o):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(t,n)))},d(e){e&&$(t),a&&a.d()}}}function Ja(e){let t,n,r,i,a,o=e[39].title+"",s=e[0]===e[39].key&&Za(e);return{c(){t=x("th"),n=S(o),r=E(),s&&s.c(),i=E(),I(t,"class",a=p(e[39].headerClass)+" svelte-uczycn")},m(e,a){_(e,t,a),w(t,n),w(t,r),s&&s.m(t,null),w(t,i)},p(e,r){8&r[0]&&o!==(o=e[39].title+"")&&P(n,o),e[0]===e[39].key?s?s.p(e,r):(s=Za(e),s.c(),s.m(t,i)):s&&(s.d(1),s=null),4104&r[0]&&a!==(a=p(e[39].headerClass)+" svelte-uczycn")&&I(t,"class",a)},d(e){e&&$(t),s&&s.d()}}}function Qa(e){let t,n,r,i,a,o,s,l=e[39].title+"",c=e[0]===e[39].key&&eo(e);function u(...t){return e[29](e[39],...t)}return{c(){t=x("th"),n=S(l),r=E(),c&&c.c(),i=E(),I(t,"class",a=p(e[15](["isSortable",e[39].headerClass]))+" svelte-uczycn")},m(e,a){_(e,t,a),w(t,n),w(t,r),c&&c.m(t,null),w(t,i),o||(s=A(t,"click",u),o=!0)},p(r,o){e=r,8&o[0]&&l!==(l=e[39].title+"")&&P(n,l),e[0]===e[39].key?c?c.p(e,o):(c=eo(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),4104&o[0]&&a!==(a=p(e[15](["isSortable",e[39].headerClass]))+" svelte-uczycn")&&I(t,"class",a)},d(e){e&&$(t),c&&c.d(),o=!1,s()}}}function Za(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=S(n)},m(e,n){_(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&P(t,n)},d(e){e&&$(t)}}}function eo(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=S(n)},m(e,n){_(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&P(t,n)},d(e){e&&$(t)}}}function to(e){let t;function n(e,t){return e[39].sortable?Qa:Ja}let r=n(e),i=r(e);return{c(){i.c(),t=O()},m(e,n){i.m(e,n),_(e,t,n)},p(e,a){r===(r=n(e))&&i?i.p(e,a):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&$(t)}}}function no(t){let n,r,i=(t[39].renderValue?t[39].renderValue(t[36]):t[39].value(t[36]))+"";return{c(){r=O(),n=new K(r)},m(e,t){n.m(i,e,t),_(e,r,t)},p(e,t){8200&t[0]&&i!==(i=(e[39].renderValue?e[39].renderValue(e[36]):e[39].value(e[36]))+"")&&n.p(i)},i:e,o:e,d(e){e&&$(r),e&&n.d()}}}function ro(e){let t,r,i;const a=[e[39].renderComponent.props||{},{row:e[36]},{col:e[39]}];var o=e[39].renderComponent.component||e[39].renderComponent;function s(e){let t={};for(let e=0;e<a.length;e+=1)t=n(t,a[e]);return{props:t}}return o&&(t=new o(s())),{c(){t&&be(t.$$.fragment),r=O()},m(e,n){t&&ke(t,e,n),_(e,r,n),i=!0},p(e,n){const i=8200&n[0]?ge(a,[8&n[0]&&ve(e[39].renderComponent.props||{}),8192&n[0]&&{row:e[36]},8&n[0]&&{col:e[39]}]):{};if(o!==(o=e[39].renderComponent.component||e[39].renderComponent)){if(t){ue();const e=t;de(e.$$.fragment,1,0,(()=>{we(e,1)})),he()}o?(t=new o(s()),be(t.$$.fragment),fe(t.$$.fragment,1),ke(t,r.parentNode,r)):t=null}else o&&t.$set(i)},i(e){i||(t&&fe(t.$$.fragment,e),i=!0)},o(e){t&&de(t.$$.fragment,e),i=!1},d(e){e&&$(r),t&&we(t,e)}}}function io(e){let t,n,r,i,a,o,s,l;const c=[ro,no],u=[];function h(e,t){return e[39].renderComponent?0:1}function f(...t){return e[30](e[36],e[39],...t)}return n=h(e),r=u[n]=c[n](e),{c(){t=x("td"),r.c(),i=E(),I(t,"class",a=p(e[15]([e[39].class,e[11]]))+" svelte-uczycn")},m(e,r){_(e,t,r),u[n].m(t,null),w(t,i),o=!0,s||(l=A(t,"click",f),s=!0)},p(s,l){let f=n;n=h(e=s),n===f?u[n].p(e,l):(ue(),de(u[f],1,1,(()=>{u[f]=null})),he(),r=u[n],r?r.p(e,l):(r=u[n]=c[n](e),r.c()),fe(r,1),r.m(t,i)),(!o||6152&l[0]&&a!==(a=p(e[15]([e[39].class,e[11]]))+" svelte-uczycn"))&&I(t,"class",a)},i(e){o||(fe(r),o=!0)},o(e){de(r),o=!1},d(e){e&&$(t),u[n].d(),s=!1,l()}}}function ao(e){let t,n;const r=e[26].row,i=h(r,e,e[25],Da),a=i||function(e){let t,n,r,i,a,o=e[3],s=[];for(let t=0;t<o.length;t+=1)s[t]=io(Ka(e,o,t));const l=e=>de(s[e],1,1,(()=>{s[e]=null}));function c(...t){return e[31](e[36],...t)}return{c(){t=x("tr");for(let e=0;e<s.length;e+=1)s[e].c();I(t,"class",n=p(e[15](e[10]))+" svelte-uczycn")},m(e,n){_(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null);r=!0,i||(a=A(t,"click",c),i=!0)},p(i,a){if(e=i,305160&a[0]){let n;for(o=e[3],n=0;n<o.length;n+=1){const r=Ka(e,o,n);s[n]?(s[n].p(r,a),fe(s[n],1)):(s[n]=io(r),s[n].c(),fe(s[n],1),s[n].m(t,null))}for(ue(),n=o.length;n<s.length;n+=1)l(n);he()}(!r||1024&a[0]&&n!==(n=p(e[15](e[10]))+" svelte-uczycn"))&&I(t,"class",n)},i(e){if(!r){for(let e=0;e<o.length;e+=1)fe(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)de(s[e]);r=!1},d(e){e&&$(t),C(s,e),i=!1,a()}}}(e),o=e[26]["after-row"],s=h(o,e,e[25],Ra);return{c(){a&&a.c(),t=E(),s&&s.c()},m(e,r){a&&a.m(e,r),_(e,t,r),s&&s.m(e,r),n=!0},p(e,t){i?i.p&&(!n||33562624&t[0])&&d(i,r,e,e[25],t,Ba,Da):a&&a.p&&11272&t[0]&&a.p(e,t),s&&s.p&&(!n||33562624&t[0])&&d(s,o,e,e[25],t,Ma,Ra)},i(e){n||(fe(a,e),fe(s,e),n=!0)},o(e){de(a,e),de(s,e),n=!1},d(e){a&&a.d(e),e&&$(t),s&&s.d(e)}}}function oo(e){let t,n,r,i,a,o,s,l,c,u=e[14]&&function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=Ya(Ha(e,n,t));return{c(){t=x("tr");for(let e=0;e<r.length;e+=1)r[e].c();I(t,"class","row-filter-header svelte-uczycn")},m(e,n){_(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(37388&i[0]){let a;for(n=e[3],a=0;a<n.length;a+=1){const o=Ha(e,n,a);r[a]?r[a].p(o,i):(r[a]=Ya(o),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(e){e&&$(t),C(r,e)}}}(e);const f=e[26].header,m=h(f,e,e[25],Va),g=m||function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=to(za(e,n,t));return{c(){t=x("tr");for(let e=0;e<r.length;e+=1)r[e].c();I(t,"class","row-title-header")},m(e,n){_(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(98363&i[0]){let a;for(n=e[3],a=0;a<n.length;a+=1){const o=za(e,n,a);r[a]?r[a].p(o,i):(r[a]=to(o),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(e){e&&$(t),C(r,e)}}}(e);let v=e[13],y=[];for(let t=0;t<v.length;t+=1)y[t]=ao(La(e,v,t));const b=e=>de(y[e],1,1,(()=>{y[e]=null}));return{c(){t=x("table"),n=x("thead"),u&&u.c(),r=E(),g&&g.c(),a=E(),o=x("tbody");for(let e=0;e<y.length;e+=1)y[e].c();I(n,"class",i=p(e[15](e[7]))+" svelte-uczycn"),I(o,"class",s=p(e[15](e[8]))+" svelte-uczycn"),I(t,"class",l=p(e[15](e[6]))+" svelte-uczycn")},m(e,i){_(e,t,i),w(t,n),u&&u.m(n,null),w(n,r),g&&g.m(n,null),w(t,a),w(t,o);for(let e=0;e<y.length;e+=1)y[e].m(o,null);c=!0},p(e,r){if(e[14]&&u.p(e,r),m?m.p&&(!c||33554435&r[0])&&d(m,f,e,e[25],r,qa,Va):g&&g.p&&59&r[0]&&g.p(e,r),(!c||128&r[0]&&i!==(i=p(e[15](e[7]))+" svelte-uczycn"))&&I(n,"class",i),33991688&r[0]){let t;for(v=e[13],t=0;t<v.length;t+=1){const n=La(e,v,t);y[t]?(y[t].p(n,r),fe(y[t],1)):(y[t]=ao(n),y[t].c(),fe(y[t],1),y[t].m(o,null))}for(ue(),t=v.length;t<y.length;t+=1)b(t);he()}(!c||256&r[0]&&s!==(s=p(e[15](e[8]))+" svelte-uczycn"))&&I(o,"class",s),(!c||64&r[0]&&l!==(l=p(e[15](e[6]))+" svelte-uczycn"))&&I(t,"class",l)},i(e){if(!c){fe(g,e);for(let e=0;e<v.length;e+=1)fe(y[e]);c=!0}},o(e){de(g,e),y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)de(y[e]);c=!1},d(e){e&&$(t),u&&u.d(),g&&g.d(e),C(y,e)}}}function so(e,t,n){let r,{$$slots:i={},$$scope:a}=t;const o=G();let{columns:s}=t,{rows:l}=t,{sortBy:c=""}=t,{sortOrder:u=1}=t,{iconAsc:h=""}=t,{iconDesc:f=""}=t,{classNameTable:d=""}=t,{classNameThead:p=""}=t,{classNameTbody:m=""}=t,{classNameSelect:g=""}=t,{classNameRow:v=""}=t,{classNameCell:y=""}=t,{filterSelections:b={}}=t,{sliceBegin:k=null}=t,{sliceEnd:w=null}=t,{disableFilterHeader:_=!1}=t,$=()=>"",C=!_&&s.some((e=>void 0!==e.filterOptions||void 0!==e.searchValue)),x={},j={};s.forEach((e=>{n(24,j[e.key]=e,j)}));const S=(e,t)=>{var r;r=t.key,n(1,u=r===c&&1===u?-1:1),n(0,c=t.key),o("clickCol",{event:e,col:t,key:t.key})},E=(e,t)=>{o("clickRow",{event:e,row:t})},O=(e,t,n)=>{o("clickCell",{event:e,row:t,key:n})};return e.$$set=e=>{"columns"in e&&n(3,s=e.columns),"rows"in e&&n(19,l=e.rows),"sortBy"in e&&n(0,c=e.sortBy),"sortOrder"in e&&n(1,u=e.sortOrder),"iconAsc"in e&&n(4,h=e.iconAsc),"iconDesc"in e&&n(5,f=e.iconDesc),"classNameTable"in e&&n(6,d=e.classNameTable),"classNameThead"in e&&n(7,p=e.classNameThead),"classNameTbody"in e&&n(8,m=e.classNameTbody),"classNameSelect"in e&&n(9,g=e.classNameSelect),"classNameRow"in e&&n(10,v=e.classNameRow),"classNameCell"in e&&n(11,y=e.classNameCell),"filterSelections"in e&&n(2,b=e.filterSelections),"sliceBegin"in e&&n(20,k=e.sliceBegin),"sliceEnd"in e&&n(21,w=e.sliceEnd),"disableFilterHeader"in e&&n(22,_=e.disableFilterHeader),"$$scope"in e&&n(25,a=e.$$scope)},e.$$.update=()=>{if(16777217&e.$$.dirty[0]){let e=j[c];void 0!==e&&!0===e.sortable&&"function"==typeof e.value&&n(23,$=t=>e.value(t))}28835846&e.$$.dirty[0]&&n(13,r=l.filter((e=>Object.keys(b).every((t=>""===b[t]||j[t].searchValue&&(j[t].searchValue(e)+"").toLocaleLowerCase().indexOf((b[t]+"").toLocaleLowerCase())>=0||void 0===b[t]||b[t]===("function"==typeof j[t].filterValue?j[t].filterValue(e):j[t].value(e)))))).map((e=>Object.assign({},e,{$sortOn:$(e)}))).sort(((e,t)=>e.$sortOn>t.$sortOn?u:e.$sortOn<t.$sortOn?-u:0)).slice(k||0,w||void 0)),524296&e.$$.dirty[0]&&C&&s&&l&&(n(12,x={}),s.forEach((e=>{"function"==typeof e.filterOptions?n(12,x[e.key]=e.filterOptions(l),x):Array.isArray(e.filterOptions)&&n(12,x[e.key]=e.filterOptions.map((e=>({name:e,value:e}))),x)})))},[c,u,b,s,h,f,d,p,m,g,v,y,x,r,C,e=>[].concat(e).filter((e=>"string"==typeof e&&""!==e)).join(" "),S,E,O,l,k,w,_,$,j,a,i,function(e){b[e.key]=this.value,n(2,b),n(3,s),n(12,x)},function(e){b[e.key]=L(this),n(2,b),n(3,s),n(12,x)},(e,t)=>S(t,e),(e,t,n)=>{O(n,e,t.key)},(e,t)=>{E(t,e)}]}class lo extends Ce{constructor(e){super(),$e(this,e,so,oo,l,{columns:3,rows:19,sortBy:0,sortOrder:1,iconAsc:4,iconDesc:5,classNameTable:6,classNameThead:7,classNameTbody:8,classNameSelect:9,classNameRow:10,classNameCell:11,filterSelections:2,sliceBegin:20,sliceEnd:21,disableFilterHeader:22},[-1,-1])}}const co=[{name:"",hiragana:"",englishCharacters:"aitemusiyoukyouka"},{name:"",hiragana:"",englishCharacters:"utakatanomai"},{name:"",hiragana:"",englishCharacters:"enrinnoonkei"},{name:"",hiragana:"",englishCharacters:"onibimatoi"},{name:"",hiragana:"",englishCharacters:"ga-dokyouka"},{name:"",hiragana:"",englishCharacters:"ga-doseinou"},{name:"",hiragana:"",englishCharacters:"kaisingekizokusei"},{name:"UP",hiragana:"",englishcharacters:"kaihikyoriappu"},{name:"",hiragana:"",englishCharacters:"kaihiseinou"},{name:"",hiragana:"",englishCharacters:"kaihukusokudo"},{name:"",hiragana:"",englishCharacters:"kakerimusitukai"},{name:"",hiragana:"",englishCharacters:"kajibaryoku"},{name:"",hiragana:"",englishCharacters:"kassoukyouka"},{name:"",hiragana:"",englishCharacters:"kasumigawanoonkei"},{name:"",hiragana:"",englishCharacters:"kaminarizokuseikougekikyouka"},{name:"",hiragana:"",englishCharacters:"kaminaritaisei"},{name:"",hiragana:"",englishCharacters:"kantuudankantuuyakyouka"},{name:"",hiragana:"",englishCharacters:"kizetutaisei"},{name:"",hiragana:"",englishCharacters:"kinokodaisuki"},{name:"",hiragana:"",englishCharacters:"gyakusyuu"},{name:"",hiragana:"",englishCharacters:"kyoukajizoku"},{name:"KO",hiragana:"",englishcharacters:"ke-o-jutu"},{name:"",hiragana:"",englishCharacters:"kouikika"},{name:"",hiragana:"",englishCharacters:"kouun"},{name:"",hiragana:"",englishCharacters:"koukakunoonkei"},{name:"",hiragana:"",englishCharacters:"kougeki"},{name:"",hiragana:"",englishCharacters:"goujinkenma"},{name:"",hiragana:"",englishCharacters:"kousokuhenkei"},{name:"",hiragana:"",englishCharacters:"koorizokuseikyouka"},{name:"",hiragana:"",englishCharacters:"kooritaisei"},{name:"",hiragana:"",englishCharacters:"konsin"},{name:"",hiragana:"",englishCharacters:"sakaurami"},{name:"",hiragana:"",englishCharacters:"sandankantuuyakyouka"},{name:"",hiragana:"",englishCharacters:"sityuunikatu"},{name:"",hiragana:"",englishCharacters:"jakutentokkou"},{name:"",hiragana:"",englishCharacters:"janputetujin"},{name:"",hiragana:"",englishCharacters:"syuutyuu"},{name:"",hiragana:"",englishCharacters:"syokuseigaku"},{name:"",hiragana:"",englishCharacters:"singan"},{name:"",hiragana:"",englishCharacters:"suiminzokuseikyouka"},{name:"",hiragana:"",englishCharacters:"suimintaisei"},{name:"",hiragana:"",englishCharacters:"sutaminakyuusokukaihuku"},{name:"",hiragana:"",englishCharacters:"sutaminadassyu"},{name:"",hiragana:"",englishCharacters:"seireinokago"},{name:"",hiragana:"",englishCharacters:"semenosyusei"},{name:"",hiragana:"",englishCharacters:"soutenkakutyou"},{name:"",hiragana:"",englishCharacters:"soutensokudo"},{name:"",hiragana:"",englishCharacters:"sokusyakyouka"},{name:"",hiragana:"",englishCharacters:"zokuseiyararetaisei"},{name:"",hiragana:"",englishCharacters:"taijutu"},{name:"",hiragana:"",englishCharacters:"taisin"},{name:"UP",hiragana:"",englishcharacters:"tairyokukaihukuryouappu"},{name:"",hiragana:"",englishCharacters:"takumi"},{name:"",hiragana:"",englishCharacters:"tatujingei"},{name:"",hiragana:"",englishCharacters:"dangansetuyaku"},{name:"",hiragana:"",englishCharacters:"dandoukyouka"},{name:"",hiragana:"",englishCharacters:"tikaranokaihou"},{name:"",hiragana:"",englishCharacters:"tisitugaku"},{name:"",hiragana:"",englishCharacters:"tyoukaisin"},{name:"",hiragana:"",englishCharacters:"tyousensya"},{name:"",hiragana:"",englishCharacters:"tuujoudansokusyayakyouka"},{name:"",hiragana:"",englishCharacters:"deisetutaisei"},{name:"",hiragana:"",englishCharacters:"toisisiyoukousokuka"},{name:"",hiragana:"",englishCharacters:"tokusyusyagekikyouka"},{name:"",hiragana:"",englishCharacters:"dokuzokuseikyouka"},{name:"",hiragana:"",englishCharacters:"dokutaisei"},{name:"",hiragana:"",englishCharacters:"tobikomi"},{name:"",hiragana:"",englishCharacters:"donkitukai"},{name:"",hiragana:"",englishCharacters:"noutoujutu"},{name:"",hiragana:"",englishCharacters:"norimeijin"},{name:"",hiragana:"",englishCharacters:"hakaiou"},{name:"",hiragana:"",englishCharacters:"hagitoritetujin"},{name:"",hiragana:"",englishCharacters:"hagitorimeijin"},{name:"",hiragana:"",englishCharacters:"bakuhazokuseikyouka"},{name:"",hiragana:"",englishCharacters:"bakuhayararetaisei"},{name:"",hiragana:"",englishCharacters:"battoujututikara"},{name:"",hiragana:"",englishCharacters:"battoujutuwaza"},{name:"",hiragana:"",englishCharacters:"hayagui"},{name:"",hiragana:"",englishCharacters:"haraheritaisei"},{name:"",hiragana:"",englishCharacters:"handoukeigen"},{name:"",hiragana:"",englishCharacters:"hizokuseikougekikyouka"},{name:"",hiragana:"",englishCharacters:"hitaisei"},{name:"",hiragana:"",englishCharacters:"hirumikeigen"},{name:"",hiragana:"",englishCharacters:"huuatutaisei"},{name:"",hiragana:"",englishCharacters:"huumonnoitti"},{name:"",hiragana:"",englishCharacters:"huehukimeijin"},{name:"",hiragana:"",englishCharacters:"hukutu"},{name:"",hiragana:"",englishCharacters:"hurutya-ji"},{name:"",hiragana:"",englishCharacters:"bureyokusei"},{name:"",hiragana:"",englishCharacters:"hekimenidou"},{name:"",hiragana:"",englishCharacters:"bougyo"},{name:"",hiragana:"",englishCharacters:"houjutu"},{name:"",hiragana:"",englishCharacters:"houdansouten"},{name:"",hiragana:"",englishCharacters:"hokakumeijin"},{name:"",hiragana:"",englishCharacters:"boma-"},{name:"",hiragana:"",englishCharacters:"mahizokuseikyouka"},{name:"",hiragana:"",englishCharacters:"mahitaisei"},{name:"",hiragana:"",englishCharacters:"manzokukan"},{name:"",hiragana:"",englishCharacters:"mikiri"},{name:"",hiragana:"",englishCharacters:"mizuzokuseikougekikyouka"},{name:"",hiragana:"",englishCharacters:"mizutaisei"},{name:"",hiragana:"",englishCharacters:"mimisen"},{name:"",hiragana:"",englishCharacters:"yumitamedankaikaihou"},{name:"",hiragana:"",englishCharacters:"youdou"},{name:"",hiragana:"",englishCharacters:"raimonnoitti"},{name:"",hiragana:"",englishCharacters:"ranna-"},{name:"",hiragana:"",englishCharacters:"ryuuzokuseikougekikyouka"},{name:"",hiragana:"",englishCharacters:"ryuutaisei"},{name:"",hiragana:"",englishCharacters:"wazamono"}];function uo(e,t,n){const r=e.slice();return r[25]=t[n],r}function ho(e,t,n){const r=e.slice();return r[22]=t[n],r}function fo(t){let n,r,i=(t[25].renderValue?t[25].renderValue(t[21]):t[25].value(t[21]))+"";return{c(){r=O(),n=new K(r)},m(e,t){n.m(i,e,t),_(e,r,t)},p(e,t){2097152&t&&i!==(i=(e[25].renderValue?e[25].renderValue(e[21]):e[25].value(e[21]))+"")&&n.p(i)},i:e,o:e,d(e){e&&$(r),e&&n.d()}}}function po(e){let t,r,i;const a=[e[25].renderComponent.props||{},{row:e[21]},{col:e[25]}];var o=e[25].renderComponent.component||e[25].renderComponent;function s(e){let t={};for(let e=0;e<a.length;e+=1)t=n(t,a[e]);return{props:t}}return o&&(t=new o(s())),{c(){t&&be(t.$$.fragment),r=O()},m(e,n){t&&ke(t,e,n),_(e,r,n),i=!0},p(e,n){const i=2097280&n?ge(a,[128&n&&ve(e[25].renderComponent.props||{}),2097152&n&&{row:e[21]},128&n&&{col:e[25]}]):{};if(o!==(o=e[25].renderComponent.component||e[25].renderComponent)){if(t){ue();const e=t;de(e.$$.fragment,1,0,(()=>{we(e,1)})),he()}o?(t=new o(s()),be(t.$$.fragment),fe(t.$$.fragment,1),ke(t,r.parentNode,r)):t=null}else o&&t.$set(i)},i(e){i||(t&&fe(t.$$.fragment,e),i=!0)},o(e){t&&de(t.$$.fragment,e),i=!1},d(e){e&&$(r),t&&we(t,e)}}}function mo(e){let t,n,r,i,a,o,s;const l=[po,fo],c=[];function u(...t){return e[13](e[25],e[21],e[20],...t)}return n=function(e,t){return e[25].renderComponent?0:1}(e),r=c[n]=l[n](e),{c(){t=x("td"),r.c(),i=E(),I(t,"class",p([e[25].class].join(" "))+" svelte-1bydddo")},m(e,r){_(e,t,r),c[n].m(t,null),w(t,i),a=!0,o||(s=A(t,"click",u),o=!0)},p(t,n){e=t,r.p(e,n)},i(e){a||(fe(r),a=!0)},o(e){de(r),a=!1},d(e){e&&$(t),c[n].d(),o=!1,s()}}}function go(e){let t,n,r,i,a=e[7],o=[];for(let t=0;t<a.length;t+=1)o[t]=mo(uo(e,a,t));const s=e=>de(o[e],1,1,(()=>{o[e]=null}));function l(...t){return e[14](e[21],...t)}return{c(){t=x("tr");for(let e=0;e<o.length;e+=1)o[e].c();I(t,"slot","row")},m(e,a){_(e,t,a);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0,r||(i=A(t,"click",l),r=!0)},p(n,r){if(e=n,2097280&r){let n;for(a=e[7],n=0;n<a.length;n+=1){const i=uo(e,a,n);o[n]?(o[n].p(i,r),fe(o[n],1)):(o[n]=mo(i),o[n].c(),fe(o[n],1),o[n].m(t,null))}for(ue(),n=a.length;n<o.length;n+=1)s(n);he()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)fe(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)de(o[e]);n=!1},d(e){e&&$(t),C(o,e),r=!1,i()}}}function vo(e){let t,n,r,i;const a=[ko,bo,yo],o=[];function s(e,t){return null==e[21].substitutableCharms?0:0===e[21].substitutableCharms.length?1:2}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?o[t].p(e,i):(ue(),de(o[l],1,1,(()=>{o[l]=null})),he(),n=o[t],n?n.p(e,i):(n=o[t]=a[t](e),n.c()),fe(n,1),n.m(r.parentNode,r))},i(e){i||(fe(n),i=!0)},o(e){de(n),i=!1},d(e){o[t].d(e),e&&$(r)}}}function yo(e){let t,n,r,i=e[21].substitutableCharms,a=[];for(let t=0;t<i.length;t+=1)a[t]=wo(ho(e,i,t));return{c(){t=x("div");for(let e=0;e<a.length;e+=1)a[e].c();I(t,"class","row-substitutes")},m(e,n){_(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);r=!0},p(e,n){if(2097152&n){let r;for(i=e[21].substitutableCharms,r=0;r<i.length;r+=1){const o=ho(e,i,r);a[r]?a[r].p(o,n):(a[r]=wo(o),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i(e){r||(ee((()=>{n||(n=me(t,xi,{duration:150},!0)),n.run(1)})),r=!0)},o(e){n||(n=me(t,xi,{duration:150},!1)),n.run(0),r=!1},d(e){e&&$(t),C(a,e),e&&n&&n.end()}}}function bo(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ko(t){let n;return{c(){n=x("div"),n.textContent="searching...",N(n,"width","100%"),N(n,"border-bottom","solid 1px #ddd")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function wo(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,p,m,g=e[22].rowid+"",v=e[22].skill1+"",y=e[22].skill1Level+"",b=e[22].skill2+"",k=e[22].skill2Level+"",C=e[22].slot1+"",j=e[22].slot2+"",O=e[22].slot3+"";return{c(){t=x("div"),n=S(g),r=S(": "),i=S(v),a=S(y),o=S(", "),s=S(b),l=S(k),c=S(", "),u=S(C),h=S("-"),f=S(j),d=S("-"),p=S(O),m=E(),N(t,"width","100%"),N(t,"text-align","left"),N(t,"padding","0.3rem 2rem")},m(e,g){_(e,t,g),w(t,n),w(t,r),w(t,i),w(t,a),w(t,o),w(t,s),w(t,l),w(t,c),w(t,u),w(t,h),w(t,f),w(t,d),w(t,p),w(t,m)},p(e,t){2097152&t&&g!==(g=e[22].rowid+"")&&P(n,g),2097152&t&&v!==(v=e[22].skill1+"")&&P(i,v),2097152&t&&y!==(y=e[22].skill1Level+"")&&P(a,y),2097152&t&&b!==(b=e[22].skill2+"")&&P(s,b),2097152&t&&k!==(k=e[22].skill2Level+"")&&P(l,k),2097152&t&&C!==(C=e[22].slot1+"")&&P(u,C),2097152&t&&j!==(j=e[22].slot2+"")&&P(f,j),2097152&t&&O!==(O=e[22].slot3+"")&&P(p,O)},d(e){e&&$(t)}}}function _o(e){let t,n,r,i,a;return{c(){t=x("div"),n=x("canvas"),I(n,"id",r="charm-table-row-"+e[21].rowid+"-screenshot"),N(n,"width","100%"),N(t,"width","100%"),N(t,"border-bottom","solid 1px #ddd")},m(e,r){_(e,t,r),w(t,n),a=!0},p(e,t){(!a||2097152&t&&r!==(r="charm-table-row-"+e[21].rowid+"-screenshot"))&&I(n,"id",r)},i(e){a||(ee((()=>{i||(i=me(t,xi,{duration:100},!0)),i.run(1)})),a=!0)},o(e){i||(i=me(t,xi,{duration:100},!1)),i.run(0),a=!1},d(e){e&&$(t),e&&i&&i.end()}}}function $o(e){let t,n,r,i,a=e[5][e[21].rowid]&&vo(e),o=e[4][e[21].rowid]&&_o(e);return{c(){t=x("div"),a&&a.c(),n=E(),o&&o.c(),I(t,"slot","after-row"),I(t,"id",r="charm-table-row-"+e[21].rowid),N(t,"width","100%")},m(e,r){_(e,t,r),a&&a.m(t,null),w(t,n),o&&o.m(t,null),i=!0},p(e,s){e[5][e[21].rowid]?a?(a.p(e,s),2097184&s&&fe(a,1)):(a=vo(e),a.c(),fe(a,1),a.m(t,n)):a&&(ue(),de(a,1,1,(()=>{a=null})),he()),e[4][e[21].rowid]?o?(o.p(e,s),2097168&s&&fe(o,1)):(o=_o(e),o.c(),fe(o,1),o.m(t,null)):o&&(ue(),de(o,1,1,(()=>{o=null})),he()),(!i||2097152&s&&r!==(r="charm-table-row-"+e[21].rowid))&&I(t,"id",r)},i(e){i||(fe(a),fe(o),i=!0)},o(e){de(a),de(o),i=!1},d(e){e&&$(t),a&&a.d(),o&&o.d()}}}function Co(e){let t,n,r,i,a;function o(t){e[15](t)}function s(t){e[16](t)}let l={columns:e[7],rows:e[3],classNameTable:["table table-striped table-hover table-responsible"],classNameThead:["table-dark hide-first-child.disabled"],disableFilterHeader:e[2],$$slots:{"after-row":[$o,({n:e,row:t})=>({20:e,21:t}),({n:e,row:t})=>(e?1048576:0)|(t?2097152:0)],row:[go,({n:e,row:t})=>({20:e,21:t}),({n:e,row:t})=>(e?1048576:0)|(t?2097152:0)]},$$scope:{ctx:e}};return void 0!==e[0]&&(l.sliceBegin=e[0]),void 0!==e[1]&&(l.sliceEnd=e[1]),n=new lo({props:l}),X.push((()=>ye(n,"sliceBegin",o))),X.push((()=>ye(n,"sliceEnd",s))),n.$on("clickCol",e[8]),{c(){t=x("div"),be(n.$$.fragment),I(t,"class","charm-table svelte-1bydddo"),I(t,"style",e[6])},m(e,r){_(e,t,r),ke(n,t,null),a=!0},p(e,[o]){const s={};8&o&&(s.rows=e[3]),4&o&&(s.disableFilterHeader=e[2]),270532656&o&&(s.$$scope={dirty:o,ctx:e}),!r&&1&o&&(r=!0,s.sliceBegin=e[0],te((()=>r=!1))),!i&&2&o&&(i=!0,s.sliceEnd=e[1],te((()=>i=!1))),n.$set(s),(!a||64&o)&&I(t,"style",e[6])},i(e){a||(fe(n.$$.fragment,e),a=!0)},o(e){de(n.$$.fragment,e),a=!1},d(e){e&&$(t),we(n)}}}function xo(e,t,n){let r,i;u(e,ma,(e=>n(17,i=e)));let{headerColor:a="mediumseagreen"}=t,{disableFilterHeader:o=!1}=t,{showImageColumn:s=!0}=t,{showSubstitutesColumn:l=!0}=t,{charms:c}=t,{sliceBegin:h}=t,{sliceEnd:f}=t;const d=co.map((e=>e.name)),p=[{key:"id",title:"ID",value:e=>e.rowid,sortable:!0,filterOptions:e=>{let t={};return e.forEach((e=>{let n=Math.floor(e.rowid/50);void 0===t[n]&&(t[n]={name:`${50*n+1}  ${50*(n+1)}`,value:n})})),t=Object.entries(t).sort().reduce(((e,[t,n])=>(e[t]=n,e)),{}),Object.values(t)},filterValue:e=>Math.floor((e.rowid-1)/50)},{key:"skill1",title:"1",value:e=>e.skill1,filterOptions:d,sortable:!0},{key:"skill1Level",title:"1 Lv",value:e=>e.skill1Level,filterOptions:[0,1,2,3,4,5,6,7],sortable:!0},{key:"skill2",title:"2",value:e=>e.skill2,filterOptions:d,sortable:!0},{key:"skill2Level",title:"2 Lv",value:e=>e.skill2Level,filterOptions:[0,1,2,3,4,5,6,7],sortable:!0},...Array.from({length:3},((e,t)=>t+1)).map((e=>({key:`slot${e}`,title:`${e}`,value:t=>t[`slot${e}`],renderValue:t=>t[`slot${e}`]||"-",sortable:!0,filterOptions:[0,1,2,3]}))),{key:"evaluation",title:"Lv",value:e=>e.evaluation||"-",filterOptions:[...Array(21).keys()],sortable:!0},{key:"image",title:"",value:e=>e.imagename?"":"",renderValue:e=>e.imagename?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16"> <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/> <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/> </svg>':"",sortable:!0,filterOptions:["",""],onClick:async function({e:e,row:t}){e.stopPropagation();const r=t.rowid,a=!m[r];if(n(4,m[r]=a,m),a){const e=await i.getScreenshot(t.imagename);cv.imshow(`charm-table-row-${r}-screenshot`,e)}}},{key:"substitutableCharms",title:"",value:e=>e.substitutableCharms?.length?"":"",renderValue:e=>null==e.substitutableCharms?'<span style="color: gray"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-square-fill" viewBox="0 0 16 16"> <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.496 6.033a.237.237 0 0 1-.24-.247C5.35 4.091 6.737 3.5 8.005 3.5c1.396 0 2.672.73 2.672 2.24 0 1.08-.635 1.594-1.244 2.057-.737.559-1.01.768-1.01 1.486v.105a.25.25 0 0 1-.25.25h-.81a.25.25 0 0 1-.25-.246l-.004-.217c-.038-.927.495-1.498 1.168-1.987.59-.444.965-.736.965-1.371 0-.825-.628-1.168-1.314-1.168-.803 0-1.253.478-1.342 1.134-.018.137-.128.25-.266.25h-.825zm2.325 6.443c-.584 0-1.009-.394-1.009-.927 0-.552.425-.94 1.01-.94.609 0 1.028.388 1.028.94 0 .533-.42.927-1.029.927z"/> </svg> </span>':e.substitutableCharms.length?'<span style="color: mediumseagreen"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-square-fill" viewBox="0 0 16 16"> <path d="M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z"/> </svg> </span>':"",sortable:!0,filterOptions:["",""]}].filter((e=>{switch(e.key){case"image":return s;case"substitutableCharms":return l;default:return!0}}));let m=[],g=[];function v({row:e}){const t=e.rowid;n(5,g[t]=!g[t],g)}return e.$$set=e=>{"headerColor"in e&&n(10,a=e.headerColor),"disableFilterHeader"in e&&n(2,o=e.disableFilterHeader),"showImageColumn"in e&&n(11,s=e.showImageColumn),"showSubstitutesColumn"in e&&n(12,l=e.showSubstitutesColumn),"charms"in e&&n(3,c=e.charms),"sliceBegin"in e&&n(0,h=e.sliceBegin),"sliceEnd"in e&&n(1,f=e.sliceEnd)},e.$$.update=()=>{7168&e.$$.dirty&&n(6,r=Object.entries({"header-background-color":a,"table-width":61+(s?3:0)+(l?3:0)+"rem"}).map((([e,t])=>`--${e}:${t}`)).join(";"))},[h,f,o,c,m,g,r,p,function(e){n(4,m=[]),n(5,g=[])},v,a,s,l,(e,t,n,r)=>{e.onClick&&e.onClick({e:r,row:t,col:e,index:n})},(e,t)=>v({row:e}),function(e){h=e,n(0,h)},function(e){f=e,n(1,f)}]}class jo extends Ce{constructor(e){super(),$e(this,e,xo,Co,l,{headerColor:10,disableFilterHeader:2,showImageColumn:11,showSubstitutesColumn:12,charms:3,sliceBegin:0,sliceEnd:1})}}function So(e,t,n){const r=e.slice();return r[24]=t[n],r}function Eo(e,t,n){const r=e.slice();return r[24]=t[n],r[27]=t,r[28]=n,r}function Oo(e,t,n){const r=e.slice();return r[24]=t[n],r[29]=t,r[30]=n,r}function Ao(e){let t,n,r,i,a,o,s,l;function c(t){e[13](t,e[24])}let u={items:co,inputId:"input-skill-"+e[24],labelFieldName:"name",valueFieldName:"name",keywordsFunction:Do,placeholder:""+(e[24]+1),showClear:!0,hideArrow:!0,className:"autocomplete-skill"};function h(t){e[14](t,e[24])}void 0!==e[0][e[24]]&&(u.selectedItem=e[0][e[24]]),n=new Fa({props:u}),X.push((()=>ye(n,"selectedItem",c)));let f={items:e[11],inputId:"input-skill-level-"+e[24],placeholder:"Lv",hideArrow:!0,className:"autocomplete-skill-level"};return void 0!==e[1][e[24]]&&(f.selectedItem=e[1][e[24]]),a=new Fa({props:f}),X.push((()=>ye(a,"selectedItem",h))),{c(){t=x("div"),be(n.$$.fragment),i=E(),be(a.$$.fragment),s=E()},m(e,r){_(e,t,r),ke(n,t,null),w(t,i),ke(a,t,null),w(t,s),l=!0},p(t,i){e=t;const s={};1&i&&(s.inputId="input-skill-"+e[24]),1&i&&(s.placeholder=""+(e[24]+1)),!r&&1&i&&(r=!0,s.selectedItem=e[0][e[24]],te((()=>r=!1))),n.$set(s);const l={};1&i&&(l.inputId="input-skill-level-"+e[24]),!o&&3&i&&(o=!0,l.selectedItem=e[1][e[24]],te((()=>o=!1))),a.$set(l)},i(e){l||(fe(n.$$.fragment,e),fe(a.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),de(a.$$.fragment,e),l=!1},d(e){e&&$(t),we(n),we(a)}}}function Io(e){let t,n,r,i;function a(t){e[15](t,e[24])}let o={items:[...Array(3).keys()].map(zo),placeholder:""+(e[24]+1),inputId:"input-slot-"+e[24],showClear:!0,hideArrow:!0,className:"autocomplete-slot-level"};return void 0!==e[2][e[24]]&&(o.selectedItem=e[2][e[24]]),t=new Fa({props:o}),X.push((()=>ye(t,"selectedItem",a))),{c(){be(t.$$.fragment),r=S("")},m(e,n){ke(t,e,n),_(e,r,n),i=!0},p(r,i){e=r;const a={};!n&&4&i&&(n=!0,a.selectedItem=e[2][e[24]],te((()=>n=!1))),t.$set(a)},i(e){i||(fe(t.$$.fragment,e),i=!0)},o(e){de(t.$$.fragment,e),i=!1},d(e){we(t,e),e&&$(r)}}}function Po(e){let t,n,r,i,a,s,l,c,u,h,f,d,p,m,g,v,y,b,k,j,O,P,T,N,L;function M(t){e[17](t)}function R(t){e[18](t)}function K(t){e[19](t)}let B={disableFilterHeader:!0,headerColor:"dodgerblue"};void 0!==e[8]&&(B.charms=e[8]),void 0!==e[9]&&(B.sliceBegin=e[9]),void 0!==e[10]&&(B.sliceEnd=e[10]),c=new jo({props:B}),X.push((()=>ye(c,"charms",M))),X.push((()=>ye(c,"sliceBegin",R))),X.push((()=>ye(c,"sliceEnd",K)));let D=[...Array(e[6]).keys()],z=[];for(let t=0;t<D.length;t+=1)z[t]=Lo(So(e,D,t));return{c(){t=S("show\n        "),n=x("select"),r=x("option"),r.textContent="10",i=x("option"),i.textContent="25",a=x("option"),a.textContent="50",s=x("option"),s.textContent="100",l=S("\n        charms\n        "),be(c.$$.fragment),d=E(),p=x("div"),m=x("ul"),g=x("li"),v=x("span"),v.innerHTML='<span aria-hidden="true"></span>',b=E();for(let e=0;e<z.length;e+=1)z[e].c();k=E(),j=x("li"),O=x("span"),O.innerHTML='<span aria-hidden="true"></span>',r.__value="10",r.value=r.__value,i.__value="25",i.value=i.__value,a.__value="50",a.value=a.__value,s.__value="100",s.value=s.__value,void 0===e[5]&&ee((()=>e[16].call(n))),I(v,"class","page-link"),I(g,"class",y="page-item "+(0===e[4]?"disabled":"")),I(g,"aria-label","Previous"),I(O,"class","page-link"),I(j,"class",P="page-item "+(e[4]===e[6]-1?"disabled":"")),I(j,"aria-label","Next"),I(m,"class","pagination svelte-1galzg3"),I(p,"id","charm-search-result-pager"),I(p,"class","svelte-1galzg3")},m(o,u){_(o,t,u),_(o,n,u),w(n,r),w(n,i),w(n,a),w(n,s),F(n,e[5]),_(o,l,u),ke(c,o,u),_(o,d,u),_(o,p,u),w(p,m),w(m,g),w(g,v),w(m,b);for(let e=0;e<z.length;e+=1)z[e].m(m,null);w(m,k),w(m,j),w(j,O),T=!0,N||(L=[A(n,"change",e[16]),A(v,"click",e[20]),A(O,"click",e[22])],N=!0)},p(e,t){32&t&&F(n,e[5]);const r={};if(!u&&256&t&&(u=!0,r.charms=e[8],te((()=>u=!1))),!h&&512&t&&(h=!0,r.sliceBegin=e[9],te((()=>h=!1))),!f&&1024&t&&(f=!0,r.sliceEnd=e[10],te((()=>f=!1))),c.$set(r),(!T||16&t&&y!==(y="page-item "+(0===e[4]?"disabled":"")))&&I(g,"class",y),80&t){let n;for(D=[...Array(e[6]).keys()],n=0;n<D.length;n+=1){const r=So(e,D,n);z[n]?z[n].p(r,t):(z[n]=Lo(r),z[n].c(),z[n].m(m,k))}for(;n<z.length;n+=1)z[n].d(1);z.length=D.length}(!T||80&t&&P!==(P="page-item "+(e[4]===e[6]-1?"disabled":"")))&&I(j,"class",P)},i(e){T||(fe(c.$$.fragment,e),T=!0)},o(e){de(c.$$.fragment,e),T=!1},d(e){e&&$(t),e&&$(n),e&&$(l),we(c,e),e&&$(d),e&&$(p),C(z,e),N=!1,o(L)}}}function To(t){let n;return{c(){n=x("div"),n.textContent="not found",N(n,"text-align","center")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function No(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Fo(t){let n;return{c(){n=x("div"),I(n,"class","spinner-border text-info"),I(n,"role","status")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function Lo(e){let t,n,r,i,a,o,s=e[24]+1+"";function l(){return e[21](e[24])}return{c(){t=x("li"),n=x("span"),r=S(s),I(n,"class","page-link"),I(t,"class",i="page-item "+(e[24]===e[4]?"active":""))},m(e,i){_(e,t,i),w(t,n),w(n,r),a||(o=A(n,"click",l),a=!0)},p(n,a){e=n,64&a&&s!==(s=e[24]+1+"")&&P(r,s),80&a&&i!==(i="page-item "+(e[24]===e[4]?"active":""))&&I(t,"class",i)},d(e){e&&$(t),a=!1,o()}}}function Mo(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,p,m,g,v,y,b,k=[...Array(e[0].filter(Bo).length+1).keys()],j=[];for(let t=0;t<k.length;t+=1)j[t]=Ao(Oo(e,k,t));const O=e=>de(j[e],1,1,(()=>{j[e]=null}));let P=[...Array(Ro).keys()],T=[];for(let t=0;t<P.length;t+=1)T[t]=Io(Eo(e,P,t));const N=e=>de(T[e],1,1,(()=>{T[e]=null})),F=[Fo,No,To,Po],L=[];function M(e,t){return e[7]?0:null==e[3]?1:0===e[3].length?2:3}return m=M(e),g=L[m]=F[m](e),{c(){t=x("div"),n=x("div"),r=x("div"),i=x("div"),a=S(":\n        ");for(let e=0;e<j.length;e+=1)j[e].c();o=E(),s=x("div"),l=S(":"),c=x("br"),u=E();for(let e=0;e<T.length;e+=1)T[e].c();h=E(),f=x("hr"),d=E(),p=x("div"),g.c(),I(i,"id","skills"),I(i,"class","svelte-1galzg3"),I(s,"id","slots"),I(s,"class","svelte-1galzg3"),I(r,"id","charm-search-form"),I(r,"class","svelte-1galzg3"),I(f,"class","svelte-1galzg3"),I(p,"id","charm-search-result"),I(p,"class","svelte-1galzg3"),I(n,"id","charm-searcher"),I(n,"class","svelte-1galzg3"),I(t,"class","tab-content svelte-1galzg3")},m(e,g){_(e,t,g),w(t,n),w(n,r),w(r,i),w(i,a);for(let e=0;e<j.length;e+=1)j[e].m(i,null);w(r,o),w(r,s),w(s,l),w(s,c),w(s,u);for(let e=0;e<T.length;e+=1)T[e].m(s,null);w(n,h),w(n,f),w(n,d),w(n,p),L[m].m(p,null),v=!0,y||(b=A(window,"keydown",Ko),y=!0)},p(e,[t]){if(2051&t){let n;for(k=[...Array(e[0].filter(Bo).length+1).keys()],n=0;n<k.length;n+=1){const r=Oo(e,k,n);j[n]?(j[n].p(r,t),fe(j[n],1)):(j[n]=Ao(r),j[n].c(),fe(j[n],1),j[n].m(i,null))}for(ue(),n=k.length;n<j.length;n+=1)O(n);he()}if(4&t){let n;for(P=[...Array(Ro).keys()],n=0;n<P.length;n+=1){const r=Eo(e,P,n);T[n]?(T[n].p(r,t),fe(T[n],1)):(T[n]=Io(r),T[n].c(),fe(T[n],1),T[n].m(s,null))}for(ue(),n=P.length;n<T.length;n+=1)N(n);he()}let n=m;m=M(e),m===n?L[m].p(e,t):(ue(),de(L[n],1,1,(()=>{L[n]=null})),he(),g=L[m],g?g.p(e,t):(g=L[m]=F[m](e),g.c()),fe(g,1),g.m(p,null))},i(e){if(!v){for(let e=0;e<k.length;e+=1)fe(j[e]);for(let e=0;e<P.length;e+=1)fe(T[e]);fe(g),v=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)de(j[e]);T=T.filter(Boolean);for(let e=0;e<T.length;e+=1)de(T[e]);de(g),v=!1},d(e){e&&$(t),C(j,e),C(T,e),L[m].d(),y=!1,b()}}}const Ro=3;function Ko(e){if(27===e.keyCode)return void document.body.click();if(!(e.ctrlKey&&e.metaKey||e.ctrlKey&&e.altKey))return;let t;if("k"===e.key)t="input-skill-";else if("l"===e.key)t="input-skill-level-";else{if("t"!==e.key)return;t="input-slot-"}const n=document.activeElement.id;if(n.startsWith(t)){const e=parseInt(n.replace(t,"")),r=document.getElementById(`${t}${e+1}`)||document.getElementById(`${t}0`);document.body.click(),r.focus()}else{const e=document.getElementById(`${t}0`);document.body.click(),e.focus()}}const Bo=e=>e,Do=e=>`${e.name} ${e.hiragana} ${e.englishCharacters}`,zo=e=>e+1;function qo(e,t,n){let r,i,a,o,s;u(e,ma,(e=>n(12,s=e)));const l=[...Array(7).keys()].map((e=>e+1));let c=[],h=[],f=[],d=!1,p=null,m=0,g=10;return e.$$.update=()=>{if(3&e.$$.dirty)for(const e in c)c[e]&&null==h[e]&&n(1,h[e]=1,h),null==c[e]&&(c.splice(e,1),h.splice(e,1));if(4103&e.$$.dirty){n(7,d=!0),n(2,f=f.filter((e=>e)));const e=JSON.stringify({skills:c.map((e=>e.name)),skillLevels:h,slots:f}),t=()=>{if(!c.length&&!h.length&&!f.length)return void n(3,p=null);if("function"!=typeof Module.getSubstitutesAll)return void setTimeout(t,100);const r=Module.getSubstitutes(JSON.stringify(s.charms.map((e=>{const{substitutableCharms:t,imagename:n,evaluation:r,...i}=e;return i}))),e);n(3,p=JSON.parse(r).map((e=>s.charms.find((t=>t.rowid===e)))))};t(),n(7,d=!1)}40&e.$$.dirty&&n(6,r=Math.ceil((p||[]).length/g)),72&e.$$.dirty&&p&&r&&n(4,m=0),8&e.$$.dirty&&n(8,i=p),48&e.$$.dirty&&n(9,a=g*m),48&e.$$.dirty&&n(10,o=g*(m+1)),4&e.$$.dirty&&n(2,f=f.sort(((e,t)=>t-e)))},[c,h,f,p,m,g,r,d,i,a,o,l,s,function(t,r){e.$$.not_equal(c[r],t)&&(c[r]=t,n(0,c))},function(t,r){e.$$.not_equal(h[r],t)&&(h[r]=t,n(1,h),n(0,c))},function(t,r){e.$$.not_equal(f[r],t)&&(f[r]=t,n(2,f),n(0,c),n(1,h),n(12,s))},function(){g=L(this),n(5,g)},function(e){i=e,n(8,i),n(3,p),n(2,f),n(0,c),n(1,h),n(12,s)},function(e){a=e,n(9,a),n(5,g),n(4,m),n(3,p),n(6,r),n(2,f),n(0,c),n(1,h),n(12,s)},function(e){o=e,n(10,o),n(5,g),n(4,m),n(3,p),n(6,r),n(2,f),n(0,c),n(1,h),n(12,s)},()=>n(4,m--,m),e=>n(4,m=e),()=>n(4,m++,m)]}function Vo(e){let t,n,r;function i(t){e[1](t)}let a={};return void 0!==e[0]&&(a.charms=e[0]),t=new jo({props:a}),X.push((()=>ye(t,"charms",i))),{c(){be(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,r){const i={};!n&&1&r&&(n=!0,i.charms=e[0],te((()=>n=!1))),t.$set(i)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),r=!1},d(e){we(t,e)}}}function Ho(t){let n;return{c(){n=x("div"),I(n,"class","spinner-border text-info svelte-2qpa7f"),I(n,"role","status")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function Uo(e){let t,n,r,i,a;const o=[Ho,Vo],s=[];function l(e,t){return null==e[0]?0:1}return r=l(e),i=s[r]=o[r](e),{c(){t=x("div"),n=x("div"),i.c(),I(n,"id","charm-list"),I(n,"class","svelte-2qpa7f"),I(t,"class","tab-content svelte-2qpa7f")},m(e,i){_(e,t,i),w(t,n),s[r].m(n,null),a=!0},p(e,[t]){let a=r;r=l(e),r===a?s[r].p(e,t):(ue(),de(s[a],1,1,(()=>{s[a]=null})),he(),i=s[r],i?i.p(e,t):(i=s[r]=o[r](e),i.c()),fe(i,1),i.m(n,null))},i(e){a||(fe(i),a=!0)},o(e){de(i),a=!1},d(e){e&&$(t),s[r].d()}}}function Go(e,t,n){let r,i;return u(e,ma,(e=>n(2,r=e))),setInterval((()=>{i!==r?.charms&&n(0,i=r?.charms)}),1e3),[i,function(e){i=e,n(0,i)}]}function Wo(t){let n,r,i,a,o,s,l,c,u,h,f,d,p,m,g=Math.floor(100*t[4])+"";return{c(){n=x("div"),r=x("video"),i=x("track"),c=E(),u=x("div"),h=x("progress"),f=E(),d=x("span"),p=S(g),m=S("%"),I(i,"kind","captions"),I(r,"id",a="video"+t[0]),I(r,"class","video-preview svelte-syjktf"),r.src!==(o=t[1])&&I(r,"src",o),I(r,"width",Xo),I(r,"height",Yo),I(r,"alt",s="preview"+t[0]),I(r,"style",l=t[2]?"":"display: none"),h.value=t[4],I(h,"class","svelte-syjktf"),I(d,"class","progress-text svelte-syjktf"),I(n,"class","video-reader svelte-syjktf")},m(e,a){_(e,n,a),w(n,r),w(r,i),t[9](r),w(n,c),w(n,u),w(u,h),w(u,f),w(u,d),w(d,p),w(d,m)},p(e,[t]){1&t&&a!==(a="video"+e[0])&&I(r,"id",a),2&t&&r.src!==(o=e[1])&&I(r,"src",o),1&t&&s!==(s="preview"+e[0])&&I(r,"alt",s),4&t&&l!==(l=e[2]?"":"display: none")&&I(r,"style",l),16&t&&(h.value=e[4]),16&t&&g!==(g=Math.floor(100*e[4])+"")&&P(p,g)},i:e,o:e,d(e){e&&$(n),t[9](null)}}}const Xo=1280,Yo=720;function Jo(e,t,n){let r,i,a,o,{nSplits:s}=t,{index:l}=t,{videoName:c}=t,{videoData:u}=t,{isVideoVisible:h=!1}=t,{charmScanner:f}=t,{onFinish:d}=t,p=new cv.Mat(Yo,Xo,cv.CV_8UC4),m=0;(async()=>{await new Promise((e=>requestAnimationFrame(e))),await new Promise((e=>n(3,a.oncanplay=e,a))),o=new cv.VideoCapture(a),r=l*a.duration/s,i=(l+1)*a.duration/s,a.addEventListener("seeked",g),a.currentTime!=r?n(3,a.currentTime=r,a):g()})();const g=async()=>{if(i-a.currentTime<1/29.97)return f.countCharms(),n(4,m=1),void d();o.read(p),f.scan(p,c),v(1,29.97),n(4,m=(a.currentTime-r)/(i-r))},v=(e,t)=>{const r=1e-5+(a.currentTime*t+e)/t;n(3,a.currentTime=Math.min(i,r),a)};return e.$$set=e=>{"nSplits"in e&&n(5,s=e.nSplits),"index"in e&&n(0,l=e.index),"videoName"in e&&n(6,c=e.videoName),"videoData"in e&&n(1,u=e.videoData),"isVideoVisible"in e&&n(2,h=e.isVideoVisible),"charmScanner"in e&&n(7,f=e.charmScanner),"onFinish"in e&&n(8,d=e.onFinish)},[l,u,h,a,m,s,c,f,d,function(e){X[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}class Qo extends Ce{constructor(e){super(),$e(this,e,Jo,Wo,l,{nSplits:5,index:0,videoName:6,videoData:1,isVideoVisible:2,charmScanner:7,onFinish:8})}}function Zo(e,t,n){const r=e.slice();return r[21]=t[n],r}function es(e){let t,r;const i=[e[21]];let a={};for(let e=0;e<i.length;e+=1)a=n(a,i[e]);return t=new Qo({props:a}),{c(){be(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,n){const r=256&n?ge(i,[ve(e[21])]):{};t.$set(r)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),r=!1},d(e){we(t,e)}}}function ts(e){let t,n,r,i,a,o=1+Number(e[4])+"",s=e[2].length+"";return{c(){t=S("Processing "),n=S(o),r=S("/"),i=S(s),a=S(" file. Please wait...")},m(e,o){_(e,t,o),_(e,n,o),_(e,r,o),_(e,i,o),_(e,a,o)},p(e,t){16&t&&o!==(o=1+Number(e[4])+"")&&P(n,o),4&t&&s!==(s=e[2].length+"")&&P(i,s)},d(e){e&&$(t),e&&$(n),e&&$(r),e&&$(i),e&&$(a)}}}function ns(t){let n;return{c(){n=S("Completed!")},m(e,t){_(e,n,t)},p:e,d(e){e&&$(n)}}}function rs(t){let n;return{c(){n=S("Loading Files...")},m(e,t){_(e,n,t)},p:e,d(e){e&&$(n)}}}function is(t){let n,r,i,a,s,l,c,u;return{c(){n=x("input"),r=E(),i=x("img"),s=E(),l=x("div"),l.textContent="Click to Select Movie",N(n,"display","none"),I(n,"type","file"),I(n,"accept",".mp4"),n.multiple=!0,I(n,"class","svelte-18sy7xy"),i.src!==(a="https://static.thenounproject.com/png/625182-200.png")&&I(i,"src","https://static.thenounproject.com/png/625182-200.png"),I(i,"alt",""),I(i,"class","svelte-18sy7xy"),I(l,"class","svelte-18sy7xy")},m(e,a){_(e,n,a),t[12](n),_(e,r,a),_(e,i,a),_(e,s,a),_(e,l,a),c||(u=[A(n,"change",t[9]),A(n,"change",t[11]),A(i,"click",t[13]),A(l,"click",t[14])],c=!0)},p:e,d(e){e&&$(n),t[12](null),e&&$(r),e&&$(i),e&&$(s),e&&$(l),c=!1,o(u)}}}function as(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,p,m,g=e[8],v=[];for(let t=0;t<g.length;t+=1)v[t]=es(Zo(e,g,t));const y=e=>de(v[e],1,1,(()=>{v[e]=null}));function b(e,t){return e[5]?ns:e[2].length>0?ts:void 0}let k=b(e),j=k&&k(e);function O(e,t){return e[0]?is:rs}let A=O(e),T=A(e);return{c(){t=x("div"),n=x("div"),r=x("div");for(let e=0;e<v.length;e+=1)v[e].c();i=E(),j&&j.c(),a=E(),o=x("div"),s=x("div"),l=S("Found "),c=S(e[6]),u=S(" charms."),h=E(),f=x("textarea"),d=E(),p=x("div"),T.c(),I(r,"id","status"),I(r,"class","svelte-18sy7xy"),I(s,"class","svelte-18sy7xy"),I(f,"placeholder",",2,,1,1,0,0"),f.value=e[7],I(f,"class","svelte-18sy7xy"),I(o,"id","result"),I(o,"class","svelte-18sy7xy"),I(p,"id","upload"),I(p,"class","svelte-18sy7xy"),I(n,"id","scanner"),I(n,"class","svelte-18sy7xy"),I(t,"class","tab-content svelte-18sy7xy")},m(e,g){_(e,t,g),w(t,n),w(n,r);for(let e=0;e<v.length;e+=1)v[e].m(r,null);w(r,i),j&&j.m(r,null),w(n,a),w(n,o),w(o,s),w(s,l),w(s,c),w(s,u),w(o,h),w(o,f),w(n,d),w(n,p),T.m(p,null),m=!0},p(e,[t]){if(256&t){let n;for(g=e[8],n=0;n<g.length;n+=1){const a=Zo(e,g,n);v[n]?(v[n].p(a,t),fe(v[n],1)):(v[n]=es(a),v[n].c(),fe(v[n],1),v[n].m(r,i))}for(ue(),n=g.length;n<v.length;n+=1)y(n);he()}k===(k=b(e))&&j?j.p(e,t):(j&&j.d(1),j=k&&k(e),j&&(j.c(),j.m(r,null))),(!m||64&t)&&P(c,e[6]),(!m||128&t)&&(f.value=e[7]),A===(A=O(e))&&T?T.p(e,t):(T.d(1),T=A(e),T&&(T.c(),T.m(p,null)))},i(e){if(!m){for(let e=0;e<g.length;e+=1)fe(v[e]);m=!0}},o(e){v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)de(v[e]);m=!1},d(e){e&&$(t),C(v,e),j&&j.d(),T.d()}}}function os(t,n,r){let i,a,o=e,s=()=>(o(),o=c(y,(e=>r(8,i=e))),y);u(t,ma,(e=>r(17,a=e))),t.$$.on_destroy.push((()=>o()));const l=(navigator.hardwareConcurrency||8)/2;let h,f,d,{charmScanner:p}=n,{fInitialized:g}=n,v=[],y=Ui([]);s();let b=-1,k=!1,w=0,_="";function $(){++f===l&&(d=!0)}return t.$$set=e=>{"charmScanner"in e&&r(10,p=e.charmScanner),"fInitialized"in e&&r(0,g=e.fInitialized)},[g,h,v,y,b,k,w,_,i,async function(e){const t=e.target.files;if(null==t)return;r(5,k=!1);for(let e=0;e<t.length;e++){r(4,b=e);const n=t[e];console.log(n.name,Date()),s(r(3,y=Ui([]))),f=0,d=!1;const o=new FileReader;o.readAsDataURL(n),await new Promise((e=>{o.onload=e}));for(let e=0;e<l;e++){const e=i.length;m(y,i[e]={index:e,videoName:n.name,videoData:o.result,charmScanner:p,nSplits:l,onFinish:$},i)}await new Promise((e=>requestAnimationFrame(e))),await new Promise((e=>{setInterval((()=>{r(6,w=p.countCharms()),r(7,_=p.exportAsText()),d&&e()}),1e3)}));const c=p.getCharms();await a.registerCharms(c)}const n=p.getCharms();console.log(JSON.stringify(n)),r(5,k=!0)},p,function(){v=this.files,r(2,v)},function(e){X[e?"unshift":"push"]((()=>{h=e,r(1,h)}))},()=>{h.click()},()=>{h.click}]}const ss=[{tabTitle:"",component:class extends Ce{constructor(e){super(),$e(this,e,os,as,l,{charmScanner:10,fInitialized:0})}},iconData:["M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"]},{tabTitle:"",component:class extends Ce{constructor(e){super(),$e(this,e,Go,Uo,l,{})}},iconData:["M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"]},{tabTitle:"",component:class extends Ce{constructor(e){super(),$e(this,e,qo,Mo,l,{})}},iconData:["M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"]},{tabTitle:"",component:class extends Ce{constructor(e){super(),$e(this,e,va,ga,l,{})}},iconData:["M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"]},{tabTitle:"",component:class extends Ce{constructor(e){super(),$e(this,e,null,pa,l,{})}},iconData:["M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z","m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"]}];function ls(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function cs(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function us(e,t,n){const r=e.slice();return r[11]=t[n],r}function hs(t){let n;return{c(){n=j("path"),I(n,"d",t[11])},m(e,t){_(e,n,t)},p:e,d(e){e&&$(n)}}}function fs(e){let t,n,r,i,a,o,s,l,c,u,h=e[7].tabTitle+"",f=e[7].iconData||[],d=[];for(let t=0;t<f.length;t+=1)d[t]=hs(us(e,f,t));return{c(){t=x("li"),n=x("button"),r=j("svg");for(let e=0;e<d.length;e+=1)d[e].c();i=E(),a=x("span"),o=S(h),l=E(),I(r,"xmlns","http://www.w3.org/2000/svg"),I(r,"width","16"),I(r,"height","19"),I(r,"fill","currentColor"),N(a,"display",e[0]?"inline":"none"),I(a,"class","svelte-nk63sn"),I(n,"id",e[9]),I(n,"class",s=p(e[3]==e[9]?"active navigation-link":"navigation-link")+" svelte-nk63sn"),I(n,"role","tab"),I(t,"class","navigation-item svelte-nk63sn")},m(s,h){_(s,t,h),w(t,n),w(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);w(n,i),w(n,a),w(a,o),w(t,l),c||(u=A(n,"click",e[5]),c=!0)},p(e,t){if(0&t){let n;for(f=e[7].iconData||[],n=0;n<f.length;n+=1){const i=us(e,f,n);d[n]?d[n].p(i,t):(d[n]=hs(i),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}1&t&&N(a,"display",e[0]?"inline":"none"),8&t&&s!==(s=p(e[3]==e[9]?"active navigation-link":"navigation-link")+" svelte-nk63sn")&&I(n,"class",s)},d(e){e&&$(t),C(d,e),c=!1,u()}}}function ds(e){let t,r,i,a,o;const s=[{fInitialized:e[1],charmScanner:e[2]},{onActivate:e[4][e[9]]}];var l=ss[e[9]].component;function c(e){let t={};for(let e=0;e<s.length;e+=1)t=n(t,s[e]);return{props:t}}return l&&(r=new l(c())),{c(){t=x("div"),r&&be(r.$$.fragment),i=E(),I(t,"class",a="h-100 "+(e[3]==e[9]?"d-block":"d-none"))},m(e,n){_(e,t,n),r&&ke(r,t,null),w(t,i),o=!0},p(e,n){const u=22&n?ge(s,[6&n&&{fInitialized:e[1],charmScanner:e[2]},16&n&&{onActivate:e[4][e[9]]}]):{};if(l!==(l=ss[e[9]].component)){if(r){ue();const e=r;de(e.$$.fragment,1,0,(()=>{we(e,1)})),he()}l?(r=new l(c()),be(r.$$.fragment),fe(r.$$.fragment,1),ke(r,t,i)):r=null}else l&&r.$set(u);(!o||8&n&&a!==(a="h-100 "+(e[3]==e[9]?"d-block":"d-none")))&&I(t,"class",a)},i(e){o||(r&&fe(r.$$.fragment,e),o=!0)},o(e){r&&de(r.$$.fragment,e),o=!1},d(e){e&&$(t),r&&we(r)}}}function ps(e){let t,n,r,i,a,o=ss,s=[];for(let t=0;t<o.length;t+=1)s[t]=fs(cs(e,o,t));let l=ss,c=[];for(let t=0;t<l.length;t+=1)c[t]=ds(ls(e,l,t));const u=e=>de(c[e],1,1,(()=>{c[e]=null}));return{c(){t=x("div"),n=x("ul");for(let e=0;e<s.length;e+=1)s[e].c();r=E(),i=x("div");for(let e=0;e<c.length;e+=1)c[e].c();I(n,"class","navigation svelte-nk63sn"),N(n,"width",e[0]?"14rem":"3.2rem"),I(i,"class","navigation-content svelte-nk63sn"),I(t,"id","container"),I(t,"class","svelte-nk63sn")},m(e,o){_(e,t,o),w(t,n);for(let e=0;e<s.length;e+=1)s[e].m(n,null);w(t,r),w(t,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);a=!0},p(e,[t]){if(41&t){let r;for(o=ss,r=0;r<o.length;r+=1){const i=cs(e,o,r);s[r]?s[r].p(i,t):(s[r]=fs(i),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}if((!a||1&t)&&N(n,"width",e[0]?"14rem":"3.2rem"),30&t){let n;for(l=ss,n=0;n<l.length;n+=1){const r=ls(e,l,n);c[n]?(c[n].p(r,t),fe(c[n],1)):(c[n]=ds(r),c[n].c(),fe(c[n],1),c[n].m(i,null))}for(ue(),n=l.length;n<c.length;n+=1)u(n);he()}},i(e){if(!a){for(let e=0;e<l.length;e+=1)fe(c[e]);a=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)de(c[e]);a=!1},d(e){e&&$(t),C(s,e),C(c,e)}}}function ms(e,t,n){let{isNavigationOpen:r}=t,{fInitialized:i}=t,{charmScanner:a}=t,o=4,s={};return e.$$set=e=>{"isNavigationOpen"in e&&n(0,r=e.isNavigationOpen),"fInitialized"in e&&n(1,i=e.fInitialized),"charmScanner"in e&&n(2,a=e.charmScanner)},[r,i,a,o,s,function(e){n(3,o=e.srcElement.closest("button").id),s[o]&&s[o]()}]}class gs extends Ce{constructor(e){super(),$e(this,e,ms,ps,l,{isNavigationOpen:0,fInitialized:1,charmScanner:2})}}function vs(e){let t,r,i,a,o,s,l,c,u,h,f,d;function p(t){e[3](t)}let m={};void 0!==e[0]&&(m.isOpen=e[0]),i=new bi({props:m}),X.push((()=>ye(i,"isOpen",p)));const g=[{isNavigationOpen:e[0],fInitialized:e[1],charmScanner:e[2]}];let v={};for(let e=0;e<g.length;e+=1)v=n(v,g[e]);return u=new gs({props:v}),{c(){t=x("main"),r=x("header"),be(i.$$.fragment),o=E(),s=x("h1"),s.textContent=`${ys}`,l=E(),c=x("div"),be(u.$$.fragment),h=E(),f=x("div"),f.textContent=`v${bs}`,I(s,"class","svelte-1ue2c4m"),I(r,"class","svelte-1ue2c4m"),I(c,"id","nav-wrapper"),I(c,"class","svelte-1ue2c4m"),I(f,"id","version"),I(f,"class","svelte-1ue2c4m"),I(t,"class","svelte-1ue2c4m")},m(e,n){_(e,t,n),w(t,r),ke(i,r,null),w(r,o),w(r,s),w(t,l),w(t,c),ke(u,c,null),w(t,h),w(t,f),d=!0},p(e,[t]){const n={};!a&&1&t&&(a=!0,n.isOpen=e[0],te((()=>a=!1))),i.$set(n);const r=7&t?ge(g,[{isNavigationOpen:e[0],fInitialized:e[1],charmScanner:e[2]}]):{};u.$set(r)},i(e){d||(fe(i.$$.fragment,e),fe(u.$$.fragment,e),d=!0)},o(e){de(i.$$.fragment,e),de(u.$$.fragment,e),d=!1},d(e){e&&$(t),we(i),we(u)}}}const ys="MHRise Charm Scanner",bs="0.5.4";function ks(e,t,n){let r;u(e,ma,(e=>n(4,r=e)));let i,a=!0,o=!1;return window.addEventListener("load",(async()=>{n(2,i=new gi),m(ma,r=new hi,r),await i.init(),n(1,o=!0)})),[a,o,i,function(e){a=e,n(0,a)}]}return new class extends Ce{constructor(e){super(),$e(this,e,ks,vs,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
