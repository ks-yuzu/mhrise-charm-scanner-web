var app=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(){}const s=e=>e;function o(e,t){for(const n in t)e[n]=t[n];return e}function a(e){return e()}function l(){return Object.create(null)}function c(e){e.forEach(a)}function u(e){return"function"==typeof e}function f(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function p(e,...t){if(null==e)return r;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function d(e,t,n){e.$$.on_destroy.push(p(t,n))}function h(e,t,n,r){if(e){const i=m(e,t,n,r);return e[0](i)}}function m(e,t,n,r){return e[1]&&r?o(n.ctx.slice(),e[1](r(t))):n.ctx}function _(e,t,n,r,i,s,o){const a=function(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}(t,r,i,s);if(a){const i=m(t,n,r,o);e.p(i,a)}}function g(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function y(e){return null==e?"":e}function b(e,t,n=t){return e.set(n),t}function w(e){return e&&u(e.destroy)?e.destroy:r}const q="undefined"!=typeof window;let k=q?()=>window.performance.now():()=>Date.now(),x=q?e=>requestAnimationFrame(e):r;const E=new Set;function $(e){E.forEach((t=>{t.c(e)||(E.delete(t),t.f())})),0!==E.size&&x($)}function S(e){let t;return 0===E.size&&x($),{promise:new Promise((n=>{E.add(t={c:e,f:n})})),abort(){E.delete(t)}}}function A(e,t){e.appendChild(t)}function I(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function O(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function P(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function F(e){return document.createTextNode(e)}function N(){return F(" ")}function j(){return F("")}function L(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function D(e){return function(t){return t.preventDefault(),e.call(this,t)}}function R(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:R(e,r,t[r])}function B(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function H(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function U(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function W(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function V(e,t,n){e.classList[n?"add":"remove"](t)}function Q(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class K{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=T(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)I(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const G=new Set;let J,Y=0;function X(e,t,n,r,i,s,o,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*s(e);c+=100*e+`%{${o(r,1-r)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=e.ownerDocument;G.add(p);const d=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(T("style")).sheet),h=p.__svelte_rules||(p.__svelte_rules={});h[f]||(h[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Y+=1,f}function Z(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Y-=i,Y||x((()=>{Y||(G.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),G.clear())})))}function ee(e){J=e}function te(){if(!J)throw new Error("Function called outside component initialization");return J}function ne(e){te().$$.on_mount.push(e)}function re(){const e=te();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=Q(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}const ie=[],se=[],oe=[],ae=[],le=Promise.resolve();let ce=!1;function ue(e){oe.push(e)}function fe(e){ae.push(e)}let pe=!1;const de=new Set;function he(){if(!pe){pe=!0;do{for(let e=0;e<ie.length;e+=1){const t=ie[e];ee(t),me(t.$$)}for(ee(null),ie.length=0;se.length;)se.pop()();for(let e=0;e<oe.length;e+=1){const t=oe[e];de.has(t)||(de.add(t),t())}oe.length=0}while(ie.length);for(;ae.length;)ae.pop()();ce=!1,pe=!1,de.clear()}}function me(e){if(null!==e.fragment){e.update(),c(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ue)}}let _e;function ge(e,t,n){e.dispatchEvent(Q(`${t?"intro":"outro"}${n}`))}const ye=new Set;let ve;function be(){ve={r:0,c:[],p:ve}}function we(){ve.r||c(ve.c),ve=ve.p}function qe(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function ke(e,t,n,r){if(e&&e.o){if(ye.has(e))return;ye.add(e),ve.c.push((()=>{ye.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const xe={duration:0};function Ee(e,t,n,i){let o=t(e,n),a=i?0:1,l=null,f=null,p=null;function d(){p&&Z(e,p)}function h(e,t){const n=e.b-a;return t*=Math.abs(n),{a:a,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(t){const{delay:n=0,duration:i=300,easing:u=s,tick:m=r,css:_}=o||xe,g={start:k()+n,b:t};t||(g.group=ve,ve.r+=1),l||f?f=g:(_&&(d(),p=X(e,a,t,i,n,u,_)),t&&m(0,1),l=h(g,i),ue((()=>ge(e,t,"start"))),S((t=>{if(f&&t>f.start&&(l=h(f,i),f=null,ge(e,l.b,"start"),_&&(d(),p=X(e,a,l.b,l.duration,0,u,o.css))),l)if(t>=l.end)m(a=l.b,1-a),ge(e,l.b,"end"),f||(l.b?d():--l.group.r||c(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;a=l.a+l.d*u(e/l.duration),m(a,1-a)}return!(!l&&!f)})))}return{run(e){u(o)?(_e||(_e=Promise.resolve(),_e.then((()=>{_e=null}))),_e).then((()=>{o=o(),m(e)})):m(e)},end(){d(),l=f=null}}}function $e(e,t){const n={},r={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const e in o)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[s]=a}else for(const e in o)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Se(e){return"object"==typeof e&&null!==e?e:{}}function Ae(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ie(e){e&&e.c()}function Ce(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:l}=e.$$;i&&i.m(t,n),r||ue((()=>{const t=s.map(a).filter(u);o?o.push(...t):c(t),e.$$.on_mount=[]})),l.forEach(ue)}function Oe(e,t){const n=e.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,t){-1===e.$$.dirty[0]&&(ie.push(e),ce||(ce=!0,le.then(he)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Pe(e,t,n,i,s,o,a=[-1]){const u=J;ee(e);const f=e.$$={fragment:null,ctx:null,props:o,update:r,not_equal:s,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:t.context||[]),callbacks:l(),dirty:a,skip_bound:!1};let p=!1;if(f.ctx=n?n(e,t.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&Te(e,t)),n})):[],f.update(),p=!0,c(f.before_update),f.fragment=!!i&&i(f.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);f.fragment&&f.fragment.l(e),e.forEach(C)}else f.fragment&&f.fragment.c();t.intro&&qe(e.$$.fragment),Ce(e,t.target,t.anchor,t.customElement),he()}ee(u)}class Fe{$destroy(){Oe(this,1),this.$destroy=r}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ne(e){let t,n,r,i,s,o;const a=e[5].default,l=h(a,e,e[4],null);return{c(){t=T("div"),n=T("div"),l&&l.c(),R(n,"class",r=y(e[0])+" svelte-1u332e1"),R(n,"style",e[1]),V(n,"svelte-lightbox-unselectable",e[2]),R(t,"class","clickable svelte-1u332e1")},m(r,a){I(r,t,a),A(t,n),l&&l.m(n,null),i=!0,s||(o=L(t,"click",e[6]),s=!0)},p(e,[t]){l&&l.p&&(!i||16&t)&&_(l,a,e,e[4],t,null,null),(!i||1&t&&r!==(r=y(e[0])+" svelte-1u332e1"))&&R(n,"class",r),(!i||2&t)&&R(n,"style",e[1]),5&t&&V(n,"svelte-lightbox-unselectable",e[2])},i(e){i||(qe(l,e),i=!0)},o(e){ke(l,e),i=!1},d(e){e&&C(t),l&&l.d(e),s=!1,o()}}}function je(e,t,n){let{$$slots:r={},$$scope:i}=t;const s=re();let{thumbnailClasses:o=""}=t,{thumbnailStyle:a=""}=t,{protect:l=!1}=t;return e.$$set=e=>{"thumbnailClasses"in e&&n(0,o=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,a=e.thumbnailStyle),"protect"in e&&n(2,l=e.protect),"$$scope"in e&&n(4,i=e.$$scope)},[o,a,l,s,i,r,()=>s("click")]}class Le extends Fe{constructor(e){super(),Pe(this,e,je,Ne,f,{thumbnailClasses:0,thumbnailStyle:1,protect:2})}}function De(e){const t=e-1;return t*t*t+1}function Re(e,{delay:t=0,duration:n=400,easing:r=s}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>"opacity: "+e*i}}function Me(e,{delay:t=0,duration:n=400,easing:r=De,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-o);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*i}px, ${(1-e)*s}px);\n\t\t\topacity: ${l-u*t}`}}function Be(e,{delay:t=0,duration:n=400,easing:r=De}={}){const i=getComputedStyle(e),s=+i.opacity,o=parseFloat(i.height),a=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),u=parseFloat(i.marginBottom),f=parseFloat(i.borderTopWidth),p=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};height: ${e*o}px;padding-top: ${e*a}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*f}px;border-bottom-width: ${e*p}px;`}}function ze(e){let t,n,i,s,o,a,l;return{c(){t=T("div"),n=T("button"),i=F("×"),R(n,"size",e[0]),R(n,"style",e[1]),R(n,"class",s=y(e[3])+" svelte-12yipzn"),R(t,"class",o=y("svelte-lightbox-header "+e[2])+" svelte-12yipzn")},m(r,s){I(r,t,s),A(t,n),A(n,i),a||(l=L(n,"click",e[5]),a=!0)},p(e,[r]){1&r&&R(n,"size",e[0]),2&r&&R(n,"style",e[1]),8&r&&s!==(s=y(e[3])+" svelte-12yipzn")&&R(n,"class",s),4&r&&o!==(o=y("svelte-lightbox-header "+e[2])+" svelte-12yipzn")&&R(t,"class",o)},i:r,o:r,d(e){e&&C(t),a=!1,l()}}}function He(e,t,n){const r=re();let{size:i="xs"}=t,{style:s=""}=t,{headerClasses:o=""}=t,{buttonClasses:a=""}=t;return e.$$set=e=>{"size"in e&&n(0,i=e.size),"style"in e&&n(1,s=e.style),"headerClasses"in e&&n(2,o=e.headerClasses),"buttonClasses"in e&&n(3,a=e.buttonClasses)},[i,s,o,a,r,()=>r("close")]}class Ue extends Fe{constructor(e){super(),Pe(this,e,He,ze,f,{size:0,style:1,headerClasses:2,buttonClasses:3})}}function We(e){let t,n;const r=e[4].default,i=h(r,e,e[3],null);return{c(){t=T("div"),i&&i.c(),R(t,"class","svelte-x9zrc7"),V(t,"svelte-lightbox-image-portrait",e[2])},m(e,r){I(e,t,r),i&&i.m(t,null),n=!0},p(e,s){i&&i.p&&(!n||8&s)&&_(i,r,e,e[3],s,null,null),4&s&&V(t,"svelte-lightbox-image-portrait",e[2])},i(e){n||(qe(i,e),n=!0)},o(e){ke(i,e),n=!1},d(e){e&&C(t),i&&i.d(e)}}}function Ve(e){let t,n,i,s,o;return{c(){t=T("img"),t.src!==(n=e[0].src)&&R(t,"src",n),R(t,"alt",i=e[0].alt),R(t,"style",s=e[0].style),R(t,"class",o=e[0].class)},m(e,n){I(e,t,n)},p(e,r){1&r&&t.src!==(n=e[0].src)&&R(t,"src",n),1&r&&i!==(i=e[0].alt)&&R(t,"alt",i),1&r&&s!==(s=e[0].style)&&R(t,"style",s),1&r&&o!==(o=e[0].class)&&R(t,"class",o)},i:r,o:r,d(e){e&&C(t)}}}function Qe(e){let t,n,r,i;const s=[Ve,We],o=[];function a(e,t){return e[0].src?0:1}return n=a(e),r=o[n]=s[n](e),{c(){t=T("div"),r.c(),R(t,"class","svelte-lightbox-body svelte-x9zrc7"),V(t,"svelte-lightbox-unselectable",e[1])},m(e,r){I(e,t,r),o[n].m(t,null),i=!0},p(e,[i]){let l=n;n=a(e),n===l?o[n].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),r=o[n],r?r.p(e,i):(r=o[n]=s[n](e),r.c()),qe(r,1),r.m(t,null)),2&i&&V(t,"svelte-lightbox-unselectable",e[1])},i(e){i||(qe(r),i=!0)},o(e){ke(r),i=!1},d(e){e&&C(t),o[n].d()}}}function Ke(e,t,n){let{$$slots:r={},$$scope:i}=t,{image:s={}}=t,{protect:o=!1}=t,{portrait:a=!1}=t;return e.$$set=e=>{"image"in e&&n(0,s=e.image),"protect"in e&&n(1,o=e.protect),"portrait"in e&&n(2,a=e.portrait),"$$scope"in e&&n(3,i=e.$$scope)},[s,o,a,i,r]}class Ge extends Fe{constructor(e){super(),Pe(this,e,Ke,Qe,f,{image:0,protect:1,portrait:2})}}function Je(e){let t,n,r,i,s,o=e[3]+1+"";return{c(){t=T("p"),n=F("Image "),r=F(o),i=F(" of "),s=F(e[2])},m(e,o){I(e,t,o),A(t,n),A(t,r),A(t,i),A(t,s)},p(e,t){8&t&&o!==(o=e[3]+1+"")&&B(r,o),4&t&&B(s,e[2])},d(e){e&&C(t)}}}function Ye(e){let t,n,i,s,o,a,l=e[2]&&Je(e);return{c(){t=T("div"),n=T("h2"),i=N(),s=T("h5"),o=N(),l&&l.c(),R(t,"class",a=y("svelte-lightbox-footer "+e[4])+" svelte-1u8lh7d"),R(t,"style",e[5])},m(r,a){I(r,t,a),A(t,n),n.innerHTML=e[0],A(t,i),A(t,s),s.innerHTML=e[1],A(t,o),l&&l.m(t,null)},p(e,[r]){1&r&&(n.innerHTML=e[0]),2&r&&(s.innerHTML=e[1]),e[2]?l?l.p(e,r):(l=Je(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),16&r&&a!==(a=y("svelte-lightbox-footer "+e[4])+" svelte-1u8lh7d")&&R(t,"class",a),32&r&&R(t,"style",e[5])},i:r,o:r,d(e){e&&C(t),l&&l.d()}}}function Xe(e,t,n){let{title:r=""}=t,{description:i=""}=t,{galleryLength:s}=t,{activeImage:o}=t,{classes:a=""}=t,{style:l=""}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"description"in e&&n(1,i=e.description),"galleryLength"in e&&n(2,s=e.galleryLength),"activeImage"in e&&n(3,o=e.activeImage),"classes"in e&&n(4,a=e.classes),"style"in e&&n(5,l=e.style)},[r,i,s,o,a,l]}class Ze extends Fe{constructor(e){super(),Pe(this,e,Xe,Ye,f,{title:0,description:1,galleryLength:2,activeImage:3,classes:4,style:5})}}function et(e){let t;const n=e[14].default,r=h(n,e,e[25],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||33554432&i)&&_(r,n,e,e[25],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function tt(e){let t,n,r,i,s,o,a,l,u,f,p,d,h,m,_,g,v,b,w,q;function k(t){e[16](t)}function x(t){e[17](t)}function E(t){e[18](t)}i=new Ue({}),i.$on("close",e[15]);let $={$$slots:{default:[et]},$$scope:{ctx:e}};function S(t){e[19](t)}function O(t){e[20](t)}function P(t){e[21](t)}function F(t){e[22](t)}void 0!==e[2]&&($.image=e[2]),void 0!==e[3]&&($.protect=e[3]),void 0!==e[4]&&($.portrait=e[4]),o=new Ge({props:$}),se.push((()=>Ae(o,"image",k))),se.push((()=>Ae(o,"protect",x))),se.push((()=>Ae(o,"portrait",E)));let j={};return void 0!==e[7]&&(j.title=e[7]),void 0!==e[8]&&(j.description=e[8]),void 0!==e[0].length&&(j.galleryLength=e[0].length),void 0!==e[1]&&(j.activeImage=e[1]),p=new Ze({props:j}),se.push((()=>Ae(p,"title",S))),se.push((()=>Ae(p,"description",O))),se.push((()=>Ae(p,"galleryLength",P))),se.push((()=>Ae(p,"activeImage",F))),{c(){t=T("div"),n=T("div"),r=T("div"),Ie(i.$$.fragment),s=N(),Ie(o.$$.fragment),f=N(),Ie(p.$$.fragment),R(r,"class","svelte-lightbox svelte-tpon2m"),R(n,"class",g=y(e[9])+" svelte-tpon2m"),R(n,"style",e[5]),R(t,"class","cover clearfix svelte-tpon2m")},m(a,l){I(a,t,l),A(t,n),A(n,r),Ce(i,r,null),A(r,s),Ce(o,r,null),A(r,f),Ce(p,r,null),b=!0,w||(q=[L(r,"click",e[23]),L(n,"click",e[24])],w=!0)},p(t,[r]){e=t;const i={};33554432&r&&(i.$$scope={dirty:r,ctx:e}),!a&&4&r&&(a=!0,i.image=e[2],fe((()=>a=!1))),!l&&8&r&&(l=!0,i.protect=e[3],fe((()=>l=!1))),!u&&16&r&&(u=!0,i.portrait=e[4],fe((()=>u=!1))),o.$set(i);const s={};!d&&128&r&&(d=!0,s.title=e[7],fe((()=>d=!1))),!h&&256&r&&(h=!0,s.description=e[8],fe((()=>h=!1))),!m&&1&r&&(m=!0,s.galleryLength=e[0].length,fe((()=>m=!1))),!_&&2&r&&(_=!0,s.activeImage=e[1],fe((()=>_=!1))),p.$set(s),(!b||512&r&&g!==(g=y(e[9])+" svelte-tpon2m"))&&R(n,"class",g),(!b||32&r)&&R(n,"style",e[5])},i(t){b||(qe(i.$$.fragment,t),qe(o.$$.fragment,t),qe(p.$$.fragment,t),ue((()=>{v||(v=Ee(n,Re,{duration:e[6]},!0)),v.run(1)})),b=!0)},o(t){ke(i.$$.fragment,t),ke(o.$$.fragment,t),ke(p.$$.fragment,t),v||(v=Ee(n,Re,{duration:e[6]},!1)),v.run(0),b=!1},d(e){e&&C(t),Oe(i),Oe(o),Oe(p),e&&v&&v.end(),w=!1,c(q)}}}function nt(e,t,n){let r,{$$slots:i={},$$scope:s}=t;const o=re();let a,l,{modalClasses:c=""}=t,{modalStyle:u=""}=t,{transitionDuration:f=500}=t,{image:p={}}=t,{protect:d=!1}=t,{portrait:h=!1}=t,{title:m=""}=t,{description:_=""}=t,{gallery:g}=t,{activeImage:y}=t;return e.$$set=e=>{"modalClasses"in e&&n(11,c=e.modalClasses),"modalStyle"in e&&n(5,u=e.modalStyle),"transitionDuration"in e&&n(6,f=e.transitionDuration),"image"in e&&n(2,p=e.image),"protect"in e&&n(3,d=e.protect),"portrait"in e&&n(4,h=e.portrait),"title"in e&&n(12,m=e.title),"description"in e&&n(13,_=e.description),"gallery"in e&&n(0,g=e.gallery),"activeImage"in e&&n(1,y=e.activeImage),"$$scope"in e&&n(25,s=e.$$scope)},e.$$.update=()=>{2048&e.$$.dirty&&n(9,r=`${c} svelte-lightbox-overlay clearfix`),4096&e.$$.dirty&&n(7,a=m),8192&e.$$.dirty&&n(8,l=_),12291&e.$$.dirty&&(!g||m||_||(n(7,a=g[y].title),n(8,l=g[y].description)))},[g,y,p,d,h,u,f,a,l,r,o,c,m,_,i,()=>o("close"),function(e){p=e,n(2,p)},function(e){d=e,n(3,d)},function(e){h=e,n(4,h)},function(e){a=e,n(7,a),n(12,m),n(0,g),n(13,_),n(1,y)},function(e){l=e,n(8,l),n(13,_),n(0,g),n(12,m),n(1,y)},function(t){e.$$.not_equal(g.length,t)&&(g.length=t,n(0,g))},function(e){y=e,n(1,y)},()=>o("modalClick"),()=>o("topModalClick"),s]}class rt extends Fe{constructor(e){super(),Pe(this,e,nt,tt,f,{modalClasses:11,modalStyle:5,transitionDuration:6,image:2,protect:3,portrait:4,title:12,description:13,gallery:0,activeImage:1})}}function it(e){let t,n,r,i,s,o,a,l,u,f,p,d,m,g,y,v,b;const w=e[6].default,q=h(w,e,e[5],null);return{c(){t=T("div"),n=T("button"),r=P("svg"),i=P("g"),s=P("path"),a=N(),l=T("div"),q&&q.c(),u=N(),f=T("button"),p=P("svg"),d=P("g"),m=P("path"),R(s,"class","arrow svelte-wwe8hv"),R(s,"d","M8.7,7.22,4.59,11.33a1,1,0,0,0,0,1.41l4,4"),R(r,"viewBox","0 0 24 24"),R(r,"xmlns","http://www.w3.org/2000/svg"),R(r,"class","svelte-wwe8hv"),n.disabled=o=0===e[0],R(n,"class","previous-button svelte-wwe8hv"),R(l,"class","slot svelte-wwe8hv"),R(m,"class","arrow svelte-wwe8hv"),R(m,"d","M15.3,16.78l4.11-4.11a1,1,0,0,0,0-1.41l-4-4"),R(p,"viewBox","0 0 24 24"),R(p,"xmlns","http://www.w3.org/2000/svg"),R(p,"class","svelte-wwe8hv"),f.disabled=g=e[0]===e[2]?.length-1,R(f,"class","next-button svelte-wwe8hv"),R(t,"class","wrapper svelte-wwe8hv")},m(o,c){I(o,t,c),A(t,n),A(n,r),A(r,i),A(i,s),A(t,a),A(t,l),q&&q.m(l,null),e[7](l),A(t,u),A(t,f),A(f,p),A(p,d),A(d,m),y=!0,v||(b=[L(n,"click",e[3]),L(f,"click",e[4])],v=!0)},p(e,[t]){(!y||1&t&&o!==(o=0===e[0]))&&(n.disabled=o),q&&q.p&&(!y||32&t)&&_(q,w,e,e[5],t,null,null),(!y||5&t&&g!==(g=e[0]===e[2]?.length-1))&&(f.disabled=g)},i(e){y||(qe(q,e),y=!0)},o(e){ke(q,e),y=!1},d(n){n&&C(t),q&&q.d(n),e[7](null),v=!1,c(b)}}}function st(e,t,n){let r,i,{$$slots:s={},$$scope:o}=t,{activeImage:a=0}=t;return e.$$set=e=>{"activeImage"in e&&n(0,a=e.activeImage),"$$scope"in e&&n(5,o=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(2,i=r?.children),5&e.$$.dirty&&(console.log(typeof i),i&&a<i.length?(Object.values(i).forEach((e=>(e.hidden=!0,e))),n(2,i[a].hidden=!1,i)):i&&a>=i.length&&console.error("LightboxGallery: Selected image doesn't exist, invalid activeImage"))},[a,r,i,()=>{n(0,a--,a)},()=>{n(0,a++,a)},o,s,function(e){se[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class ot extends Fe{constructor(e){super(),Pe(this,e,st,it,f,{activeImage:0})}}const at=[];function lt(e,t=r){let n;const i=[];function s(t){if(f(e,t)&&(e=t,n)){const t=!at.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),at.push(n,e)}if(t){for(let e=0;e<at.length;e+=2)at[e][0](at[e+1]);at.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a=r){const l=[o,a];return i.push(l),1===i.length&&(n=t(s)||r),o(e),()=>{const e=i.indexOf(l);-1!==e&&i.splice(e,1),0===i.length&&(n(),n=null)}}}}const ct=e=>({}),ut=e=>({}),ft=e=>({}),pt=e=>({}),dt=e=>({}),ht=e=>({});function mt(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&_(r,n,e,e[32],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function _t(e){let t;const n=e[17].thumbnail,r=h(n,e,e[32],ht);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&_(r,n,e,e[32],i,dt,ht)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function gt(e){let t,n,r,i;const s=[_t,mt],o=[];function a(e,t){return e[12]||e[5]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){o[t].m(e,n),I(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?o[t].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),qe(n,1),n.m(r.parentNode,r))},i(e){i||(qe(n),i=!0)},o(e){ke(n),i=!1},d(e){o[t].d(e),e&&C(r)}}}function yt(e){let t,n,r,i,s,o,a,l,c,u,f,p;function d(t){e[22](t)}function h(t){e[23](t)}function m(t){e[24](t)}function _(t){e[25](t)}function g(t){e[26](t)}function y(t){e[27](t)}function v(t){e[28](t)}function b(t){e[29](t)}function w(t){e[30](t)}function q(t){e[31](t)}let k={$$slots:{default:[kt]},$$scope:{ctx:e}};return void 0!==e[2]&&(k.modalClasses=e[2]),void 0!==e[3]&&(k.modalStyle=e[3]),void 0!==e[8]&&(k.transitionDuration=e[8]),void 0!==e[10]&&(k.image=e[10]),void 0!==e[9]&&(k.protect=e[9]),void 0!==e[11]&&(k.portrait=e[11]),void 0!==e[6]&&(k.title=e[6]),void 0!==e[7]&&(k.description=e[7]),void 0!==e[5]&&(k.gallery=e[5]),void 0!==e[4]&&(k.activeImage=e[4]),t=new rt({props:k}),se.push((()=>Ae(t,"modalClasses",d))),se.push((()=>Ae(t,"modalStyle",h))),se.push((()=>Ae(t,"transitionDuration",m))),se.push((()=>Ae(t,"image",_))),se.push((()=>Ae(t,"protect",g))),se.push((()=>Ae(t,"portrait",y))),se.push((()=>Ae(t,"title",v))),se.push((()=>Ae(t,"description",b))),se.push((()=>Ae(t,"gallery",w))),se.push((()=>Ae(t,"activeImage",q))),t.$on("close",e[14]),t.$on("topModalClick",e[14]),t.$on("modalClick",e[14]),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),p=!0},p(e,p){const d={};4144&p[0]|2&p[1]&&(d.$$scope={dirty:p,ctx:e}),!n&&4&p[0]&&(n=!0,d.modalClasses=e[2],fe((()=>n=!1))),!r&&8&p[0]&&(r=!0,d.modalStyle=e[3],fe((()=>r=!1))),!i&&256&p[0]&&(i=!0,d.transitionDuration=e[8],fe((()=>i=!1))),!s&&1024&p[0]&&(s=!0,d.image=e[10],fe((()=>s=!1))),!o&&512&p[0]&&(o=!0,d.protect=e[9],fe((()=>o=!1))),!a&&2048&p[0]&&(a=!0,d.portrait=e[11],fe((()=>a=!1))),!l&&64&p[0]&&(l=!0,d.title=e[6],fe((()=>l=!1))),!c&&128&p[0]&&(c=!0,d.description=e[7],fe((()=>c=!1))),!u&&32&p[0]&&(u=!0,d.gallery=e[5],fe((()=>u=!1))),!f&&16&p[0]&&(f=!0,d.activeImage=e[4],fe((()=>f=!1))),t.$set(d)},i(e){p||(qe(t.$$.fragment,e),p=!0)},o(e){ke(t.$$.fragment,e),p=!1},d(e){Oe(t,e)}}}function vt(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&_(r,n,e,e[32],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function bt(e){let t,n,r;function i(t){e[21](t)}let s={$$slots:{default:[qt]},$$scope:{ctx:e}};return void 0!==e[4]&&(s.activeImage=e[4]),t=new ot({props:s}),se.push((()=>Ae(t,"activeImage",i))),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),r=!0},p(e,r){const i={};2&r[1]&&(i.$$scope={dirty:r,ctx:e}),!n&&16&r[0]&&(n=!0,i.activeImage=e[4],fe((()=>n=!1))),t.$set(i)},i(e){r||(qe(t.$$.fragment,e),r=!0)},o(e){ke(t.$$.fragment,e),r=!1},d(e){Oe(t,e)}}}function wt(e){let t;const n=e[17].image,r=h(n,e,e[32],pt);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&_(r,n,e,e[32],i,ft,pt)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function qt(e){let t,n;const r=e[17].thumbnail,i=h(r,e,e[32],ut),s=e[17].default,o=h(s,e,e[32],null);return{c(){i&&i.c(),t=N(),o&&o.c()},m(e,r){i&&i.m(e,r),I(e,t,r),o&&o.m(e,r),n=!0},p(e,t){i&&i.p&&(!n||2&t[1])&&_(i,r,e,e[32],t,ct,ut),o&&o.p&&(!n||2&t[1])&&_(o,s,e,e[32],t,null,null)},i(e){n||(qe(i,e),qe(o,e),n=!0)},o(e){ke(i,e),ke(o,e),n=!1},d(e){i&&i.d(e),e&&C(t),o&&o.d(e)}}}function kt(e){let t,n,r,i;const s=[wt,bt,vt],o=[];function a(e,t){return e[12]?0:e[5]?1:2}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){o[t].m(e,n),I(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?o[t].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),qe(n,1),n.m(r.parentNode,r))},i(e){i||(qe(n),i=!0)},o(e){ke(n),i=!1},d(e){o[t].d(e),e&&C(r)}}}function xt(e){let t,n,r,i,s,o,a,l,c;function u(t){e[18](t)}function f(t){e[19](t)}function p(t){e[20](t)}let d={$$slots:{default:[gt]},$$scope:{ctx:e}};void 0!==e[0]&&(d.thumbnailClasses=e[0]),void 0!==e[1]&&(d.thumbnailStyle=e[1]),void 0!==e[9]&&(d.protect=e[9]),t=new Le({props:d}),se.push((()=>Ae(t,"thumbnailClasses",u))),se.push((()=>Ae(t,"thumbnailStyle",f))),se.push((()=>Ae(t,"protect",p))),t.$on("click",e[14]);let h=e[13]&&yt(e);return{c(){Ie(t.$$.fragment),s=N(),h&&h.c(),o=j()},m(n,r){Ce(t,n,r),I(n,s,r),h&&h.m(n,r),I(n,o,r),a=!0,l||(c=L(window,"keydown",e[15]),l=!0)},p(e,s){const a={};4128&s[0]|2&s[1]&&(a.$$scope={dirty:s,ctx:e}),!n&&1&s[0]&&(n=!0,a.thumbnailClasses=e[0],fe((()=>n=!1))),!r&&2&s[0]&&(r=!0,a.thumbnailStyle=e[1],fe((()=>r=!1))),!i&&512&s[0]&&(i=!0,a.protect=e[9],fe((()=>i=!1))),t.$set(a),e[13]?h?(h.p(e,s),8192&s[0]&&qe(h,1)):(h=yt(e),h.c(),qe(h,1),h.m(o.parentNode,o)):h&&(be(),ke(h,1,1,(()=>{h=null})),we())},i(e){a||(qe(t.$$.fragment,e),qe(h),a=!0)},o(e){ke(t.$$.fragment,e),ke(h),a=!1},d(e){Oe(t,e),e&&C(s),h&&h.d(e),e&&C(o),l=!1,c()}}}function Et(e,t,n){let{$$slots:r={},$$scope:i}=t,{thumbnailClasses:s=""}=t,{thumbnailStyle:o=""}=t,{modalClasses:a=""}=t,{modalStyle:l=""}=t,{activeImage:c=0}=t,{gallery:u=!1}=t,{title:f=""}=t,{description:p=""}=t,{transitionDuration:d=500}=t,{protect:h=!1}=t,{image:m={}}=t,{portrait:_=!1}=t,{noScroll:g=!0}=t,{thumbnail:y=!1}=t,v=!1;let b=()=>{};ne((()=>{let e=document.body.style.overflow;b=()=>{document.body.style.overflow=v?"hidden":e}}));return e.$$set=e=>{"thumbnailClasses"in e&&n(0,s=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,o=e.thumbnailStyle),"modalClasses"in e&&n(2,a=e.modalClasses),"modalStyle"in e&&n(3,l=e.modalStyle),"activeImage"in e&&n(4,c=e.activeImage),"gallery"in e&&n(5,u=e.gallery),"title"in e&&n(6,f=e.title),"description"in e&&n(7,p=e.description),"transitionDuration"in e&&n(8,d=e.transitionDuration),"protect"in e&&n(9,h=e.protect),"image"in e&&n(10,m=e.image),"portrait"in e&&n(11,_=e.portrait),"noScroll"in e&&n(16,g=e.noScroll),"thumbnail"in e&&n(12,y=e.thumbnail),"$$scope"in e&&n(32,i=e.$$scope)},[s,o,a,l,c,u,f,p,d,h,m,_,y,v,()=>{n(13,v=!v),g&&b()},e=>{"Escape"===e.code&&n(13,v=!1)},g,r,function(e){s=e,n(0,s)},function(e){o=e,n(1,o)},function(e){h=e,n(9,h)},function(e){c=e,n(4,c)},function(e){a=e,n(2,a)},function(e){l=e,n(3,l)},function(e){d=e,n(8,d)},function(e){m=e,n(10,m)},function(e){h=e,n(9,h)},function(e){_=e,n(11,_)},function(e){f=e,n(6,f)},function(e){p=e,n(7,p)},function(e){u=e,n(5,u)},function(e){c=e,n(4,c)},i]}class $t extends Fe{constructor(e){super(),Pe(this,e,Et,xt,f,{thumbnailClasses:0,thumbnailStyle:1,modalClasses:2,modalStyle:3,activeImage:4,gallery:5,title:6,description:7,transitionDuration:8,protect:9,image:10,portrait:11,noScroll:16,thumbnail:12},[-1,-1])}}function St(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-scanning.png")&&R(t,"src","img/screenshots/charm-scanning.png"),R(t,"alt","charm scanning")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function At(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-realtime-scan.png")&&R(t,"src","img/screenshots/charm-realtime-scan.png"),R(t,"alt","charm realtime scan")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function It(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-img.png")&&R(t,"src","img/screenshots/charm-img.png"),R(t,"alt","charm scrennshot")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function Ct(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-substitutes.png")&&R(t,"src","img/screenshots/charm-substitutes.png"),R(t,"alt","charm substitutes")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function Ot(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-search.png")&&R(t,"src","img/screenshots/charm-search.png"),R(t,"alt","charm search")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function Tt(e){let t,n;return{c(){t=T("img"),t.src!==(n="img/screenshots/charm-rinne-support.png")&&R(t,"src","img/screenshots/charm-rinne-support.png"),R(t,"alt","charm rinne support")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function Pt(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$,S,O,P,F,j,L,D,M,B,z,H,U,W,V,Q,K,G,J,Y,X,Z,ee,te,ne,re,ie,se,oe,ae,le,ce,ue;return f=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[St]},$$scope:{ctx:e}}}),b=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[At]},$$scope:{ctx:e}}}),P=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[It]},$$scope:{ctx:e}}}),j=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[Ct]},$$scope:{ctx:e}}}),V=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[Ot]},$$scope:{ctx:e}}}),te=new $t({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[Tt]},$$scope:{ctx:e}}}),{c(){t=T("div"),n=T("div"),n.innerHTML='<div class="card-body"><h2 class="svelte-1b50fsn">■ 概要</h2> \n      <p class="svelte-1b50fsn">モンスターハンターライズの護石用ツールです。<br/>\n        手持ちの護石を自動読み取りすることができます。<br/> \n        <br/>\n        読み取った護石は、スキャン時の画像や上位互換の護石が確認できます。<br/>\n        また、護石を性能検索することもできます。<br/></p></div>',r=N(),i=T("div"),s=T("div"),o=T("h2"),o.textContent="■ 護石スキャン",a=N(),l=T("p"),l.innerHTML='護石のスキルやスロットを自動読み取りします。<br/>\n        Nintendo Switch の 30 秒キャプチャ動画を用意するだけで、自動でデータ化できます。\n        (<a href="sample/input.mp4">動画例</a>)<br/> \n        <br/>\n        出力形式は、&lt;スキル1&gt;,&lt;スキル1Lv&gt;,&lt;スキル2&gt;,&lt;スキル2Lv&gt;,&lt;スロット1Lv&gt;,&lt;スロット2Lv&gt;,&lt;スロット3Lv&gt; です。<br/> \n        <a href="https://mhrise.wiki-db.com/sim/">泣きシミュ</a> さんでそのままインポートできます。<br/> \n        <br/>\n        キャプチャ動画の読み取りと、護石管理ページとの関係については、<a href="#h2-charm-manager">護石管理</a>を参照してください。<br/> \n        <br/>\n        (注意)<br/>\n        - <span style="color: red">装飾品をつけたままだと、装飾品分のスキルも読み込まれてしまいます。</span> (一括解除が有用です)<br/>\n        - キャプチャ動画のファイル名はデフォルトのまま使用することを推奨します。<br/>',c=N(),u=T("div"),Ie(f.$$.fragment),p=N(),d=T("div"),h=T("div"),m=T("h2"),m.textContent="■ 護石リアルタイムスキャン(β)",_=N(),g=T("p"),g.innerHTML='護石のスキルやスロットを自動読み取りします。<br/>\n        Nintendo Switch の映像をキャプチャボードで取り込み、リアルタイムにスキャンを行うことができます。<br/>\n        市販のキャプチャボードの購入が必要ですが、キャプチャ動画を用意する必要がなくなります。<br/> \n        <br/>\n        現時点では 720p での入力にのみ対応しています。<br/>\n        キャプチャがより高解像度の場合は、Switch 側の設定で 720p にするか、<br/>\n        OBS で 1280 x 720 に落として入力していただくことで使用できるかと思います。<br/> \n        <br/>\n        動画からのスキャン同様、読み込んだ護石は護石管理ページで確認したり、エクスポートすることができます。<br/> \n        <br/>\n        (注意)<br/> \n        <span style="color: red">装飾品をつけたままだと、装飾品分のスキルも読み込まれてしまいます。</span> (一括解除が有用です)<br/>',y=N(),v=T("div"),Ie(b.$$.fragment),w=N(),q=T("div"),k=T("div"),x=T("h2"),x.textContent="■ 護石管理",E=N(),$=T("p"),$.innerHTML='スキャンした護石の一覧を見ることができます。<br/>\n        護石データは蓄積され、次回、同じブラウザで開いた時にも保持されます。<br/> \n        <br/>\n        護石一覧における表示順は、動画読み込み順 → ゲーム内での表示順です。<br/>\n        動画を撮る際に、レア度ソートし、1 ページ目から順に撮ることで、輪廻錬金での表示順と同じになります。<br/> \n        <br/>\n        表中の &quot;合計スキルレベル&quot; は、<br/> \n        <span class="px-3 font-weight-bold">(スキルを装飾品換算した場合のスロットLv) × (スキルLv) + (スロットLv)</span><br/>\n        として計算しています。<br/> \n        <br/>\n        例: 納刀術2, ひるみ軽減1, スロット 3-1-0 の場合<br/> \n        <span class="px-3">2 × 2 + 1 × 1 + 3 + 1 + 0 = 9</span><br/> \n        <br/>\n        右端の画像ボタンを押すことで、スキャン時のスクリーンショットを確認できます。<br/>\n        右端に上向き矢印がある場合、上位互換の護石があります。クリックで該当の護石を確認することができます。<br/> \n        <br/>',S=N(),O=T("div"),Ie(P.$$.fragment),F=N(),Ie(j.$$.fragment),L=N(),D=T("div"),M=T("div"),B=T("h2"),B.textContent="■ 護石スペック検索",z=N(),H=T("p"),H.textContent="スキャンした護石を検索することができます。\n        装飾品でスキルが実現できる場合も検索対象に含まれます。",U=N(),W=T("div"),Ie(V.$$.fragment),Q=N(),K=T("div"),G=T("div"),J=T("h2"),J.textContent="■ 輪廻サポート(β)",Y=N(),X=T("p"),X.innerHTML='輪廻錬金を行う際に、表示中の護石の上位互換護石をリアルタイム表示する機能です。<br/>\n        カーソル位置のスキャンがうまくいかない場合、スライダーで感度を調整することができます。<br/> \n        <br/> \n        <span style="color: red">必ずしもスキャンが正しいとは限りません。<br/>\n          輪廻に使う時は記録されているスクリーンショットを確認するなど、十分な確認を行ってください。</span>',Z=N(),ee=T("div"),Ie(te.$$.fragment),ne=N(),re=T("div"),re.innerHTML='<div class="card-body"><h2 class="svelte-1b50fsn">■ 売却サポート(β)</h2> \n      <p class="svelte-1b50fsn">護石の売却を行う際に、表示中の護石の上位互換護石をリアルタイム表示する機能です。<br/>\n        カーソル位置のスキャンがうまくいかない場合、スライダーで感度を調整することができます。<br/> \n        <br/> \n        <span style="color: red">必ずしもスキャンが正しいとは限りません。<br/>\n          売却時は記録されているスクリーンショットを確認するなど、十分な確認を行ってください。</span></p></div>',ie=N(),se=T("div"),se.innerHTML='<div class="card-body"><h2 class="svelte-1b50fsn">■ 護石インポート・エクスポート</h2> \n      <p class="svelte-1b50fsn">スキャンした護石のエクスポート・インポートが行えます。<br/>\n        入出力形式は、護石スキャン時と同様です。<br/> \n        <br/> \n        <span style="color: red">上書きインポートを使用すると、保存している護石情報が全て失なわれます。<br/>\n          また、インポート・エクスポートでは画像を扱っていないので、エクスポート → 上書きインポートすると護石画像が見れなくなります。<br/></span></p></div>',oe=N(),ae=T("div"),ae.innerHTML='<div class="card-body"><h2 class="svelte-1b50fsn">■ FAQ</h2> \n      <h3 class="svelte-1b50fsn">Q. 護石管理のページで表示される護石がスキャンした数より少ないです</h3> \n      <p class="svelte-1b50fsn">A.<br/>\n        完全に同性能 (スキル、スキルレベル、スロット全て同じ) 護石は登録されない仕様になっています。<br/> \n        <br/>\n        これは、複数の動画を読み取った時に、同一の護石か別の同性能護石か判別する術がないためです。<br/>\n        「重複していると思って輪廻に使ったら、同じ護石が登録されているだけだった」<br/>\n        という事態を考慮し、安全重視の仕様にしています。<br/> \n        <br/>\n        スキャン時の出力は重複も含めて表示されるので、必要があればそちらをご利用下さい。</p></div>',le=N(),ce=T("div"),ce.innerHTML='<div class="card-body"><h2 class="svelte-1b50fsn">■ お問い合わせ</h2> \n      <p class="svelte-1b50fsn">不具合報告や要望は <a href="https://github.com/ks-yuzu/mhrise-charm-scanner-web/issues">GitHub issue</a> にてお願いします。</p></div>',R(n,"class","card border border-light shadow-sm svelte-1b50fsn"),R(o,"class","svelte-1b50fsn"),R(l,"class","svelte-1b50fsn"),R(u,"class","lightboxes svelte-1b50fsn"),R(s,"class","card-body"),R(i,"class","card border border-light shadow-sm svelte-1b50fsn"),R(m,"class","svelte-1b50fsn"),R(g,"class","svelte-1b50fsn"),R(v,"class","lightboxes svelte-1b50fsn"),R(h,"class","card-body"),R(d,"class","card border border-light shadow-sm svelte-1b50fsn"),R(x,"id","h2-charm-manager"),R(x,"class","svelte-1b50fsn"),R($,"class","svelte-1b50fsn"),R(O,"class","lightboxes svelte-1b50fsn"),R(k,"class","card-body"),R(q,"class","card border border-light shadow-sm svelte-1b50fsn"),R(B,"class","svelte-1b50fsn"),R(H,"class","svelte-1b50fsn"),R(W,"class","lightboxes svelte-1b50fsn"),R(M,"class","card-body"),R(D,"class","card border border-light shadow-sm svelte-1b50fsn"),R(J,"class","svelte-1b50fsn"),R(X,"class","svelte-1b50fsn"),R(ee,"class","lightboxes svelte-1b50fsn"),R(G,"class","card-body"),R(K,"class","card border border-light shadow-sm svelte-1b50fsn"),R(re,"class","card border border-light shadow-sm svelte-1b50fsn"),R(se,"class","card border border-light shadow-sm svelte-1b50fsn"),R(ae,"class","card border border-light shadow-sm svelte-1b50fsn"),R(ce,"class","card border border-light shadow-sm svelte-1b50fsn"),R(t,"id","description"),R(t,"class","svelte-1b50fsn")},m(e,C){I(e,t,C),A(t,n),A(t,r),A(t,i),A(i,s),A(s,o),A(s,a),A(s,l),A(s,c),A(s,u),Ce(f,u,null),A(t,p),A(t,d),A(d,h),A(h,m),A(h,_),A(h,g),A(h,y),A(h,v),Ce(b,v,null),A(t,w),A(t,q),A(q,k),A(k,x),A(k,E),A(k,$),A(k,S),A(k,O),Ce(P,O,null),A(O,F),Ce(j,O,null),A(t,L),A(t,D),A(D,M),A(M,B),A(M,z),A(M,H),A(M,U),A(M,W),Ce(V,W,null),A(t,Q),A(t,K),A(K,G),A(G,J),A(G,Y),A(G,X),A(G,Z),A(G,ee),Ce(te,ee,null),A(t,ne),A(t,re),A(t,ie),A(t,se),A(t,oe),A(t,ae),A(t,le),A(t,ce),ue=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),f.$set(n);const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),b.$set(r);const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),P.$set(i);const s={};1&t&&(s.$$scope={dirty:t,ctx:e}),j.$set(s);const o={};1&t&&(o.$$scope={dirty:t,ctx:e}),V.$set(o);const a={};1&t&&(a.$$scope={dirty:t,ctx:e}),te.$set(a)},i(e){ue||(qe(f.$$.fragment,e),qe(b.$$.fragment,e),qe(P.$$.fragment,e),qe(j.$$.fragment,e),qe(V.$$.fragment,e),qe(te.$$.fragment,e),ue=!0)},o(e){ke(f.$$.fragment,e),ke(b.$$.fragment,e),ke(P.$$.fragment,e),ke(j.$$.fragment,e),ke(V.$$.fragment,e),ke(te.$$.fragment,e),ue=!1},d(e){e&&C(t),Oe(f),Oe(b),Oe(P),Oe(j),Oe(V),Oe(te)}}}function Ft(e,t){let n=["children","$$scope","$$slots"].concat(t);const r={};for(const t of Object.keys(e))n.includes(t)||(r[t]=e[t]);return r}function Nt(e){document.body.style.paddingRight=e>0?`${e}px`:null}function jt(){const e=function(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],n=t?parseInt(t.style.paddingRight||0,10):0;window&&document.body.clientWidth<window.innerWidth&&Nt(n+e)}function Lt(e){var t,n,r="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Lt(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(n=Lt(t))&&(r&&(r+=" "),r+=n);else"boolean"==typeof e||e.call||(r&&(r+=" "),r+=e);return r}function Dt(){let e,t=0,n="";for(;t<arguments.length;)(e=Lt(arguments[t++]))&&(n&&(n+=" "),n+=e);return n}function Rt(e,t=[]){const n=["focus","blur","change","input","update","submit","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture",...t];function r(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}return e=>{const t=[];for(let i=0;i<n.length;i++)t.push(L(e,n[i],r));return{destroy:()=>{for(let e=0;e<t.length;e++)t[e]()}}}}function Mt(e){let t,n,r,i,s;const a=e[22].default,l=h(a,e,e[21],null),c=l||function(e){let t,n,r,i;const s=[Ut,Ht,zt],o=[];function a(e,t){return e[2]?0:e[1]?1:2}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){o[t].m(e,n),I(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?o[t].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),qe(n,1),n.m(r.parentNode,r))},i(e){i||(qe(n),i=!0)},o(e){ke(n),i=!1},d(e){o[t].d(e),e&&C(r)}}}(e);let u=[e[12],{type:e[4]},{class:e[9]},{disabled:e[3]},{value:e[6]},{"aria-label":n=e[8]||e[10]},{style:e[0]}],f={};for(let e=0;e<u.length;e+=1)f=o(f,u[e]);return{c(){t=T("button"),c&&c.c(),M(t,f)},m(n,o){I(n,t,o),c&&c.m(t,null),e[23](t),r=!0,i||(s=w(e[11].call(null,t)),i=!0)},p(e,i){l?l.p&&(!r||2097152&i)&&_(l,a,e,e[21],i,null,null):c&&c.p&&2097158&i&&c.p(e,i),M(t,f=$e(u,[e[12],(!r||16&i)&&{type:e[4]},(!r||512&i)&&{class:e[9]},(!r||8&i)&&{disabled:e[3]},(!r||64&i)&&{value:e[6]},(!r||1280&i&&n!==(n=e[8]||e[10]))&&{"aria-label":n},(!r||1&i)&&{style:e[0]}]))},i(e){r||(qe(c,e),r=!0)},o(e){ke(c,e),r=!1},d(n){n&&C(t),c&&c.d(n),e[23](null),i=!1,s()}}}function Bt(e){let t,n,r,i,s,a,l;const c=[Vt,Wt],u=[];function f(e,t){return e[1]?0:1}n=f(e),r=u[n]=c[n](e);let p=[e[12],{class:e[9]},{disabled:e[3]},{href:e[5]},{"aria-label":i=e[8]||e[10]},{style:e[0]}],d={};for(let e=0;e<p.length;e+=1)d=o(d,p[e]);return{c(){t=T("a"),r.c(),M(t,d)},m(r,i){I(r,t,i),u[n].m(t,null),s=!0,a||(l=w(e[11].call(null,t)),a=!0)},p(e,o){let a=n;n=f(e),n===a?u[n].p(e,o):(be(),ke(u[a],1,1,(()=>{u[a]=null})),we(),r=u[n],r?r.p(e,o):(r=u[n]=c[n](e),r.c()),qe(r,1),r.m(t,null)),M(t,d=$e(p,[e[12],(!s||512&o)&&{class:e[9]},(!s||8&o)&&{disabled:e[3]},(!s||32&o)&&{href:e[5]},(!s||1280&o&&i!==(i=e[8]||e[10]))&&{"aria-label":i},(!s||1&o)&&{style:e[0]}]))},i(e){s||(qe(r),s=!0)},o(e){ke(r),s=!1},d(e){e&&C(t),u[n].d(),a=!1,l()}}}function zt(e){let t;const n=e[22].default,r=h(n,e,e[21],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2097152&i)&&_(r,n,e,e[21],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function Ht(e){let t;return{c(){t=F(e[1])},m(e,n){I(e,t,n)},p(e,n){2&n&&B(t,e[1])},i:r,o:r,d(e){e&&C(t)}}}function Ut(e){let t;return{c(){t=T("span"),t.textContent="×",R(t,"aria-hidden","true")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function Wt(e){let t;const n=e[22].default,r=h(n,e,e[21],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2097152&i)&&_(r,n,e,e[21],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function Vt(e){let t;return{c(){t=F(e[1])},m(e,n){I(e,t,n)},p(e,n){2&n&&B(t,e[1])},i:r,o:r,d(e){e&&C(t)}}}function Qt(e){let t,n,r,i;const s=[Bt,Mt],o=[];function a(e,t){return e[5]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){o[t].m(e,n),I(e,r,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?o[t].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),qe(n,1),n.m(r.parentNode,r))},i(e){i||(qe(n),i=!0)},o(e){ke(n),i=!1},d(e){o[t].d(e),e&&C(r)}}}function Kt(e,t,n){let r,i,s,{$$slots:a={},$$scope:l}=t;const c=Rt(J);let u,{class:f=""}=t,{active:p=!1}=t,{block:d=!1}=t,{children:h}=t,{close:m=!1}=t,{color:_}=t,{disabled:y=!1}=t,{type:v="button"}=t,{href:b=""}=t,{outline:w=!1}=t,{size:q=""}=t,{style:k=""}=t,{value:x=""}=t,{gradient:E}=t,{rounded:$}=t;$&&(k="border-radius: 10em"+k),_||(_=b?"primary":"default");const S=Ft(t,["color","gradient","value","style","size"]);return e.$$set=e=>{n(24,t=o(o({},t),g(e))),"class"in e&&n(14,f=e.class),"active"in e&&n(15,p=e.active),"block"in e&&n(16,d=e.block),"children"in e&&n(1,h=e.children),"close"in e&&n(2,m=e.close),"color"in e&&n(13,_=e.color),"disabled"in e&&n(3,y=e.disabled),"type"in e&&n(4,v=e.type),"href"in e&&n(5,b=e.href),"outline"in e&&n(17,w=e.outline),"size"in e&&n(18,q=e.size),"style"in e&&n(0,k=e.style),"value"in e&&n(6,x=e.value),"gradient"in e&&n(19,E=e.gradient),"rounded"in e&&n(20,$=e.rounded),"$$scope"in e&&n(21,l=e.$$scope)},e.$$.update=()=>{n(8,r=t["aria-label"]),1040388&e.$$.dirty&&n(9,i=Dt(f,{close:m},m||"btn waves-effect waves-light",E?`${E}-gradient`:m||`btn${w?"-outline":""}-${_}`,!!q&&`btn-${q}`,!!d&&"btn-block",{active:p})),4&e.$$.dirty&&n(10,s=m?"Close":null)},t=g(t),[k,h,m,y,v,b,x,u,r,i,s,c,S,_,f,p,d,w,q,E,$,l,a,function(e){se[e?"unshift":"push"]((()=>{u=e,n(7,u)}))}]}class Gt extends Fe{constructor(e){super(),Pe(this,e,Kt,Qt,f,{class:14,active:15,block:16,children:1,close:2,color:13,disabled:3,type:4,href:5,outline:17,size:18,style:0,value:6,gradient:19,rounded:20})}}function Jt(e){let t,n,r,i,s;const a=e[6].default,l=h(a,e,e[5],null);let c=[e[1],{role:"group"},{class:n=e[2].join(" ")}],u={};for(let e=0;e<c.length;e+=1)u=o(u,c[e]);return{c(){t=T("div"),l&&l.c(),M(t,u)},m(n,o){I(n,t,o),l&&l.m(t,null),r=!0,i||(s=w(e[0].call(null,t)),i=!0)},p(e,[i]){l&&l.p&&(!r||32&i)&&_(l,a,e,e[5],i,null,null),M(t,u=$e(c,[e[1],{role:"group"},{class:n}]))},i(e){r||(qe(l,e),r=!0)},o(e){ke(l,e),r=!1},d(e){e&&C(t),l&&l.d(e),i=!1,s()}}}function Yt(e,t,n){let{$$slots:r={},$$scope:i}=t;const s=Rt(J),a=Ft(t,[]);let{size:l}=t,{vertical:c}=t,u=[c?"btn-group-vertical":"btn-group"];return l&&u.push(`btn-group-${l}`),e.$$set=e=>{n(7,t=o(o({},t),g(e))),"size"in e&&n(3,l=e.size),"vertical"in e&&n(4,c=e.vertical),"$$scope"in e&&n(5,i=e.$$scope)},t=g(t),[s,a,u,l,c,i,r]}class Xt extends Fe{constructor(e){super(),Pe(this,e,Yt,Jt,f,{size:3,vertical:4})}}const Zt=e=>({}),en=e=>({});function tn(e){let t,n,r,i,s,o,a,l,u,f,p,d,m;const g=e[38].external,y=h(g,e,e[37],en),v=e[38].default,b=h(v,e,e[37],null);return{c(){t=T("div"),n=T("div"),r=T("div"),y&&y.c(),i=N(),b&&b.c(),a=N(),l=T("div"),R(r,"class",s=Dt("modal-content",e[8])),R(n,"class",e[13]),R(n,"role","document"),R(t,"arialabelledby",e[5]),R(t,"class",e[12]),R(t,"role","dialog"),H(t,"display","block"),R(l,"class",u=Dt({"modal-backdrop":e[6]},"show",e[7]))},m(s,o){I(s,t,o),A(t,n),A(n,r),y&&y.m(r,null),A(r,i),b&&b.m(r,null),e[39](n),I(s,a,o),I(s,l,o),p=!0,d||(m=[L(t,"introend",e[15]),L(t,"outroend",e[16]),L(t,"click",e[14]),L(t,"mousedown",e[17])],d=!0)},p(i,o){e=i,y&&y.p&&(!p||64&o[1])&&_(y,g,e,e[37],o,Zt,en),b&&b.p&&(!p||64&o[1])&&_(b,v,e,e[37],o,null,null),(!p||256&o[0]&&s!==(s=Dt("modal-content",e[8])))&&R(r,"class",s),(!p||8192&o[0])&&R(n,"class",e[13]),(!p||32&o[0])&&R(t,"arialabelledby",e[5]),(!p||4096&o[0])&&R(t,"class",e[12]),(!p||192&o[0]&&u!==(u=Dt({"modal-backdrop":e[6]},"show",e[7])))&&R(l,"class",u)},i(n){p||(qe(y,n),qe(b,n),ue((()=>{o||(o=Ee(t,Me,{x:e[0],y:e[1],duration:e[9]&&e[3]},!0)),o.run(1)})),ue((()=>{f||(f=Ee(l,Re,{duration:e[9]&&e[4]},!0)),f.run(1)})),p=!0)},o(n){ke(y,n),ke(b,n),o||(o=Ee(t,Me,{x:e[0],y:e[1],duration:e[9]&&e[3]},!1)),o.run(0),f||(f=Ee(l,Re,{duration:e[9]&&e[4]},!1)),f.run(0),p=!1},d(n){n&&C(t),y&&y.d(n),b&&b.d(n),e[39](null),n&&o&&o.end(),n&&C(a),n&&C(l),n&&f&&f.end(),d=!1,c(m)}}}function nn(e){let t,n,r=e[10]&&e[2]&&tn(e);return{c(){r&&r.c(),t=j()},m(e,i){r&&r.m(e,i),I(e,t,i),n=!0},p(e,n){e[10]&&e[2]?r?(r.p(e,n),1028&n[0]&&qe(r,1)):(r=tn(e),r.c(),qe(r,1),r.m(t.parentNode,t)):r&&(be(),ke(r,1,1,(()=>{r=null})),we())},i(e){n||(qe(r),n=!0)},o(e){ke(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}let rn=0;const sn="modal-dialog";function on(e,t,n){let r,{$$slots:i={},$$scope:s}=t;Rt(J);let{class:a=""}=t,{isOpen:l}=t,{autoFocus:c=!0}=t,{centered:u=!1}=t,{duration:f=500}=t,{backdropDuration:p=f}=t,{scrollable:d=!1}=t,{size:h=""}=t,{toggle:m}=t,{labelledBy:_=""}=t,{backdrop:y=!0}=t,{onEnter:v}=t,{onExit:b}=t,{onOpened:w=(()=>{})}=t,{onClosed:q=(()=>{})}=t,{wrapClassName:k=""}=t,{modalClassName:x=""}=t,{backdropClassName:E=""}=t,{contentClassName:$=""}=t,{fade:S=!0}=t,{zIndex:A=1050}=t,{unmountOnClose:I=!0}=t,{returnFocusAfterClose:C=!0}=t,{displacementX:O=0}=t,{displacementY:T=-300}=t,{side:P}=t,{position:F=""}=t,{fullHeight:N}=t,{frame:j}=t;Ft(t,["isOpen","autoFocus","centered","duration","backdropDuration","scrollable","size","toggle","labelledBy","toggle","onEnter","onExit","onOpened","onClosed","wrapClassName","modalClassName","backdropClassName","contentClassName","fade","zIndex","unmountOnClose","returnFocusAfterClose","side","position","frame","backdrop"]);let L,D,R,M,B,z,H=!1,U=!1,W=l,V=H;var Q;function K(){R&&R.parentNode&&"function"==typeof R.parentNode.focus&&R.parentNode.focus()}function G(){try{L=document.activeElement}catch(e){L=null}D=function(){const e=window?window.getComputedStyle(document.body,null):{};return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}(),jt(),0===rn&&(document.body.className=Dt(document.body.className,"modal-open")),++rn,n(10,U=!0)}function Y(){L&&("function"==typeof L.focus&&C&&L.focus(),L=null)}function X(){Y()}function Z(){if(rn<=1){const e=new RegExp(`(^| )${"modal-open"}( |$)`);document.body.className=document.body.className.replace(e," ").trim()}Y(),rn=Math.max(0,rn-1),Nt(D)}return ne((()=>{l&&(G(),H=!0),"function"==typeof v&&v(),H&&c&&K()})),Q=()=>{"function"==typeof b&&b(),X(),H&&Z()},te().$$.on_destroy.push(Q),function(e){te().$$.after_update.push(e)}((()=>{l&&!W&&(G(),H=!0),c&&H&&!V&&K(),W=l,V=H})),-1!==F.indexOf("right")&&(O=300,N&&(T=0)),-1!==F.indexOf("left")&&(O=-300,N&&(T=0)),-1!==F.indexOf("top")&&(T=-300,N&&(O=0)),-1!==F.indexOf("bottom")&&(T=300,N&&(O=0)),z=Dt("modal","show",x),e.$$set=e=>{n(54,t=o(o({},t),g(e))),"class"in e&&n(18,a=e.class),"isOpen"in e&&n(2,l=e.isOpen),"autoFocus"in e&&n(19,c=e.autoFocus),"centered"in e&&n(20,u=e.centered),"duration"in e&&n(3,f=e.duration),"backdropDuration"in e&&n(4,p=e.backdropDuration),"scrollable"in e&&n(21,d=e.scrollable),"size"in e&&n(22,h=e.size),"toggle"in e&&n(23,m=e.toggle),"labelledBy"in e&&n(5,_=e.labelledBy),"backdrop"in e&&n(6,y=e.backdrop),"onEnter"in e&&n(24,v=e.onEnter),"onExit"in e&&n(25,b=e.onExit),"onOpened"in e&&n(26,w=e.onOpened),"onClosed"in e&&n(27,q=e.onClosed),"wrapClassName"in e&&n(28,k=e.wrapClassName),"modalClassName"in e&&n(29,x=e.modalClassName),"backdropClassName"in e&&n(7,E=e.backdropClassName),"contentClassName"in e&&n(8,$=e.contentClassName),"fade"in e&&n(9,S=e.fade),"zIndex"in e&&n(30,A=e.zIndex),"unmountOnClose"in e&&n(31,I=e.unmountOnClose),"returnFocusAfterClose"in e&&n(32,C=e.returnFocusAfterClose),"displacementX"in e&&n(0,O=e.displacementX),"displacementY"in e&&n(1,T=e.displacementY),"side"in e&&n(33,P=e.side),"position"in e&&n(34,F=e.position),"fullHeight"in e&&n(35,N=e.fullHeight),"frame"in e&&n(36,j=e.frame),"$$scope"in e&&n(37,s=e.$$scope)},e.$$.update=()=>{7602176&e.$$.dirty[0]|60&e.$$.dirty[1]&&n(13,r=Dt(sn,a,{[`modal-${h}`]:h,"modal-dialog-centered":u,"modal-dialog-scrollable":d,"modal-side":P,"modal-full-height":N,"modal-frame":j,[`modal-${F}`]:F}))},t=g(t),[O,T,l,f,p,_,y,E,$,S,U,R,z,r,function(e){if(e.target===M){if(e.stopPropagation(),!l||!y)return;const t=R?R.parentNode:null;t&&e.target===t&&m&&m(e)}},function(){B=function(e,...t){return e.addEventListener(...t),()=>e.removeEventListener(...t)}(document,"keydown",(e=>{e.key&&"Escape"===e.key&&m(e)})),w()},function(){q(),B&&B(),I&&X(),Z(),U&&(H=!1),n(10,U=!1)},function(e){M=e.target},a,c,u,d,h,m,v,b,w,q,k,x,A,I,C,P,F,N,j,s,i,function(e){se[e?"unshift":"push"]((()=>{R=e,n(11,R)}))}]}class an extends Fe{constructor(e){super(),Pe(this,e,on,nn,f,{class:18,isOpen:2,autoFocus:19,centered:20,duration:3,backdropDuration:4,scrollable:21,size:22,toggle:23,labelledBy:5,backdrop:6,onEnter:24,onExit:25,onOpened:26,onClosed:27,wrapClassName:28,modalClassName:29,backdropClassName:7,contentClassName:8,fade:9,zIndex:30,unmountOnClose:31,returnFocusAfterClose:32,displacementX:0,displacementY:1,side:33,position:34,fullHeight:35,frame:36},[-1,-1])}}function ln(e){let t,n,r,i;const s=e[5].default,a=h(s,e,e[4],null);let l=[e[2],{class:e[0]}],c={};for(let e=0;e<l.length;e+=1)c=o(c,l[e]);return{c(){t=T("div"),a&&a.c(),M(t,c)},m(s,o){I(s,t,o),a&&a.m(t,null),n=!0,r||(i=w(e[1].call(null,t)),r=!0)},p(e,[r]){a&&a.p&&(!n||16&r)&&_(a,s,e,e[4],r,null,null),M(t,c=$e(l,[e[2],(!n||1&r)&&{class:e[0]}]))},i(e){n||(qe(a,e),n=!0)},o(e){ke(a,e),n=!1},d(e){e&&C(t),a&&a.d(e),r=!1,i()}}}function cn(e,t,n){let r,{$$slots:i={},$$scope:s}=t;const a=Rt(J);let{class:l=""}=t;const c=Ft(t);return e.$$set=e=>{n(6,t=o(o({},t),g(e))),"class"in e&&n(3,l=e.class),"$$scope"in e&&n(4,s=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=Dt(l,"modal-body"))},t=g(t),[r,a,c,l,s,i]}class un extends Fe{constructor(e){super(),Pe(this,e,cn,ln,f,{class:3})}}const fn=e=>({}),pn=e=>({});function dn(e){let t;const n=e[10].default,r=h(n,e,e[9],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||512&i)&&_(r,n,e,e[9],i,null,null)},i(e){t||(qe(r,e),t=!0)},o(e){ke(r,e),t=!1},d(e){r&&r.d(e)}}}function hn(e){let t;return{c(){t=F(e[2])},m(e,n){I(e,t,n)},p(e,n){4&n&&B(t,e[2])},i:r,o:r,d(e){e&&C(t)}}}function mn(e){let t,n,r,i,s;return{c(){t=T("button"),n=T("span"),r=F(e[3]),R(n,"aria-hidden","true"),R(t,"type","button"),R(t,"class","close"),R(t,"aria-label",e[1])},m(o,a){I(o,t,a),A(t,n),A(n,r),i||(s=L(t,"click",(function(){u(e[0])&&e[0].apply(this,arguments)})),i=!0)},p(n,i){e=n,8&i&&B(r,e[3]),2&i&&R(t,"aria-label",e[1])},d(e){e&&C(t),i=!1,s()}}}function _n(e){let t,n,r,i,s,a,l,c;const u=[hn,dn],f=[];function p(e,t){return e[2]?0:1}r=p(e),i=f[r]=u[r](e);const d=e[10].close,m=h(d,e,e[9],pn),g=m||function(e){let t,n="function"==typeof e[0]&&mn(e);return{c(){n&&n.c(),t=j()},m(e,r){n&&n.m(e,r),I(e,t,r)},p(e,r){"function"==typeof e[0]?n?n.p(e,r):(n=mn(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}(e);let y=[e[6],{class:e[4]}],v={};for(let e=0;e<y.length;e+=1)v=o(v,y[e]);return{c(){t=T("div"),n=T("h5"),i.c(),s=N(),g&&g.c(),R(n,"class","modal-title"),M(t,v)},m(i,o){I(i,t,o),A(t,n),f[r].m(n,null),A(t,s),g&&g.m(t,null),a=!0,l||(c=w(e[5].call(null,t)),l=!0)},p(e,[s]){let o=r;r=p(e),r===o?f[r].p(e,s):(be(),ke(f[o],1,1,(()=>{f[o]=null})),we(),i=f[r],i?i.p(e,s):(i=f[r]=u[r](e),i.c()),qe(i,1),i.m(n,null)),m?m.p&&(!a||512&s)&&_(m,d,e,e[9],s,fn,pn):g&&g.p&&11&s&&g.p(e,s),M(t,v=$e(y,[e[6],(!a||16&s)&&{class:e[4]}]))},i(e){a||(qe(i),qe(g,e),a=!0)},o(e){ke(i),ke(g,e),a=!1},d(e){e&&C(t),f[r].d(),g&&g.d(e),l=!1,c()}}}function gn(e,t,n){let r,i,{$$slots:s={},$$scope:a}=t;const l=Rt(J);let{class:c=""}=t,{toggle:u}=t,{closeAriaLabel:f="Close"}=t,{charCode:p=215}=t,{children:d}=t;const h=Ft(t);return e.$$set=e=>{n(11,t=o(o({},t),g(e))),"class"in e&&n(7,c=e.class),"toggle"in e&&n(0,u=e.toggle),"closeAriaLabel"in e&&n(1,f=e.closeAriaLabel),"charCode"in e&&n(8,p=e.charCode),"children"in e&&n(2,d=e.children),"$$scope"in e&&n(9,a=e.$$scope)},e.$$.update=()=>{256&e.$$.dirty&&n(3,r="number"==typeof p?String.fromCharCode(p):p),128&e.$$.dirty&&n(4,i=Dt(c,"modal-header"))},t=g(t),[u,f,d,r,i,l,h,c,p,a,s]}class yn extends Fe{constructor(e){super(),Pe(this,e,gn,_n,f,{class:7,toggle:0,closeAriaLabel:1,charCode:8,children:2})}}function vn(e){let t,n,r,i;const s=e[5].default,a=h(s,e,e[4],null);let l=[e[2],{class:e[0]}],c={};for(let e=0;e<l.length;e+=1)c=o(c,l[e]);return{c(){t=T("div"),a&&a.c(),M(t,c)},m(s,o){I(s,t,o),a&&a.m(t,null),n=!0,r||(i=w(e[1].call(null,t)),r=!0)},p(e,[r]){a&&a.p&&(!n||16&r)&&_(a,s,e,e[4],r,null,null),M(t,c=$e(l,[e[2],(!n||1&r)&&{class:e[0]}]))},i(e){n||(qe(a,e),n=!0)},o(e){ke(a,e),n=!1},d(e){e&&C(t),a&&a.d(e),r=!1,i()}}}function bn(e,t,n){let r,{$$slots:i={},$$scope:s}=t;const a=Rt(J);let{class:l=""}=t;const c=Ft(t);return e.$$set=e=>{n(6,t=o(o({},t),g(e))),"class"in e&&n(3,l=e.class),"$$scope"in e&&n(4,s=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=Dt(l,"modal-footer"))},t=g(t),[r,a,c,l,s,i]}class wn extends Fe{constructor(e){super(),Pe(this,e,bn,vn,f,{class:3})}}function qn(e){let t;return{c(){t=F("確認")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function kn(e){let t;return{c(){t=F(e[0])},m(e,n){I(e,t,n)},p(e,n){1&n&&B(t,e[0])},d(e){e&&C(t)}}}function xn(e){let t;return{c(){t=F(e[2])},m(e,n){I(e,t,n)},p(e,n){4&n&&B(t,e[2])},d(e){e&&C(t)}}}function En(e){let t;return{c(){t=F("Cancel")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function $n(e){let t,n,r,i;return t=new Gt({props:{color:e[1],$$slots:{default:[xn]},$$scope:{ctx:e}}}),t.$on("click",e[6]),r=new Gt({props:{color:"primary",outline:!0,$$slots:{default:[En]},$$scope:{ctx:e}}}),r.$on("click",e[5]),{c(){Ie(t.$$.fragment),n=N(),Ie(r.$$.fragment)},m(e,s){Ce(t,e,s),I(e,n,s),Ce(r,e,s),i=!0},p(e,n){const i={};2&n&&(i.color=e[1]),1028&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const s={};1024&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s)},i(e){i||(qe(t.$$.fragment,e),qe(r.$$.fragment,e),i=!0)},o(e){ke(t.$$.fragment,e),ke(r.$$.fragment,e),i=!1},d(e){Oe(t,e),e&&C(n),Oe(r,e)}}}function Sn(e){let t,n,r,i,s,o;return t=new yn({props:{toggle:e[4],$$slots:{default:[qn]},$$scope:{ctx:e}}}),r=new un({props:{$$slots:{default:[kn]},$$scope:{ctx:e}}}),s=new wn({props:{$$slots:{default:[$n]},$$scope:{ctx:e}}}),{c(){Ie(t.$$.fragment),n=N(),Ie(r.$$.fragment),i=N(),Ie(s.$$.fragment)},m(e,a){Ce(t,e,a),I(e,n,a),Ce(r,e,a),I(e,i,a),Ce(s,e,a),o=!0},p(e,n){const i={};1024&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const o={};1025&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o);const a={};1030&n&&(a.$$scope={dirty:n,ctx:e}),s.$set(a)},i(e){o||(qe(t.$$.fragment,e),qe(r.$$.fragment,e),qe(s.$$.fragment,e),o=!0)},o(e){ke(t.$$.fragment,e),ke(r.$$.fragment,e),ke(s.$$.fragment,e),o=!1},d(e){Oe(t,e),e&&C(n),Oe(r,e),e&&C(i),Oe(s,e)}}}function An(e){let t,n;return t=new an({props:{isOpen:e[3],toggle:e[4],$$slots:{default:[Sn]},$$scope:{ctx:e}}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,[n]){const r={};8&n&&(r.isOpen=e[3]),1031&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function In(e,t,n){let r,i,s,o,a,l=!1;return[r,o,a,l,function(){n(3,l=!l)},function(e){n(3,l=!1),s(e)},function(e){n(3,l=!1),i(e)},e=>new Promise(((t,c)=>{n(0,r=e.message||""),n(1,o=e.colorOkayButton||"primary"),n(2,a=e.labelOkayButton||"OK"),i=n=>{(e.onOkay||(()=>{}))(n),t(!0)},s=t=>{(e.onCancel||(()=>{}))(t),c("cancel")},n(3,l=!0)}))]}class Cn extends Fe{constructor(e){super(),Pe(this,e,In,An,f,{confirm:7})}get confirm(){return this.$$.ctx[7]}}const On=lt(null),Tn=e=>e.replace(/[A-Za-z0-9]/g,(e=>String.fromCharCode(e.charCodeAt(0)+65248)));function Pn(e,t,n){const r=e.slice();return r[14]=t[n],r}function Fn(e){let t,n,r=e[14].label+"";return{c(){t=F(r),n=N()},m(e,r){I(e,t,r),I(e,n,r)},p(e,n){5&n&&r!==(r=e[14].label+"")&&B(t,r)},d(e){e&&C(t),e&&C(n)}}}function Nn(e){let t,n;return t=new Gt({props:{color:"primary",class:"shadow-0 mx-1 px-0",style:"width: 8rem;",disabled:e[14].isDisabled(),$$slots:{default:[Fn]},$$scope:{ctx:e}}}),t.$on("click",(function(){u(e[14].onClick)&&e[14].onClick.apply(this,arguments)})),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(n,r){e=n;const i={};5&r&&(i.disabled=e[14].isDisabled()),131077&r&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function jn(e){let t,n,r=[{label:"エクスポート",isDisabled:e[7],onClick:e[5]},{label:"追加インポート",isDisabled:e[8],onClick:e[9]},{label:"上書きインポート",isDisabled:e[10],onClick:e[11]}],i=[];for(let t=0;t<3;t+=1)i[t]=Nn(Pn(e,r,t));const s=e=>ke(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<3;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<3;t+=1)i[t].m(e,r);I(e,t,r),n=!0},p(e,n){if(61&n){let o;for(r=[{label:"エクスポート",isDisabled:e[7],onClick:e[5]},{label:"追加インポート",isDisabled:e[8],onClick:e[9]},{label:"上書きインポート",isDisabled:e[10],onClick:e[11]}],o=0;o<3;o+=1){const s=Pn(e,r,o);i[o]?(i[o].p(s,n),qe(i[o],1)):(i[o]=Nn(s),i[o].c(),qe(i[o],1),i[o].m(t.parentNode,t))}for(be(),o=3;o<3;o+=1)s(o);we()}},i(e){if(!n){for(let e=0;e<3;e+=1)qe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<3;e+=1)ke(i[e]);n=!1},d(e){O(i,e),e&&C(t)}}}function Ln(e){let t,n,r,i,s,o,a,l,c,u,f;function p(t){e[12](t)}s=new Xt({props:{class:"shadow-0",$$slots:{default:[jn]},$$scope:{ctx:e}}});let d={};return void 0!==e[1]&&(d.confirm=e[1]),a=new Cn({props:d}),se.push((()=>Ae(a,"confirm",p))),{c(){t=T("div"),n=T("div"),r=T("textarea"),i=N(),Ie(s.$$.fragment),o=N(),Ie(a.$$.fragment),R(r,"id","input"),R(r,"class","svelte-1m5otor"),R(n,"id","charm-ixporter"),R(n,"class","svelte-1m5otor"),R(t,"class","tab-content svelte-1m5otor")},m(l,p){I(l,t,p),A(t,n),A(n,r),z(r,e[0]),A(n,i),Ce(s,n,null),A(n,o),Ce(a,n,null),c=!0,u||(f=L(r,"input",e[6]),u=!0)},p(e,[t]){1&t&&z(r,e[0]);const n={};131077&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const i={};!l&&2&t&&(l=!0,i.confirm=e[1],fe((()=>l=!1))),a.$set(i)},i(e){c||(qe(s.$$.fragment,e),qe(a.$$.fragment,e),c=!0)},o(e){ke(s.$$.fragment,e),ke(a.$$.fragment,e),c=!1},d(e){e&&C(t),Oe(s),Oe(a),u=!1,f()}}}function Dn(e,t,n){let r;d(e,On,(e=>n(2,r=e)));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const s={APPEND:"append",OVERWRITE:"overwrite"};let o,a="";function l({mode:e}){return i(this,void 0,void 0,(function*(){if(a.trim().length<=0)return void console.log("blank!!");if(e!==s.APPEND&&e!==s.OVERWRITE)return void console.log("internal error");const t=yield o({message:e===s.OVERWRITE?"護石を上書きインポートします。\n既存の護石は削除され、元に戻すことはできません。よろしいですか？":"護石を追加インポートします。",colorOkayButton:e===s.OVERWRITE?"danger":"primary"});console.log(t),e===s.OVERWRITE&&(yield r.reset());const n=a.trim().split("\n").map((e=>{const[t,n,r,i,s,o,a]=e.split(/,\s*/);return{skills:[t,r].map((e=>""===e?"無し":e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248))))),skillLevels:[n,i].map((e=>parseInt(e))),slots:[s,o,a].map((e=>parseInt(e)))}}));console.log(n),r.registerCharms(n)}))}return[a,o,r,s,l,function(){return i(this,void 0,void 0,(function*(){n(0,a=r.charms.map((e=>{const{skill1:t,skill1Level:n,skill2:r,skill2Level:i,slot1:s,slot2:o,slot3:a}=e;return[Tn("無し"===t?"":t),n,Tn("無し"===r?"":r),i,s,o,a].join(",")})).join("\n"))}))},function(){a=this.value,n(0,a)},()=>null==r,()=>null==r||0===a.trim().length,()=>l({mode:s.APPEND}),()=>null==r||0===a.trim().length,()=>l({mode:s.OVERWRITE}),function(e){o=e,n(1,o)}]}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Rn,Mn=(function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",s="minute",o="hour",a="day",l="week",c="month",u="quarter",f="year",p="date",d="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),s=n-i<0,o=t.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:l,d:a,D:p,h:o,m:s,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=_;var w=function(e){return e instanceof E},q=function e(t,n,r){var i;if(!t)return v;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(i=s),n&&(b[s]=n,i=s);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var a=t.name;b[a]=t,i=a}return!r&&i&&(v=i),i||!r&&v},k=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},x=y;x.l=q,x.i=w,x.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function _(e){this.$L=q(e.locale,null,!0),this.parse(e)}var g=_.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return x},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return k(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<k(e)},g.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!x.u(t)||t,u=x.p(e),d=function(e,t){var i=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(a)},h=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,_=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case f:return r?d(1,0):d(31,11);case c:return r?d(1,_):d(0,_+1);case l:var v=this.$locale().weekStart||0,b=(m<v?m+7:m)-v;return d(r?g-b:g+(6-b),_);case a:case p:return h(y+"Hours",0);case o:return h(y+"Minutes",1);case s:return h(y+"Seconds",2);case i:return h(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,l=x.p(e),u="set"+(this.$u?"UTC":""),d=(n={},n[a]=u+"Date",n[p]=u+"Date",n[c]=u+"Month",n[f]=u+"FullYear",n[o]=u+"Hours",n[s]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],h=l===a?this.$D+(t-this.$W):t;if(l===c||l===f){var m=this.clone().set(p,1);m.$d[d](h),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[x.p(e)]()},g.add=function(r,u){var p,d=this;r=Number(r);var h=x.p(u),m=function(e){var t=k(d);return x.w(t.date(t.date()+Math.round(e*r)),d)};if(h===c)return this.set(c,this.$M+r);if(h===f)return this.set(f,this.$y+r);if(h===a)return m(1);if(h===l)return m(7);var _=(p={},p[s]=t,p[o]=n,p[i]=e,p)[h]||1,g=this.$d.getTime()+r*_;return x.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),s=this.$H,o=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=function(e,n,i,s){return e&&(e[n]||e(t,r))||i[n].substr(0,s)},f=function(e){return x.s(s%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:x.s(a+1,2,"0"),MMM:u(n.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:x.s(s,2,"0"),h:f(1),hh:f(2),a:p(s,o,!0),A:p(s,o,!1),m:String(o),mm:x.s(o,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:i};return r.replace(m,(function(e,t){return t||h[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,p,d){var h,m=x.p(p),_=k(r),g=(_.utcOffset()-this.utcOffset())*t,y=this-_,v=x.m(this,_);return v=(h={},h[f]=v/12,h[c]=v,h[u]=v/3,h[l]=(y-g)/6048e5,h[a]=(y-g)/864e5,h[o]=y/n,h[s]=y/t,h[i]=y/e,h)[m]||y,d?v:x.a(v)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=q(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return x.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},_}(),$=E.prototype;return k.prototype=$,[["$ms",r],["$s",i],["$m",s],["$H",o],["$W",a],["$M",c],["$y",f],["$D",p]].forEach((function(e){$[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,E,k),e.$i=!0),k},k.locale=q,k.isDayjs=w,k.unix=function(e){return k(1e3*e)},k.en=b[v],k.Ls=b,k.p={},k}()}(Rn={exports:{}},Rn.exports),Rn.exports);function Bn(e){return"[object Date]"===Object.prototype.toString.call(e)}function zn(e,t,n,r){if("number"==typeof n||Bn(n)){const i=r-n,s=(n-t)/(e.dt||1/60),o=(s+(e.opts.stiffness*i-e.opts.damping*s)*e.inv_mass)*e.dt;return Math.abs(o)<e.opts.precision&&Math.abs(i)<e.opts.precision?r:(e.settled=!1,Bn(n)?new Date(n.getTime()+o):n+o)}if(Array.isArray(n))return n.map(((i,s)=>zn(e,t[s],n[s],r[s])));if("object"==typeof n){const i={};for(const s in n)i[s]=zn(e,t[s],n[s],r[s]);return i}throw new Error(`Cannot spring ${typeof n} values`)}function Hn(e,t={}){const n=lt(e),{stiffness:r=.15,damping:i=.8,precision:s=.01}=t;let o,a,l,c=e,u=e,f=1,p=0,d=!1;function h(t,r={}){u=t;const i=l={};if(null==e||r.hard||m.stiffness>=1&&m.damping>=1)return d=!0,o=k(),c=t,n.set(e=u),Promise.resolve();if(r.soft){const e=!0===r.soft?.5:+r.soft;p=1/(60*e),f=0}return a||(o=k(),d=!1,a=S((t=>{if(d)return d=!1,a=null,!1;f=Math.min(f+p,1);const r={inv_mass:f,opts:m,settled:!0,dt:60*(t-o)/1e3},i=zn(r,c,e,u);return o=t,c=e,n.set(e=i),r.settled&&(a=null),!r.settled}))),new Promise((e=>{a.promise.then((()=>{i===l&&e()}))}))}const m={set:h,update:(t,n)=>h(t(u,e),n),subscribe:n.subscribe,stiffness:r,damping:i,precision:s};return m}function Un(e,t,n){const r=e.slice();return r[28]=t[n],r[30]=n,r}function Wn(e){let t,n,r,i,s=("label"===e[6]||"label"===e[7])&&Vn(e);return{c(){t=T("span"),s&&s.c(),R(t,"class","pip first"),R(t,"style",n=e[14]+": 0%;"),V(t,"selected",e[19](e[0])),V(t,"in-range",e[20](e[0]))},m(n,o){I(n,t,o),s&&s.m(t,null),r||(i=[L(t,"click",(function(){u(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)})),L(t,"touchend",D((function(){u(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)})))],r=!0)},p(r,i){"label"===(e=r)[6]||"label"===e[7]?s?s.p(e,i):(s=Vn(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null),16384&i&&n!==(n=e[14]+": 0%;")&&R(t,"style",n),524289&i&&V(t,"selected",e[19](e[0])),1048577&i&&V(t,"in-range",e[20](e[0]))},d(e){e&&C(t),s&&s.d(),r=!1,c(i)}}}function Vn(e){let t,n,r=e[12](e[16](e[0]),0,0)+"",i=e[10]&&Qn(e),s=e[11]&&Kn(e);return{c(){t=T("span"),i&&i.c(),n=F(r),s&&s.c(),R(t,"class","pipVal")},m(e,r){I(e,t,r),i&&i.m(t,null),A(t,n),s&&s.m(t,null)},p(e,o){e[10]?i?i.p(e,o):(i=Qn(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),69633&o&&r!==(r=e[12](e[16](e[0]),0,0)+"")&&B(n,r),e[11]?s?s.p(e,o):(s=Kn(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&C(t),i&&i.d(),s&&s.d()}}}function Qn(e){let t,n;return{c(){t=T("span"),n=F(e[10]),R(t,"class","pipVal-prefix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){1024&t&&B(n,e[10])},d(e){e&&C(t)}}}function Kn(e){let t,n;return{c(){t=T("span"),n=F(e[11]),R(t,"class","pipVal-suffix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){2048&t&&B(n,e[11])},d(e){e&&C(t)}}}function Gn(e){let t,n=Array(e[17]+1),r=[];for(let t=0;t<n.length;t+=1)r[t]=er(Un(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);I(e,t,n)},p(e,i){if(4120131&i){let s;for(n=Array(e[17]+1),s=0;s<n.length;s+=1){const o=Un(e,n,s);r[s]?r[s].p(o,i):(r[s]=er(o),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){O(r,e),e&&C(t)}}}function Jn(e){let t,n,r,i,s,o=("label"===e[6]||"label"===e[9])&&Yn(e);return{c(){t=T("span"),o&&o.c(),n=N(),R(t,"class","pip"),R(t,"style",r=e[14]+": "+e[15](e[18](e[30]))+"%;"),V(t,"selected",e[19](e[18](e[30]))),V(t,"in-range",e[20](e[18](e[30])))},m(r,a){I(r,t,a),o&&o.m(t,null),A(t,n),i||(s=[L(t,"click",(function(){u(e[21](e[18](e[30])))&&e[21](e[18](e[30])).apply(this,arguments)})),L(t,"touchend",D((function(){u(e[21](e[18](e[30])))&&e[21](e[18](e[30])).apply(this,arguments)})))],i=!0)},p(i,s){"label"===(e=i)[6]||"label"===e[9]?o?o.p(e,s):(o=Yn(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),311296&s&&r!==(r=e[14]+": "+e[15](e[18](e[30]))+"%;")&&R(t,"style",r),786432&s&&V(t,"selected",e[19](e[18](e[30]))),1310720&s&&V(t,"in-range",e[20](e[18](e[30])))},d(e){e&&C(t),o&&o.d(),i=!1,c(s)}}}function Yn(e){let t,n,r=e[12](e[18](e[30]),e[30],e[15](e[18](e[30])))+"",i=e[10]&&Xn(e),s=e[11]&&Zn(e);return{c(){t=T("span"),i&&i.c(),n=F(r),s&&s.c(),R(t,"class","pipVal")},m(e,r){I(e,t,r),i&&i.m(t,null),A(t,n),s&&s.m(t,null)},p(e,o){e[10]?i?i.p(e,o):(i=Xn(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),299008&o&&r!==(r=e[12](e[18](e[30]),e[30],e[15](e[18](e[30])))+"")&&B(n,r),e[11]?s?s.p(e,o):(s=Zn(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&C(t),i&&i.d(),s&&s.d()}}}function Xn(e){let t,n;return{c(){t=T("span"),n=F(e[10]),R(t,"class","pipVal-prefix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){1024&t&&B(n,e[10])},d(e){e&&C(t)}}}function Zn(e){let t,n;return{c(){t=T("span"),n=F(e[11]),R(t,"class","pipVal-suffix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){2048&t&&B(n,e[11])},d(e){e&&C(t)}}}function er(e){let t,n=e[18](e[30])!==e[0]&&e[18](e[30])!==e[1],r=n&&Jn(e);return{c(){r&&r.c(),t=j()},m(e,n){r&&r.m(e,n),I(e,t,n)},p(e,i){262147&i&&(n=e[18](e[30])!==e[0]&&e[18](e[30])!==e[1]),n?r?r.p(e,i):(r=Jn(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&C(t)}}}function tr(e){let t,n,r,i,s=("label"===e[6]||"label"===e[8])&&nr(e);return{c(){t=T("span"),s&&s.c(),R(t,"class","pip last"),R(t,"style",n=e[14]+": 100%;"),V(t,"selected",e[19](e[1])),V(t,"in-range",e[20](e[1]))},m(n,o){I(n,t,o),s&&s.m(t,null),r||(i=[L(t,"click",(function(){u(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)})),L(t,"touchend",D((function(){u(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)})))],r=!0)},p(r,i){"label"===(e=r)[6]||"label"===e[8]?s?s.p(e,i):(s=nr(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null),16384&i&&n!==(n=e[14]+": 100%;")&&R(t,"style",n),524290&i&&V(t,"selected",e[19](e[1])),1048578&i&&V(t,"in-range",e[20](e[1]))},d(e){e&&C(t),s&&s.d(),r=!1,c(i)}}}function nr(e){let t,n,r=e[12](e[16](e[1]),e[17],100)+"",i=e[10]&&rr(e),s=e[11]&&ir(e);return{c(){t=T("span"),i&&i.c(),n=F(r),s&&s.c(),R(t,"class","pipVal")},m(e,r){I(e,t,r),i&&i.m(t,null),A(t,n),s&&s.m(t,null)},p(e,o){e[10]?i?i.p(e,o):(i=rr(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),200706&o&&r!==(r=e[12](e[16](e[1]),e[17],100)+"")&&B(n,r),e[11]?s?s.p(e,o):(s=ir(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&C(t),i&&i.d(),s&&s.d()}}}function rr(e){let t,n;return{c(){t=T("span"),n=F(e[10]),R(t,"class","pipVal-prefix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){1024&t&&B(n,e[10])},d(e){e&&C(t)}}}function ir(e){let t,n;return{c(){t=T("span"),n=F(e[11]),R(t,"class","pipVal-suffix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){2048&t&&B(n,e[11])},d(e){e&&C(t)}}}function sr(e){let t,n,i,s=(e[6]&&!1!==e[7]||e[7])&&Wn(e),o=(e[6]&&!1!==e[9]||e[9])&&Gn(e),a=(e[6]&&!1!==e[8]||e[8])&&tr(e);return{c(){t=T("div"),s&&s.c(),n=N(),o&&o.c(),i=N(),a&&a.c(),R(t,"class","rangePips"),V(t,"disabled",e[5]),V(t,"hoverable",e[4]),V(t,"vertical",e[2]),V(t,"reversed",e[3]),V(t,"focus",e[13])},m(e,r){I(e,t,r),s&&s.m(t,null),A(t,n),o&&o.m(t,null),A(t,i),a&&a.m(t,null)},p(e,[r]){e[6]&&!1!==e[7]||e[7]?s?s.p(e,r):(s=Wn(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),e[6]&&!1!==e[9]||e[9]?o?o.p(e,r):(o=Gn(e),o.c(),o.m(t,i)):o&&(o.d(1),o=null),e[6]&&!1!==e[8]||e[8]?a?a.p(e,r):(a=tr(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null),32&r&&V(t,"disabled",e[5]),16&r&&V(t,"hoverable",e[4]),4&r&&V(t,"vertical",e[2]),8&r&&V(t,"reversed",e[3]),8192&r&&V(t,"focus",e[13])},i:r,o:r,d(e){e&&C(t),s&&s.d(),o&&o.d(),a&&a.d()}}}function or(e,t,n){let r,i,s,o,a,{range:l=!1}=t,{min:c=0}=t,{max:u=100}=t,{step:f=1}=t,{values:p=[(u+c)/2]}=t,{vertical:d=!1}=t,{reversed:h=!1}=t,{hoverable:m=!0}=t,{disabled:_=!1}=t,{pipstep:g}=t,{all:y=!0}=t,{first:v}=t,{last:b}=t,{rest:w}=t,{prefix:q=""}=t,{suffix:k=""}=t,{formatter:x=((e,t)=>e)}=t,{focus:E}=t,{orientationStart:$}=t,{percentOf:S}=t,{moveHandle:A}=t,{fixFloat:I}=t;return e.$$set=e=>{"range"in e&&n(22,l=e.range),"min"in e&&n(0,c=e.min),"max"in e&&n(1,u=e.max),"step"in e&&n(23,f=e.step),"values"in e&&n(24,p=e.values),"vertical"in e&&n(2,d=e.vertical),"reversed"in e&&n(3,h=e.reversed),"hoverable"in e&&n(4,m=e.hoverable),"disabled"in e&&n(5,_=e.disabled),"pipstep"in e&&n(25,g=e.pipstep),"all"in e&&n(6,y=e.all),"first"in e&&n(7,v=e.first),"last"in e&&n(8,b=e.last),"rest"in e&&n(9,w=e.rest),"prefix"in e&&n(10,q=e.prefix),"suffix"in e&&n(11,k=e.suffix),"formatter"in e&&n(12,x=e.formatter),"focus"in e&&n(13,E=e.focus),"orientationStart"in e&&n(14,$=e.orientationStart),"percentOf"in e&&n(15,S=e.percentOf),"moveHandle"in e&&n(26,A=e.moveHandle),"fixFloat"in e&&n(16,I=e.fixFloat)},e.$$.update=()=>{41943047&e.$$.dirty&&n(27,r=g||((u-c)/f>=(d?50:100)?(u-c)/(d?10:20):1)),142606339&e.$$.dirty&&n(17,i=parseInt((u-c)/(f*r),10)),142671873&e.$$.dirty&&n(18,s=function(e){return I(c+e*f*r)}),16842752&e.$$.dirty&&n(19,o=function(e){return p.some((t=>I(t)===I(e)))}),20971520&e.$$.dirty&&n(20,a=function(e){return"min"===l?p[0]>e:"max"===l?p[0]<e:l?p[0]<e&&p[1]>e:void 0})},[c,u,d,h,m,_,y,v,b,w,q,k,x,E,$,S,I,i,s,o,a,function(e){_||A(void 0,e)},l,f,p,g,A,r]}class ar extends Fe{constructor(e){super(),Pe(this,e,or,sr,f,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function lr(e,t,n){const r=e.slice();return r[64]=t[n],r[66]=n,r}function cr(e){let t,n,r=e[21](e[64],e[66],e[23](e[64]))+"",i=e[18]&&ur(e),s=e[19]&&fr(e);return{c(){t=T("span"),i&&i.c(),n=F(r),s&&s.c(),R(t,"class","rangeFloat")},m(e,r){I(e,t,r),i&&i.m(t,null),A(t,n),s&&s.m(t,null)},p(e,o){e[18]?i?i.p(e,o):(i=ur(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),10485761&o[0]&&r!==(r=e[21](e[64],e[66],e[23](e[64]))+"")&&B(n,r),e[19]?s?s.p(e,o):(s=fr(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&C(t),i&&i.d(),s&&s.d()}}}function ur(e){let t,n;return{c(){t=T("span"),n=F(e[18]),R(t,"class","rangeFloat-prefix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){262144&t[0]&&B(n,e[18])},d(e){e&&C(t)}}}function fr(e){let t,n;return{c(){t=T("span"),n=F(e[19]),R(t,"class","rangeFloat-suffix")},m(e,r){I(e,t,r),A(t,n)},p(e,t){524288&t[0]&&B(n,e[19])},d(e){e&&C(t)}}}function pr(e){let t,n,r,i,s,o,a,l,u,f,p,d,h=e[7]&&cr(e);return{c(){t=T("span"),n=T("span"),r=N(),h&&h.c(),R(n,"class","rangeNub"),R(t,"role","slider"),R(t,"class","rangeHandle"),R(t,"data-handle",e[66]),R(t,"style",i=e[27]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";"),R(t,"aria-valuemin",s=!0===e[2]&&1===e[66]?e[0][0]:e[3]),R(t,"aria-valuemax",o=!0===e[2]&&0===e[66]?e[0][1]:e[4]),R(t,"aria-valuenow",a=e[64]),R(t,"aria-valuetext",l=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19])),R(t,"aria-orientation",u=e[6]?"vertical":"horizontal"),R(t,"aria-disabled",e[10]),R(t,"disabled",e[10]),R(t,"tabindex",f=e[10]?-1:0),V(t,"active",e[24]&&e[26]===e[66]),V(t,"press",e[25]&&e[26]===e[66])},m(i,s){I(i,t,s),A(t,n),A(t,r),h&&h.m(t,null),p||(d=[L(t,"blur",e[34]),L(t,"focus",e[35]),L(t,"keydown",e[36])],p=!0)},p(e,n){e[7]?h?h.p(e,n):(h=cr(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null),738197504&n[0]&&i!==(i=e[27]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";")&&R(t,"style",i),13&n[0]&&s!==(s=!0===e[2]&&1===e[66]?e[0][0]:e[3])&&R(t,"aria-valuemin",s),21&n[0]&&o!==(o=!0===e[2]&&0===e[66]?e[0][1]:e[4])&&R(t,"aria-valuemax",o),1&n[0]&&a!==(a=e[64])&&R(t,"aria-valuenow",a),11272193&n[0]&&l!==(l=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19]))&&R(t,"aria-valuetext",l),64&n[0]&&u!==(u=e[6]?"vertical":"horizontal")&&R(t,"aria-orientation",u),1024&n[0]&&R(t,"aria-disabled",e[10]),1024&n[0]&&R(t,"disabled",e[10]),1024&n[0]&&f!==(f=e[10]?-1:0)&&R(t,"tabindex",f),83886080&n[0]&&V(t,"active",e[24]&&e[26]===e[66]),100663296&n[0]&&V(t,"press",e[25]&&e[26]===e[66])},d(e){e&&C(t),h&&h.d(),p=!1,c(d)}}}function dr(e){let t,n;return{c(){t=T("span"),R(t,"class","rangeBar"),R(t,"style",n=e[27]+": "+e[32](e[29])+"%; \n             "+e[28]+": "+e[33](e[29])+"%;")},m(e,n){I(e,t,n)},p(e,r){939524096&r[0]&&n!==(n=e[27]+": "+e[32](e[29])+"%; \n             "+e[28]+": "+e[33](e[29])+"%;")&&R(t,"style",n)},d(e){e&&C(t)}}}function hr(e){let t,n;return t=new ar({props:{values:e[0],min:e[3],max:e[4],step:e[5],range:e[2],vertical:e[6],reversed:e[8],orientationStart:e[27],hoverable:e[9],disabled:e[10],all:e[13],first:e[14],last:e[15],rest:e[16],pipstep:e[12],prefix:e[18],suffix:e[19],formatter:e[20],focus:e[24],percentOf:e[23],moveHandle:e[31],fixFloat:e[30]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.values=e[0]),8&n[0]&&(r.min=e[3]),16&n[0]&&(r.max=e[4]),32&n[0]&&(r.step=e[5]),4&n[0]&&(r.range=e[2]),64&n[0]&&(r.vertical=e[6]),256&n[0]&&(r.reversed=e[8]),134217728&n[0]&&(r.orientationStart=e[27]),512&n[0]&&(r.hoverable=e[9]),1024&n[0]&&(r.disabled=e[10]),8192&n[0]&&(r.all=e[13]),16384&n[0]&&(r.first=e[14]),32768&n[0]&&(r.last=e[15]),65536&n[0]&&(r.rest=e[16]),4096&n[0]&&(r.pipstep=e[12]),262144&n[0]&&(r.prefix=e[18]),524288&n[0]&&(r.suffix=e[19]),1048576&n[0]&&(r.formatter=e[20]),16777216&n[0]&&(r.focus=e[24]),8388608&n[0]&&(r.percentOf=e[23]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function mr(e){let t,n,r,i,s,o,a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=pr(lr(e,a,t));let u=e[2]&&dr(e),f=e[11]&&hr(e);return{c(){t=T("div");for(let e=0;e<l.length;e+=1)l[e].c();n=N(),u&&u.c(),r=N(),f&&f.c(),R(t,"id",e[17]),R(t,"class","rangeSlider"),V(t,"range",e[2]),V(t,"disabled",e[10]),V(t,"hoverable",e[9]),V(t,"vertical",e[6]),V(t,"reversed",e[8]),V(t,"focus",e[24]),V(t,"min","min"===e[2]),V(t,"max","max"===e[2]),V(t,"pips",e[11]),V(t,"pip-labels","label"===e[13]||"label"===e[14]||"label"===e[15]||"label"===e[16])},m(a,c){I(a,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);A(t,n),u&&u.m(t,null),A(t,r),f&&f.m(t,null),e[50](t),i=!0,s||(o=[L(window,"mousedown",e[39]),L(window,"touchstart",e[39]),L(window,"mousemove",e[40]),L(window,"touchmove",e[40]),L(window,"mouseup",e[41]),L(window,"touchend",e[42]),L(window,"keydown",e[43]),L(t,"mousedown",e[37]),L(t,"mouseup",e[38]),L(t,"touchstart",D(e[37])),L(t,"touchend",D(e[38]))],s=!0)},p(e,s){if(799802589&s[0]|56&s[1]){let r;for(a=e[0],r=0;r<a.length;r+=1){const i=lr(e,a,r);l[r]?l[r].p(i,s):(l[r]=pr(i),l[r].c(),l[r].m(t,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}e[2]?u?u.p(e,s):(u=dr(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[11]?f?(f.p(e,s),2048&s[0]&&qe(f,1)):(f=hr(e),f.c(),qe(f,1),f.m(t,null)):f&&(be(),ke(f,1,1,(()=>{f=null})),we()),(!i||131072&s[0])&&R(t,"id",e[17]),4&s[0]&&V(t,"range",e[2]),1024&s[0]&&V(t,"disabled",e[10]),512&s[0]&&V(t,"hoverable",e[9]),64&s[0]&&V(t,"vertical",e[6]),256&s[0]&&V(t,"reversed",e[8]),16777216&s[0]&&V(t,"focus",e[24]),4&s[0]&&V(t,"min","min"===e[2]),4&s[0]&&V(t,"max","max"===e[2]),2048&s[0]&&V(t,"pips",e[11]),122880&s[0]&&V(t,"pip-labels","label"===e[13]||"label"===e[14]||"label"===e[15]||"label"===e[16])},i(e){i||(qe(f),i=!0)},o(e){ke(f),i=!1},d(n){n&&C(t),O(l,n),u&&u.d(),f&&f.d(),e[50](null),s=!1,c(o)}}}function _r(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function gr(e){return e.type.includes("touch")?e.touches[0]:e}function yr(e,t,n){let i,s,o,a,l,c,u=r;e.$$.on_destroy.push((()=>u()));let{slider:f}=t,{range:d=!1}=t,{pushy:h=!1}=t,{min:m=0}=t,{max:_=100}=t,{step:g=1}=t,{values:y=[(_+m)/2]}=t,{vertical:v=!1}=t,{float:b=!1}=t,{reversed:w=!1}=t,{hoverable:q=!0}=t,{disabled:k=!1}=t,{pips:x=!1}=t,{pipstep:E}=t,{all:$}=t,{first:S}=t,{last:A}=t,{rest:I}=t,{id:C}=t,{prefix:O=""}=t,{suffix:T=""}=t,{formatter:P=((e,t,n)=>e)}=t,{handleFormatter:F=P}=t,{precision:N=2}=t,{springValues:j={stiffness:.15,damping:.4}}=t;const L=re();let D,R,M,B=0,z=!1,H=!1,U=!1,W=!1,V=y.length-1;const Q=e=>parseFloat(e.toFixed(N));function K(){return f.getBoundingClientRect()}function G(e){const t=K();let n=0,r=0,i=0;v?(n=e.clientY-t.top,r=n/t.height*100,r=w?r:100-r):(n=e.clientX-t.left,r=n/t.width*100,r=w?100-r:r),i=(_-m)/100*r+m,J(V,i)}function J(e,t){return t=o(t),void 0===e&&(e=V),d&&(0===e&&t>y[1]?h?n(0,y[1]=t,y):t=y[1]:1===e&&t<y[0]&&(h?n(0,y[0]=t,y):t=y[0])),y[e]!==t&&n(0,y[e]=t,y),R!==t&&(!k&&L("change",{activeHandle:V,startValue:D,previousValue:void 0===R?D:R,value:y[V],values:y.map((e=>o(e)))}),R=t),t}function Y(){!k&&L("stop",{activeHandle:V,startValue:D,value:y[V],values:y.map((e=>o(e)))})}return e.$$set=e=>{"slider"in e&&n(1,f=e.slider),"range"in e&&n(2,d=e.range),"pushy"in e&&n(44,h=e.pushy),"min"in e&&n(3,m=e.min),"max"in e&&n(4,_=e.max),"step"in e&&n(5,g=e.step),"values"in e&&n(0,y=e.values),"vertical"in e&&n(6,v=e.vertical),"float"in e&&n(7,b=e.float),"reversed"in e&&n(8,w=e.reversed),"hoverable"in e&&n(9,q=e.hoverable),"disabled"in e&&n(10,k=e.disabled),"pips"in e&&n(11,x=e.pips),"pipstep"in e&&n(12,E=e.pipstep),"all"in e&&n(13,$=e.all),"first"in e&&n(14,S=e.first),"last"in e&&n(15,A=e.last),"rest"in e&&n(16,I=e.rest),"id"in e&&n(17,C=e.id),"prefix"in e&&n(18,O=e.prefix),"suffix"in e&&n(19,T=e.suffix),"formatter"in e&&n(20,P=e.formatter),"handleFormatter"in e&&n(21,F=e.handleFormatter),"precision"in e&&n(45,N=e.precision),"springValues"in e&&n(46,j=e.springValues)},e.$$.update=()=>{24&e.$$.dirty[0]&&n(49,s=function(e){return e<=m?m:e>=_?_:e}),56&e.$$.dirty[0]|262144&e.$$.dirty[1]&&n(48,o=function(e){if(e<=m)return Q(m);if(e>=_)return Q(_);let t=(e-m)%g,n=e-t;return 2*Math.abs(t)>=g&&(n+=t>0?g:-g),n=s(n),Q(n)}),24&e.$$.dirty[0]&&n(23,i=function(e){let t=(e-m)/(_-m)*100;return isNaN(t)||t<=0?0:t>=100?100:Q(t)}),12582937&e.$$.dirty[0]|229376&e.$$.dirty[1]&&(Array.isArray(y)||(n(0,y=[(_+m)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),n(0,y=function(e){return"min"===d||"max"===d?e.slice(0,1):d?e.slice(0,2):e}(y.map((e=>o(e))))),B!==y.length?(n(22,M=Hn(y.map((e=>i(e))),j)),u(),u=p(M,(e=>n(29,c=e)))):M.set(y.map((e=>i(e)))),n(47,B=y.length)),320&e.$$.dirty[0]&&n(27,a=v?w?"top":"bottom":w?"right":"left"),320&e.$$.dirty[0]&&n(28,l=v?w?"bottom":"top":w?"left":"right")},[y,f,d,m,_,g,v,b,w,q,k,x,E,$,S,A,I,C,O,T,P,F,M,i,z,U,V,a,l,c,Q,J,function(e){return"min"===d?0:e[0]},function(e){return"max"===d?0:"min"===d?100-e[0]:100-e[1]},function(e){W&&(n(24,z=!1),H=!1,n(25,U=!1))},function(e){k||(n(26,V=_r(e.target)),n(24,z=!0))},function(e){if(!k){const t=_r(e.target);let n=e.ctrlKey||e.metaKey||e.shiftKey?10*g:g,r=!1;switch(e.key){case"PageDown":n*=10;case"ArrowRight":case"ArrowUp":J(t,y[t]+n),r=!0;break;case"PageUp":n*=10;case"ArrowLeft":case"ArrowDown":J(t,y[t]-n),r=!0;break;case"Home":J(t,m),r=!0;break;case"End":J(t,_),r=!0}r&&(e.preventDefault(),e.stopPropagation())}},function(e){if(!k){const t=e.target,r=gr(e);n(24,z=!0),H=!0,n(25,U=!0),n(26,V=function(e){const t=K();let n,r=0,i=0,s=0;return v?(r=e.clientY-t.top,i=r/t.height*100,i=w?i:100-i):(r=e.clientX-t.left,i=r/t.width*100,i=w?100-i:i),s=(_-m)/100*i+m,!0===d&&y[0]===y[1]?s>y[1]?1:0:(n=y.indexOf([...y].sort(((e,t)=>Math.abs(s-e)-Math.abs(s-t)))[0]),n)}(r)),D=R=o(y[V]),!k&&L("start",{activeHandle:V,value:D,values:y.map((e=>o(e)))}),"touchstart"!==e.type||t.matches(".pipVal")||G(r)}},function(e){"touchend"===e.type&&Y(),n(25,U=!1)},function(e){W=!1,z&&e.target!==f&&!f.contains(e.target)&&n(24,z=!1)},function(e){k||H&&G(gr(e))},function(e){if(!k){const t=e.target;H&&((t===f||f.contains(t))&&(n(24,z=!0),function(e){const t=f.querySelectorAll(".handle"),n=Array.prototype.includes.call(t,e),r=Array.prototype.some.call(t,(t=>t.contains(e)));return n||r}(t)||t.matches(".pipVal")||G(gr(e))),Y())}H=!1,n(25,U=!1)},function(e){H=!1,n(25,U=!1)},function(e){k||(e.target===f||f.contains(e.target))&&(W=!0)},h,N,j,B,o,s,function(e){se[e?"unshift":"push"]((()=>{f=e,n(1,f)}))}]}class vr extends Fe{constructor(e){super(),Pe(this,e,yr,mr,f,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},[-1,-1,-1])}}function br(e,t,n){const r=e.slice();return r[2]=t[n],r}function wr(e,t,n){const r=e.slice();return r[1]=t[n],r}function qr(e){let t,n,r,i=e[1].label+"";return{c(){t=T("option"),n=F(i),t.__value=r=e[1].deviceId,t.value=t.__value},m(e,r){I(e,t,r),A(t,n)},p(e,s){8&s&&i!==(i=e[1].label+"")&&B(n,i),8&s&&r!==(r=e[1].deviceId)&&(t.__value=r,t.value=t.__value)},d(e){e&&C(t)}}}function kr(e){let t,n,r,i=e[2].label+"";return{c(){t=T("option"),n=F(i),t.__value=r=e[2].deviceId,t.value=t.__value},m(e,r){I(e,t,r),A(t,n)},p(e,s){16&s&&i!==(i=e[2].label+"")&&B(n,i),16&s&&r!==(r=e[2].deviceId)&&(t.__value=r,t.value=t.__value)},d(e){e&&C(t)}}}function xr(e){let t,n,i,s,o,a,l,u,f,p,d,h,m,_=e[3],g=[];for(let t=0;t<_.length;t+=1)g[t]=qr(wr(e,_,t));let y=e[4],v=[];for(let t=0;t<y.length;t+=1)v[t]=kr(br(e,y,t));return{c(){t=T("div"),n=T("div"),i=T("select"),s=T("option"),s.textContent="なし";for(let e=0;e<g.length;e+=1)g[e].c();o=N(),a=T("select"),l=T("option"),l.textContent="なし";for(let e=0;e<v.length;e+=1)v[e].c();u=N(),f=T("video"),p=T("track"),s.__value=null,s.value=s.__value,void 0===e[1]&&ue((()=>e[8].call(i))),l.__value=null,l.value=l.__value,void 0===e[2]&&ue((()=>e[9].call(a))),R(p,"kind","captions"),R(f,"width","1280"),R(f,"height","720"),R(f,"style",d=e[0]?"":"display: none"),R(f,"class","svelte-9cqe1w"),R(t,"class","camera-reader svelte-9cqe1w")},m(r,c){I(r,t,c),A(t,n),A(n,i),A(i,s);for(let e=0;e<g.length;e+=1)g[e].m(i,null);U(i,e[1]),A(n,o),A(n,a),A(a,l);for(let e=0;e<v.length;e+=1)v[e].m(a,null);U(a,e[2]),A(t,u),A(t,f),A(f,p),e[10](f),h||(m=[L(i,"change",e[8]),L(a,"change",e[9])],h=!0)},p(e,[t]){if(8&t){let n;for(_=e[3],n=0;n<_.length;n+=1){const r=wr(e,_,n);g[n]?g[n].p(r,t):(g[n]=qr(r),g[n].c(),g[n].m(i,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=_.length}if(10&t&&U(i,e[1]),16&t){let n;for(y=e[4],n=0;n<y.length;n+=1){const r=br(e,y,n);v[n]?v[n].p(r,t):(v[n]=kr(r),v[n].c(),v[n].m(a,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=y.length}20&t&&U(a,e[2]),1&t&&d!==(d=e[0]?"":"display: none")&&R(f,"style",d)},i:r,o:r,d(n){n&&C(t),O(g,n),O(v,n),e[10](null),h=!1,c(m)}}}function Er(e,t,r){var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let s,o,a,l,{isVideoVisible:c=!0}=t,{imageProcessor:u}=t,f=[],p=[];function d({audio:e,video:t}){return i(this,void 0,void 0,(function*(){const s=yield function({video:e,audio:t}){return i(this,void 0,void 0,(function*(){if(null==e)return;const t={video:{deviceId:e,width:{min:1280,max:1280},height:{min:720,max:720}}};return console.log({mediaConstraints:t}),yield navigator.mediaDevices.getUserMedia(t)}))}({video:t,audio:e});null!=s&&(l=s,r(5,a.srcObject=l,a),a.paused&&(a.play(),function(){i(this,void 0,void 0,(function*(){const e=new n.default.VideoCapture(a);let t=new n.default.Mat(720,1280,n.default.CV_8UC4);for(;;)yield new Promise((e=>requestAnimationFrame(e))),yield e.read(t),yield u(t)}))}()))}))}return e.$$set=e=>{"isVideoVisible"in e&&r(0,c=e.isVideoVisible),"imageProcessor"in e&&r(6,u=e.imageProcessor)},e.$$.update=()=>{6&e.$$.dirty&&d({audio:o,video:s})},[c,s,o,f,p,a,u,function(){var e,t;return i(this,void 0,void 0,(function*(){if(null==(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia))return;navigator.mediaDevices.getUserMedia({audio:!0,video:!0});const n=yield function(){return i(this,void 0,void 0,(function*(){const e=yield navigator.mediaDevices.enumerateDevices();return{videos:e.filter((e=>"videoinput"===e.kind)),audios:e.filter((e=>"audioinput"===e.kind))}}))}();yield new Promise((e=>setTimeout(e,2e3))),r(3,f=n.videos),r(4,p=n.audios),r(1,s=null===(t=f.find((e=>e.label.includes("USB"))))||void 0===t?void 0:t.deviceId)}))},function(){s=W(this),r(1,s),r(3,f)},function(){o=W(this),r(2,o),r(4,p)},function(e){se[e?"unshift":"push"]((()=>{a=e,r(5,a)}))}]}class $r extends Fe{constructor(e){super(),Pe(this,e,Er,xr,f,{isVideoVisible:0,imageProcessor:6,init:7})}get init(){return this.$$.ctx[7]}}const Sr=e=>({noResultsText:2&e[0]}),Ar=e=>({noResultsText:e[1]});function Ir(e,t,n){const r=e.slice();return r[79]=t[n],r[81]=n,r}const Cr=e=>({item:131072&e[0],label:131072&e[0]}),Or=e=>({item:e[79].item,label:e[79].highlighted?e[79].highlighted.label:e[79].label});function Tr(e){let t,n,i;return{c(){t=T("span"),t.textContent="✖",R(t,"class","autocomplete-clear-button svelte-77usy")},m(r,s){I(r,t,s),n||(i=L(t,"click",e[27]),n=!0)},p:r,d(e){e&&C(t),n=!1,i()}}}function Pr(e){let t,n;const r=e[50]["no-results"],i=h(r,e,e[49],Ar),s=i||function(e){let t;return{c(){t=F(e[1])},m(e,n){I(e,t,n)},p(e,n){2&n[0]&&B(t,e[1])},d(e){e&&C(t)}}}(e);return{c(){t=T("div"),s&&s.c(),R(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,r){I(e,t,r),s&&s.m(t,null),n=!0},p(e,t){i?i.p&&(!n||2&t[0]|262144&t[1])&&_(i,r,e,e[49],t,Sr,Ar):s&&s.p&&2&t[0]&&s.p(e,t)},i(e){n||(qe(s,e),n=!0)},o(e){ke(s,e),n=!1},d(e){e&&C(t),s&&s.d(e)}}}function Fr(e){let t,n,r,i=e[17],s=[];for(let t=0;t<i.length;t+=1)s[t]=Rr(Ir(e,i,t));const o=e=>ke(s[e],1,1,(()=>{s[e]=null}));let a=e[0]>0&&e[17].length>e[0]&&Mr(e);return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=N(),a&&a.c(),n=j()},m(e,i){for(let t=0;t<s.length;t+=1)s[t].m(e,i);I(e,t,i),a&&a.m(e,i),I(e,n,i),r=!0},p(e,r){if(1212417&r[0]|262144&r[1]){let n;for(i=e[17],n=0;n<i.length;n+=1){const o=Ir(e,i,n);s[n]?(s[n].p(o,r),qe(s[n],1)):(s[n]=Rr(o),s[n].c(),qe(s[n],1),s[n].m(t.parentNode,t))}for(be(),n=i.length;n<s.length;n+=1)o(n);we()}e[0]>0&&e[17].length>e[0]?a?a.p(e,r):(a=Mr(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(e){if(!r){for(let e=0;e<i.length;e+=1)qe(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ke(s[e]);r=!1},d(e){O(s,e),e&&C(t),a&&a.d(e),e&&C(n)}}}function Nr(e){let t,n,r=e[79]&&jr(e);return{c(){r&&r.c(),t=j()},m(e,i){r&&r.m(e,i),I(e,t,i),n=!0},p(e,n){e[79]?r?(r.p(e,n),131072&n[0]&&qe(r,1)):(r=jr(e),r.c(),qe(r,1),r.m(t.parentNode,t)):r&&(be(),ke(r,1,1,(()=>{r=null})),we())},i(e){n||(qe(r),n=!0)},o(e){ke(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function jr(e){let t,n,r,i,s;const o=e[50].item,a=h(o,e,e[49],Or),l=a||function(e){let t;function n(e,t){return e[79].highlighted?Dr:Lr}let r=n(e),i=r(e);return{c(){i.c(),t=j()},m(e,n){i.m(e,n),I(e,t,n)},p(e,s){r===(r=n(e))&&i?i.p(e,s):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}(e);function u(){return e[53](e[79])}function f(){return e[54](e[81])}return{c(){t=T("div"),l&&l.c(),R(t,"class",n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy")},m(e,n){I(e,t,n),l&&l.m(t,null),r=!0,i||(s=[L(t,"click",u),L(t,"pointerenter",f)],i=!0)},p(i,s){e=i,a?a.p&&(!r||131072&s[0]|262144&s[1])&&_(a,o,e,e[49],s,Cr,Or):l&&l.p&&131072&s[0]&&l.p(e,s),(!r||32768&s[0]&&n!==(n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy"))&&R(t,"class",n)},i(e){r||(qe(l,e),r=!0)},o(e){ke(l,e),r=!1},d(e){e&&C(t),l&&l.d(e),i=!1,c(s)}}}function Lr(e){let t,n,r=e[79].label+"";return{c(){n=j(),t=new K(n)},m(e,i){t.m(r,e,i),I(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].label+"")&&t.p(r)},d(e){e&&C(n),e&&t.d()}}}function Dr(e){let t,n,r=e[79].highlighted.label+"";return{c(){n=j(),t=new K(n)},m(e,i){t.m(r,e,i),I(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].highlighted.label+"")&&t.p(r)},d(e){e&&C(n),e&&t.d()}}}function Rr(e){let t,n,r=e[79]&&(e[0]<=0||e[81]<e[0])&&Nr(e);return{c(){r&&r.c(),t=j()},m(e,i){r&&r.m(e,i),I(e,t,i),n=!0},p(e,n){e[79]&&(e[0]<=0||e[81]<e[0])?r?(r.p(e,n),131073&n[0]&&qe(r,1)):(r=Nr(e),r.c(),qe(r,1),r.m(t.parentNode,t)):r&&(be(),ke(r,1,1,(()=>{r=null})),we())},i(e){n||(qe(r),n=!0)},o(e){ke(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function Mr(e){let t,n,r,i,s=e[17].length-e[0]+"";return{c(){t=T("div"),n=F("..."),r=F(s),i=F(" results not shown"),R(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,s){I(e,t,s),A(t,n),A(t,r),A(t,i)},p(e,t){131073&t[0]&&s!==(s=e[17].length-e[0]+"")&&B(r,s)},d(e){e&&C(t)}}}function Br(e){let t,n,r,i,s,o,a,l,u,f,p,d,h,m,_,g=e[11]&&Tr(e);const y=[Fr,Pr],v=[];function b(e,t){return e[17]&&e[17].length>0?0:e[1]?1:-1}return~(u=b(e))&&(f=v[u]=y[u](e)),{c(){t=T("div"),n=T("input"),o=N(),g&&g.c(),a=N(),l=T("div"),f&&f.c(),R(n,"type","text"),R(n,"class",r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"),R(n,"id",i=e[5]?e[5]:""),R(n,"autocomplete",s=e[8]?"on":"off"),R(n,"placeholder",e[2]),R(n,"name",e[6]),n.disabled=e[12],R(n,"title",e[7]),R(l,"class",p=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"),R(t,"class",d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy")},m(r,i){I(r,t,i),A(t,n),e[51](n),z(n,e[16]),A(t,o),g&&g.m(t,null),A(t,a),A(t,l),~u&&v[u].m(l,null),e[55](l),h=!0,m||(_=[L(window,"click",e[21]),L(n,"input",e[52]),L(n,"input",e[24]),L(n,"focus",e[26]),L(n,"keydown",e[22]),L(n,"click",e[25]),L(n,"keypress",e[23])],m=!0)},p(e,o){(!h||16&o[0]&&r!==(r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"))&&R(n,"class",r),(!h||32&o[0]&&i!==(i=e[5]?e[5]:""))&&R(n,"id",i),(!h||256&o[0]&&s!==(s=e[8]?"on":"off"))&&R(n,"autocomplete",s),(!h||4&o[0])&&R(n,"placeholder",e[2]),(!h||64&o[0])&&R(n,"name",e[6]),(!h||4096&o[0])&&(n.disabled=e[12]),(!h||128&o[0])&&R(n,"title",e[7]),65536&o[0]&&n.value!==e[16]&&z(n,e[16]),e[11]?g?g.p(e,o):(g=Tr(e),g.c(),g.m(t,a)):g&&(g.d(1),g=null);let c=u;u=b(e),u===c?~u&&v[u].p(e,o):(f&&(be(),ke(v[c],1,1,(()=>{v[c]=null})),we()),~u?(f=v[u],f?f.p(e,o):(f=v[u]=y[u](e),f.c()),qe(f,1),f.m(l,null)):f=null),(!h||262656&o[0]&&p!==(p=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"))&&R(l,"class",p),(!h||3080&o[0]&&d!==(d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy"))&&R(t,"class",d)},i(e){h||(qe(f),h=!0)},o(e){ke(f),h=!1},d(n){n&&C(t),e[51](null),g&&g.d(),~u&&v[u].d(),e[55](null),m=!1,c(_)}}}function zr(e,t){let n;"function"!=typeof e&&console.error("Not a function: "+e+", argument: "+t);try{n=e(t)}catch(n){console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}let r=n;return null==r&&(r=""),"string"!=typeof r&&(r=r.toString()),r}function Hr(e,t,n){let r,{$$slots:s={},$$scope:o}=t,{items:a=[]}=t,{searchFunction:l=!1}=t,{labelFieldName:c}=t,{keywordsFieldName:u=c}=t,{valueFieldName:f}=t,{labelFunction:p=function(e){return null==e?"":c?e[c]:e}}=t,{keywordsFunction:d=function(e){return null==e?"":u?e[u]:p(e)}}=t,{valueFunction:h=function(e){return null==e?e:f?e[f]:e}}=t,{keywordsCleanFunction:m=function(e){return e}}=t,{textCleanFunction:_=function(e){return e}}=t,{beforeChange:g=function(e,t){return!0}}=t,{onChange:y=function(e){}}=t,{selectFirstIfEmpty:v=!1}=t,{minCharactersToSearch:b=1}=t,{maxItemsToShowInList:w=0}=t,{delay:q=0}=t,{localFiltering:k=!0}=t,{noResultsText:x="No results found"}=t,{placeholder:E}=t,{className:$}=t,{inputClassName:S}=t,{inputId:A}=t,{name:I}=t,{title:C}=t,{html5autocomplete:O}=t,{dropdownClassName:T}=t,{hideArrow:P=!1}=t,{showClear:F=!1}=t,{disabled:N=!1}=t,{debug:j=!1}=t,{selectedItem:L}=t,{value:D}=t;const R="sautocomplete-"+Math.floor(1e3*Math.random());let M,B,z,H,U,W=!1,V=-1,Q=0,K=[];function G(e){return zr(p,e)}function J(e){const t=zr(d,e);let n=zr(m,t);return n=n.toLowerCase().trim(),j&&console.log("Extracted keywords: '"+n+"' from item: "+JSON.stringify(e)),n}function Y(){let e;j&&(e=performance.now(),console.log("prepare items to search"),console.log("items: "+JSON.stringify(a))),Array.isArray(a)||(console.warn("Autocomplete items / search function did not return array but",a),n(28,a=[]));const t=a?a.length:0;if(K=new Array(t),t>0&&a.forEach(((e,t)=>{const n=function(e){return{keywords:J(e),label:G(e),item:e}}(e);null==n&&console.log("Undefined item for: ",e),K[t]=n})),j){const t=performance.now();console.log(K.length+" items to search prepared in "+(t-e)+" milliseconds")}}async function X(){let e;j&&(e=performance.now(),console.log("Searching user entered text: '"+z+"'"));const t=function(e){if(null==e)return"";const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();if(n(48,Q=t.length),b>1&&Q<b)return"";const r=_(t).toLowerCase().trim();return j&&console.log("Change user entered text '"+e+"' into '"+r+"'"),r}(z);if(""===t)return n(17,H=K),pe(),void(j&&console.log("User entered text is empty set the list of items to all items"));let r;if(l&&(n(28,a=await l(t)),Y()),k){const e=t.split(" ");r=K.filter((t=>{if(!t)return!1;const n=t.keywords;let r=0;return e.forEach((e=>{n.includes(e)&&r++})),r>=e.length}))}else r=K;const i=de(t,["label"]),s=r.map(i);if(n(17,H=s),pe(),j){const t=performance.now();console.log("Search took "+(t-e)+" milliseconds, found "+H.length+" items")}}function Z(e){if(j&&console.log("selectListItem"),void 0===e)return j&&console.log(`listItem ${i} is undefined. Can not select.`),!1;const t=e.item;return g(L,t)&&n(29,L=t),!0}function ee(){j&&console.log("selectItem");Z(H[V])&&ue()}function te(){j&&console.log("up"),ce(),V>0&&n(15,V--,V),re()}function ne(){j&&console.log("down"),ce(),V<H.length-1&&n(15,V++,V),re()}function re(){j&&console.log("highlight");const e=".selected";j&&console.log("Seaching DOM element: .selected in "+B);const t=B&&B.querySelector(e);t?"function"==typeof t.scrollIntoViewIfNeeded?(j&&console.log("Scrolling selected item into view"),t.scrollIntoViewIfNeeded()):j&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):j&&console.warn("Selected item not found to scroll into view")}function ie(e){j&&console.log("onListItemClick"),Z(e)&&ue()}function oe(){X(),n(15,V=0),ce()}function ae(e){j&&console.log("onEsc"),e.stopPropagation(),W&&(M.focus(),ue())}function le(){if(j&&console.log("resetListToAllItemsAndOpen"),n(17,H=K),ce(),L){j&&console.log("Searching currently selected item: "+JSON.stringify(L));for(let e=0;e<K.length;e++){const t=K[e];if(void 0!==t){if(j&&console.log("Item "+e+": "+JSON.stringify(t)),L==t.item){n(15,V=e),j&&console.log("Found selected item: "+e+": "+JSON.stringify(t)),re();break}}else j&&console.log(`listItem ${e} is undefined. Skipping.`)}}}function ce(){j&&console.log("open"),fe()||n(47,W=!0)}function ue(){j&&console.log("close"),n(47,W=!1),!z&&v&&(de=0,ee())}function fe(){return b>1&&Q<b}function pe(){fe()&&ue()}function de(e,t){const n="("+e.trim().replace(/\s/g,")(.*)(")+")",r=new RegExp(n,"ig");let i=1;const s=n.split(")(").length+1;let o="";for(;i<s;i++)o+=i%2?`<b>$${i}</b>`:`$${i}`;return e=>{const n=Object.assign({highlighted:{}},e);return t&&t.forEach((e=>{n[e]&&(n.highlighted[e]=n[e].replace(r,o))})),n}}return e.$$set=e=>{"items"in e&&n(28,a=e.items),"searchFunction"in e&&n(31,l=e.searchFunction),"labelFieldName"in e&&n(32,c=e.labelFieldName),"keywordsFieldName"in e&&n(33,u=e.keywordsFieldName),"valueFieldName"in e&&n(34,f=e.valueFieldName),"labelFunction"in e&&n(35,p=e.labelFunction),"keywordsFunction"in e&&n(36,d=e.keywordsFunction),"valueFunction"in e&&n(37,h=e.valueFunction),"keywordsCleanFunction"in e&&n(38,m=e.keywordsCleanFunction),"textCleanFunction"in e&&n(39,_=e.textCleanFunction),"beforeChange"in e&&n(40,g=e.beforeChange),"onChange"in e&&n(41,y=e.onChange),"selectFirstIfEmpty"in e&&n(42,v=e.selectFirstIfEmpty),"minCharactersToSearch"in e&&n(43,b=e.minCharactersToSearch),"maxItemsToShowInList"in e&&n(0,w=e.maxItemsToShowInList),"delay"in e&&n(44,q=e.delay),"localFiltering"in e&&n(45,k=e.localFiltering),"noResultsText"in e&&n(1,x=e.noResultsText),"placeholder"in e&&n(2,E=e.placeholder),"className"in e&&n(3,$=e.className),"inputClassName"in e&&n(4,S=e.inputClassName),"inputId"in e&&n(5,A=e.inputId),"name"in e&&n(6,I=e.name),"title"in e&&n(7,C=e.title),"html5autocomplete"in e&&n(8,O=e.html5autocomplete),"dropdownClassName"in e&&n(9,T=e.dropdownClassName),"hideArrow"in e&&n(10,P=e.hideArrow),"showClear"in e&&n(11,F=e.showClear),"disabled"in e&&n(12,N=e.disabled),"debug"in e&&n(46,j=e.debug),"selectedItem"in e&&n(29,L=e.selectedItem),"value"in e&&n(30,D=e.value),"$$scope"in e&&n(49,o=e.$$scope)},e.$$.update=()=>{536870912&e.$$.dirty[0]&&(n(30,D=h(L)),n(16,z=G(L)),y(L)),268435456&e.$$.dirty[0]|196608&e.$$.dirty[1]&&n(18,r=W&&(a&&a.length>0||Q>0)),268435456&e.$$.dirty[0]&&Y()},[w,x,E,$,S,A,I,C,O,T,P,F,N,M,B,V,z,H,r,R,ie,function(e){j&&console.log("onDocumentClick: "+JSON.stringify(e.target)),e.target.closest("."+R)?(j&&console.log("onDocumentClick inside"),re()):(j&&console.log("onDocumentClick outside"),ue())},function(e){j&&console.log("onKeyDown");let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const n={Tab:W?ne.bind(this):null,ShiftTab:W?te.bind(this):null,ArrowDown:ne.bind(this),ArrowUp:te.bind(this),Escape:ae.bind(this)}[t];"function"==typeof n&&(e.preventDefault(),n(e))},function(e){j&&console.log("onKeyPress"),"Enter"===e.key&&(e.preventDefault(),ee())},function(e){j&&console.log("onInput"),n(16,z=e.target.value),U&&clearTimeout(U),q?U=setTimeout(oe,q):oe()},function(){j&&console.log("onInputClick"),le()},function(){j&&console.log("onFocus"),le()},function(){j&&console.log("clear"),n(16,z=""),n(29,L=void 0),setTimeout((()=>{M.focus(),ue()}))},a,L,D,l,c,u,f,p,d,h,m,_,g,y,v,b,q,k,j,W,Q,o,s,function(e){se[e?"unshift":"push"]((()=>{M=e,n(13,M)}))},function(){z=this.value,n(16,z)},e=>ie(e),e=>{n(15,V=e)},function(e){se[e?"unshift":"push"]((()=>{B=e,n(14,B)}))}]}class Ur extends Fe{constructor(e){super(),Pe(this,e,Hr,Br,f,{items:28,searchFunction:31,labelFieldName:32,keywordsFieldName:33,valueFieldName:34,labelFunction:35,keywordsFunction:36,valueFunction:37,keywordsCleanFunction:38,textCleanFunction:39,beforeChange:40,onChange:41,selectFirstIfEmpty:42,minCharactersToSearch:43,maxItemsToShowInList:0,delay:44,localFiltering:45,noResultsText:1,placeholder:2,className:3,inputClassName:4,inputId:5,name:6,title:7,html5autocomplete:8,dropdownClassName:9,hideArrow:10,showClear:11,disabled:12,debug:46,selectedItem:29,value:30},[-1,-1,-1])}}function Wr(e){let t,n,r,i,s,o,a,l,c,u;function f(t){e[7](t)}let p={items:e[4],inputId:e[3]+"page",placeholder:"ページ",showClear:!1,hideArrow:!0,className:"autocomplete-charm-page"};function d(t){e[8](t)}void 0!==e[0]&&(p.selectedItem=e[0]),n=new Ur({props:p}),se.push((()=>Ae(n,"selectedItem",f)));let h={items:e[5],inputId:e[3]+"row",placeholder:"行",showClear:!1,hideArrow:!0,className:"autocomplete-charm-row"};function m(t){e[9](t)}void 0!==e[1]&&(h.selectedItem=e[1]),s=new Ur({props:h}),se.push((()=>Ae(s,"selectedItem",d)));let _={items:e[6],inputId:e[3]+"col",placeholder:"列",showClear:!1,hideArrow:!0,className:"autocomplete-charm-col"};return void 0!==e[2]&&(_.selectedItem=e[2]),l=new Ur({props:_}),se.push((()=>Ae(l,"selectedItem",m))),{c(){t=T("div"),Ie(n.$$.fragment),i=N(),Ie(s.$$.fragment),a=N(),Ie(l.$$.fragment)},m(e,r){I(e,t,r),Ce(n,t,null),A(t,i),Ce(s,t,null),A(t,a),Ce(l,t,null),u=!0},p(e,[t]){const i={};8&t&&(i.inputId=e[3]+"page"),!r&&1&t&&(r=!0,i.selectedItem=e[0],fe((()=>r=!1))),n.$set(i);const a={};8&t&&(a.inputId=e[3]+"row"),!o&&2&t&&(o=!0,a.selectedItem=e[1],fe((()=>o=!1))),s.$set(a);const u={};8&t&&(u.inputId=e[3]+"col"),!c&&4&t&&(c=!0,u.selectedItem=e[2],fe((()=>c=!1))),l.$set(u)},i(e){u||(qe(n.$$.fragment,e),qe(s.$$.fragment,e),qe(l.$$.fragment,e),u=!0)},o(e){ke(n.$$.fragment,e),ke(s.$$.fragment,e),ke(l.$$.fragment,e),u=!1},d(e){e&&C(t),Oe(n),Oe(s),Oe(l)}}}function Vr(e,t,n){let{inputIdPrefix:r}=t,{page:i}=t,{row:s}=t,{col:o}=t;const a=[...Array(31).keys()].slice(1),l=[...Array(6).keys()].slice(1),c=[...Array(9).keys()].slice(1);return e.$$set=e=>{"inputIdPrefix"in e&&n(3,r=e.inputIdPrefix),"page"in e&&n(0,i=e.page),"row"in e&&n(1,s=e.row),"col"in e&&n(2,o=e.col)},[i,s,o,r,a,l,c,function(e){i=e,n(0,i)},function(e){s=e,n(1,s)},function(e){o=e,n(2,o)}]}class Qr extends Fe{constructor(e){super(),Pe(this,e,Vr,Wr,f,{inputIdPrefix:3,page:0,row:1,col:2})}}const Kr=99,Gr=10,Jr=5;function Yr(e){let t,n,r,i;function s(t){e[7](t)}let o={items:e[6],inputId:e[1],placeholder:e[2],showClear:e[3],hideArrow:e[4],className:e[5]};return void 0!==e[0]&&(o.selectedItem=e[0]),n=new Ur({props:o}),se.push((()=>Ae(n,"selectedItem",s))),{c(){t=T("div"),Ie(n.$$.fragment)},m(e,r){I(e,t,r),Ce(n,t,null),i=!0},p(e,[t]){const i={};2&t&&(i.inputId=e[1]),4&t&&(i.placeholder=e[2]),8&t&&(i.showClear=e[3]),16&t&&(i.hideArrow=e[4]),32&t&&(i.className=e[5]),!r&&1&t&&(r=!0,i.selectedItem=e[0],fe((()=>r=!1))),n.$set(i)},i(e){i||(qe(n.$$.fragment,e),i=!0)},o(e){ke(n.$$.fragment,e),i=!1},d(e){e&&C(t),Oe(n)}}}function Xr(e,t,n){const r=[...Array(11).keys()].slice(1);let{inputId:i="input-rarity"}=t,{placeholder:s=""}=t,{showClear:o=!1}=t,{hideArrow:a=!0}=t,{className:l="autocomplete-rarity"}=t,{value:c}=t;return e.$$set=e=>{"inputId"in e&&n(1,i=e.inputId),"placeholder"in e&&n(2,s=e.placeholder),"showClear"in e&&n(3,o=e.showClear),"hideArrow"in e&&n(4,a=e.hideArrow),"className"in e&&n(5,l=e.className),"value"in e&&n(0,c=e.value)},[c,i,s,o,a,l,r,function(e){c=e,n(0,c)}]}class Zr extends Fe{constructor(e){super(),Pe(this,e,Xr,Yr,f,{inputId:1,placeholder:2,showClear:3,hideArrow:4,className:5,value:0})}}const ei=[{name:"合気",hiragana:"あいき",englishCharacters:"aiki"},{name:"アイテム使用強化",hiragana:"あいてむしようきょうか",englishCharacters:"aitemusiyoukyouka"},{name:"泡沫の舞",hiragana:"うたかたのまい",englishCharacters:"utakatanomai"},{name:"炎鱗の恩恵",hiragana:"えんりんのおんけい",englishCharacters:"enrinnoonkei"},{name:"鬼火纏",hiragana:"おにびまとい",englishCharacters:"onibimatoi"},{name:"ガード強化",hiragana:"がーどきょうか",englishCharacters:"ga-dokyouka"},{name:"ガード性能",hiragana:"がーどせいのう",englishCharacters:"ga-doseinou"},{name:"会心撃【属性】",hiragana:"かいしんげきぞくせい",englishCharacters:"kaisingekizokusei"},{name:"回避距離UP",hiragana:"かいひきょりあっぷ",englishcharacters:"kaihikyoriappu"},{name:"回避性能",hiragana:"かいひせいのう",englishCharacters:"kaihiseinou"},{name:"回復速度",hiragana:"かいふくそくど",englishCharacters:"kaihukusokudo"},{name:"翔蟲使い",hiragana:"かけりむしつかい",englishCharacters:"kakerimusitukai"},{name:"火事場力",hiragana:"かじばりょく",englishCharacters:"kajibaryoku"},{name:"滑走強化",hiragana:"かっそうきょうか",englishCharacters:"kassoukyouka"},{name:"霞皮の恩恵",hiragana:"かすみがわのおんけい",englishCharacters:"kasumigawanoonkei"},{name:"雷属性攻撃強化",hiragana:"かみなりぞくせいこうげききょうか",englishCharacters:"kaminarizokuseikougekikyouka"},{name:"雷耐性",hiragana:"かみなりたいせい",englishCharacters:"kaminaritaisei"},{name:"貫通弾・貫通矢強化",hiragana:"かんつうだんかんつうやきょうか",englishCharacters:"kantuudankantuuyakyouka"},{name:"気絶耐性",hiragana:"きぜつたいせい",englishCharacters:"kizetutaisei"},{name:"キノコ大好き",hiragana:"きのこだいすき",englishCharacters:"kinokodaisuki"},{name:"逆襲",hiragana:"ぎゃくしゅう",englishCharacters:"gyakusyuu"},{name:"供応",hiragana:"きょうおう",englishCharacters:"kyouou"},{name:"強化持続",hiragana:"きょうかじぞく",englishCharacters:"kyoukajizoku"},{name:"狂竜症【蝕】",hiragana:"きょうりゅうしょうしょく",englishCharacters:"kyouryuusyousyoku"},{name:"KO術",hiragana:"けーおーじゅつ",englishcharacters:"ke-o-jutu"},{name:"血氣",hiragana:"けっき",englishcharacters:"kekki"},{name:"激昂",hiragana:"げっこう",englishcharacters:"gekkou"},{name:"研磨術【鋭】",hiragana:"けんまじゅつえい",englishcharacters:"kenmajyutuei"},{name:"広域化",hiragana:"こういきか",englishCharacters:"kouikika"},{name:"幸運",hiragana:"こううん",englishCharacters:"kouun"},{name:"鋼殻の恩恵",hiragana:"こうかくのおんけい",englishCharacters:"koukakunoonkei"},{name:"業鎧【修羅】",hiragana:"ごうがいしゅら",englishCharacters:"gougaisyura"},{name:"攻撃",hiragana:"こうげき",englishCharacters:"kougeki"},{name:"剛刃研磨",hiragana:"ごうじんけんま",englishCharacters:"goujinkenma"},{name:"攻勢",hiragana:"こうせい",englishCharacters:"kousei"},{name:"高速変形",hiragana:"こうそくへんけい",englishCharacters:"kousokuhenkei"},{name:"氷属性攻撃強化",hiragana:"こおりぞくせいきょうか",englishCharacters:"koorizokuseikyouka"},{name:"氷耐性",hiragana:"こおりたいせい",englishCharacters:"kooritaisei"},{name:"渾身",hiragana:"こんしん",englishCharacters:"konsin"},{name:"災禍転福",hiragana:"さいかてんぷく",englishCharacters:"saikatenpuku"},{name:"逆恨み",hiragana:"さかうらみ",englishCharacters:"sakaurami"},{name:"散弾・拡散矢強化",hiragana:"さんだんかんつうやきょうか",englishCharacters:"sandankantuuyakyouka"},{name:"死中に活",hiragana:"しちゅうにかつ",englishCharacters:"sityuunikatu"},{name:"疾之息吹",hiragana:"しつのいぶき",englishCharacters:"situnoibuki"},{name:"弱点特効",hiragana:"じゃくてんとっこう",englishCharacters:"jakutentokkou"},{name:"ジャンプ鉄人",hiragana:"じゃんぷてつじん",englishCharacters:"janputetujin"},{name:"集中",hiragana:"しゅうちゅう",englishCharacters:"syuutyuu"},{name:"植生学",hiragana:"しょくせいがく",englishCharacters:"syokuseigaku"},{name:"心眼",hiragana:"しんがん",englishCharacters:"singan"},{name:"刃鱗磨き",hiragana:"じんりんみがき",englishCharacters:"jinrinmigaki"},{name:"睡眠属性強化",hiragana:"すいみんぞくせいきょうか",englishCharacters:"suiminzokuseikyouka"},{name:"睡眠耐性",hiragana:"すいみんたいせい",englishCharacters:"suimintaisei"},{name:"スタミナ急速回復",hiragana:"すたみなきゅうそくかいふく",englishCharacters:"sutaminakyuusokukaihuku"},{name:"スタミナ奪取",hiragana:"すたみなだっしゅ",englishCharacters:"sutaminadassyu"},{name:"精霊の加護",hiragana:"せいれいのかご",englishCharacters:"seireinokago"},{name:"攻めの守勢",hiragana:"せめのしゅせい",englishCharacters:"semenosyusei"},{name:"装填拡張",hiragana:"そうてんかくちょう",englishCharacters:"soutenkakutyou"},{name:"装填速度",hiragana:"そうてんそくど",englishCharacters:"soutensokudo"},{name:"速射強化",hiragana:"そくしゃきょうか",englishCharacters:"sokusyakyouka"},{name:"属性やられ耐性",hiragana:"ぞくせいやられたいせい",englishCharacters:"zokuseiyararetaisei"},{name:"体術",hiragana:"たいじゅつ",englishCharacters:"taijutu"},{name:"耐震",hiragana:"たいしん",englishCharacters:"taisin"},{name:"体力回復量UP",hiragana:"たいりょくかいふくりょうあっぷ",englishcharacters:"tairyokukaihukuryouappu"},{name:"匠",hiragana:"たくみ",englishCharacters:"takumi"},{name:"達人芸",hiragana:"たつじんげい",englishCharacters:"tatujingei"},{name:"弾丸節約",hiragana:"だんがんせつやく",englishCharacters:"dangansetuyaku"},{name:"弾導強化",hiragana:"だんどうきょうか",englishCharacters:"dandoukyouka"},{name:"力の解放",hiragana:"ちからのかいほう",englishCharacters:"tikaranokaihou"},{name:"地質学",hiragana:"ちしつがく",englishCharacters:"tisitugaku"},{name:"チャージマスター",hiragana:"チャージマスター",englishCharacters:"tya-jimasuta-"},{name:"チューンアップ",hiragana:"チューンアップ",englishCharacters:"tyu-nnappu"},{name:"超会心",hiragana:"ちょうかいしん",englishCharacters:"tyoukaisin"},{name:"挑戦者",hiragana:"ちょうせんしゃ",englishCharacters:"tyousensya"},{name:"通常弾・連射矢強化",hiragana:"つうじょうだんそくしゃやきょうか",englishCharacters:"tuujoudansokusyayakyouka"},{name:"泥雪耐性",hiragana:"でいせつたいせい",englishCharacters:"deisetutaisei"},{name:"砥石使用高速化",hiragana:"といししようこうそくか",englishCharacters:"toisisiyoukousokuka"},{name:"特殊射撃強化",hiragana:"とくしゅしゃげききょうか",englishCharacters:"tokusyusyagekikyouka"},{name:"毒属性強化",hiragana:"どくぞくせいきょうか",englishCharacters:"dokuzokuseikyouka"},{name:"毒耐性",hiragana:"どくたいせい",englishCharacters:"dokutaisei"},{name:"飛び込み",hiragana:"とびこみ",englishCharacters:"tobikomi"},{name:"鈍器使い",hiragana:"どんきつかい",englishCharacters:"donkitukai"},{name:"納刀術",hiragana:"のうとうじゅつ",englishCharacters:"noutoujutu"},{name:"乗り名人",hiragana:"のりめいじん",englishCharacters:"norimeijin"},{name:"破壊王",hiragana:"はかいおう",englishCharacters:"hakaiou"},{name:"剥ぎ取り鉄人",hiragana:"はぎとりてつじん",englishCharacters:"hagitoritetujin"},{name:"剥ぎ取り名人",hiragana:"はぎとりめいじん",englishCharacters:"hagitorimeijin"},{name:"爆破属性強化",hiragana:"ばくはぞくせいきょうか",englishCharacters:"bakuhazokuseikyouka"},{name:"爆破やられ耐性",hiragana:"ばくはやられたいせい",englishCharacters:"bakuhayararetaisei"},{name:"抜刀術【力】",hiragana:"ばっとうじゅつちから",englishCharacters:"battoujututikara"},{name:"抜刀術【技】",hiragana:"ばっとうじゅつわざ",englishCharacters:"battoujutuwaza"},{name:"早食い",hiragana:"はやぐい",englishCharacters:"hayagui"},{name:"腹減り耐性",hiragana:"はらへりたいせい",englishCharacters:"haraheritaisei"},{name:"反動軽減",hiragana:"はんどうけいげん",englishCharacters:"handoukeigen"},{name:"火属性攻撃強化",hiragana:"ひぞくせいこうげききょうか",englishCharacters:"hizokuseikougekikyouka"},{name:"火耐性",hiragana:"ひたいせい",englishCharacters:"hitaisei"},{name:"ひるみ軽減",hiragana:"ひるみけいげん",englishCharacters:"hirumikeigen"},{name:"風圧耐性",hiragana:"ふうあつたいせい",englishCharacters:"huuatutaisei"},{name:"風紋の一致",hiragana:"ふうもんのいっち",englishCharacters:"huumonnoitti"},{name:"笛吹き名人",hiragana:"ふえふきめいじん",englishCharacters:"huehukimeijin"},{name:"不屈",hiragana:"ふくつ",englishCharacters:"hukutu"},{name:"伏魔響命",hiragana:"ふくまきょうめい",englishCharacters:"hukumakyoumei"},{name:"フルチャージ",hiragana:"ふるちゃーじ",englishCharacters:"hurutya-ji"},{name:"ブレ抑制",hiragana:"ぶれよくせい",englishCharacters:"bureyokusei"},{name:"壁面移動",hiragana:"へきめんいどう",englishCharacters:"hekimenidou"},{name:"壁面移動【翔】",hiragana:"へきめんいどうしょう",englishCharacters:"hekimenidousyou"},{name:"防御",hiragana:"ぼうぎょ",englishCharacters:"bougyo"},{name:"砲術",hiragana:"ほうじゅつ",englishCharacters:"houjutu"},{name:"砲弾装填",hiragana:"ほうだんそうてん",englishCharacters:"houdansouten"},{name:"捕獲名人",hiragana:"ほかくめいじん",englishCharacters:"hokakumeijin"},{name:"ボマー",hiragana:"ぼまー",englishCharacters:"boma-"},{name:"麻痺属性強化",hiragana:"まひぞくせいきょうか",englishCharacters:"mahizokuseikyouka"},{name:"麻痺耐性",hiragana:"まひたいせい",englishCharacters:"mahitaisei"},{name:"満足感",hiragana:"まんぞくかん",englishCharacters:"manzokukan"},{name:"見切り",hiragana:"みきり",englishCharacters:"mikiri"},{name:"水属性攻撃強化",hiragana:"みずぞくせいこうげききょうか",englishCharacters:"mizuzokuseikougekikyouka"},{name:"水耐性",hiragana:"みずたいせい",englishCharacters:"mizutaisei"},{name:"耳栓",hiragana:"みみせん",englishCharacters:"mimisen"},{name:"弓溜め段階解放",hiragana:"ゆみためだんかいかいほう",englishCharacters:"yumitamedankaikaihou"},{name:"陽動",hiragana:"ようどう",englishCharacters:"youdou"},{name:"雷紋の一致",hiragana:"らいもんのいっち",englishCharacters:"raimonnoitti"},{name:"ランナー",hiragana:"らんなー",englishCharacters:"ranna-"},{name:"龍属性攻撃強化",hiragana:"りゅうぞくせいこうげききょうか",englishCharacters:"ryuuzokuseikougekikyouka"},{name:"龍耐性",hiragana:"りゅうたいせい",englishCharacters:"ryuutaisei"},{name:"連撃",hiragana:"れんげき",englishCharacters:"rengeki"},{name:"業物",hiragana:"わざもの",englishCharacters:"wazamono"},{name:"龍気活性",hiragana:"りゅうきかっせい",englishCharacters:"ryuukikassei"},{name:"根性",hiragana:"こんじょう",englishCharacters:"konjyou"},{name:"巧撃",hiragana:"こうげき",englishCharacters:"kougeki"},{name:"闇討ち",hiragana:"やみうち",englishCharacters:"yamiuti"},{name:"弱点特効【属性】",hiragana:"じゃくてんとっこうぞくせい",englishCharacters:"jakutentokkouzokusei"},{name:"顕如盤石",hiragana:"けんにょばんじゃく",englishCharacters:"kennyobanjaku"},{name:"状態異常確定蓄積",hiragana:"じょうたいいじょうかくていちくせき",englishCharacters:"jyoutaiijyoukakuteitikuseki"},{name:"煽衛",hiragana:"せんえい",englishCharacters:"sennei"},{name:"剛心",hiragana:"ごうしん",englishCharacters:"gousin"},{name:"蓄積時攻撃強化",hiragana:"ちくせきじこうげききょうか",englishCharacters:"tikusekijikougekikyouka"},{name:"狂化",hiragana:"きょうか",englishCharacters:"kyouka"},{name:"奮闘",hiragana:"ふんとう",englishCharacters:"huntou"},{name:"風纏",hiragana:"かぜまとい",englishCharacters:"kazematoi"},{name:"粉塵纏",hiragana:"ふんじんまとい",englishCharacters:"hunjinmatoi"},{name:"龍気変換",hiragana:"りゅうきかっせい",englishCharacters:"ryuukihenkan"},{name:"冰気錬成",hiragana:"ひょうきれんせい",englishCharacters:"hyoukirensei"}];function ti(e){let t,n,r;function i(t){e[7](t)}let s={items:ei,inputId:e[0],labelFieldName:"name",valueFieldName:"name",keywordsFunction:ni,placeholder:e[1],showClear:e[2],hideArrow:e[3],className:e[4]};return void 0!==e[5]&&(s.selectedItem=e[5]),t=new Ur({props:s}),se.push((()=>Ae(t,"selectedItem",i))),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),r=!0},p(e,[r]){const i={};1&r&&(i.inputId=e[0]),2&r&&(i.placeholder=e[1]),4&r&&(i.showClear=e[2]),8&r&&(i.hideArrow=e[3]),16&r&&(i.className=e[4]),!n&&32&r&&(n=!0,i.selectedItem=e[5],fe((()=>n=!1))),t.$set(i)},i(e){r||(qe(t.$$.fragment,e),r=!0)},o(e){ke(t.$$.fragment,e),r=!1},d(e){Oe(t,e)}}}const ni=e=>`${e.name} ${e.hiragana} ${e.englishCharacters}`;function ri(e,t,n){let r,{inputId:i="input-skill"}=t,{placeholder:s="スキル"}=t,{showClear:o=!0}=t,{hideArrow:a=!0}=t,{className:l="autocomplete-skill"}=t,{value:c}=t;return e.$$set=e=>{"inputId"in e&&n(0,i=e.inputId),"placeholder"in e&&n(1,s=e.placeholder),"showClear"in e&&n(2,o=e.showClear),"hideArrow"in e&&n(3,a=e.hideArrow),"className"in e&&n(4,l=e.className),"value"in e&&n(6,c=e.value)},e.$$.update=()=>{64&e.$$.dirty&&function(e){n(5,r=ei.find((t=>t.name===e)))}(c),32&e.$$.dirty&&function(e){n(6,c=null==e?void 0:e.name)}(r)},[i,s,o,a,l,r,c,function(e){r=e,n(5,r)}]}class ii extends Fe{constructor(e){super(),Pe(this,e,ri,ti,f,{inputId:0,placeholder:1,showClear:2,hideArrow:3,className:4,value:6})}}function si(e){let t,n,r;function i(t){e[7](t)}let s={items:e[6],inputId:e[1],placeholder:e[2],showClear:e[3],hideArrow:e[4],className:e[5]};return void 0!==e[0]&&(s.selectedItem=e[0]),t=new Ur({props:s}),se.push((()=>Ae(t,"selectedItem",i))),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),r=!0},p(e,[r]){const i={};2&r&&(i.inputId=e[1]),4&r&&(i.placeholder=e[2]),8&r&&(i.showClear=e[3]),16&r&&(i.hideArrow=e[4]),32&r&&(i.className=e[5]),!n&&1&r&&(n=!0,i.selectedItem=e[0],fe((()=>n=!1))),t.$set(i)},i(e){r||(qe(t.$$.fragment,e),r=!0)},o(e){ke(t.$$.fragment,e),r=!1},d(e){Oe(t,e)}}}function oi(e,t,n){const r=[...Array(8).keys()].slice(1);let{inputId:i="input-skill-level-0"}=t,{placeholder:s="Lv"}=t,{showClear:o=!1}=t,{hideArrow:a=!0}=t,{className:l="autocomplete-skill-level"}=t,{value:c=0}=t;return e.$$set=e=>{"inputId"in e&&n(1,i=e.inputId),"placeholder"in e&&n(2,s=e.placeholder),"showClear"in e&&n(3,o=e.showClear),"hideArrow"in e&&n(4,a=e.hideArrow),"className"in e&&n(5,l=e.className),"value"in e&&n(0,c=e.value)},[c,i,s,o,a,l,r,function(e){c=e,n(0,c)}]}class ai extends Fe{constructor(e){super(),Pe(this,e,oi,si,f,{inputId:1,placeholder:2,showClear:3,hideArrow:4,className:5,value:0})}}function li(e,t,n){const r=e.slice();return r[8]=t[n],r[9]=t,r[10]=n,r}function ci(e){let t,n,r;function i(t){e[7](t,e[8])}let s={items:e[6],inputId:""+(e[1]+e[8]),placeholder:""+(e[2]+(e[8]+1)),showClear:e[3],hideArrow:e[4],className:e[5]};return void 0!==e[0][e[8]]&&(s.selectedItem=e[0][e[8]]),t=new Ur({props:s}),se.push((()=>Ae(t,"selectedItem",i))),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),r=!0},p(r,i){e=r;const s={};2&i&&(s.inputId=""+(e[1]+e[8])),4&i&&(s.placeholder=""+(e[2]+(e[8]+1))),8&i&&(s.showClear=e[3]),16&i&&(s.hideArrow=e[4]),32&i&&(s.className=e[5]),!n&&1&i&&(n=!0,s.selectedItem=e[0][e[8]],fe((()=>n=!1))),t.$set(s)},i(e){r||(qe(t.$$.fragment,e),r=!0)},o(e){ke(t.$$.fragment,e),r=!1},d(e){Oe(t,e)}}}function ui(e){let t,n,r=[...Array(3).keys()],i=[];for(let t=0;t<r.length;t+=1)i[t]=ci(li(e,r,t));const s=e=>ke(i[e],1,1,(()=>{i[e]=null}));return{c(){t=T("div");for(let e=0;e<i.length;e+=1)i[e].c()},m(e,r){I(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,[n]){if(127&n){let o;for(r=[...Array(3).keys()],o=0;o<r.length;o+=1){const s=li(e,r,o);i[o]?(i[o].p(s,n),qe(i[o],1)):(i[o]=ci(s),i[o].c(),qe(i[o],1),i[o].m(t,null))}for(be(),o=r.length;o<i.length;o+=1)s(o);we()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)qe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ke(i[e]);n=!1},d(e){e&&C(t),O(i,e)}}}function fi(e,t,n){const r=[...Array(5).keys()].slice(1);let{inputIdPrefix:i="input-slot-"}=t,{placeholder:s="スロット"}=t,{showClear:o=!0}=t,{hideArrow:a=!0}=t,{className:l="autocomplete-slot-level"}=t,{values:c=[]}=t;return e.$$set=e=>{"inputIdPrefix"in e&&n(1,i=e.inputIdPrefix),"placeholder"in e&&n(2,s=e.placeholder),"showClear"in e&&n(3,o=e.showClear),"hideArrow"in e&&n(4,a=e.hideArrow),"className"in e&&n(5,l=e.className),"values"in e&&n(0,c=e.values)},e.$$.update=()=>{1&e.$$.dirty&&n(0,c=c.sort(((e,t)=>t-e)))},[c,i,s,o,a,l,r,function(t,r){e.$$.not_equal(c[r],t)&&(c[r]=t,n(0,c))}]}class pi extends Fe{constructor(e){super(),Pe(this,e,fi,ui,f,{inputIdPrefix:1,placeholder:2,showClear:3,hideArrow:4,className:5,values:0})}}var di=function(){return(di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function hi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var mi=Object.keys,_i=Array.isArray,gi="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function yi(e,t){return"object"!=typeof t||mi(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||gi.Promise||(gi.Promise=Promise);var vi=Object.getPrototypeOf,bi={}.hasOwnProperty;function wi(e,t){return bi.call(e,t)}function qi(e,t){"function"==typeof t&&(t=t(vi(e))),mi(t).forEach((function(n){xi(e,n,t[n])}))}var ki=Object.defineProperty;function xi(e,t,n,r){ki(e,t,yi(n&&wi(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ei(e){return{from:function(t){return e.prototype=Object.create(t.prototype),xi(e.prototype,"constructor",e),{extend:qi.bind(null,e.prototype)}}}}var $i=Object.getOwnPropertyDescriptor;function Si(e,t){var n;return $i(e,t)||(n=vi(e))&&Si(n,t)}var Ai=[].slice;function Ii(e,t,n){return Ai.call(e,t,n)}function Ci(e,t){return t(e)}function Oi(e){if(!e)throw new Error("Assertion Failed")}function Ti(e){gi.setImmediate?setImmediate(e):setTimeout(e,0)}function Pi(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Fi(e,t){if(wi(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var s=Fi(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(-1!==o){var a=e[t.substr(0,o)];return void 0===a?void 0:Fi(a,t.substr(o+1))}}function Ni(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Oi("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Ni(e,t[r],n[r])}else{var s=t.indexOf(".");if(-1!==s){var o=t.substr(0,s),a=t.substr(s+1);if(""===a)void 0===n?_i(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var l=e[o];l||(l=e[o]={}),Ni(l,a,n)}}else void 0===n?_i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ji(e,t){"string"==typeof t?Ni(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Ni(e,t,void 0)}))}function Li(e){var t={};for(var n in e)wi(e,n)&&(t[n]=e[n]);return t}var Di=[].concat;function Ri(e){return Di.apply([],e)}var Mi="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Ri([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return gi[e]})),Bi=Mi.map((function(e){return gi[e]})),zi=Pi(Mi,(function(e){return[e,!0]}));function Hi(e){if(!e||"object"!=typeof e)return e;var t;if(_i(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(Hi(e[n]))}else if(Bi.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)wi(e,i)&&(t[i]=Hi(e[i]));return t}var Ui={}.toString;function Wi(e){return Ui.call(e).slice(8,-1)}var Vi=function(e,t){return"Array"===t?""+e.map((function(e){return Vi(e,Wi(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function Qi(e,t,n,r){return n=n||{},r=r||"",mi(e).forEach((function(i){if(wi(t,i)){var s=e[i],o=t[i];if("object"==typeof s&&"object"==typeof o&&s&&o){var a=Wi(s),l=Wi(o);a===l?zi[a]?Vi(s,a)!==Vi(o,l)&&(n[r+i]=t[i]):Qi(s,o,n,r+i+"."):n[r+i]=t[i]}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0})),mi(t).forEach((function(i){wi(e,i)||(n[r+i]=t[i])})),n}var Ki="undefined"!=typeof Symbol&&Symbol.iterator,Gi=Ki?function(e){var t;return null!=e&&(t=e[Ki])&&t.apply(e)}:function(){return null},Ji={};function Yi(e){var t,n,r,i;if(1===arguments.length){if(_i(e))return e.slice();if(this===Ji&&"string"==typeof e)return[e];if(i=Gi(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Xi="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Zi="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function es(e,t){Zi=e,ts=t}var ts=function(){return!0},ns=!new Error("").stack;function rs(){if(ns)try{throw new Error}catch(e){return e}return new Error}function is(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(ts).map((function(e){return"\n"+e})).join("")):""}var ss=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],os=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ss),as={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function ls(e,t){this._e=rs(),this.name=e,this.message=t}function cs(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function us(e,t,n,r){this._e=rs(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=cs(e,t)}function fs(e,t){this._e=rs(),this.name="BulkError",this.failures=t,this.message=cs(e,t)}Ei(ls).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+is(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ei(us).from(ls),Ei(fs).from(ls);var ps=os.reduce((function(e,t){return e[t]=t+"Error",e}),{}),ds=ls,hs=os.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=rs(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=as[t]||n,this.inner=null)}return Ei(r).from(ds),e[t]=r,e}),{});hs.Syntax=SyntaxError,hs.Type=TypeError,hs.Range=RangeError;var ms=ss.reduce((function(e,t){return e[t+"Error"]=hs[t],e}),{});var _s=os.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=hs[t]),e}),{});function gs(){}function ys(e){return e}function vs(e,t){return null==e||e===ys?t:function(n){return t(e(n))}}function bs(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ws(e,t){return e===gs?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?bs(r,this.onsuccess):r),i&&(this.onerror=this.onerror?bs(i,this.onerror):i),void 0!==s?s:n}}function qs(e,t){return e===gs?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bs(n,this.onsuccess):n),r&&(this.onerror=this.onerror?bs(r,this.onerror):r)}}function ks(e,t){return e===gs?t:function(n){var r=e.apply(this,arguments);yi(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?bs(i,this.onsuccess):i),s&&(this.onerror=this.onerror?bs(s,this.onerror):s),void 0===r?void 0===o?void 0:o:yi(r,o)}}function xs(e,t){return e===gs?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Es(e,t){return e===gs?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then((function(){return t.apply(r,s)}))}return t.apply(this,arguments)}}_s.ModifyError=us,_s.DexieError=ls,_s.BulkError=fs;var $s={},Ss="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),As=Ss[0],Is=Ss[1],Cs=Ss[2],Os=Is&&Is.then,Ts=As&&As.constructor,Ps=!!Cs,Fs=!1,Ns=Cs?function(){Cs.then(io)}:gi.setImmediate?setImmediate.bind(null,io):gi.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){io(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(io,0)},js=function(e,t){Ws.push([e,t]),Ds&&(Ns(),Ds=!1)},Ls=!0,Ds=!0,Rs=[],Ms=[],Bs=null,zs=ys,Hs={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Co,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Co(e[0],e[1])}catch(e){}}))}},Us=Hs,Ws=[],Vs=0,Qs=[];function Ks(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=gs,this._lib=!1;var t=this._PSD=Us;if(Zi&&(this._stackHolder=rs(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==$s)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Xs(this,this._value))}this._state=null,this._value=null,++t.ref,Ys(this,e)}var Gs={get:function(){var e=Us,t=mo;function n(n,r){var i=this,s=!e.global&&(e!==Us||t!==mo),o=s&&!vo(),a=new Ks((function(t,a){eo(i,new Js(So(n,e,s,o),So(r,e,s,o),t,a,e))}));return Zi&&ro(a,this),a}return n.prototype=$s,n},set:function(e){xi(this,"then",e&&e.prototype===$s?Gs:{get:function(){return e},set:Gs.set})}};function Js(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ys(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&so();t&&"function"==typeof t.then?Ys(e,(function(e,n){t instanceof Ks?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Zs(e)),n&&oo()}}),Xs.bind(null,e))}catch(t){Xs(e,t)}}function Xs(e,t){if(Ms.push(t),null===e._state){var n=e._lib&&so();t=zs(t),e._state=!1,e._value=t,Zi&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=Si(t,"stack");t._promise=e,xi(t,"stack",{get:function(){return Fs?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Rs.some((function(t){return t._value===e._value}))||Rs.push(e)}(e),Zs(e),n&&oo()}}function Zs(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)eo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Vs&&(++Vs,js((function(){0==--Vs&&ao()}),[]))}function eo(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Vs,js(to,[n,e,t])}else e._listeners.push(t)}function to(e,t,n){try{Bs=t;var r,i=t._value;t._state?r=e(i):(Ms.length&&(Ms=[]),r=e(i),-1===Ms.indexOf(i)&&function(e){var t=Rs.length;for(;t;)if(Rs[--t]._value===e._value)return void Rs.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Bs=null,0==--Vs&&ao(),--n.psd.ref||n.psd.finalize()}}function no(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,s,o=e._value;null!=o?(i=o.name||"Error",s=o.message||o,r=is(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return Zi&&((r=is(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&no(e._prev,t,n)),t}function ro(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function io(){so()&&oo()}function so(){var e=Ls;return Ls=!1,Ds=!1,e}function oo(){var e,t,n;do{for(;Ws.length>0;)for(e=Ws,Ws=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ws.length>0);Ls=!0,Ds=!0}function ao(){var e=Rs;Rs=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Qs.slice(0),n=t.length;n;)t[--n]()}function lo(e){return new Ks($s,!1,e)}function co(e,t){var n=Us;return function(){var r=so(),i=Us;try{return ko(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ko(i,!1),r&&oo()}}}qi(Ks.prototype,{then:Gs,_then:function(e,t){eo(this,new Js(null,null,e,t,Us))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):lo(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):lo(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),lo(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Fs=!0;var e=no(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Fs=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Ks((function(r,i){var s=setTimeout((function(){return i(new hs.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,s))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&xi(Ks.prototype,Symbol.toStringTag,"Dexie.Promise"),Hs.env=xo(),qi(Ks,{all:function(){var e=Yi.apply(null,arguments).map(bo);return new Ks((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,s){return Ks.resolve(i).then((function(n){e[s]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Ks)return e;if(e&&"function"==typeof e.then)return new Ks((function(t,n){e.then(t,n)}));var t=new Ks($s,!0,e);return ro(t,Bs),t},reject:lo,race:function(){var e=Yi.apply(null,arguments).map(bo);return new Ks((function(t,n){e.map((function(e){return Ks.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Us},set:function(e){return Us=e}},totalEchoes:{get:function(){return mo}},newPSD:go,usePSD:Eo,scheduler:{get:function(){return js},set:function(e){js=e}},rejectionMapper:{get:function(){return zs},set:function(e){zs=e}},follow:function(e,t){return new Ks((function(n,r){return go((function(t,n){var r=Us;r.unhandleds=[],r.onunhandled=n,r.finalize=bs((function(){var e=this;!function(e){function t(){e(),Qs.splice(Qs.indexOf(t),1)}Qs.push(t),++Vs,js((function(){0==--Vs&&ao()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Ts&&(Ts.allSettled&&xi(Ks,"allSettled",(function(){var e=Yi.apply(null,arguments).map(bo);return new Ks((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Ks.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Ts.any&&"undefined"!=typeof AggregateError&&xi(Ks,"any",(function(){var e=Yi.apply(null,arguments).map(bo);return new Ks((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,s){return Ks.resolve(e).then((function(e){return t(e)}),(function(e){i[s]=e,--r||n(new AggregateError(i))}))}))}))})));var uo={awaits:0,echoes:0,id:0},fo=0,po=[],ho=0,mo=0,_o=0;function go(e,t,n,r){var i=Us,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++_o;var o=Hs.env;s.env=Ps?{Promise:Ks,PromiseProp:{value:Ks,configurable:!0,writable:!0},all:Ks.all,race:Ks.race,allSettled:Ks.allSettled,any:Ks.any,resolve:Ks.resolve,reject:Ks.reject,nthen:Ao(o.nthen,s),gthen:Ao(o.gthen,s)}:{},t&&yi(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Eo(s,e,n,r);return 0===s.ref&&s.finalize(),a}function yo(){return uo.id||(uo.id=++fo),++uo.awaits,uo.echoes+=100,uo.id}function vo(){return!!uo.awaits&&(0==--uo.awaits&&(uo.id=0),uo.echoes=100*uo.awaits,!0)}function bo(e){return uo.echoes&&e&&e.constructor===Ts?(yo(),e.then((function(e){return vo(),e}),(function(e){return vo(),Oo(e)}))):e}function wo(e){++mo,uo.echoes&&0!=--uo.echoes||(uo.echoes=uo.id=0),po.push(Us),ko(e,!0)}function qo(){var e=po[po.length-1];po.pop(),ko(e,!1)}function ko(e,t){var n=Us;if((t?!uo.echoes||ho++&&e===Us:!ho||--ho&&e===Us)||$o(t?wo.bind(null,e):qo),e!==Us&&(Us=e,n===Hs&&(Hs.env=xo()),Ps)){var r=Hs.env.Promise,i=e.env;Is.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(gi,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function xo(){var e=gi.Promise;return Ps?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(gi,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Is.then,gthen:e.prototype.then}:{}}function Eo(e,t,n,r,i){var s=Us;try{return ko(e,!0),t(n,r,i)}finally{ko(s,!1)}}function $o(e){Os.call(As,e)}function So(e,t,n,r){return"function"!=typeof e?e:function(){var i=Us;n&&yo(),ko(t,!0);try{return e.apply(this,arguments)}finally{ko(i,!1),r&&$o(vo)}}}function Ao(e,t){return function(n,r){return e.call(this,So(n,t),So(r,t))}}-1===(""+Os).indexOf("[native code]")&&(yo=vo=gs);var Io="unhandledrejection";function Co(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(gi.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Io,!0,!0),yi(r,i)):gi.CustomEvent&&yi(r=new CustomEvent(Io,{detail:i}),i),r&&gi.dispatchEvent&&(dispatchEvent(r),!gi.PromiseRejectionEvent&&gi.onunhandledrejection))try{gi.onunhandledrejection(r)}catch(e){}Zi&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Oo=Ks.reject;function To(e,t,n,r){if(e._state.openComplete||Us.letThrough){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(e){return Oo(e)}return i._promise(t,(function(e,t){return go((function(){return Us.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Oo(new hs.DatabaseClosed);e.open().catch(gs)}return e._state.dbReadyPromise.then((function(){return To(e,t,n,r)}))}var Po="3.0.3",Fo=String.fromCharCode(65535),No=-1/0,jo="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lo="String expected.",Do=[],Ro="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Mo=Ro,Bo=Ro,zo=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ho="__dbnames",Uo="readonly",Wo="readwrite";function Vo(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Qo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ko(e){return function(t){return void 0===Fi(t,e)&&ji(t=Hi(t),e),t}}var Go=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Us.trans,i=this.name;function s(e,n,r){if(!r.schema[i])throw new hs.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=so();try{return r&&r.db===this.db?r===Us.trans?r._promise(e,s,n):go((function(){return r._promise(e,s,n)}),{trans:r,transless:Us.transless||Us}):To(this.db,e,[this.name],s)}finally{o&&oo()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(_i(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=mi(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Fo)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&Zi&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function s(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var o=t.reduce((function(t,n){var i=t[0],o=t[1],a=r[n],l=e[n];return[i||a,i||!a?Vo(o,a&&a.multi?function(e){var t=Fi(e,n);return _i(t)&&t.some((function(e){return s(l,e)}))}:function(e){return s(l,Fi(e,n))}):o]}),[null,null]),a=o[0],l=o[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,_i(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(wi(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){yi(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=e;return s&&i&&(o=Ko(s)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?Ks.reject(e.failures[0]):e.lastResult})).then((function(t){if(s)try{Ni(e,s,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||_i(t))throw new hs.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||_i(e))return this.where(":id").equals(e).modify(t);mi(t).forEach((function(n){Ni(e,n,t[n])}));var n=Fi(e,this.schema.primKey.keyPath);return void 0===n?Oo(new hs.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=e;return s&&i&&(o=Ko(s)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Ks.reject(e.failures[0]):e.lastResult})).then((function(t){if(s)try{Ni(e,s,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ks.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Qo})})).then((function(e){return e.numFailures?Ks.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new hs.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new hs.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&o?e.map(Ko(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;if(0===t)return s?n:i;throw new fs(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new hs.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new hs.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&o?e.map(Ko(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;if(0===t)return s?n:i;throw new fs(r.name+".bulkPut(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,s=e.failures;if(0===r)return i;throw new fs(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",s)}))},e}();function Jo(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return t[n].subscribe.apply(null,s),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(e,r,i){if("object"==typeof e)return o(e);r||(r=xs),i||(i=gs);var s={subscribers:[],fire:i,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=r(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(r,i)}};return t[e]=n[e]=s,s}function o(e){mi(e).forEach((function(t){var n=e[t];if(_i(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new hs.InvalidArgument("Invalid event config");var r=s(t,ys,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Ti((function(){e.apply(null,t)}))}))}))}}))}}function Yo(e,t){return Ei(t).from({prototype:e}),t}function Xo(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Zo(e,t){e.filter=Vo(e.filter,t)}function ea(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Vo(r(),t())}:t,e.justLimit=n&&!r}function ta(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new hs.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function na(e,t,n){var r=ta(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function ra(e,t,n,r){var i=e.replayFilter?Vo(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},o=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),wi(s,a)||(s[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(o,n),ia(na(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return ia(na(e,r,n),Vo(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function ia(e,t,n,r){var i=co(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=gs}),(function(t){e.fail(t),n=gs}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var sa=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Oo.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Oo.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Vo(t.algorithm,e)},e.prototype._iterate=function(e,t){return ra(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&yi(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return ra(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Xo(n,!0))return r.count({trans:e,query:{index:ta(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return ra(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function a(e,t){var n=s(e,i),r=s(t,i);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Xo(n,!0)&&n.limit>0){var r=n.valueMapper,i=ta(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var s=[];return ra(n,(function(e){return s.push(e)}),e,n.table.core).then((function(){return s}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Xo(t)?ea(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):ea(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ea(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Zo(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Zo(this._ctx,(function(t){return e(t.value)})),function(e,t){e.isMatch=Vo(e.isMatch,t)}(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Xo(t,!0)&&t.limit>0)return this._read((function(e){var n=ta(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Zo(this._ctx,(function(e){var t=e.primaryKey.toString(),r=wi(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var s=mi(e),o=s.length;i=function(t){for(var n=!1,r=0;r<o;++r){var i=s[r],a=e[i];Fi(t,i)!==a&&(Ni(t,i,a),n=!0)}return n}}var a=n.table.core,l=a.schema.primaryKey,c=l.outbound,u=l.extractKey,f="testmode"in Ja?1:2e3,p=t.db.core.cmp,d=[],h=0,m=[],_=function(e,t){var n=t.failures,r=t.numFailures;h+=e-r;for(var i=0,s=mi(n);i<s.length;i++){var o=s[i];d.push(n[o])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var s=Math.min(f,e.length-n);return a.getMany({trans:r,keys:e.slice(n,n+s)}).then((function(o){for(var l=[],d=[],h=c?[]:null,m=[],g=0;g<s;++g){var y=o[g],v={value:Hi(y),primKey:e[n+g]};!1!==i.call(v,v.value,v)&&(null==v.value?m.push(e[n+g]):c||0===p(u(y),u(v.value))?(d.push(v.value),c&&h.push(e[n+g])):(m.push(e[n+g]),l.push(v.value)))}return Promise.resolve(l.length>0&&a.mutate({trans:r,type:"add",values:l}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);_(l.length,e)}))).then((function(e){return d.length>0&&a.mutate({trans:r,type:"put",keys:h,values:d}).then((function(e){return _(d.length,e)}))})).then((function(){return m.length>0&&a.mutate({trans:r,type:"delete",keys:m}).then((function(e){return _(m.length,e)}))})).then((function(){return e.length>n+s&&t(n+f)}))}))};return t(0).then((function(){if(d.length>0)throw new us("Error modifying one or more objects",d,h,m);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Xo(e)&&(e.isPrimKey&&!Bo||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new us("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function oa(e,t){return e<t?-1:e===t?0:1}function aa(e,t){return e>t?-1:e===t?0:1}function la(e,t,n){var r=e instanceof ha?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ca(e){return new e.Collection(e,(function(){return da("")})).limit(0)}function ua(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),a=-1,l=0;l<o;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[l],c)<0&&(a=l)}return o<r.length&&"next"===s?e+n.substr(e.length):o<e.length&&"prev"===s?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function fa(e,t,n,r){var i,s,o,a,l,c,u,f=n.length;if(!n.every((function(e){return"string"==typeof e})))return la(e,Lo);function p(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),s=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),o="next"===e?oa:aa;var t=n.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}p("next");var d=new e.Collection(e,(function(){return pa(a[0],l[f-1]+r)}));d._ondirectionchange=function(e){p(e)};var h=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var p=s(i);if(t(p,l,h))return!0;for(var d=null,m=h;m<f;++m){var _=ua(i,p,a[m],l[m],o,c);null===_&&null===d?h=m+1:(null===d||o(d,_)>0)&&(d=_)}return n(null!==d?function(){e.continue(d+u)}:r),!1})),d}function pa(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function da(e){return{type:1,lower:e,upper:e}}var ha=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?ca(this):new this.Collection(this,(function(){return pa(e,t,!n,!r)}))}catch(e){return la(this,jo)}},e.prototype.equals=function(e){return null==e?la(this,jo):new this.Collection(this,(function(){return da(e)}))},e.prototype.above=function(e){return null==e?la(this,jo):new this.Collection(this,(function(){return pa(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?la(this,jo):new this.Collection(this,(function(){return pa(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?la(this,jo):new this.Collection(this,(function(){return pa(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?la(this,jo):new this.Collection(this,(function(){return pa(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?la(this,Lo):this.between(e,e+Fo,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):fa(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Fo)},e.prototype.equalsIgnoreCase=function(e){return fa(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=Yi.apply(Ji,arguments);return 0===e.length?ca(this):fa(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=Yi.apply(Ji,arguments);return 0===e.length?ca(this):fa(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Fo)},e.prototype.anyOf=function(){var e=this,t=Yi.apply(Ji,arguments),n=this._cmp;try{t.sort(n)}catch(e){return la(this,jo)}if(0===t.length)return ca(this);var r=new this.Collection(this,(function(){return pa(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,s){for(var o=e.key;n(o,t[i])>0;)if(++i===t.length)return r(s),!1;return 0===n(o,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[No,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=Yi.apply(Ji,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return la(this,jo)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[No,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===e.length)return ca(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return la(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",hs.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var u,f=i;function p(e,t){return f(e[0],t[0])}try{(u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var s=e[n];if(r(t[0],s[1])<0&&r(t[1],s[0])>0){s[0]=o(s[0],t[0]),s[1]=a(s[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(p)}catch(e){return la(this,jo)}var d=0,h=c?function(e){return i(e,u[d][1])>0}:function(e){return i(e,u[d][1])>=0},m=l?function(e){return s(e,u[d][0])>0}:function(e){return s(e,u[d][0])>=0};var _=h,g=new this.Collection(this,(function(){return pa(u[0][0],u[u.length-1][1],!l,!c)}));return g._ondirectionchange=function(e){"next"===e?(_=h,f=i):(_=m,f=s),u.sort(p)},g._addAlgorithm((function(e,t,r){for(var s=e.key;_(s);)if(++d===u.length)return t(r),!1;return!!function(e){return!h(e)&&!m(e)}(s)||(0===n._cmp(s,u[d][1])||0===n._cmp(s,u[d][0])||t((function(){f===i?e.continue(u[d][0]):e.continue(u[d][1])})),!1)})),g},e.prototype.startsWithAnyOf=function(){var e=Yi.apply(Ji,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?ca(this):this.inAnyRange(e.map((function(e){return[e,e+Fo]}))):la(this,"startsWithAnyOf() only works with strings")},e}();function ma(e){return 1===e.length?e[0]:e}function _a(e){try{return e.only([[]]),[[]]}catch(e){return Fo}}function ga(e){return co((function(t){return ya(t),e(t.target.error),!1}))}function ya(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var va=function(){function e(){}return e.prototype._lock=function(){return Oi(!Us.global),++this._reculock,1!==this._reculock||Us.global||(Us.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Oi(!Us.global),0==--this._reculock)for(Us.global||(Us.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Eo(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Us.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Oi(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new hs.DatabaseClosed(r);case"MissingAPIError":throw new hs.MissingAPI(r.message,r);default:throw new hs.OpenFailed(r)}if(!this.active)throw new hs.TransactionInactive;return Oi(null===this._completion._state),(e=this.idbtrans=e||n.transaction(ma(this.storeNames),this.mode)).onerror=co((function(n){ya(n),t._reject(e.error)})),e.onabort=co((function(n){ya(n),t.active&&t._reject(new hs.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=co((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Oo(new hs.ReadOnly("Transaction is readonly"));if(!this.active)return Oo(new hs.TransactionInactive);if(this._locked())return new Ks((function(i,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,s)},Us])}));if(n)return go((function(){var e=new Ks((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ks((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Ks.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Ks((function(e,r){n.then((function(n){return t._waitingQueue.push(co(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(co(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new hs.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(wi(t,e))return t[e];var n=this.schema[e];if(!n)throw new hs.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function ba(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+wa(t)}}function wa(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function qa(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Pi(n,(function(e){return[e.name,e]}))}}function ka(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return Fi(t,e)}}(e):function(t){return Fi(t,e)}}function xa(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Ea(e){return[].slice.call(e)}var $a=0;function Sa(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Aa(e,t,n,r){var i=t.cmp.bind(t);function s(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,s=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!s):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!s)}var o=function(e,t){var n=Ea(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=_i(t),i=null==t,s={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:ka(t)},indexes:Ea(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,o={name:t,compound:_i(i),keyPath:i,unique:n,multiEntry:r,extractKey:ka(i)};return s[Sa(i)]=o,o})),getIndexByKeyPath:function(e){return s[Sa(e)]}};return s[":id"]=o.primaryKey,null!=t&&(s[Sa(t)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),a=o.schema,l=o.hasGetAll,c=a.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,o=n.keys,a=n.values,l=n.range,c=n.wantResults;return new Promise((function(n,u){n=co(n);var f=r.objectStore(t),p=null==f.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var m,_=c&&hi(o||xa(e.primaryKey,{type:i,keys:o,values:a})),g=[],y=0,v=function(e){++y,ya(e),_&&(_[e.target._reqno]=void 0),g[e.target._reqno]=e.target.error},b=function(e){var t=e.target;_[t._reqno]=t.result};if("deleteRange"===i){if(4===l.type)return n({numFailures:y,failures:g,results:_,lastResult:void 0});m=3===l.type?f.clear():f.delete(s(l))}else{var w=d?p?[a,o]:[a,null]:[o,null],q=w[0],k=w[1];if(d)for(var x=0;x<h;++x)(m=k&&void 0!==k[x]?f[i](q[x],k[x]):f[i](q[x]))._reqno=x,_&&void 0===_[x]&&(m.onsuccess=b),m.onerror=v;else for(x=0;x<h;++x)(m=f[i](q[x]))._reqno=x,m.onerror=v}var E=function(e){var t=e.target.result;_&&(_[h-1]=t),n({numFailures:y,failures:g,results:_,lastResult:t})};m.onerror=function(e){v(e),E(e)},m.onsuccess=E}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=co(e);for(var s,o=n.objectStore(t),a=r.length,l=new Array(a),c=0,u=0,f=function(t){var n=t.target;l[n._pos]=n.result,++u===c&&e(l)},p=ga(i),d=0;d<a;++d)null!=r[d]&&((s=o.get(r[d]))._pos=d,s.onsuccess=f,s.onerror=p,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=co(e);var s=n.objectStore(t).get(r);s.onsuccess=function(t){return e(t.target.result)},s.onerror=ga(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=co(r);var o=n.trans,a=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,f=c.index,p=c.range,d=o.objectStore(t),h=f.isPrimaryKey?d:d.index(f.name),m=s(p);if(0===l)return r({result:[]});if(e){var _=a?h.getAll(m,u):h.getAllKeys(m,u);_.onsuccess=function(e){return r({result:e.target.result})},_.onerror=ga(i)}else{var g=0,y=a||!("openKeyCursor"in h)?h.openCursor(m):h.openKeyCursor(m),v=[];y.onsuccess=function(e){var t=y.result;return t?(v.push(a?t.value:t.primaryKey),++g===l?r({result:v}):void t.continue()):r({result:v})},y.onerror=ga(i)}}))}}(l),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,o=e.reverse,a=e.unique;return new Promise((function(e,l){e=co(e);var c=i.index,u=i.range,f=n.objectStore(t),p=c.isPrimaryKey?f:f.index(c.name),d=o?a?"prevunique":"prev":a?"nextunique":"next",h=r||!("openKeyCursor"in p)?p.openCursor(s(u),d):p.openKeyCursor(s(u),d);h.onerror=ga(l),h.onsuccess=co((function(t){var r=h.result;if(r){r.___id=++$a,r.done=!1;var i=r.continue.bind(r),s=r.continuePrimaryKey;s&&(s=s.bind(r));var o=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=co(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=co(e),h.onerror=ga(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}})),n=function(){if(h.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return h.onsuccess=co((function(e){h.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=s,r.advance=o,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,o=n.range;return new Promise((function(e,n){var a=r.objectStore(t),l=i.isPrimaryKey?a:a.index(i.name),c=s(o),u=c?l.count(c):l.count();u.onsuccess=co((function(t){return e(t.target.result)})),u.onerror=ga(n)}))}}}(e)})),u={};return c.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:_a(n),schema:a}}function Ia(e,t,n,r){var i=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return di(di({},e),n(e))}),e)}(Aa(t,n.indexedDB,i,r),e.dbcore)}}function Ca(e,t){var n=t.db,r=Ia(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Oa(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=Si(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?xi(t,n,{get:function(){return this.table(n)},set:function(e){ki(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Ta(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function Pa(e,t){return e._cfg.version-t._cfg.version}function Fa(e,t,n,r){var i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);var o=s._reject.bind(s),a=Us.transless||Us;go((function(){Us.trans=s,Us.transless=a,0===t?(mi(i).forEach((function(e){ja(n,e,i[e].primKey,i[e].indexes)})),Ca(e,n),Ks.follow((function(){return e.on.populate.fire(s)})).catch(o)):function(e,t,n,r){var i=[],s=e._versions,o=e._dbSchema=Da(e,e.idbdb,r),a=!1;function l(){return i.length?Ks.resolve(i.shift()(n.idbtrans)).then(l):Ks.resolve()}return s.filter((function(e){return e._cfg.version>=t})).forEach((function(s){i.push((function(){var i=o,l=s._cfg.dbschema;Ra(e,i,r),Ra(e,l,r),o=e._dbSchema=l;var c=Na(i,l);c.add.forEach((function(e){ja(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new hs.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return La(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),La(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=s._cfg.contentUpgrade;if(u&&s._cfg.version>t){Ca(e,r),n._memoizedTables={},a=!0;var f=Li(l);c.del.forEach((function(e){f[e]=i[e]})),Ta(e,[e.Transaction.prototype]),Oa(e,[e.Transaction.prototype],mi(f),f),n.schema=f;var p,d=Xi(u);d&&yo();var h=Ks.follow((function(){if((p=u(n))&&d){var e=vo.bind(null,null);p.then(e,e)}}));return p&&"function"==typeof p.then?Ks.resolve(p):h.then((function(){return p}))}})),i.push((function(t){a&&Mo||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(s._cfg.dbschema,t);Ta(e,[e.Transaction.prototype]),Oa(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((function(){var e,t;t=r,mi(e=o).forEach((function(n){t.db.objectStoreNames.contains(n)||ja(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,s,n).catch(o)}))}function Na(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Ro)o.recreate=!0,r.change.push(o);else{var a=i.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var u=a[c],f=l[c];u?u.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,s])}return r}function ja(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return La(i,e)})),i}function La(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Da(e,t,n){var r={};return Ii(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,s=ba(wa(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[],a=0;a<t.indexNames.length;++a){var l=t.index(t.indexNames[a]);i=l.keyPath;var c=ba(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}r[e]=qa(e,s,o)})),r}function Ra(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(var a=0;a<o.indexNames.length;++a){var l=o.indexNames[a],c=o.index(l).keyPath,u="string"==typeof c?c:"["+Ii(c).join("+")+"]";if(t[s]){var f=t[s].idxByName[u];f&&(f.name=l,delete t[s].idxByName[u],t[s].idxByName[l]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&gi.WorkerGlobalScope&&gi instanceof gi.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var Ma,Ba=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){mi(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return ba(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),_i(r),0===t)})),i=r.shift();if(i.multi)throw new hs.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new hs.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new hs.Schema("Index must have a name and cannot be an empty string")})),t[n]=qa(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?yi(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){yi(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Ta(t,[t._allTables,t,t.Transaction.prototype]),Oa(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],mi(i),i),t._storeNames=mi(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function za(e){return go((function(){return Us.letThrough=!0,e()}))}function Ha(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Oo(t.dbOpenError):e}));Zi&&(t.openCanceller._stackHolder=rs()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return Ks.race([t.openCanceller,new Ks((function(r,s){if(!n)throw new hs.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=e.name,a=t.autoSchema?n.open(o):n.open(o,Math.round(10*e.verno));if(!a)throw new hs.MissingAPI("IndexedDB API not available");a.onerror=ga(s),a.onblocked=co(e._fireOnBlocked),a.onupgradeneeded=co((function(r){if(i=a.transaction,t.autoSchema&&!e._options.allowEmptyDB){a.onerror=ya,i.abort(),a.result.close();var l=n.deleteDatabase(o);l.onsuccess=l.onerror=co((function(){s(new hs.NoSuchDatabase("Database "+o+" doesnt exist"))}))}else{i.onerror=ga(s);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=a.result,Fa(e,c/10,i,s)}}),s),a.onsuccess=co((function(){i=null;var n=e.idbdb=a.result,s=Ii(n.objectStoreNames);if(s.length>0)try{var l=n.transaction(ma(s),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Da(0,t,n);e._storeNames=Ii(t.objectStoreNames,0),Oa(e,[e._allTables],mi(r),r)}(e,n,l):(Ra(e,e._dbSchema,l),function(e,t){var n=Na(Da(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ca(e,l)}catch(e){}Do.push(e),n.onversionchange=co((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),Ma.add(o),r()}),s)}))]).then((function(){return t.onReadyBeingFired=[],Ks.resolve(za(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Es,gs);return t.onReadyBeingFired=[],Ks.resolve(za(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Oo(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function Ua(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(n,r):_i(s)?Promise.all(s).then(n,r):n(s)}}return i(t)()}function Wa(e,t,n){var r=arguments.length;if(r<2)throw new hs.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Ri(i);return[e,s,n]}function Va(e,t,n,r,i){return Ks.resolve().then((function(){var s=Us.transless||Us,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:s};r?o.idbtrans=r.idbtrans:o.create();var l,c=Xi(i);c&&yo();var u=Ks.follow((function(){if(l=i.call(o,o))if(c){var e=vo.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Ua(l))}),a);return(l&&"function"==typeof l.then?Ks.resolve(l).then((function(e){return o.active?e:Oo(new hs.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return l}))).then((function(e){return r&&o._resolve(),o._completion.then((function(){return e}))})).catch((function(e){return o._reject(e),Oo(e)}))}))}function Qa(e,t,n){for(var r=_i(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Ka={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return di(di({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},s=[];function o(e,t,n){var r=Sa(e),a=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u=di(di({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:l,extractKey:ka(e),unique:!c&&n.unique});(a.push(u),u.isPrimaryKey||s.push(u),l>1)&&o(2===l?e[0]:e.slice(0,l-1),t+1,n);return a.sort((function(e,t){return e.keyTail-t.keyTail})),u}var a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function f(t){var n,r,i=t.query.index;return i.isVirtual?di(di({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:Qa(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Qa(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}return di(di({},n),{schema:di(di({},r),{primaryKey:a,indexes:s,getIndexByKeyPath:function(e){var t=i[Sa(e)];return t&&t[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,s=r.isVirtual,o=r.keyLength;if(!s)return n.openCursor(t);return n.openCursor(f(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Qa(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(Qa(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Qa(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},Ga={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return di(di({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return di(di({},n),{mutate:function(e){var i=Us.trans,s=i.table(t).hook,o=s.deleting,a=s.creating,l=s.updating;switch(e.type){case"add":if(a.fire===gs)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(a.fire===gs&&l.fire===gs)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(o.fire===gs)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(o.fire===gs)break;return i._promise("readwrite",(function(){return function(e){return u(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=Us.trans,i=e.keys||xa(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?di(di({},e),{keys:i,wantResults:!0}):di({},e)).type&&(e.values=hi(e.values)),e.keys&&(e.keys=hi(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,i).then((function(s){var c=i.map((function(n,i){var c=s[i],u={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){var f=a.fire.call(u,n,e.values[i],t);null==n&&null!=f&&(n=f,e.keys[i]=n,r.outbound||Ni(e.values[i],r.keyPath,n))}else{var p=Qi(c,e.values[i]),d=l.fire.call(u,p,n,c,t);if(d){var h=e.values[i];Object.keys(d).forEach((function(e){wi(h,e)?h[e]=d[e]:Ni(h,e,d[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,o=t.numFailures,a=t.lastResult,l=0;l<i.length;++l){var u=r?r[l]:i[l],f=c[l];null==u?f.onerror&&f.onerror(n[l]):f.onsuccess&&f.onsuccess("put"===e.type&&s[l]?e.values[l]:u)}return{failures:n,results:r,numFailures:o,lastResult:a}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,di(di({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}})}})}},Ja=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=di({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var o,a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:gs,dbReadyPromise:null,cancelOpen:gs,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new Ks((function(e){a.dbReadyResolve=e})),a.openCanceller=new Ks((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=Jo(this,"populate","blocked","versionchange",{ready:[Es,gs]}),this.on.ready.subscribe=Ci(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||Ks.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var s=r;i||t((function e(){s.on.ready.unsubscribe(n),s.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(o=this,Yo(sa.prototype,(function(e,t){this.db=o;var n=Qo,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,s=i.table,a=s.hook.reading.fire;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==ys?a:null}}))),this.Table=function(e){return Yo(Go.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Jo(null,{creating:[ws,gs],reading:[vs,ys],updating:[ks,gs],deleting:[qs,gs]})}))}(this),this.Transaction=function(e){return Yo(va.prototype,(function(t,n,r,i){var s=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Jo(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ks((function(e,t){s._resolve=e,s._reject=t})),this._completion.then((function(){s.active=!1,s.on.complete.fire()}),(function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Oo(e)}))}))}(this),this.Version=function(e){return Yo(Ba.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Yo(ha.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new hs.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=_a(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Do.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Ka),this.use(Ga),s.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new hs.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new hs.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Pa),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Us.letThrough?e():new Ks((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new hs.DatabaseClosed);t.open().catch(gs)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:null==r?10:r,name:i}),s.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return Ha(this)},e.prototype.close=function(){var e=Do.indexOf(this),t=this._state;if(e>=0&&Do.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new hs.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Ks((function(e){t.dbReadyResolve=e})),t.openCanceller=new Ks((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Ks((function(r,i){var s=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=co((function(){Ma.remove(e.name),r()})),t.onerror=ga(i),t.onblocked=e._fireOnBlocked};if(t)throw new hs.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return mi(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=Wa.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=Us.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,o,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Uo)s=Uo;else{if("rw"!=e&&e!=Wo)throw new hs.InvalidArgument("Invalid transaction mode: "+e);s=Wo}if(i){if(i.mode===Uo&&s===Wo){if(!a)throw new hs.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new hs.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):Oo(e)}var l=Va.bind(null,this,s,o,i,n);return i?i._promise(s,l,"lock"):Us.trans?Eo(Us.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!wi(this._allTables,e))throw new hs.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Ya=Ja;function Xa(e){return new Promise((t=>setTimeout(t,e)))}async function Za(e){const t=new Image;return t.src=e,await new Promise((e=>{t.onload=e})),console.log(`fetched ${e}`),n.default.imread(t)}function el(e,t,r,i,s,o){const a=e.roi(r);null!=s&&s(a);const l=new n.default.Mat;n.default.absdiff(t,a,l),n.default.cvtColor(l,l,n.default.COLOR_BGR2GRAY);const c=new n.default.Mat;n.default.threshold(l,c,i,255,n.default.THRESH_BINARY),n.default.morphologyEx(c,c,n.default.MORPH_OPEN,n.default.Mat.ones(2,2,n.default.CV_8U));const u=n.default.countNonZero(c);return null!=o&&o({trimmed:a,templateImage:t,diff:l,result:c}),c.delete(),l.delete(),a.delete(),u}function tl(e,t,n,r=63,i=null,s=null){let o=Number.MAX_SAFE_INTEGER,a=null;for(const[l,c]of Object.entries(t)){const t=el(e,c,n,r,i,s);if(0===t)return{name:l,diffCount:t};o>t&&(o=t,a=l)}return{name:a,diffCount:o}}function nl(e){return e instanceof Promise?e:Array.isArray(e)?Promise.all(e.map(nl)):"object"==typeof e?function(e){const t=Object.keys(e).map((t=>nl(e[t]).then((e=>({key:t,value:e})))));return Promise.all(t).then((e=>e.reduce(((e,t)=>(e[t.key]=t.value,e)),{})))}(e):Promise.resolve(e)}function rl(e,t,r){const i=new n.default.Mat,s=new n.default.Mat(e.rows,e.cols,e.type(),t),o=new n.default.Mat(e.rows,e.cols,e.type(),r);n.default.inRange(e,s,o,i);const a=new n.default.Mat;return e.copyTo(a,i),o.delete(),s.delete(),i.delete(),a}qi(Ya,di(di({},_s),{delete:function(e){return new Ya(e).delete()},exists:function(e){return new Ya(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return Ma?Ma.getDatabaseNames().then(e):Ks.resolve([])},defineClass:function(){return function(e){yi(this,e)}},ignoreTransaction:function(e){return Us.trans?Eo(Us.transless,e):e()},vip:za,async:function(e){return function(){try{var t=Ua(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ks.resolve(t)}catch(e){return Oo(e)}}},spawn:function(e,t,n){try{var r=Ua(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ks.resolve(r)}catch(e){return Oo(e)}},currentTransaction:{get:function(){return Us.trans||null}},waitFor:function(e,t){var n=Ks.resolve("function"==typeof e?Ya.ignoreTransaction(e):e).timeout(t||6e4);return Us.trans?Us.trans.waitFor(n):n},Promise:Ks,debug:{get:function(){return Zi},set:function(e){es(e,"dexie"===e?function(){return!0}:zo)}},derive:Ei,extend:yi,props:qi,override:Ci,Events:Jo,getByKeyPath:Fi,setByKeyPath:Ni,delByKeyPath:ji,shallowClone:Li,deepClone:Hi,getObjectDiff:Qi,asap:Ti,minKey:No,addons:[],connections:Do,errnames:ps,dependencies:function(){try{return{indexedDB:gi.indexedDB||gi.mozIndexedDB||gi.webkitIndexedDB||gi.msIndexedDB,IDBKeyRange:gi.IDBKeyRange||gi.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Po,version:Po.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Ya,Dexie:Ya})),Ya.maxKey=_a(Ya.dependencies.IDBKeyRange),function(e){try{Ma=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new Ja(Ho,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?Ks.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Ho}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==Ho&&t.put({name:e}).catch(gs)},remove:function(e){return!n&&e!==Ho&&t.delete(e).catch(gs)}}}(e)}catch(e){}}(Ja.dependencies.indexedDB),Ks.rejectionMapper=function(e,t){if(!e||e instanceof ls||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ms[e.name])return e;var n=new ms[e.name](t||e.message,e);return"stack"in e&&xi(n,"stack",{get:function(){return this.inner.stack}}),n},es(Zi,zo);const il="equip_list",sl="rinne",ol="skip_scanned_charm",al="skip_same_charm_as_immediately_before";class ll{constructor({scanMode:e,scanSkipMode:t}){this.EQUIPMENT_SPEC_HEADER_BASE_X=1023,this.EQUIPMENT_SPEC_HEADER_BASE_Y=88,this.POINT_RARITY=new n.default.Point(1190,176),this.POINT_SLOTS=new n.default.Point(1160,200),this.POINT_SLOT1=new n.default.Point(1166,200),this.POINT_SLOT2=new n.default.Point(1194,200),this.POINT_SLOT3=new n.default.Point(1222,200),this.POINT_SKILL1=new n.default.Point(1033,266),this.POINT_SKILL2=new n.default.Point(1033,317),this.POINT_SKILL_LEVEL1=new n.default.Point(1190,290),this.POINT_SKILL_LEVEL2=new n.default.Point(1190,341),this.POINT_PAGE=new n.default.Point(787,582),this.POINT_PAGE_SECOND_DIGIT=new n.default.Point(796,582),this.POINT_CHARM_AREA=new n.default.Point(634,359),this.POINT_CHARM_ICON_BASE=new n.default.Point(634,360),this.SIZE_CHARM_ICON_FRAME=new n.default.Size(35,34),this.POINT_PAGE_IN_RINNE=new n.default.Point(796,532),this.POINT_PAGE_SECOND_DIGIT_IN_RINNE=new n.default.Point(805,532),this.POINT_CHARM_AREA_IN_RINNE=new n.default.Point(657,358),this.SIZE_CHARM_AREA_IN_RINNE=new n.default.Size(329,164),this.prevPosition={page:-1,row:-1,col:-1},this.indexeddb=null,this.nCharms=0,this.charms={},this.adjustOffset={x:0,y:0},this.scanMode=null!=e?e:il,this.scanSkipMode=null!=t?t:al,this.ROWS_PER_PAGE=e===sl?4:Jr,this.COLS_PER_PAGE=e===sl?8:Gr,this.reset(),this.indexeddb=new Ja("charms"),this.indexeddb.version(1).stores({images:"name"})}static async init(){const e={others:{charmSelectFrame:Za("img/templates/others/charm-select-frame.png"),charmSelectFrameForRinne:Za("img/templates/others/charm-select-frame-for-rinne.png"),equipmentSpecHeader:Za("img/templates/others/equipment-spec-header.png")},page:{},"page-parts":{0:Za("img/templates/page-parts/0.png"),1:Za("img/templates/page-parts/1.png"),2:Za("img/templates/page-parts/2.png"),3:Za("img/templates/page-parts/3.png"),4:Za("img/templates/page-parts/4.png"),5:Za("img/templates/page-parts/5.png"),6:Za("img/templates/page-parts/6.png"),7:Za("img/templates/page-parts/7.png"),8:Za("img/templates/page-parts/8.png"),9:Za("img/templates/page-parts/9.png")},rare:{10:Za("img/templates/rare/10.jpg"),9:Za("img/templates/rare/9.jpg"),8:Za("img/templates/rare/8.jpg"),7:Za("img/templates/rare/7.jpg"),6:Za("img/templates/rare/6.jpg"),5:Za("img/templates/rare/5.jpg"),4:Za("img/templates/rare/4.jpg")},lvl:{0:Za("img/templates/lvl/0.jpg"),1:Za("img/templates/lvl/1.jpg"),2:Za("img/templates/lvl/2.jpg"),3:Za("img/templates/lvl/3.jpg"),4:Za("img/templates/lvl/4.jpg"),5:Za("img/templates/lvl/5.jpg"),6:Za("img/templates/lvl/6.jpg"),7:Za("img/templates/lvl/7.jpg")},slot:{0:Za("img/templates/slot/0.jpg"),1:Za("img/templates/slot/1.jpg"),2:Za("img/templates/slot/2.jpg"),3:Za("img/templates/slot/3.jpg"),4:Za("img/templates/slot/4.jpg")},skill:{"KO術":Za("img/templates/skill/KO術.jpg"),"匠":Za("img/templates/skill/匠.jpg"),"不屈":Za("img/templates/skill/不屈.jpg"),"体術":Za("img/templates/skill/体術.jpg"),"幸運":Za("img/templates/skill/幸運.jpg"),"心眼":Za("img/templates/skill/心眼.jpg"),"攻撃":Za("img/templates/skill/攻撃.jpg"),"業物":Za("img/templates/skill/業物.jpg"),"渾身":Za("img/templates/skill/渾身.jpg"),"無し":Za("img/templates/skill/無し.jpg"),"砲術":Za("img/templates/skill/砲術.jpg"),"耐震":Za("img/templates/skill/耐震.jpg"),"耳栓":Za("img/templates/skill/耳栓.jpg"),"逆襲":Za("img/templates/skill/逆襲.jpg"),"防御":Za("img/templates/skill/防御.jpg"),"陽動":Za("img/templates/skill/陽動.jpg"),"集中":Za("img/templates/skill/集中.jpg"),"ボマー":Za("img/templates/skill/ボマー.jpg"),"地質学":Za("img/templates/skill/地質学.jpg"),"広域化":Za("img/templates/skill/広域化.jpg"),"挑戦者":Za("img/templates/skill/挑戦者.jpg"),"早食い":Za("img/templates/skill/早食い.jpg"),"植生学":Za("img/templates/skill/植生学.jpg"),"毒耐性":Za("img/templates/skill/毒耐性.jpg"),"水耐性":Za("img/templates/skill/水耐性.jpg"),"氷耐性":Za("img/templates/skill/氷耐性.jpg"),"満足感":Za("img/templates/skill/満足感.jpg"),"火耐性":Za("img/templates/skill/火耐性.jpg"),"破壊王":Za("img/templates/skill/破壊王.jpg"),"納刀術":Za("img/templates/skill/納刀術.jpg"),"見切り":Za("img/templates/skill/見切り.jpg"),"超会心":Za("img/templates/skill/超会心.jpg"),"逆恨み":Za("img/templates/skill/逆恨み.jpg"),"達人芸":Za("img/templates/skill/達人芸.jpg"),"雷耐性":Za("img/templates/skill/雷耐性.jpg"),"鬼火纏":Za("img/templates/skill/鬼火纏.jpg"),"龍耐性":Za("img/templates/skill/龍耐性.jpg"),"ブレ抑制":Za("img/templates/skill/ブレ抑制.jpg"),"ランナー":Za("img/templates/skill/ランナー.jpg"),"乗り名人":Za("img/templates/skill/乗り名人.jpg"),"剛刃研磨":Za("img/templates/skill/剛刃研磨.jpg"),"力の解放":Za("img/templates/skill/力の解放.jpg"),"反動軽減":Za("img/templates/skill/反動軽減.jpg"),"回復速度":Za("img/templates/skill/回復速度.jpg"),"回避性能":Za("img/templates/skill/回避性能.jpg"),"壁面移動":Za("img/templates/skill/壁面移動.jpg"),"弱点特効":Za("img/templates/skill/弱点特効.jpg"),"強化持続":Za("img/templates/skill/強化持続.jpg"),"弾丸節約":Za("img/templates/skill/弾丸節約.jpg"),"弾導強化":Za("img/templates/skill/弾導強化.jpg"),"死中に活":Za("img/templates/skill/死中に活.jpg"),"気絶耐性":Za("img/templates/skill/気絶耐性.jpg"),"泡沫の舞":Za("img/templates/skill/泡沫の舞.jpg"),"泥雪耐性":Za("img/templates/skill/泥雪耐性.jpg"),"滑走強化":Za("img/templates/skill/滑走強化.jpg"),"火事場力":Za("img/templates/skill/火事場力.jpg"),"睡眠耐性":Za("img/templates/skill/睡眠耐性.jpg"),"砲弾装填":Za("img/templates/skill/砲弾装填.jpg"),"翔蟲使い":Za("img/templates/skill/翔蟲使い.jpg"),"装填拡張":Za("img/templates/skill/装填拡張.jpg"),"装填速度":Za("img/templates/skill/装填速度.jpg"),"速射強化":Za("img/templates/skill/速射強化.jpg"),"鈍器使い":Za("img/templates/skill/鈍器使い.jpg"),"風圧耐性":Za("img/templates/skill/風圧耐性.jpg"),"飛び込み":Za("img/templates/skill/飛び込み.jpg"),"高速変形":Za("img/templates/skill/高速変形.jpg"),"麻痺耐性":Za("img/templates/skill/麻痺耐性.jpg"),"回避距離UP":Za("img/templates/skill/回避距離UP.jpg"),"ひるみ軽減":Za("img/templates/skill/ひるみ軽減.jpg"),"ガード強化":Za("img/templates/skill/ガード強化.jpg"),"ガード性能":Za("img/templates/skill/ガード性能.jpg"),"攻めの守勢":Za("img/templates/skill/攻めの守勢.jpg"),"毒属性強化":Za("img/templates/skill/毒属性強化.jpg"),"笛吹き名人":Za("img/templates/skill/笛吹き名人.jpg"),"精霊の加護":Za("img/templates/skill/精霊の加護.jpg"),"腹減り耐性":Za("img/templates/skill/腹減り耐性.jpg"),"体力回復量UP":Za("img/templates/skill/体力回復量UP.jpg"),"キノコ大好き":Za("img/templates/skill/キノコ大好き.jpg"),"ジャンプ鉄人":Za("img/templates/skill/ジャンプ鉄人.jpg"),"スタミナ奪取":Za("img/templates/skill/スタミナ奪取.jpg"),"フルチャージ":Za("img/templates/skill/フルチャージ.jpg"),"剥ぎ取り鉄人":Za("img/templates/skill/剥ぎ取り鉄人.jpg"),"抜刀術【力】":Za("img/templates/skill/抜刀術【力】.jpg"),"抜刀術【技】":Za("img/templates/skill/抜刀術【技】.jpg"),"爆破属性強化":Za("img/templates/skill/爆破属性強化.jpg"),"特殊射撃強化":Za("img/templates/skill/特殊射撃強化.jpg"),"睡眠属性強化":Za("img/templates/skill/睡眠属性強化.jpg"),"麻痺属性強化":Za("img/templates/skill/麻痺属性強化.jpg"),"会心撃【属性】":Za("img/templates/skill/会心撃【属性】.jpg"),"属性やられ耐性":Za("img/templates/skill/属性やられ耐性.jpg"),"水属性攻撃強化":Za("img/templates/skill/水属性攻撃強化.jpg"),"氷属性攻撃強化":Za("img/templates/skill/氷属性攻撃強化.jpg"),"火属性攻撃強化":Za("img/templates/skill/火属性攻撃強化.jpg"),"爆破やられ耐性":Za("img/templates/skill/爆破やられ耐性.jpg"),"砥石使用高速化":Za("img/templates/skill/砥石使用高速化.jpg"),"雷属性攻撃強化":Za("img/templates/skill/雷属性攻撃強化.jpg"),"龍属性攻撃強化":Za("img/templates/skill/龍属性攻撃強化.jpg"),"アイテム使用強化":Za("img/templates/skill/アイテム使用強化.jpg"),"スタミナ急速回復":Za("img/templates/skill/スタミナ急速回復.jpg"),"散弾・拡散矢強化":Za("img/templates/skill/散弾・拡散矢強化.jpg"),"貫通弾・貫通矢強化":Za("img/templates/skill/貫通弾・貫通矢強化.jpg"),"通常弾・連射矢強化":Za("img/templates/skill/通常弾・連射矢強化.jpg"),"チャージマスター":Za("img/templates/skill/チャージマスター.jpg"),"チューンアップ":Za("img/templates/skill/チューンアップ.jpg"),"供応":Za("img/templates/skill/供応.jpg"),"刃鱗磨き":Za("img/templates/skill/刃鱗磨き.jpg"),"合気":Za("img/templates/skill/合気.jpg"),"壁面移動【翔】":Za("img/templates/skill/壁面移動【翔】.jpg"),"攻勢":Za("img/templates/skill/攻勢.jpg"),"災禍転福":Za("img/templates/skill/災禍転福.jpg"),"研磨術【鋭】":Za("img/templates/skill/研磨術【鋭】.jpg"),"連撃":Za("img/templates/skill/連撃.jpg"),"炎鱗の恩恵":Za("img/templates/skill/炎鱗の恩恵.jpg"),"鋼殻の恩恵":Za("img/templates/skill/鋼殻の恩恵.jpg"),"霞皮の恩恵":Za("img/templates/skill/霞皮の恩恵.jpg"),"龍気活性":Za("img/templates/skill/龍気活性.jpg"),"血氣":Za("img/templates/skill/血氣.jpg"),"激昂":Za("img/templates/skill/激昂.jpg"),"伏魔響命":Za("img/templates/skill/伏魔響命.jpg"),"狂竜症【蝕】":Za("img/templates/skill/狂竜症【蝕】.jpg"),"業鎧【修羅】":Za("img/templates/skill/業鎧【修羅】.jpg"),"根性":Za("img/templates/skill/根性.jpg"),"巧撃":Za("img/templates/skill/巧撃.jpg"),"闇討ち":Za("img/templates/skill/闇討ち.jpg"),"弱点特効【属性】":Za("img/templates/skill/弱点特効【属性】.jpg"),"顕如盤石":Za("img/templates/skill/顕如盤石.jpg"),"状態異常確定蓄積":Za("img/templates/skill/状態異常確定蓄積.jpg"),"煽衛":Za("img/templates/skill/煽衛.jpg"),"剛心":Za("img/templates/skill/剛心.jpg"),"蓄積時攻撃強化":Za("img/templates/skill/蓄積時攻撃強化.jpg"),"狂化":Za("img/templates/skill/狂化.jpg"),"奮闘":Za("img/templates/skill/奮闘.jpg"),"風纏":Za("img/templates/skill/風纏.jpg"),"粉塵纏":Za("img/templates/skill/粉塵纏.jpg"),"龍気変換":Za("img/templates/skill/龍気変換.jpg"),"冰気錬成":Za("img/templates/skill/冰気錬成.jpg")}};for(let t=1;t<=9;t++)e.page[t]=Za(`img/templates/page/${t}.png`);ll.templates=await nl(e);const t=ll.templates.others.charmSelectFrame;n.default.cvtColor(t,t,n.default.COLOR_BGR2GRAY),n.default.threshold(t,t,63,255,n.default.THRESH_BINARY)}reset(){this.nCharms=0,this.charms={};for(let e=1;e<=Kr;e++){this.charms[e]={};for(let t=1;t<=this.ROWS_PER_PAGE;t++)this.charms[e][t]={}}}_isScaned(e,t,n){return null!=this._getCache({page:e,row:t,col:n})}_setCache({page:e,row:t,col:n},r){this.charms[e][t][n]=r}_getCache({page:e,row:t,col:n}){return this.charms[e][t][n]}getAdjustOffset(e){const t=ll.templates.others.equipmentSpecHeader,r=new n.default.Mat;n.default.matchTemplate(e,t,r,n.default.TM_CCOEFF_NORMED);const{maxLoc:i,maxVal:s}=n.default.minMaxLoc(r);return r.delete(),{x:i.x-this.EQUIPMENT_SPEC_HEADER_BASE_X,y:i.y-this.EQUIPMENT_SPEC_HEADER_BASE_Y}}adjustPosition(e){const t=this.getAdjustOffset(e);console.log({offset:t}),this.POINT_RARITY.x+=t.x-this.adjustOffset.x,this.POINT_RARITY.y+=t.y-this.adjustOffset.y,this.POINT_SLOTS.x+=t.x-this.adjustOffset.x,this.POINT_SLOTS.y+=t.y-this.adjustOffset.y,this.POINT_SLOT1.x+=t.x-this.adjustOffset.x,this.POINT_SLOT1.y+=t.y-this.adjustOffset.y,this.POINT_SLOT2.x+=t.x-this.adjustOffset.x,this.POINT_SLOT2.y+=t.y-this.adjustOffset.y,this.POINT_SLOT3.x+=t.x-this.adjustOffset.x,this.POINT_SLOT3.y+=t.y-this.adjustOffset.y,this.POINT_SKILL1.x+=t.x-this.adjustOffset.x,this.POINT_SKILL1.y+=t.y-this.adjustOffset.y,this.POINT_SKILL2.x+=t.x-this.adjustOffset.x,this.POINT_SKILL2.y+=t.y-this.adjustOffset.y,this.POINT_SKILL_LEVEL1.x+=t.x-this.adjustOffset.x,this.POINT_SKILL_LEVEL1.y+=t.y-this.adjustOffset.y,this.POINT_SKILL_LEVEL2.x+=t.x-this.adjustOffset.x,this.POINT_SKILL_LEVEL2.y+=t.y-this.adjustOffset.y,this.POINT_PAGE.x+=t.x-this.adjustOffset.x,this.POINT_PAGE.y+=t.y-this.adjustOffset.y,this.POINT_PAGE_SECOND_DIGIT.x+=t.x-this.adjustOffset.x,this.POINT_PAGE_SECOND_DIGIT.y+=t.y-this.adjustOffset.y,this.POINT_PAGE_IN_RINNE.x+=t.x-this.adjustOffset.x,this.POINT_PAGE_IN_RINNE.y+=t.y-this.adjustOffset.y,this.POINT_PAGE_SECOND_DIGIT_IN_RINNE.x+=t.x-this.adjustOffset.x,this.POINT_PAGE_SECOND_DIGIT_IN_RINNE.y+=t.y-this.adjustOffset.y,this.POINT_CHARM_AREA.x+=t.x-this.adjustOffset.x,this.POINT_CHARM_AREA.y+=t.y-this.adjustOffset.y,this.POINT_CHARM_ICON_BASE.x+=t.x-this.adjustOffset.x,this.POINT_CHARM_ICON_BASE.y+=t.y-this.adjustOffset.y,this.POINT_CHARM_AREA_IN_RINNE.x+=t.x-this.adjustOffset.x,this.POINT_CHARM_AREA_IN_RINNE.y+=t.y-this.adjustOffset.y,console.log({POINT_PAGE_IN_RINNE:this.POINT_PAGE_IN_RINNE}),this.adjustOffset=t}scan(e,t,n){const r=this._getCurrentPage(e),{pos:i,match:s,matchThreshold:o}=(()=>{switch(this.scanMode){case il:return Object.assign(Object.assign({},this._getCurrentCharmPos(e)),{matchThreshold:null!=n?n:.31});case sl:return Object.assign(Object.assign({},this._getCurrentCharmPosForRinne(e)),{matchThreshold:null!=n?n:.28});default:throw new Error("[internal error] invalid scan mode")}})();if(s<o)return null;const[a,l]=i,c=(()=>{switch(this.scanSkipMode){case ol:return!0;case al:return r===this.prevPosition.page&&a===this.prevPosition.col&&l===this.prevPosition.row;default:return!1}})();if(this.prevPosition={page:r,row:l,col:a},c){const e=this._getCache({page:r,row:l,col:a});if(null!=e)return{charm:e,isCache:!0}}const u=this._getRarity(e),f=this._getSlots(e),p=this._getSkills(e),d=this._getSkillLevels(e);p.forEach(((e,t)=>{"無し"===e&&(d[t]=0)}));const h={page:r,row:l,col:a,rarity:u,slots:f,skills:p,skillLevels:d,imageName:`${t}_${r}-${l}-${a}`};return this.nCharms++,this._setCache({page:r,row:l,col:a},h),{charm:h,isCache:!1}}countCharms(){return this.nCharms}exportAsText(){const e=[];for(let t=1;t<=Kr;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push([i.skills[0],i.skillLevels[0],i.skills[1],i.skillLevels[1],...i.slots].join(","))}return e.join("\n")}getCharms(){const e=[];for(let t=1;t<=Kr;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push(i)}return e}_getTrimRect(e,t){const r=Object.values(e).shift(),i=new n.default.Size(r.cols,r.rows);return new n.default.Rect(t,i)}_getRarity(e){const t=ll.templates.rare;return tl(e,t,this._getTrimRect(t,this.POINT_RARITY),63).name}_getSlots(e){const t=ll.templates.slot;return[tl(e,t,this._getTrimRect(t,this.POINT_SLOT1),63).name,tl(e,t,this._getTrimRect(t,this.POINT_SLOT2),63).name,tl(e,t,this._getTrimRect(t,this.POINT_SLOT3),63).name].map((e=>parseInt(e)))}_getSkills(e){const t=ll.templates.skill,n=this._getTrimRect(t,this.POINT_SKILL1),r=this._getTrimRect(t,this.POINT_SKILL2);return[tl(e,t,n,63).name,tl(e,t,r,63).name]}_getSkillLevels(e){const t=ll.templates.lvl,r=this._getTrimRect(t,this.POINT_SKILL_LEVEL1),i=this._getTrimRect(t,this.POINT_SKILL_LEVEL2),s=e=>{const t=new n.default.Mat;n.default.cvtColor(e,t,n.default.COLOR_BGR2HSV,3);const r=new n.default.MatVector;n.default.split(t,r);const i=r.get(2),s=new n.default.Mat;n.default.threshold(i,s,110,255,n.default.THRESH_OTSU),n.default.cvtColor(s,e,n.default.COLOR_GRAY2BGRA),s.delete(),r.delete(),t.delete()};return[tl(e,t,r,127,s).name,tl(e,t,i,127,s).name].map((e=>parseInt(e)))}_getCurrentPage(e){const t=(()=>{const t=ll.templates.page,n=this._getTrimRect(t,this.scanMode===sl?this.POINT_PAGE_IN_RINNE:this.POINT_PAGE);return tl(e,t,n,127)})();if(0===t.diffCount)return parseInt(t.name);const n=(()=>{const t=ll.templates["page-parts"],n=this._getTrimRect(t,this.scanMode===sl?this.POINT_PAGE_IN_RINNE:this.POINT_PAGE),r=this._getTrimRect(t,this.scanMode===sl?this.POINT_PAGE_SECOND_DIGIT_IN_RINNE:this.POINT_PAGE_SECOND_DIGIT),i=tl(e,t,n,127),s=tl(e,t,r,127);return{name:""+i.name+s.name,diffCount:i.diffCount+s.diffCount}})();return t.diffCount<n.diffCount?parseInt(t.name):parseInt(n.name)}_getCurrentCharmPos(e){const t=ll.templates.others.charmSelectFrame,r=new n.default.Mat,i=new n.default.Mat,s=new n.default.Mat;let o={row:null,col:null,match:39};for(let a=1;a<=this.ROWS_PER_PAGE;a++)for(let l=1;l<=this.COLS_PER_PAGE;l++){const c=new n.default.Point(this.POINT_CHARM_ICON_BASE.x+36*(l-1),this.POINT_CHARM_ICON_BASE.y+41*(a-1)),u=new n.default.Rect(c,this.SIZE_CHARM_ICON_FRAME);e.roi(u).copyTo(r,t),n.default.cvtColor(r,i,n.default.COLOR_BGR2HSV,3);const f=rl(i,[70,100,100,0],[120,255,255,255]);n.default.cvtColor(f,s,n.default.COLOR_RGBA2GRAY,0);const p=n.default.countNonZero(s);f.delete(),p>o.match&&(o={row:a,col:l,match:p})}return s.delete(),i.delete(),r.delete(),{pos:[o.col,o.row],match:o.match/400}}_getCurrentCharmPosForRinne(e){const t=new n.default.Rect(this.POINT_CHARM_AREA_IN_RINNE,this.SIZE_CHARM_AREA_IN_RINNE),r=e.roi(t),i=ll.templates.others.charmSelectFrameForRinne,s=new n.default.Mat;n.default.matchTemplate(r,i,s,n.default.TM_CCOEFF_NORMED);const{maxLoc:o,maxVal:a}=n.default.minMaxLoc(s);return s.delete(),r.delete(),{pos:[1+Math.floor(.5+o.x/41),1+Math.floor(.5+o.y/41)],match:a}}}function cl(e,t,n){const r=e.slice();return r[8]=t[n],r}function ul(e,t,n){const r=e.slice();return r[11]=t[n],r}function fl(e){let t,n;return{c(){t=T("td"),R(t,"class",n=y(e[4]({row:e[8],col:e[11]},e[3]))+" svelte-1epvvxw")},m(e,n){I(e,t,n)},p(e,r){14&r&&n!==(n=y(e[4]({row:e[8],col:e[11]},e[3]))+" svelte-1epvvxw")&&R(t,"class",n)},d(e){e&&C(t)}}}function pl(e){let t,n,r=[...Array(e[2]+1).keys()].slice(1),i=[];for(let t=0;t<r.length;t+=1)i[t]=fl(ul(e,r,t));return{c(){t=T("tr");for(let e=0;e<i.length;e+=1)i[e].c();n=N(),R(t,"class","svelte-1epvvxw")},m(e,r){I(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);A(t,n)},p(e,s){if(30&s){let o;for(r=[...Array(e[2]+1).keys()].slice(1),o=0;o<r.length;o+=1){const a=ul(e,r,o);i[o]?i[o].p(a,s):(i[o]=fl(a),i[o].c(),i[o].m(t,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){e&&C(t),O(i,e)}}}function dl(e){let t,n,i,s,o,a=[...Array(e[1]+1).keys()].slice(1),l=[];for(let t=0;t<a.length;t+=1)l[t]=pl(cl(e,a,t));return{c(){t=T("div"),n=T("table"),i=T("tbody");for(let e=0;e<l.length;e+=1)l[e].c();s=N(),o=F(e[0]),R(i,"class","svelte-1epvvxw"),R(n,"class","svelte-1epvvxw"),R(t,"class","minimap svelte-1epvvxw")},m(e,r){I(e,t,r),A(t,n),A(n,i);for(let e=0;e<l.length;e+=1)l[e].m(i,null);A(t,s),A(t,o)},p(e,[t]){if(30&t){let n;for(a=[...Array(e[1]+1).keys()].slice(1),n=0;n<a.length;n+=1){const r=cl(e,a,n);l[n]?l[n].p(r,t):(l[n]=pl(r),l[n].c(),l[n].m(i,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}1&t&&B(o,e[0])},i:r,o:r,d(e){e&&C(t),O(l,e)}}}function hl(e,t,n){let{page:r}=t,{rowsPerPage:i=Jr}=t,{colsPerPage:s=Gr}=t,{currentCharm:o}=t,{charmScanner:a}=t;function l({row:e,col:t}){const n=a.charms[r][e][t];return null==n?"none":`rare${n.rarity}`}function c({row:e,col:t}){return null!=o&&(r===o.page&&(o.row===e&&o.col===t))}return e.$$set=e=>{"page"in e&&n(0,r=e.page),"rowsPerPage"in e&&n(1,i=e.rowsPerPage),"colsPerPage"in e&&n(2,s=e.colsPerPage),"currentCharm"in e&&n(3,o=e.currentCharm),"charmScanner"in e&&n(5,a=e.charmScanner)},[r,i,s,o,function({row:e,col:t}){return[l({row:e,col:t}),c({row:e,col:t})?"current":""].join(" ")},a]}class ml extends Fe{constructor(e){super(),Pe(this,e,hl,dl,f,{page:0,rowsPerPage:1,colsPerPage:2,currentCharm:3,charmScanner:5})}}function _l(e){let t,n,i,s,o,a,l;return{c(){t=T("div"),n=T("button"),i=N(),s=T("label"),o=F(e[1]),R(n,"id","rec-button"),R(n,"class","svelte-1iksj0l"),V(n,"recording",e[0]),R(s,"for","rec-button"),R(s,"class","svelte-1iksj0l"),R(t,"class","svelte-1iksj0l")},m(r,c){I(r,t,c),A(t,n),A(t,i),A(t,s),A(s,o),a||(l=L(n,"click",e[2]),a=!0)},p(e,[t]){1&t&&V(n,"recording",e[0]),2&t&&B(o,e[1])},i:r,o:r,d(e){e&&C(t),a=!1,l()}}}function gl(e,t,n){let{isRecording:r=!1}=t,{label:i="Recording"}=t;return e.$$set=e=>{"isRecording"in e&&n(0,r=e.isRecording),"label"in e&&n(1,i=e.label)},[r,i,()=>n(0,r=!r)]}class yl extends Fe{constructor(e){super(),Pe(this,e,gl,_l,f,{isRecording:0,label:1})}}function vl(e,t,n){const r=e.slice();return r[35]=t[n],r[37]=n,r}const bl=e=>({row:8192&e[0]}),wl=e=>({row:e[35],n:e[37]});function ql(e,t,n){const r=e.slice();return r[38]=t[n],r}const kl=e=>({row:8192&e[0]}),xl=e=>({row:e[35],n:e[37]});function El(e,t,n){const r=e.slice();return r[38]=t[n],r}const $l=e=>({sortOrder:2&e[0],sortBy:1&e[0]}),Sl=e=>({sortOrder:e[1],sortBy:e[0]});function Al(e,t,n){const r=e.slice();return r[38]=t[n],r[43]=t,r[44]=n,r}function Il(e,t,n){const r=e.slice();return r[45]=t[n],r}function Cl(e){let t,n,r,i,s,o=e[12][e[38].key],a=[];for(let t=0;t<o.length;t+=1)a[t]=Tl(Il(e,o,t));function l(){e[28].call(t,e[38])}return{c(){t=T("select"),n=T("option");for(let e=0;e<a.length;e+=1)a[e].c();n.__value=void 0,n.value=n.__value,R(t,"class",r=y(e[15](e[9]))+" svelte-uczycn"),void 0===e[2][e[38].key]&&ue(l)},m(r,o){I(r,t,o),A(t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);U(t,e[2][e[38].key]),i||(s=L(t,"change",l),i=!0)},p(n,i){if(e=n,4104&i[0]){let n;for(o=e[12][e[38].key],n=0;n<o.length;n+=1){const r=Il(e,o,n);a[n]?a[n].p(r,i):(a[n]=Tl(r),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}512&i[0]&&r!==(r=y(e[15](e[9]))+" svelte-uczycn")&&R(t,"class",r),4108&i[0]&&U(t,e[2][e[38].key])},d(e){e&&C(t),O(a,e),i=!1,s()}}}function Ol(e){let t,n,r;function i(){e[27].call(t,e[38])}return{c(){t=T("input")},m(s,o){I(s,t,o),z(t,e[2][e[38].key]),n||(r=L(t,"input",i),n=!0)},p(n,r){e=n,4108&r[0]&&t.value!==e[2][e[38].key]&&z(t,e[2][e[38].key])},d(e){e&&C(t),n=!1,r()}}}function Tl(e){let t,n,r,i=e[45].name+"";return{c(){t=T("option"),n=F(i),t.__value=r=e[45].value,t.value=t.__value},m(e,r){I(e,t,r),A(t,n)},p(e,s){4104&s[0]&&i!==(i=e[45].name+"")&&B(n,i),4104&s[0]&&r!==(r=e[45].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&C(t)}}}function Pl(e){let t,n;function r(e,t){return void 0!==e[38].searchValue?Ol:void 0!==e[12][e[38].key]?Cl:void 0}let i=r(e),s=i&&i(e);return{c(){t=T("th"),s&&s.c(),n=N()},m(e,r){I(e,t,r),s&&s.m(t,null),A(t,n)},p(e,o){i===(i=r(e))&&s?s.p(e,o):(s&&s.d(1),s=i&&i(e),s&&(s.c(),s.m(t,n)))},d(e){e&&C(t),s&&s.d()}}}function Fl(e){let t,n,r,i,s,o=e[38].title+"",a=e[0]===e[38].key&&jl(e);return{c(){t=T("th"),n=F(o),r=N(),a&&a.c(),i=N(),R(t,"class",s=y(e[38].headerClass)+" svelte-uczycn")},m(e,s){I(e,t,s),A(t,n),A(t,r),a&&a.m(t,null),A(t,i)},p(e,r){8&r[0]&&o!==(o=e[38].title+"")&&B(n,o),e[0]===e[38].key?a?a.p(e,r):(a=jl(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),4104&r[0]&&s!==(s=y(e[38].headerClass)+" svelte-uczycn")&&R(t,"class",s)},d(e){e&&C(t),a&&a.d()}}}function Nl(e){let t,n,r,i,s,o,a,l=e[38].title+"",c=e[0]===e[38].key&&Ll(e);function u(...t){return e[29](e[38],...t)}return{c(){t=T("th"),n=F(l),r=N(),c&&c.c(),i=N(),R(t,"class",s=y(e[15](["isSortable",e[38].headerClass]))+" svelte-uczycn")},m(e,s){I(e,t,s),A(t,n),A(t,r),c&&c.m(t,null),A(t,i),o||(a=L(t,"click",u),o=!0)},p(r,o){e=r,8&o[0]&&l!==(l=e[38].title+"")&&B(n,l),e[0]===e[38].key?c?c.p(e,o):(c=Ll(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),4104&o[0]&&s!==(s=y(e[15](["isSortable",e[38].headerClass]))+" svelte-uczycn")&&R(t,"class",s)},d(e){e&&C(t),c&&c.d(),o=!1,a()}}}function jl(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=F(n)},m(e,n){I(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&B(t,n)},d(e){e&&C(t)}}}function Ll(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=F(n)},m(e,n){I(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&B(t,n)},d(e){e&&C(t)}}}function Dl(e){let t;function n(e,t){return e[38].sortable?Nl:Fl}let r=n(e),i=r(e);return{c(){i.c(),t=j()},m(e,n){i.m(e,n),I(e,t,n)},p(e,s){r===(r=n(e))&&i?i.p(e,s):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}function Rl(e){let t,n,i=(e[38].renderValue?e[38].renderValue(e[35]):e[38].value(e[35]))+"";return{c(){n=j(),t=new K(n)},m(e,r){t.m(i,e,r),I(e,n,r)},p(e,n){8200&n[0]&&i!==(i=(e[38].renderValue?e[38].renderValue(e[35]):e[38].value(e[35]))+"")&&t.p(i)},i:r,o:r,d(e){e&&C(n),e&&t.d()}}}function Ml(e){let t,n,r;const i=[e[38].renderComponent.props||{},{row:e[35]},{col:e[38]}];var s=e[38].renderComponent.component||e[38].renderComponent;function a(e){let t={};for(let e=0;e<i.length;e+=1)t=o(t,i[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Ie(t.$$.fragment),n=j()},m(e,i){t&&Ce(t,e,i),I(e,n,i),r=!0},p(e,r){const o=8200&r[0]?$e(i,[8&r[0]&&Se(e[38].renderComponent.props||{}),8192&r[0]&&{row:e[35]},8&r[0]&&{col:e[38]}]):{};if(s!==(s=e[38].renderComponent.component||e[38].renderComponent)){if(t){be();const e=t;ke(e.$$.fragment,1,0,(()=>{Oe(e,1)})),we()}s?(t=new s(a()),Ie(t.$$.fragment),qe(t.$$.fragment,1),Ce(t,n.parentNode,n)):t=null}else s&&t.$set(o)},i(e){r||(t&&qe(t.$$.fragment,e),r=!0)},o(e){t&&ke(t.$$.fragment,e),r=!1},d(e){e&&C(n),t&&Oe(t,e)}}}function Bl(e){let t,n,r,i,s,o,a,l;const c=[Ml,Rl],u=[];function f(e,t){return e[38].renderComponent?0:1}function p(...t){return e[30](e[35],e[38],...t)}return n=f(e),r=u[n]=c[n](e),{c(){t=T("td"),r.c(),i=N(),R(t,"class",s=y(e[15]([e[38].class,e[11]]))+" svelte-uczycn")},m(e,r){I(e,t,r),u[n].m(t,null),A(t,i),o=!0,a||(l=L(t,"click",p),a=!0)},p(a,l){let p=n;n=f(e=a),n===p?u[n].p(e,l):(be(),ke(u[p],1,1,(()=>{u[p]=null})),we(),r=u[n],r?r.p(e,l):(r=u[n]=c[n](e),r.c()),qe(r,1),r.m(t,i)),(!o||6152&l[0]&&s!==(s=y(e[15]([e[38].class,e[11]]))+" svelte-uczycn"))&&R(t,"class",s)},i(e){o||(qe(r),o=!0)},o(e){ke(r),o=!1},d(e){e&&C(t),u[n].d(),a=!1,l()}}}function zl(e){let t,n;const r=e[26].row,i=h(r,e,e[25],xl),s=i||function(e){let t,n,r,i,s,o=e[3],a=[];for(let t=0;t<o.length;t+=1)a[t]=Bl(ql(e,o,t));const l=e=>ke(a[e],1,1,(()=>{a[e]=null}));function c(...t){return e[31](e[35],...t)}return{c(){t=T("tr");for(let e=0;e<a.length;e+=1)a[e].c();R(t,"class",n=y(e[15](e[10]))+" svelte-uczycn")},m(e,n){I(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);r=!0,i||(s=L(t,"click",c),i=!0)},p(i,s){if(e=i,305160&s[0]){let n;for(o=e[3],n=0;n<o.length;n+=1){const r=ql(e,o,n);a[n]?(a[n].p(r,s),qe(a[n],1)):(a[n]=Bl(r),a[n].c(),qe(a[n],1),a[n].m(t,null))}for(be(),n=o.length;n<a.length;n+=1)l(n);we()}(!r||1024&s[0]&&n!==(n=y(e[15](e[10]))+" svelte-uczycn"))&&R(t,"class",n)},i(e){if(!r){for(let e=0;e<o.length;e+=1)qe(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ke(a[e]);r=!1},d(e){e&&C(t),O(a,e),i=!1,s()}}}(e),o=e[26]["after-row"],a=h(o,e,e[25],wl);return{c(){s&&s.c(),t=N(),a&&a.c()},m(e,r){s&&s.m(e,r),I(e,t,r),a&&a.m(e,r),n=!0},p(e,t){i?i.p&&(!n||33562624&t[0])&&_(i,r,e,e[25],t,kl,xl):s&&s.p&&11272&t[0]&&s.p(e,t),a&&a.p&&(!n||33562624&t[0])&&_(a,o,e,e[25],t,bl,wl)},i(e){n||(qe(s,e),qe(a,e),n=!0)},o(e){ke(s,e),ke(a,e),n=!1},d(e){s&&s.d(e),e&&C(t),a&&a.d(e)}}}function Hl(e){let t,n,r,i,s,o,a,l,c,u=e[14]&&function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=Pl(Al(e,n,t));return{c(){t=T("tr");for(let e=0;e<r.length;e+=1)r[e].c();R(t,"class","row-filter-header svelte-uczycn")},m(e,n){I(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(37388&i[0]){let s;for(n=e[3],s=0;s<n.length;s+=1){const o=Al(e,n,s);r[s]?r[s].p(o,i):(r[s]=Pl(o),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&C(t),O(r,e)}}}(e);const f=e[26].header,p=h(f,e,e[25],Sl),d=p||function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=Dl(El(e,n,t));return{c(){t=T("tr");for(let e=0;e<r.length;e+=1)r[e].c();R(t,"class","row-title-header")},m(e,n){I(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(98363&i[0]){let s;for(n=e[3],s=0;s<n.length;s+=1){const o=El(e,n,s);r[s]?r[s].p(o,i):(r[s]=Dl(o),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&C(t),O(r,e)}}}(e);let m=e[13],g=[];for(let t=0;t<m.length;t+=1)g[t]=zl(vl(e,m,t));const v=e=>ke(g[e],1,1,(()=>{g[e]=null}));return{c(){t=T("table"),n=T("thead"),u&&u.c(),r=N(),d&&d.c(),s=N(),o=T("tbody");for(let e=0;e<g.length;e+=1)g[e].c();R(n,"class",i=y(e[15](e[7]))+" svelte-uczycn"),R(o,"class",a=y(e[15](e[8]))+" svelte-uczycn"),R(t,"class",l=y(e[15](e[6]))+" svelte-uczycn")},m(e,i){I(e,t,i),A(t,n),u&&u.m(n,null),A(n,r),d&&d.m(n,null),A(t,s),A(t,o);for(let e=0;e<g.length;e+=1)g[e].m(o,null);c=!0},p(e,r){if(e[14]&&u.p(e,r),p?p.p&&(!c||33554435&r[0])&&_(p,f,e,e[25],r,$l,Sl):d&&d.p&&59&r[0]&&d.p(e,r),(!c||128&r[0]&&i!==(i=y(e[15](e[7]))+" svelte-uczycn"))&&R(n,"class",i),33991688&r[0]){let t;for(m=e[13],t=0;t<m.length;t+=1){const n=vl(e,m,t);g[t]?(g[t].p(n,r),qe(g[t],1)):(g[t]=zl(n),g[t].c(),qe(g[t],1),g[t].m(o,null))}for(be(),t=m.length;t<g.length;t+=1)v(t);we()}(!c||256&r[0]&&a!==(a=y(e[15](e[8]))+" svelte-uczycn"))&&R(o,"class",a),(!c||64&r[0]&&l!==(l=y(e[15](e[6]))+" svelte-uczycn"))&&R(t,"class",l)},i(e){if(!c){qe(d,e);for(let e=0;e<m.length;e+=1)qe(g[e]);c=!0}},o(e){ke(d,e),g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)ke(g[e]);c=!1},d(e){e&&C(t),u&&u.d(),d&&d.d(e),O(g,e)}}}function Ul(e,t,n){let r,{$$slots:i={},$$scope:s}=t;const o=re();let{columns:a}=t,{rows:l}=t,{sortBy:c=""}=t,{sortOrder:u=1}=t,{iconAsc:f="▲"}=t,{iconDesc:p="▼"}=t,{classNameTable:d=""}=t,{classNameThead:h=""}=t,{classNameTbody:m=""}=t,{classNameSelect:_=""}=t,{classNameRow:g=""}=t,{classNameCell:y=""}=t,{filterSelections:v={}}=t,{sliceBegin:b=null}=t,{sliceEnd:w=null}=t,{disableFilterHeader:q=!1}=t,k=()=>"",x=!q&&a.some((e=>void 0!==e.filterOptions||void 0!==e.searchValue)),E={},$={};a.forEach((e=>{n(24,$[e.key]=e,$)}));const S=(e,t)=>{var r;r=t.key,n(1,u=r===c&&1===u?-1:1),n(0,c=t.key),o("clickCol",{event:e,col:t,key:t.key})},A=(e,t)=>{o("clickRow",{event:e,row:t})},I=(e,t,n)=>{o("clickCell",{event:e,row:t,key:n})};return e.$$set=e=>{"columns"in e&&n(3,a=e.columns),"rows"in e&&n(19,l=e.rows),"sortBy"in e&&n(0,c=e.sortBy),"sortOrder"in e&&n(1,u=e.sortOrder),"iconAsc"in e&&n(4,f=e.iconAsc),"iconDesc"in e&&n(5,p=e.iconDesc),"classNameTable"in e&&n(6,d=e.classNameTable),"classNameThead"in e&&n(7,h=e.classNameThead),"classNameTbody"in e&&n(8,m=e.classNameTbody),"classNameSelect"in e&&n(9,_=e.classNameSelect),"classNameRow"in e&&n(10,g=e.classNameRow),"classNameCell"in e&&n(11,y=e.classNameCell),"filterSelections"in e&&n(2,v=e.filterSelections),"sliceBegin"in e&&n(20,b=e.sliceBegin),"sliceEnd"in e&&n(21,w=e.sliceEnd),"disableFilterHeader"in e&&n(22,q=e.disableFilterHeader),"$$scope"in e&&n(25,s=e.$$scope)},e.$$.update=()=>{if(16777217&e.$$.dirty[0]){let e=$[c];void 0!==e&&!0===e.sortable&&"function"==typeof e.value&&n(23,k=t=>e.value(t))}28835846&e.$$.dirty[0]&&n(13,r=l.filter((e=>Object.keys(v).every((t=>""===v[t]||$[t].searchValue&&($[t].searchValue(e)+"").toLocaleLowerCase().indexOf((v[t]+"").toLocaleLowerCase())>=0||void 0===v[t]||v[t]===("function"==typeof $[t].filterValue?$[t].filterValue(e):$[t].value(e)))))).map((e=>Object.assign({},e,{$sortOn:k(e)}))).sort(((e,t)=>e.$sortOn>t.$sortOn?u:e.$sortOn<t.$sortOn?-u:0)).slice(b||0,w||void 0)),524296&e.$$.dirty[0]&&x&&a&&l&&(n(12,E={}),a.forEach((e=>{"function"==typeof e.filterOptions?n(12,E[e.key]=e.filterOptions(l),E):Array.isArray(e.filterOptions)&&n(12,E[e.key]=e.filterOptions.map((e=>({name:e,value:e}))),E)})))},[c,u,v,a,f,p,d,h,m,_,g,y,E,r,x,e=>[].concat(e).filter((e=>"string"==typeof e&&""!==e)).join(" "),S,A,I,l,b,w,q,k,$,s,i,function(e){v[e.key]=this.value,n(2,v),n(3,a),n(12,E)},function(e){v[e.key]=W(this),n(2,v),n(3,a),n(12,E)},(e,t)=>S(t,e),(e,t,n)=>{I(n,e,t.key)},(e,t)=>{A(t,e)}]}class Wl extends Fe{constructor(e){super(),Pe(this,e,Ul,Hl,f,{columns:3,rows:19,sortBy:0,sortOrder:1,iconAsc:4,iconDesc:5,classNameTable:6,classNameThead:7,classNameTbody:8,classNameSelect:9,classNameRow:10,classNameCell:11,filterSelections:2,sliceBegin:20,sliceEnd:21,disableFilterHeader:22},[-1,-1])}}function Vl(e,t,n){const r=e.slice();return r[28]=t[n],r}function Ql(e,t,n){const r=e.slice();return r[24]=t[n],r}function Kl(e){let t,n,i=(e[28].renderValue?e[28].renderValue(e[23]):e[28].value(e[23]))+"";return{c(){n=j(),t=new K(n)},m(e,r){t.m(i,e,r),I(e,n,r)},p(e,n){8388608&n[0]&&i!==(i=(e[28].renderValue?e[28].renderValue(e[23]):e[28].value(e[23]))+"")&&t.p(i)},i:r,o:r,d(e){e&&C(n),e&&t.d()}}}function Gl(e){let t,n,r;const i=[e[28].renderComponent.props||{},{row:e[23]},{col:e[28]}];var s=e[28].renderComponent.component||e[28].renderComponent;function a(e){let t={};for(let e=0;e<i.length;e+=1)t=o(t,i[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Ie(t.$$.fragment),n=j()},m(e,i){t&&Ce(t,e,i),I(e,n,i),r=!0},p(e,r){const o=8388736&r[0]?$e(i,[128&r[0]&&Se(e[28].renderComponent.props||{}),8388608&r[0]&&{row:e[23]},128&r[0]&&{col:e[28]}]):{};if(s!==(s=e[28].renderComponent.component||e[28].renderComponent)){if(t){be();const e=t;ke(e.$$.fragment,1,0,(()=>{Oe(e,1)})),we()}s?(t=new s(a()),Ie(t.$$.fragment),qe(t.$$.fragment,1),Ce(t,n.parentNode,n)):t=null}else s&&t.$set(o)},i(e){r||(t&&qe(t.$$.fragment,e),r=!0)},o(e){t&&ke(t.$$.fragment,e),r=!1},d(e){e&&C(n),t&&Oe(t,e)}}}function Jl(e){let t,n,r,i,s,o,a;const l=[Gl,Kl],c=[];function u(...t){return e[14](e[28],e[23],e[27],...t)}return n=function(e,t){return e[28].renderComponent?0:1}(e),r=c[n]=l[n](e),{c(){t=T("td"),r.c(),i=N(),R(t,"class",y([e[28].class].join(" "))+" svelte-1bydddo")},m(e,r){I(e,t,r),c[n].m(t,null),A(t,i),s=!0,o||(a=L(t,"click",u),o=!0)},p(t,n){e=t,r.p(e,n)},i(e){s||(qe(r),s=!0)},o(e){ke(r),s=!1},d(e){e&&C(t),c[n].d(),o=!1,a()}}}function Yl(e){let t,n,r,i,s=e[7],o=[];for(let t=0;t<s.length;t+=1)o[t]=Jl(Vl(e,s,t));const a=e=>ke(o[e],1,1,(()=>{o[e]=null}));function l(){return e[15](e[23])}return{c(){t=T("tr");for(let e=0;e<o.length;e+=1)o[e].c();R(t,"slot","row")},m(e,s){I(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0,r||(i=L(t,"click",l),r=!0)},p(n,r){if(e=n,8388736&r[0]){let n;for(s=e[7],n=0;n<s.length;n+=1){const i=Vl(e,s,n);o[n]?(o[n].p(i,r),qe(o[n],1)):(o[n]=Jl(i),o[n].c(),qe(o[n],1),o[n].m(t,null))}for(be(),n=s.length;n<o.length;n+=1)a(n);we()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)qe(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ke(o[e]);n=!1},d(e){e&&C(t),O(o,e),r=!1,i()}}}function Xl(e){let t,n,r,i;const s=[tc,ec,Zl],o=[];function a(e,t){return null==e[23].substitutableCharms?0:0===e[23].substitutableCharms.length?1:2}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){o[t].m(e,n),I(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?o[t].p(e,i):(be(),ke(o[l],1,1,(()=>{o[l]=null})),we(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),qe(n,1),n.m(r.parentNode,r))},i(e){i||(qe(n),i=!0)},o(e){ke(n),i=!1},d(e){o[t].d(e),e&&C(r)}}}function Zl(e){let t,n,r,i=e[23].substitutableCharms,s=[];for(let t=0;t<i.length;t+=1)s[t]=nc(Ql(e,i,t));return{c(){t=T("div");for(let e=0;e<s.length;e+=1)s[e].c();R(t,"class","row-substitutes")},m(e,n){I(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null);r=!0},p(e,n){if(8388608&n[0]){let r;for(i=e[23].substitutableCharms,r=0;r<i.length;r+=1){const o=Ql(e,i,r);s[r]?s[r].p(o,n):(s[r]=nc(o),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},i(e){r||(ue((()=>{n||(n=Ee(t,Be,{duration:150},!0)),n.run(1)})),r=!0)},o(e){n||(n=Ee(t,Be,{duration:150},!1)),n.run(0),r=!1},d(e){e&&C(t),O(s,e),e&&n&&n.end()}}}function ec(e){return{c:r,m:r,p:r,i:r,o:r,d:r}}function tc(e){let t;return{c(){t=T("div"),t.textContent="searching...",H(t,"width","100%"),H(t,"border-bottom","solid 1px #ddd")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function nc(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_=e[24].rowid+"",g=e[24].skill1+"",y=e[24].skill1Level+"",v=e[24].skill2+"",b=e[24].skill2Level+"",w=e[24].slot1+"",q=e[24].slot2+"",k=e[24].slot3+"";return{c(){t=T("div"),n=F(_),r=F(": "),i=F(g),s=F(y),o=F(", "),a=F(v),l=F(b),c=F(", "),u=F(w),f=F("-"),p=F(q),d=F("-"),h=F(k),m=N(),H(t,"width","100%"),H(t,"text-align","left"),H(t,"padding","0.3rem 2rem")},m(e,_){I(e,t,_),A(t,n),A(t,r),A(t,i),A(t,s),A(t,o),A(t,a),A(t,l),A(t,c),A(t,u),A(t,f),A(t,p),A(t,d),A(t,h),A(t,m)},p(e,t){8388608&t[0]&&_!==(_=e[24].rowid+"")&&B(n,_),8388608&t[0]&&g!==(g=e[24].skill1+"")&&B(i,g),8388608&t[0]&&y!==(y=e[24].skill1Level+"")&&B(s,y),8388608&t[0]&&v!==(v=e[24].skill2+"")&&B(a,v),8388608&t[0]&&b!==(b=e[24].skill2Level+"")&&B(l,b),8388608&t[0]&&w!==(w=e[24].slot1+"")&&B(u,w),8388608&t[0]&&q!==(q=e[24].slot2+"")&&B(p,q),8388608&t[0]&&k!==(k=e[24].slot3+"")&&B(h,k)},d(e){e&&C(t)}}}function rc(e){let t,n,r,i,s;return{c(){t=T("div"),n=T("canvas"),R(n,"id",r="charm-table-row-"+e[23].rowid+"-screenshot"),H(n,"width","100%"),H(t,"width","100%"),H(t,"border-bottom","solid 1px #ddd")},m(e,r){I(e,t,r),A(t,n),s=!0},p(e,t){(!s||8388608&t[0]&&r!==(r="charm-table-row-"+e[23].rowid+"-screenshot"))&&R(n,"id",r)},i(e){s||(ue((()=>{i||(i=Ee(t,Be,{duration:100},!0)),i.run(1)})),s=!0)},o(e){i||(i=Ee(t,Be,{duration:100},!1)),i.run(0),s=!1},d(e){e&&C(t),e&&i&&i.end()}}}function ic(e){let t,n,r,i,s=e[5][e[23].rowid]&&Xl(e),o=e[4][e[23].rowid]&&rc(e);return{c(){t=T("div"),s&&s.c(),n=N(),o&&o.c(),R(t,"slot","after-row"),R(t,"id",r="charm-table-row-"+e[23].rowid),H(t,"width","100%")},m(e,r){I(e,t,r),s&&s.m(t,null),A(t,n),o&&o.m(t,null),i=!0},p(e,a){e[5][e[23].rowid]?s?(s.p(e,a),8388640&a[0]&&qe(s,1)):(s=Xl(e),s.c(),qe(s,1),s.m(t,n)):s&&(be(),ke(s,1,1,(()=>{s=null})),we()),e[4][e[23].rowid]?o?(o.p(e,a),8388624&a[0]&&qe(o,1)):(o=rc(e),o.c(),qe(o,1),o.m(t,null)):o&&(be(),ke(o,1,1,(()=>{o=null})),we()),(!i||8388608&a[0]&&r!==(r="charm-table-row-"+e[23].rowid))&&R(t,"id",r)},i(e){i||(qe(s),qe(o),i=!0)},o(e){ke(s),ke(o),i=!1},d(e){e&&C(t),s&&s.d(),o&&o.d()}}}function sc(e){let t,n,r,i,s;function o(t){e[16](t)}function a(t){e[17](t)}let l={columns:e[7],rows:e[3],classNameTable:"table table-striped table-hover table-responsible",classNameThead:"table-dark hide-first-child.disabled",disableFilterHeader:e[2],$$slots:{"after-row":[ic,({row:e})=>({23:e}),({row:e})=>[e?8388608:0]],row:[Yl,({n:e,row:t})=>({27:e,23:t}),({n:e,row:t})=>[(e?134217728:0)|(t?8388608:0)]]},$$scope:{ctx:e}};return void 0!==e[0]&&(l.sliceBegin=e[0]),void 0!==e[1]&&(l.sliceEnd=e[1]),n=new Wl({props:l}),se.push((()=>Ae(n,"sliceBegin",o))),se.push((()=>Ae(n,"sliceEnd",a))),n.$on("clickCol",e[8]),{c(){t=T("div"),Ie(n.$$.fragment),R(t,"class","charm-table svelte-1bydddo"),R(t,"style",e[6])},m(e,r){I(e,t,r),Ce(n,t,null),s=!0},p(e,o){const a={};8&o[0]&&(a.rows=e[3]),4&o[0]&&(a.disableFilterHeader=e[2]),8388656&o[0]|1&o[1]&&(a.$$scope={dirty:o,ctx:e}),!r&&1&o[0]&&(r=!0,a.sliceBegin=e[0],fe((()=>r=!1))),!i&&2&o[0]&&(i=!0,a.sliceEnd=e[1],fe((()=>i=!1))),n.$set(a),(!s||64&o[0])&&R(t,"style",e[6])},i(e){s||(qe(n.$$.fragment,e),s=!0)},o(e){ke(n.$$.fragment,e),s=!1},d(e){e&&C(t),Oe(n)}}}function oc(e,t,r){let i,s;d(e,On,(e=>r(18,s=e)));var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let{headerColor:a="mediumseagreen"}=t,{disableFilterHeader:l=!1}=t,{showImageColumn:c=!0}=t,{showSubstitutesColumn:u=!0}=t,{charms:f}=t,{initialOpenedScreentshots:p=[]}=t,{sliceBegin:h}=t,{sliceEnd:m}=t;const _=ei.map((e=>e.name)),g=[{key:"id",title:"ID",value:e=>e.rowid,sortable:!0,filterOptions:e=>{let t={};return e.forEach((e=>{let n=Math.floor(e.rowid/50);void 0===t[n]&&(t[n]={name:`${50*n+1} 〜 ${50*(n+1)}`,value:n})})),t=Object.entries(t).sort().reduce(((e,[t,n])=>(e[t]=n,e)),{}),Object.values(t)},filterValue:e=>Math.floor((e.rowid-1)/50)},{key:"skill1",title:"スキル1",value:e=>e.skill1,filterOptions:_,sortable:!0},{key:"skill1Level",title:"スキル1 Lv",value:e=>e.skill1Level,filterOptions:[...Array(8).keys()].slice(1),sortable:!0},{key:"skill2",title:"スキル2",value:e=>e.skill2,filterOptions:_,sortable:!0},{key:"skill2Level",title:"スキル2 Lv",value:e=>e.skill2Level,filterOptions:[...Array(8).keys()].slice(1),sortable:!0},...Array.from({length:3},((e,t)=>t+1)).map((e=>({key:`slot${e}`,title:`スロット${e}`,value:t=>t[`slot${e}`],renderValue:t=>t[`slot${e}`]||"-",sortable:!0,filterOptions:[...Array(5).keys()].slice(1)}))),{key:"evaluation",title:"合計Lv",value:e=>e.evaluation||"-",filterOptions:[...Array(21).keys()],sortable:!0},{key:"image",title:"画像",value:e=>e.imagename?"有り":"無し",renderValue:e=>e.imagename?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16"> <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/> <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/> </svg>':"",sortable:!0,filterOptions:["有り","無し"],onClick:w},{key:"substitutableCharms",title:"代替",value:e=>{var t;return(null===(t=e.substitutableCharms)||void 0===t?void 0:t.length)?"有り":"無し"},renderValue:e=>null==e.substitutableCharms?'<span style="color: gray"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-square-fill" viewBox="0 0 16 16"> <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.496 6.033a.237.237 0 0 1-.24-.247C5.35 4.091 6.737 3.5 8.005 3.5c1.396 0 2.672.73 2.672 2.24 0 1.08-.635 1.594-1.244 2.057-.737.559-1.01.768-1.01 1.486v.105a.25.25 0 0 1-.25.25h-.81a.25.25 0 0 1-.25-.246l-.004-.217c-.038-.927.495-1.498 1.168-1.987.59-.444.965-.736.965-1.371 0-.825-.628-1.168-1.314-1.168-.803 0-1.253.478-1.342 1.134-.018.137-.128.25-.266.25h-.825zm2.325 6.443c-.584 0-1.009-.394-1.009-.927 0-.552.425-.94 1.01-.94.609 0 1.028.388 1.028.94 0 .533-.42.927-1.029.927z"/> </svg> </span>':e.substitutableCharms.length?'<span style="color: mediumseagreen"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-square-fill" viewBox="0 0 16 16"> <path d="M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z"/> </svg> </span>':"",sortable:!0,filterOptions:["有り","無し"]}].filter((e=>{switch(e.key){case"image":return c;case"substitutableCharms":return u;default:return!0}}));let y=[],v=[];function b({row:e}){const t=e.rowid;r(5,v[t]=!v[t],v)}function w({e:e,row:t}){return o(this,void 0,void 0,(function*(){null==e||e.stopPropagation();const i=t.rowid,o=!y[i];if(r(4,y[i]=o,y),o){if(null==t.imagename)return void console.log("screenshot is not found");const e=yield s.getScreenshot(t.imagename);n.default.imshow(`charm-table-row-${i}-screenshot`,e)}}))}function q(){r(4,y=[]),r(5,v=[]);for(let e of p){w({row:f.find((t=>t.rowid===e))})}}q();return e.$$set=e=>{"headerColor"in e&&r(10,a=e.headerColor),"disableFilterHeader"in e&&r(2,l=e.disableFilterHeader),"showImageColumn"in e&&r(11,c=e.showImageColumn),"showSubstitutesColumn"in e&&r(12,u=e.showSubstitutesColumn),"charms"in e&&r(3,f=e.charms),"initialOpenedScreentshots"in e&&r(13,p=e.initialOpenedScreentshots),"sliceBegin"in e&&r(0,h=e.sliceBegin),"sliceEnd"in e&&r(1,m=e.sliceEnd)},e.$$.update=()=>{7168&e.$$.dirty[0]&&r(6,i=Object.entries({"header-background-color":a,"table-width":61+(c?3:0)+(u?3:0)+"rem"}).map((([e,t])=>`--${e}:${t}`)).join(";")),8&e.$$.dirty[0]&&q()},[h,m,l,f,y,v,i,g,function(){q()},b,a,c,u,p,(e,t,n,r)=>{null!=e.onClick&&e.onClick({e:r,row:t,col:e,index:n})},e=>b({row:e}),function(e){h=e,r(0,h)},function(e){m=e,r(1,m)}]}class ac extends Fe{constructor(e){super(),Pe(this,e,oc,sc,f,{headerColor:10,disableFilterHeader:2,showImageColumn:11,showSubstitutesColumn:12,charms:3,initialOpenedScreentshots:13,sliceBegin:0,sliceEnd:1},[-1,-1])}}function lc(e,t,n){const r=e.slice();return r[16]=t[n],r}function cc(e){let t,n,r,i,s,o=e[16]+1+"";function a(){return e[13](e[16])}return{c(){t=T("li"),n=T("span"),r=F(o),R(n,"class","page-link"),R(t,"class","page-item"),V(t,"active",e[16]===e[4])},m(e,o){I(e,t,o),A(t,n),A(n,r),i||(s=L(n,"click",a),i=!0)},p(n,i){e=n,64&i&&o!==(o=e[16]+1+"")&&B(r,o),80&i&&V(t,"active",e[16]===e[4])},d(e){e&&C(t),i=!1,s()}}}function uc(e){let t,n,r,i,s,o,a,l,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$,S,P,j,D;p=new ac({props:{charms:e[0],sliceBegin:e[7],sliceEnd:e[8],disableFilterHeader:e[1],headerColor:e[2],initialOpenedScreentshots:e[3]}});let M=[...Array(e[6]).keys()],B=[];for(let t=0;t<M.length;t+=1)B[t]=cc(lc(e,M,t));return{c(){t=T("div"),n=T("div"),r=F("show\n    "),i=T("select"),s=T("option"),s.textContent="10",o=T("option"),o.textContent="25",a=T("option"),a.textContent="50",l=T("option"),l.textContent="100",u=F("\n    charms"),f=N(),Ie(p.$$.fragment),d=N(),h=T("div"),m=T("ul"),_=T("li"),g=T("span"),g.innerHTML='<span aria-hidden="true">«</span>',y=N(),v=T("li"),b=T("span"),b.innerHTML='<span aria-hidden="true">&lt;</span>',w=N();for(let e=0;e<B.length;e+=1)B[e].c();q=N(),k=T("li"),x=T("span"),x.innerHTML='<span aria-hidden="true">&gt;</span>',E=N(),$=T("li"),S=T("span"),S.innerHTML='<span aria-hidden="true">»</span>',s.__value="10",s.value=s.__value,o.__value="25",o.value=o.__value,a.__value="50",a.value=a.__value,l.__value="100",l.value=l.__value,void 0===e[5]&&ue((()=>e[10].call(i))),R(g,"class","page-link"),R(_,"class","page-item"),R(_,"aria-label","First"),V(_,"disabled",0===e[4]),R(b,"class","page-link"),R(v,"class","page-item"),R(v,"aria-label","Previous"),V(v,"disabled",0===e[4]),R(x,"class","page-link"),R(k,"class","page-item"),R(k,"aria-label","Next"),V(k,"disabled",e[4]===e[6]-1),R(S,"class","page-link"),R($,"class","page-item"),R($,"aria-label","Last"),V($,"disabled",e[4]===e[6]-1),R(m,"class","pagination"),R(h,"id","pager")},m(c,C){I(c,t,C),A(t,n),A(n,r),A(n,i),A(i,s),A(i,o),A(i,a),A(i,l),U(i,e[5]),A(n,u),A(t,f),Ce(p,t,null),A(t,d),A(t,h),A(h,m),A(m,_),A(_,g),A(m,y),A(m,v),A(v,b),A(m,w);for(let e=0;e<B.length;e+=1)B[e].m(m,null);A(m,q),A(m,k),A(k,x),A(m,E),A(m,$),A($,S),P=!0,j||(D=[L(i,"change",e[10]),L(g,"click",e[11]),L(b,"click",e[12]),L(x,"click",e[14]),L(S,"click",e[15])],j=!0)},p(e,[t]){32&t&&U(i,e[5]);const n={};if(1&t&&(n.charms=e[0]),128&t&&(n.sliceBegin=e[7]),256&t&&(n.sliceEnd=e[8]),2&t&&(n.disableFilterHeader=e[1]),4&t&&(n.headerColor=e[2]),8&t&&(n.initialOpenedScreentshots=e[3]),p.$set(n),16&t&&V(_,"disabled",0===e[4]),16&t&&V(v,"disabled",0===e[4]),80&t){let n;for(M=[...Array(e[6]).keys()],n=0;n<M.length;n+=1){const r=lc(e,M,n);B[n]?B[n].p(r,t):(B[n]=cc(r),B[n].c(),B[n].m(m,q))}for(;n<B.length;n+=1)B[n].d(1);B.length=M.length}80&t&&V(k,"disabled",e[4]===e[6]-1),80&t&&V($,"disabled",e[4]===e[6]-1)},i(e){P||(qe(p.$$.fragment,e),P=!0)},o(e){ke(p.$$.fragment,e),P=!1},d(e){e&&C(t),Oe(p),O(B,e),j=!1,c(D)}}}function fc(e,t,n){let r,i,s;var o;let{charms:a=[]}=t,{disableFilterHeader:l=!0}=t,{headerColor:c="dodgerblue"}=t,{initialOpenedScreentshots:u=[]}=t,f=1,p=10;return e.$$set=e=>{"charms"in e&&n(0,a=e.charms),"disableFilterHeader"in e&&n(1,l=e.disableFilterHeader),"headerColor"in e&&n(2,c=e.headerColor),"initialOpenedScreentshots"in e&&n(3,u=e.initialOpenedScreentshots)},e.$$.update=()=>{545&e.$$.dirty&&n(6,r=Math.ceil((null!==n(9,o=null==a?void 0:a.length)&&void 0!==o?o:0)/p)),65&e.$$.dirty&&a&&r&&n(4,f=0),48&e.$$.dirty&&n(7,i=p*f),48&e.$$.dirty&&n(8,s=p*(f+1))},[a,l,c,u,f,p,r,i,s,o,function(){p=W(this),n(5,p)},()=>n(4,f=0),()=>n(4,f--,f),e=>n(4,f=e),()=>n(4,f++,f),()=>n(4,f=r-1)]}class pc extends Fe{constructor(e){super(),Pe(this,e,fc,uc,f,{charms:0,disableFilterHeader:1,headerColor:2,initialOpenedScreentshots:3})}}function dc(e,t){const n=(e,t)=>e.length===t.length&&e.every((e=>t.includes(e)));return n(e.skills,t.skills)&&n(e.skillLevels,t.skillLevels)&&n(e.slots,t.slots)}function hc(e){return{skills:[e.skill1,e.skill2],skillLevels:[e.skill1Level,e.skill2Level],slots:[e.slot1,e.slot2,e.slot3]}}const mc=lt(!1);function _c(e,t,n){const r=e.slice();return r[28]=t[n],r}function gc(e,t,n){const r=e.slice();return r[31]=t[n],r[32]=t,r[33]=n,r}function yc(e){let t;return{c(){t=F("Reset Minimap")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function vc(e){let t,n,r,i,s,o,a,l;function c(t){e[17](t,e[31])}let u={inputId:"input-skill-"+e[31],placeholder:"スキル"+(e[31]+1)};function f(t){e[18](t,e[31])}void 0!==e[1].skills[e[31]]&&(u.value=e[1].skills[e[31]]),n=new ii({props:u}),se.push((()=>Ae(n,"value",c)));let p={inputId:"input-skill-level-"+e[31]};return void 0!==e[1].skillLevels[e[31]]&&(p.value=e[1].skillLevels[e[31]]),s=new ai({props:p}),se.push((()=>Ae(s,"value",f))),{c(){t=T("div"),Ie(n.$$.fragment),i=N(),Ie(s.$$.fragment),a=N()},m(e,r){I(e,t,r),Ce(n,t,null),A(t,i),Ce(s,t,null),A(t,a),l=!0},p(t,i){e=t;const a={};!r&&2&i[0]&&(r=!0,a.value=e[1].skills[e[31]],fe((()=>r=!1))),n.$set(a);const l={};!o&&2&i[0]&&(o=!0,l.value=e[1].skillLevels[e[31]],fe((()=>o=!1))),s.$set(l)},i(e){l||(qe(n.$$.fragment,e),qe(s.$$.fragment,e),l=!0)},o(e){ke(n.$$.fragment,e),ke(s.$$.fragment,e),l=!1},d(e){e&&C(t),Oe(n),Oe(s)}}}function bc(e){let t,n;return t=new ml({props:{page:e[28],rowsPerPage:Jr,colsPerPage:Gr,currentCharm:e[1],charmScanner:e[6]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.currentCharm=e[1]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function wc(e){let t,n;return t=new pc({props:{charms:e[5]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};32&n[0]&&(r.charms=e[5]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function qc(e){let t;return{c(){t=T("div"),t.textContent="not found",H(t,"text-align","center")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function kc(e){return{c:r,m:r,p:r,i:r,o:r,d:r}}function xc(e){let t;return{c(){t=T("div"),R(t,"class","spinner-border text-info"),R(t,"role","status")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function Ec(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$,S,P,j,L,D,M,B,z,H,U,W,V,Q,K,G,J,Y,X={imageProcessor:e[7]};function Z(t){e[10](t)}s=new $r({props:X}),e[9](s);let ee={label:"スキャン"};function te(t){e[11](t)}void 0!==e[3]&&(ee.isRecording=e[3]),c=new yl({props:ee}),se.push((()=>Ae(c,"isRecording",Z)));let ne={min:.1,max:.4,step:.01,float:!0,pips:!0,pipstep:5,all:"label",hoverable:!1};function re(t){e[13](t)}function ie(t){e[14](t)}function oe(t){e[15](t)}void 0!==e[0]&&(ne.values=e[0]),p=new vr({props:ne}),se.push((()=>Ae(p,"values",te))),m=new Gt({props:{$$slots:{default:[yc]},$$scope:{ctx:e}}}),m.$on("click",e[12]);let ae={inputIdPrefix:"input-position-"};function le(t){e[16](t)}void 0!==e[1].page&&(ae.page=e[1].page),void 0!==e[1].row&&(ae.row=e[1].row),void 0!==e[1].col&&(ae.col=e[1].col),b=new Qr({props:ae}),se.push((()=>Ae(b,"page",re))),se.push((()=>Ae(b,"row",ie))),se.push((()=>Ae(b,"col",oe)));let ce={inputId:"input-rarity"};void 0!==e[1].rarity&&(ce.value=e[1].rarity),S=new Zr({props:ce}),se.push((()=>Ae(S,"value",le)));let ue=[...Array(2).keys()],pe=[];for(let t=0;t<ue.length;t+=1)pe[t]=vc(gc(e,ue,t));const de=e=>ke(pe[e],1,1,(()=>{pe[e]=null}));function he(t){e[19](t)}let me={inputIdPrefix:"input-slot-level-",placeholder:"スロット"};void 0!==e[1].slots&&(me.values=e[1].slots),H=new pi({props:me}),se.push((()=>Ae(H,"values",he)));let _e=[...Array(100).keys()].slice(1),ge=[];for(let t=0;t<_e.length;t+=1)ge[t]=bc(_c(e,_e,t));const ye=e=>ke(ge[e],1,1,(()=>{ge[e]=null})),ve=[xc,kc,qc,wc],xe=[];function Ee(e,t){return e[4]?0:null==e[5]?1:0===e[5].length?2:3}return G=Ee(e),J=xe[G]=ve[G](e),{c(){t=T("div"),n=T("div"),r=T("div"),i=T("div"),Ie(s.$$.fragment),o=N(),a=T("div"),l=T("div"),Ie(c.$$.fragment),f=N(),Ie(p.$$.fragment),h=N(),Ie(m.$$.fragment),_=N(),g=T("div"),y=T("div"),v=F("位置:\n              "),Ie(b.$$.fragment),x=N(),E=T("div"),$=F("レア度:\n              "),Ie(S.$$.fragment),j=N(),L=T("div"),D=F("スキル:\n              ");for(let e=0;e<pe.length;e+=1)pe[e].c();M=N(),B=T("div"),z=F("スロット:\n              "),Ie(H.$$.fragment),W=N(),V=T("div");for(let e=0;e<ge.length;e+=1)ge[e].c();Q=N(),K=T("div"),J.c(),R(l,"id","scan-settings"),R(l,"class","svelte-5qt75h"),R(y,"id","charm-spec-position"),R(y,"class","svelte-5qt75h"),R(E,"id","charm-spec-rarity"),R(E,"class","svelte-5qt75h"),R(L,"id","charm-spec-skills"),R(L,"class","svelte-5qt75h"),R(B,"id","charm-spec-slots"),R(B,"class","svelte-5qt75h"),R(g,"id","charm-spec"),R(g,"class","svelte-5qt75h"),R(a,"id","scan-status"),R(a,"class","svelte-5qt75h"),R(i,"id","main"),R(i,"class","svelte-5qt75h"),R(V,"class","charm-box-overview svelte-5qt75h"),R(r,"id","status"),R(r,"class","svelte-5qt75h"),R(n,"id","scanner"),R(n,"class","svelte-5qt75h"),R(K,"id","result"),R(K,"class","svelte-5qt75h"),R(t,"class","tab-content svelte-5qt75h")},m(e,u){I(e,t,u),A(t,n),A(n,r),A(r,i),Ce(s,i,null),A(i,o),A(i,a),A(a,l),Ce(c,l,null),A(l,f),Ce(p,l,null),A(l,h),Ce(m,l,null),A(a,_),A(a,g),A(g,y),A(y,v),Ce(b,y,null),A(g,x),A(g,E),A(E,$),Ce(S,E,null),A(g,j),A(g,L),A(L,D);for(let e=0;e<pe.length;e+=1)pe[e].m(L,null);A(g,M),A(g,B),A(B,z),Ce(H,B,null),A(r,W),A(r,V);for(let e=0;e<ge.length;e+=1)ge[e].m(V,null);A(t,Q),A(t,K),xe[G].m(K,null),Y=!0},p(e,t){s.$set({});const n={};!u&&8&t[0]&&(u=!0,n.isRecording=e[3],fe((()=>u=!1))),c.$set(n);const r={};!d&&1&t[0]&&(d=!0,r.values=e[0],fe((()=>d=!1))),p.$set(r);const i={};8&t[1]&&(i.$$scope={dirty:t,ctx:e}),m.$set(i);const o={};!w&&2&t[0]&&(w=!0,o.page=e[1].page,fe((()=>w=!1))),!q&&2&t[0]&&(q=!0,o.row=e[1].row,fe((()=>q=!1))),!k&&2&t[0]&&(k=!0,o.col=e[1].col,fe((()=>k=!1))),b.$set(o);const a={};if(!P&&2&t[0]&&(P=!0,a.value=e[1].rarity,fe((()=>P=!1))),S.$set(a),2&t[0]){let n;for(ue=[...Array(2).keys()],n=0;n<ue.length;n+=1){const r=gc(e,ue,n);pe[n]?(pe[n].p(r,t),qe(pe[n],1)):(pe[n]=vc(r),pe[n].c(),qe(pe[n],1),pe[n].m(L,null))}for(be(),n=ue.length;n<pe.length;n+=1)de(n);we()}const l={};if(!U&&2&t[0]&&(U=!0,l.values=e[1].slots,fe((()=>U=!1))),H.$set(l),66&t[0]){let n;for(_e=[...Array(100).keys()].slice(1),n=0;n<_e.length;n+=1){const r=_c(e,_e,n);ge[n]?(ge[n].p(r,t),qe(ge[n],1)):(ge[n]=bc(r),ge[n].c(),qe(ge[n],1),ge[n].m(V,null))}for(be(),n=_e.length;n<ge.length;n+=1)ye(n);we()}let f=G;G=Ee(e),G===f?xe[G].p(e,t):(be(),ke(xe[f],1,1,(()=>{xe[f]=null})),we(),J=xe[G],J?J.p(e,t):(J=xe[G]=ve[G](e),J.c()),qe(J,1),J.m(K,null))},i(e){if(!Y){qe(s.$$.fragment,e),qe(c.$$.fragment,e),qe(p.$$.fragment,e),qe(m.$$.fragment,e),qe(b.$$.fragment,e),qe(S.$$.fragment,e);for(let e=0;e<ue.length;e+=1)qe(pe[e]);qe(H.$$.fragment,e);for(let e=0;e<_e.length;e+=1)qe(ge[e]);qe(J),Y=!0}},o(e){ke(s.$$.fragment,e),ke(c.$$.fragment,e),ke(p.$$.fragment,e),ke(m.$$.fragment,e),ke(b.$$.fragment,e),ke(S.$$.fragment,e),pe=pe.filter(Boolean);for(let e=0;e<pe.length;e+=1)ke(pe[e]);ke(H.$$.fragment,e),ge=ge.filter(Boolean);for(let e=0;e<ge.length;e+=1)ke(ge[e]);ke(J),Y=!1},d(n){n&&C(t),e[9](null),Oe(s),Oe(c),Oe(p),Oe(m),Oe(b),Oe(S),O(pe,n),Oe(H),O(ge,n),xe[G].d()}}}function $c(e,t,n){let r,i;d(e,On,(e=>n(22,r=e))),d(e,mc,(e=>n(23,i=e)));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let o,a,l=new ll({scanMode:il,scanSkipMode:al}),c=!1,u=!0,f=[.29],p={skills:[],skillLevels:[],slots:[]};!function(){s(this,void 0,void 0,(function*(){for(;!i;)yield new Promise((e=>setTimeout(e,1e3)));yield o.init()}))}();let h=!1,m=null;function _(){n(1,p={skills:[],skillLevels:[],slots:[]}),l.reset()}return e.$$.update=()=>{1&e.$$.dirty[0]&&(a=f[0]),2&e.$$.dirty[0]&&function(e){s(this,void 0,void 0,(function*(){if(0===Object.keys(e.skills).length)return;if(h)return;n(4,h=!0);const{skills:t,skillLevels:i,slots:s}=e;if(0==t.filter((e=>e&&"無し"!==e)).length&&0==s.filter((e=>0!==e)).length)return n(5,m=null),void n(4,h=!1);const o={skills:t.map((e=>null!=e?e:"無し")),skillLevels:i.map((e=>null!=e?e:0)),slots:s.map((e=>null!=e?e:0))},a=JSON.stringify(o);for(;"function"!=typeof Module.getSubstitutes;)yield Xa(100);const l=Module.getSubstitutes(JSON.stringify(r.charms.map((e=>{const{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}=e;return{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}}))),a),c=JSON.parse(l);n(5,m=c.map((e=>r.charms.find((t=>t.rowid===e)))).filter((e=>!dc(hc(e),o)))),n(4,h=!1)}))}(p)},[f,p,o,c,h,m,l,e=>s(void 0,void 0,void 0,(function*(){if(!c)return;u&&(u=!1,l.adjustPosition(e));const t=l.scan(e,Mn().format(),a);if(null==t)return;const{charm:r,isCache:i}=t;dc(p,r)||n(1,p=r)})),_,function(e){se[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(e){c=e,n(3,c)},function(e){f=e,n(0,f)},()=>{_()},function(t){e.$$.not_equal(p.page,t)&&(p.page=t,n(1,p))},function(t){e.$$.not_equal(p.row,t)&&(p.row=t,n(1,p))},function(t){e.$$.not_equal(p.col,t)&&(p.col=t,n(1,p))},function(t){e.$$.not_equal(p.rarity,t)&&(p.rarity=t,n(1,p))},function(t,r){e.$$.not_equal(p.skills[r],t)&&(p.skills[r]=t,n(1,p))},function(t,r){e.$$.not_equal(p.skillLevels[r],t)&&(p.skillLevels[r]=t,n(1,p))},function(t){e.$$.not_equal(p.slots,t)&&(p.slots=t,n(1,p))}]}function Sc(e,t,n){const r=e.slice();return r[28]=t[n],r}function Ac(e,t,n){const r=e.slice();return r[31]=t[n],r[32]=t,r[33]=n,r}function Ic(e){let t;return{c(){t=F("Reset Minimap")},m(e,n){I(e,t,n)},d(e){e&&C(t)}}}function Cc(e){let t,n,r,i,s,o,a,l;function c(t){e[17](t,e[31])}let u={inputId:"input-skill-"+e[31],placeholder:"スキル"+(e[31]+1)};function f(t){e[18](t,e[31])}void 0!==e[1].skills[e[31]]&&(u.value=e[1].skills[e[31]]),n=new ii({props:u}),se.push((()=>Ae(n,"value",c)));let p={inputId:"input-skill-level-"+e[31]};return void 0!==e[1].skillLevels[e[31]]&&(p.value=e[1].skillLevels[e[31]]),s=new ai({props:p}),se.push((()=>Ae(s,"value",f))),{c(){t=T("div"),Ie(n.$$.fragment),i=N(),Ie(s.$$.fragment),a=N()},m(e,r){I(e,t,r),Ce(n,t,null),A(t,i),Ce(s,t,null),A(t,a),l=!0},p(t,i){e=t;const a={};!r&&2&i[0]&&(r=!0,a.value=e[1].skills[e[31]],fe((()=>r=!1))),n.$set(a);const l={};!o&&2&i[0]&&(o=!0,l.value=e[1].skillLevels[e[31]],fe((()=>o=!1))),s.$set(l)},i(e){l||(qe(n.$$.fragment,e),qe(s.$$.fragment,e),l=!0)},o(e){ke(n.$$.fragment,e),ke(s.$$.fragment,e),l=!1},d(e){e&&C(t),Oe(n),Oe(s)}}}function Oc(e){let t,n;return t=new ml({props:{page:e[28],rowsPerPage:4,colsPerPage:8,currentCharm:e[1],charmScanner:e[6]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.currentCharm=e[1]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function Tc(e){let t,n;return t=new pc({props:{charms:e[5]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};32&n[0]&&(r.charms=e[5]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function Pc(e){let t;return{c(){t=T("div"),t.textContent="not found",H(t,"text-align","center")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function Fc(e){return{c:r,m:r,p:r,i:r,o:r,d:r}}function Nc(e){let t;return{c(){t=T("div"),R(t,"class","spinner-border text-info"),R(t,"role","status")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function jc(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$,S,P,j,L,D,M,B,z,H,U,W,V,Q,K,G,J,Y,X={imageProcessor:e[7]};function Z(t){e[10](t)}s=new $r({props:X}),e[9](s);let ee={label:"スキャン"};function te(t){e[11](t)}void 0!==e[3]&&(ee.isRecording=e[3]),c=new yl({props:ee}),se.push((()=>Ae(c,"isRecording",Z)));let ne={min:.1,max:.4,step:.01,float:!0,pips:!0,pipstep:5,all:"label",hoverable:!1};function re(t){e[13](t)}function ie(t){e[14](t)}function oe(t){e[15](t)}void 0!==e[0]&&(ne.values=e[0]),p=new vr({props:ne}),se.push((()=>Ae(p,"values",te))),m=new Gt({props:{$$slots:{default:[Ic]},$$scope:{ctx:e}}}),m.$on("click",e[12]);let ae={inputIdPrefix:"input-position-"};function le(t){e[16](t)}void 0!==e[1].page&&(ae.page=e[1].page),void 0!==e[1].row&&(ae.row=e[1].row),void 0!==e[1].col&&(ae.col=e[1].col),b=new Qr({props:ae}),se.push((()=>Ae(b,"page",re))),se.push((()=>Ae(b,"row",ie))),se.push((()=>Ae(b,"col",oe)));let ce={inputId:"input-rarity"};void 0!==e[1].rarity&&(ce.value=e[1].rarity),S=new Zr({props:ce}),se.push((()=>Ae(S,"value",le)));let ue=[...Array(2).keys()],pe=[];for(let t=0;t<ue.length;t+=1)pe[t]=Cc(Ac(e,ue,t));const de=e=>ke(pe[e],1,1,(()=>{pe[e]=null}));function he(t){e[19](t)}let me={inputIdPrefix:"input-slot-level-",placeholder:"スロット"};void 0!==e[1].slots&&(me.values=e[1].slots),H=new pi({props:me}),se.push((()=>Ae(H,"values",he)));let _e=[...Array(100).keys()].slice(1),ge=[];for(let t=0;t<_e.length;t+=1)ge[t]=Oc(Sc(e,_e,t));const ye=e=>ke(ge[e],1,1,(()=>{ge[e]=null})),ve=[Nc,Fc,Pc,Tc],xe=[];function Ee(e,t){return e[4]?0:null==e[5]?1:0===e[5].length?2:3}return G=Ee(e),J=xe[G]=ve[G](e),{c(){t=T("div"),n=T("div"),r=T("div"),i=T("div"),Ie(s.$$.fragment),o=N(),a=T("div"),l=T("div"),Ie(c.$$.fragment),f=N(),Ie(p.$$.fragment),h=N(),Ie(m.$$.fragment),_=N(),g=T("div"),y=T("div"),v=F("位置:\n              "),Ie(b.$$.fragment),x=N(),E=T("div"),$=F("レア度:\n              "),Ie(S.$$.fragment),j=N(),L=T("div"),D=F("スキル:\n              ");for(let e=0;e<pe.length;e+=1)pe[e].c();M=N(),B=T("div"),z=F("スロット:\n              "),Ie(H.$$.fragment),W=N(),V=T("div");for(let e=0;e<ge.length;e+=1)ge[e].c();Q=N(),K=T("div"),J.c(),R(l,"id","scan-settings"),R(l,"class","svelte-5qt75h"),R(y,"id","charm-spec-position"),R(y,"class","svelte-5qt75h"),R(E,"id","charm-spec-rarity"),R(E,"class","svelte-5qt75h"),R(L,"id","charm-spec-skills"),R(L,"class","svelte-5qt75h"),R(B,"id","charm-spec-slots"),R(B,"class","svelte-5qt75h"),R(g,"id","charm-spec"),R(g,"class","svelte-5qt75h"),R(a,"id","scan-status"),R(a,"class","svelte-5qt75h"),R(i,"id","main"),R(i,"class","svelte-5qt75h"),R(V,"class","charm-box-overview svelte-5qt75h"),R(r,"id","status"),R(r,"class","svelte-5qt75h"),R(n,"id","scanner"),R(n,"class","svelte-5qt75h"),R(K,"id","result"),R(K,"class","svelte-5qt75h"),R(t,"class","tab-content svelte-5qt75h")},m(e,u){I(e,t,u),A(t,n),A(n,r),A(r,i),Ce(s,i,null),A(i,o),A(i,a),A(a,l),Ce(c,l,null),A(l,f),Ce(p,l,null),A(l,h),Ce(m,l,null),A(a,_),A(a,g),A(g,y),A(y,v),Ce(b,y,null),A(g,x),A(g,E),A(E,$),Ce(S,E,null),A(g,j),A(g,L),A(L,D);for(let e=0;e<pe.length;e+=1)pe[e].m(L,null);A(g,M),A(g,B),A(B,z),Ce(H,B,null),A(r,W),A(r,V);for(let e=0;e<ge.length;e+=1)ge[e].m(V,null);A(t,Q),A(t,K),xe[G].m(K,null),Y=!0},p(e,t){s.$set({});const n={};!u&&8&t[0]&&(u=!0,n.isRecording=e[3],fe((()=>u=!1))),c.$set(n);const r={};!d&&1&t[0]&&(d=!0,r.values=e[0],fe((()=>d=!1))),p.$set(r);const i={};8&t[1]&&(i.$$scope={dirty:t,ctx:e}),m.$set(i);const o={};!w&&2&t[0]&&(w=!0,o.page=e[1].page,fe((()=>w=!1))),!q&&2&t[0]&&(q=!0,o.row=e[1].row,fe((()=>q=!1))),!k&&2&t[0]&&(k=!0,o.col=e[1].col,fe((()=>k=!1))),b.$set(o);const a={};if(!P&&2&t[0]&&(P=!0,a.value=e[1].rarity,fe((()=>P=!1))),S.$set(a),2&t[0]){let n;for(ue=[...Array(2).keys()],n=0;n<ue.length;n+=1){const r=Ac(e,ue,n);pe[n]?(pe[n].p(r,t),qe(pe[n],1)):(pe[n]=Cc(r),pe[n].c(),qe(pe[n],1),pe[n].m(L,null))}for(be(),n=ue.length;n<pe.length;n+=1)de(n);we()}const l={};if(!U&&2&t[0]&&(U=!0,l.values=e[1].slots,fe((()=>U=!1))),H.$set(l),66&t[0]){let n;for(_e=[...Array(100).keys()].slice(1),n=0;n<_e.length;n+=1){const r=Sc(e,_e,n);ge[n]?(ge[n].p(r,t),qe(ge[n],1)):(ge[n]=Oc(r),ge[n].c(),qe(ge[n],1),ge[n].m(V,null))}for(be(),n=_e.length;n<ge.length;n+=1)ye(n);we()}let f=G;G=Ee(e),G===f?xe[G].p(e,t):(be(),ke(xe[f],1,1,(()=>{xe[f]=null})),we(),J=xe[G],J?J.p(e,t):(J=xe[G]=ve[G](e),J.c()),qe(J,1),J.m(K,null))},i(e){if(!Y){qe(s.$$.fragment,e),qe(c.$$.fragment,e),qe(p.$$.fragment,e),qe(m.$$.fragment,e),qe(b.$$.fragment,e),qe(S.$$.fragment,e);for(let e=0;e<ue.length;e+=1)qe(pe[e]);qe(H.$$.fragment,e);for(let e=0;e<_e.length;e+=1)qe(ge[e]);qe(J),Y=!0}},o(e){ke(s.$$.fragment,e),ke(c.$$.fragment,e),ke(p.$$.fragment,e),ke(m.$$.fragment,e),ke(b.$$.fragment,e),ke(S.$$.fragment,e),pe=pe.filter(Boolean);for(let e=0;e<pe.length;e+=1)ke(pe[e]);ke(H.$$.fragment,e),ge=ge.filter(Boolean);for(let e=0;e<ge.length;e+=1)ke(ge[e]);ke(J),Y=!1},d(n){n&&C(t),e[9](null),Oe(s),Oe(c),Oe(p),Oe(m),Oe(b),Oe(S),O(pe,n),Oe(H),O(ge,n),xe[G].d()}}}function Lc(e,t,n){let r,i;d(e,On,(e=>n(22,r=e))),d(e,mc,(e=>n(23,i=e)));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let o,a,l=new ll({scanMode:sl,scanSkipMode:al}),c=!1,u=!0,f=[.29],p={skills:[],skillLevels:[],slots:[]};!function(){s(this,void 0,void 0,(function*(){for(;!i;)yield new Promise((e=>setTimeout(e,1e3)));yield o.init()}))}();let h=!1,m=null;function _(){n(1,p={skills:[],skillLevels:[],slots:[]}),l.reset()}return e.$$.update=()=>{1&e.$$.dirty[0]&&(a=f[0]),2&e.$$.dirty[0]&&function(e){s(this,void 0,void 0,(function*(){if(0===Object.keys(e.skills).length)return;if(h)return;n(4,h=!0);const{skills:t,skillLevels:i,slots:s}=e;if(!t.length&&!s.length)return n(5,m=null),void n(4,h=!1);const o={skills:t.map((e=>null!=e?e:"無し")),skillLevels:i.map((e=>null!=e?e:0)),slots:s.map((e=>null!=e?e:0))},a=JSON.stringify(o);for(;"function"!=typeof Module.getSubstitutes;)yield Xa(100);const l=Module.getSubstitutes(JSON.stringify(r.charms.map((e=>{const{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}=e;return{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}}))),a),c=JSON.parse(l);n(5,m=c.map((e=>r.charms.find((t=>t.rowid===e)))).filter((e=>!dc(hc(e),o)))),n(4,h=!1)}))}(p)},[f,p,o,c,h,m,l,e=>s(void 0,void 0,void 0,(function*(){if(!c)return;u&&(u=!1,l.adjustPosition(e));const t=l.scan(e,Mn().format(),a);if(null==t)return;const{charm:r,isCache:i}=t;dc(p,r)||n(1,p=r)})),_,function(e){se[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(e){c=e,n(3,c)},function(e){f=e,n(0,f)},()=>{_()},function(t){e.$$.not_equal(p.page,t)&&(p.page=t,n(1,p))},function(t){e.$$.not_equal(p.row,t)&&(p.row=t,n(1,p))},function(t){e.$$.not_equal(p.col,t)&&(p.col=t,n(1,p))},function(t){e.$$.not_equal(p.rarity,t)&&(p.rarity=t,n(1,p))},function(t,r){e.$$.not_equal(p.skills[r],t)&&(p.skills[r]=t,n(1,p))},function(t,r){e.$$.not_equal(p.skillLevels[r],t)&&(p.skillLevels[r]=t,n(1,p))},function(t){e.$$.not_equal(p.slots,t)&&(p.slots=t,n(1,p))}]}function Dc(e,t,n){const r=e.slice();return r[23]=t[n],r}function Rc(e,t,n){const r=e.slice();return r[23]=t[n],r[26]=t,r[27]=n,r}function Mc(e,t,n){const r=e.slice();return r[23]=t[n],r[28]=t,r[29]=n,r}function Bc(e){let t,n,r,i,s,o,a,l;function c(t){e[13](t,e[23])}let u={items:ei,inputId:"input-skill-"+e[23],labelFieldName:"name",valueFieldName:"name",keywordsFunction:Xc,placeholder:"スキル"+(e[23]+1),showClear:!0,hideArrow:!0,className:"autocomplete-skill"};function f(t){e[14](t,e[23])}void 0!==e[0][e[23]]&&(u.selectedItem=e[0][e[23]]),n=new Ur({props:u}),se.push((()=>Ae(n,"selectedItem",c)));let p={items:e[11],inputId:"input-skill-level-"+e[23],placeholder:"Lv",hideArrow:!0,className:"autocomplete-skill-level"};return void 0!==e[1][e[23]]&&(p.selectedItem=e[1][e[23]]),s=new Ur({props:p}),se.push((()=>Ae(s,"selectedItem",f))),{c(){t=T("div"),Ie(n.$$.fragment),i=N(),Ie(s.$$.fragment),a=N()},m(e,r){I(e,t,r),Ce(n,t,null),A(t,i),Ce(s,t,null),A(t,a),l=!0},p(t,i){e=t;const a={};1&i&&(a.inputId="input-skill-"+e[23]),1&i&&(a.placeholder="スキル"+(e[23]+1)),!r&&1&i&&(r=!0,a.selectedItem=e[0][e[23]],fe((()=>r=!1))),n.$set(a);const l={};1&i&&(l.inputId="input-skill-level-"+e[23]),!o&&3&i&&(o=!0,l.selectedItem=e[1][e[23]],fe((()=>o=!1))),s.$set(l)},i(e){l||(qe(n.$$.fragment,e),qe(s.$$.fragment,e),l=!0)},o(e){ke(n.$$.fragment,e),ke(s.$$.fragment,e),l=!1},d(e){e&&C(t),Oe(n),Oe(s)}}}function zc(e){let t,n,r,i;function s(t){e[15](t,e[23])}let o={items:[...Array(3).keys()].map(Zc),placeholder:"スロット"+(e[23]+1),inputId:"input-slot-"+e[23],showClear:!0,hideArrow:!0,className:"autocomplete-slot-level"};return void 0!==e[2][e[23]]&&(o.selectedItem=e[2][e[23]]),t=new Ur({props:o}),se.push((()=>Ae(t,"selectedItem",s))),{c(){Ie(t.$$.fragment),r=F(" ")},m(e,n){Ce(t,e,n),I(e,r,n),i=!0},p(r,i){e=r;const s={};!n&&4&i&&(n=!0,s.selectedItem=e[2][e[23]],fe((()=>n=!1))),t.$set(s)},i(e){i||(qe(t.$$.fragment,e),i=!0)},o(e){ke(t.$$.fragment,e),i=!1},d(e){Oe(t,e),e&&C(r)}}}function Hc(e){let t,n,r,i,s,o,a,l,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$;function S(t){e[17](t)}function P(t){e[18](t)}function j(t){e[19](t)}let D={disableFilterHeader:!0,headerColor:"dodgerblue"};void 0!==e[8]&&(D.charms=e[8]),void 0!==e[9]&&(D.sliceBegin=e[9]),void 0!==e[10]&&(D.sliceEnd=e[10]),l=new ac({props:D}),se.push((()=>Ae(l,"charms",S))),se.push((()=>Ae(l,"sliceBegin",P))),se.push((()=>Ae(l,"sliceEnd",j)));let M=[...Array(e[6]).keys()],B=[];for(let t=0;t<M.length;t+=1)B[t]=Qc(Dc(e,M,t));return{c(){t=F("show\n        "),n=T("select"),r=T("option"),r.textContent="10",i=T("option"),i.textContent="25",s=T("option"),s.textContent="50",o=T("option"),o.textContent="100",a=F("\n        charms\n        "),Ie(l.$$.fragment),d=N(),h=T("div"),m=T("ul"),_=T("li"),g=T("span"),g.innerHTML='<span aria-hidden="true">«</span>',v=N();for(let e=0;e<B.length;e+=1)B[e].c();b=N(),w=T("li"),q=T("span"),q.innerHTML='<span aria-hidden="true">»</span>',r.__value="10",r.value=r.__value,i.__value="25",i.value=i.__value,s.__value="50",s.value=s.__value,o.__value="100",o.value=o.__value,void 0===e[5]&&ue((()=>e[16].call(n))),R(g,"class","page-link"),R(_,"class",y="page-item "+(0===e[4]?"disabled":"")),R(_,"aria-label","Previous"),R(q,"class","page-link"),R(w,"class",k="page-item "+(e[4]===e[6]-1?"disabled":"")),R(w,"aria-label","Next"),R(m,"class","pagination svelte-5c44pb"),R(h,"id","charm-search-result-pager"),R(h,"class","svelte-5c44pb")},m(c,u){I(c,t,u),I(c,n,u),A(n,r),A(n,i),A(n,s),A(n,o),U(n,e[5]),I(c,a,u),Ce(l,c,u),I(c,d,u),I(c,h,u),A(h,m),A(m,_),A(_,g),A(m,v);for(let e=0;e<B.length;e+=1)B[e].m(m,null);A(m,b),A(m,w),A(w,q),x=!0,E||($=[L(n,"change",e[16]),L(g,"click",e[20]),L(q,"click",e[22])],E=!0)},p(e,t){32&t&&U(n,e[5]);const r={};if(!u&&256&t&&(u=!0,r.charms=e[8],fe((()=>u=!1))),!f&&512&t&&(f=!0,r.sliceBegin=e[9],fe((()=>f=!1))),!p&&1024&t&&(p=!0,r.sliceEnd=e[10],fe((()=>p=!1))),l.$set(r),(!x||16&t&&y!==(y="page-item "+(0===e[4]?"disabled":"")))&&R(_,"class",y),80&t){let n;for(M=[...Array(e[6]).keys()],n=0;n<M.length;n+=1){const r=Dc(e,M,n);B[n]?B[n].p(r,t):(B[n]=Qc(r),B[n].c(),B[n].m(m,b))}for(;n<B.length;n+=1)B[n].d(1);B.length=M.length}(!x||80&t&&k!==(k="page-item "+(e[4]===e[6]-1?"disabled":"")))&&R(w,"class",k)},i(e){x||(qe(l.$$.fragment,e),x=!0)},o(e){ke(l.$$.fragment,e),x=!1},d(e){e&&C(t),e&&C(n),e&&C(a),Oe(l,e),e&&C(d),e&&C(h),O(B,e),E=!1,c($)}}}function Uc(e){let t;return{c(){t=T("div"),t.textContent="not found",H(t,"text-align","center")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function Wc(e){return{c:r,m:r,p:r,i:r,o:r,d:r}}function Vc(e){let t;return{c(){t=T("div"),R(t,"class","spinner-border text-info"),R(t,"role","status")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function Qc(e){let t,n,r,i,s,o,a=e[23]+1+"";function l(){return e[21](e[23])}return{c(){t=T("li"),n=T("span"),r=F(a),R(n,"class","page-link"),R(t,"class",i="page-item "+(e[23]===e[4]?"active":""))},m(e,i){I(e,t,i),A(t,n),A(n,r),s||(o=L(n,"click",l),s=!0)},p(n,s){e=n,64&s&&a!==(a=e[23]+1+"")&&B(r,a),80&s&&i!==(i="page-item "+(e[23]===e[4]?"active":""))&&R(t,"class",i)},d(e){e&&C(t),s=!1,o()}}}function Kc(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_,g,y,v,b=[...Array(e[0].filter(Yc).length+1).keys()],w=[];for(let t=0;t<b.length;t+=1)w[t]=Bc(Mc(e,b,t));const q=e=>ke(w[e],1,1,(()=>{w[e]=null}));let k=[...Array(Gc).keys()],x=[];for(let t=0;t<k.length;t+=1)x[t]=zc(Rc(e,k,t));const E=e=>ke(x[e],1,1,(()=>{x[e]=null})),$=[Vc,Wc,Uc,Hc],S=[];function P(e,t){return e[7]?0:null==e[3]?1:0===e[3].length?2:3}return m=P(e),_=S[m]=$[m](e),{c(){t=T("div"),n=T("div"),r=T("div"),i=T("div"),s=F("スキル:\n        ");for(let e=0;e<w.length;e+=1)w[e].c();o=N(),a=T("div"),l=F("スロット:"),c=T("br"),u=N();for(let e=0;e<x.length;e+=1)x[e].c();f=N(),p=T("hr"),d=N(),h=T("div"),_.c(),R(i,"id","skills"),R(i,"class","svelte-5c44pb"),R(a,"id","slots"),R(a,"class","svelte-5c44pb"),R(r,"id","charm-search-form"),R(r,"class","svelte-5c44pb"),R(p,"class","svelte-5c44pb"),R(h,"id","charm-search-result"),R(h,"class","svelte-5c44pb"),R(n,"id","charm-searcher"),R(n,"class","svelte-5c44pb"),R(t,"class","tab-content svelte-5c44pb")},m(e,_){I(e,t,_),A(t,n),A(n,r),A(r,i),A(i,s);for(let e=0;e<w.length;e+=1)w[e].m(i,null);A(r,o),A(r,a),A(a,l),A(a,c),A(a,u);for(let e=0;e<x.length;e+=1)x[e].m(a,null);A(n,f),A(n,p),A(n,d),A(n,h),S[m].m(h,null),g=!0,y||(v=L(window,"keydown",Jc),y=!0)},p(e,[t]){if(2051&t){let n;for(b=[...Array(e[0].filter(Yc).length+1).keys()],n=0;n<b.length;n+=1){const r=Mc(e,b,n);w[n]?(w[n].p(r,t),qe(w[n],1)):(w[n]=Bc(r),w[n].c(),qe(w[n],1),w[n].m(i,null))}for(be(),n=b.length;n<w.length;n+=1)q(n);we()}if(4&t){let n;for(k=[...Array(Gc).keys()],n=0;n<k.length;n+=1){const r=Rc(e,k,n);x[n]?(x[n].p(r,t),qe(x[n],1)):(x[n]=zc(r),x[n].c(),qe(x[n],1),x[n].m(a,null))}for(be(),n=k.length;n<x.length;n+=1)E(n);we()}let n=m;m=P(e),m===n?S[m].p(e,t):(be(),ke(S[n],1,1,(()=>{S[n]=null})),we(),_=S[m],_?_.p(e,t):(_=S[m]=$[m](e),_.c()),qe(_,1),_.m(h,null))},i(e){if(!g){for(let e=0;e<b.length;e+=1)qe(w[e]);for(let e=0;e<k.length;e+=1)qe(x[e]);qe(_),g=!0}},o(e){w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)ke(w[e]);x=x.filter(Boolean);for(let e=0;e<x.length;e+=1)ke(x[e]);ke(_),g=!1},d(e){e&&C(t),O(w,e),O(x,e),S[m].d(),y=!1,v()}}}const Gc=3;function Jc(e){if("Escape"===e.key)return void document.body.click();if(!(e.ctrlKey&&e.metaKey||e.ctrlKey&&e.altKey))return;let t="";if("k"===e.key)t="input-skill-";else if("l"===e.key)t="input-skill-level-";else{if("t"!==e.key)return;t="input-slot-"}const n=document.activeElement.id;if(n.startsWith(t)){const e=parseInt(n.replace(t,"")),r=document.getElementById(`${t}${e+1}`)||document.getElementById(`${t}0`);document.body.click(),r.focus()}else{const e=document.getElementById(`${t}0`);document.body.click(),e.focus()}}const Yc=e=>e,Xc=e=>`${e.name} ${e.hiragana} ${e.englishCharacters}`,Zc=e=>e+1;function eu(e,t,n){let r,i,s,o,a;d(e,On,(e=>n(12,a=e)));const l=[...Array(7).keys()].map((e=>e+1));let c=[],u=[],f=[],p=!1,h=null,m=0,_=10;return e.$$.update=()=>{if(3&e.$$.dirty)for(let e=0;e<c.length;e++)c[e]&&null==u[e]&&n(1,u[e]=1,u),null==c[e]&&(c.splice(e,1),u.splice(e,1));if(4103&e.$$.dirty){n(7,p=!0),n(2,f=f.filter((e=>e)));const e=JSON.stringify({skills:c.map((e=>e.name)),skillLevels:u,slots:f}),t=()=>{if(!c.length&&!u.length&&!f.length)return void n(3,h=null);if("function"!=typeof Module.getSubstitutesAll)return void setTimeout(t,100);const r=Module.getSubstitutes(JSON.stringify(a.charms.map((e=>{const{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}=e;return{rowid:t,skill1:n,skill1Level:r,skill2:i,skill2Level:s,slot1:o,slot2:a,slot3:l}}))),e),i=JSON.parse(r);n(3,h=i.map((e=>a.charms.find((t=>t.rowid===e)))))};t(),n(7,p=!1)}40&e.$$.dirty&&n(6,r=Math.ceil((h||[]).length/_)),72&e.$$.dirty&&h&&r&&n(4,m=0),8&e.$$.dirty&&n(8,i=h),48&e.$$.dirty&&n(9,s=_*m),48&e.$$.dirty&&n(10,o=_*(m+1)),4&e.$$.dirty&&n(2,f=f.sort(((e,t)=>t-e)))},[c,u,f,h,m,_,r,p,i,s,o,l,a,function(t,r){e.$$.not_equal(c[r],t)&&(c[r]=t,n(0,c))},function(t,r){e.$$.not_equal(u[r],t)&&(u[r]=t,n(1,u),n(0,c))},function(t,r){e.$$.not_equal(f[r],t)&&(f[r]=t,n(2,f),n(0,c),n(1,u),n(12,a))},function(){_=W(this),n(5,_)},function(e){i=e,n(8,i),n(3,h),n(2,f),n(0,c),n(1,u),n(12,a)},function(e){s=e,n(9,s),n(5,_),n(4,m),n(3,h),n(6,r),n(2,f),n(0,c),n(1,u),n(12,a)},function(e){o=e,n(10,o),n(5,_),n(4,m),n(3,h),n(6,r),n(2,f),n(0,c),n(1,u),n(12,a)},()=>n(4,m--,m),e=>n(4,m=e),()=>n(4,m++,m)]}function tu(e){let t,n,r;function i(t){e[1](t)}let s={};return void 0!==e[0]&&(s.charms=e[0]),t=new ac({props:s}),se.push((()=>Ae(t,"charms",i))),{c(){Ie(t.$$.fragment)},m(e,n){Ce(t,e,n),r=!0},p(e,r){const i={};!n&&1&r&&(n=!0,i.charms=e[0],fe((()=>n=!1))),t.$set(i)},i(e){r||(qe(t.$$.fragment,e),r=!0)},o(e){ke(t.$$.fragment,e),r=!1},d(e){Oe(t,e)}}}function nu(e){let t;return{c(){t=T("div"),R(t,"class","spinner-border text-info svelte-2qpa7f"),R(t,"role","status")},m(e,n){I(e,t,n)},p:r,i:r,o:r,d(e){e&&C(t)}}}function ru(e){let t,n,r,i,s;const o=[nu,tu],a=[];function l(e,t){return null==e[0]?0:1}return r=l(e),i=a[r]=o[r](e),{c(){t=T("div"),n=T("div"),i.c(),R(n,"id","charm-list"),R(n,"class","svelte-2qpa7f"),R(t,"class","tab-content svelte-2qpa7f")},m(e,i){I(e,t,i),A(t,n),a[r].m(n,null),s=!0},p(e,[t]){let s=r;r=l(e),r===s?a[r].p(e,t):(be(),ke(a[s],1,1,(()=>{a[s]=null})),we(),i=a[r],i?i.p(e,t):(i=a[r]=o[r](e),i.c()),qe(i,1),i.m(n,null))},i(e){s||(qe(i),s=!0)},o(e){ke(i),s=!1},d(e){e&&C(t),a[r].d()}}}function iu(e,t,n){let r,i;return d(e,On,(e=>n(2,r=e))),setInterval((()=>{i!==(null==r?void 0:r.charms)&&n(0,i=null==r?void 0:r.charms)}),1e3),[i,function(e){i=e,n(0,i)}]}function su(e,t,n){const r=e.slice();return r[18]=t[n],r}function ou(e,t,n){const r=e.slice();return r[21]=t[n],r[22]=t,r[23]=n,r}function au(e){let t,n,r,i,s,o,a,l;function c(t){e[11](t,e[21])}let u={inputId:"input-skill-"+e[21],placeholder:"スキル"+(e[21]+1)};function f(t){e[12](t,e[21])}void 0!==e[2].skills[e[21]]&&(u.value=e[2].skills[e[21]]),n=new ii({props:u}),se.push((()=>Ae(n,"value",c)));let p={inputId:"input-skill-level-"+e[21]};return void 0!==e[2].skillLevels[e[21]]&&(p.value=e[2].skillLevels[e[21]]),s=new ai({props:p}),se.push((()=>Ae(s,"value",f))),{c(){t=T("div"),Ie(n.$$.fragment),i=N(),Ie(s.$$.fragment),a=N()},m(e,r){I(e,t,r),Ce(n,t,null),A(t,i),Ce(s,t,null),A(t,a),l=!0},p(t,i){e=t;const a={};!r&&4&i&&(r=!0,a.value=e[2].skills[e[21]],fe((()=>r=!1))),n.$set(a);const l={};!o&&4&i&&(o=!0,l.value=e[2].skillLevels[e[21]],fe((()=>o=!1))),s.$set(l)},i(e){l||(qe(n.$$.fragment,e),qe(s.$$.fragment,e),l=!0)},o(e){ke(n.$$.fragment,e),ke(s.$$.fragment,e),l=!1},d(e){e&&C(t),Oe(n),Oe(s)}}}function lu(e){let t,n;return t=new ml({props:{page:e[18],currentCharm:e[2],charmScanner:e[3]}}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.currentCharm=e[2]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function cu(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_,g,y,v,b,w,q,k,x,E,$,S,P,j,L,D,M,B,z,H={imageProcessor:e[4]};function U(t){e[6](t)}a=new $r({props:H}),e[5](a);let W={label:"スキャン"};function V(t){e[7](t)}function Q(t){e[8](t)}function K(t){e[9](t)}void 0!==e[1]&&(W.isRecording=e[1]),u=new yl({props:W}),se.push((()=>Ae(u,"isRecording",U)));let G={inputIdPrefix:"input-position-"};function J(t){e[10](t)}void 0!==e[2].page&&(G.page=e[2].page),void 0!==e[2].row&&(G.row=e[2].row),void 0!==e[2].col&&(G.col=e[2].col),m=new Qr({props:G}),se.push((()=>Ae(m,"page",V))),se.push((()=>Ae(m,"row",Q))),se.push((()=>Ae(m,"col",K)));let Y={inputId:"input-rarity"};void 0!==e[2].rarity&&(Y.value=e[2].rarity),q=new Zr({props:Y}),se.push((()=>Ae(q,"value",J)));let X=[...Array(2).keys()],Z=[];for(let t=0;t<X.length;t+=1)Z[t]=au(ou(e,X,t));const ee=e=>ke(Z[e],1,1,(()=>{Z[e]=null}));function te(t){e[13](t)}let ne={inputIdPrefix:"input-slot-level-",placeholder:"スロット"};void 0!==e[2].slots&&(ne.values=e[2].slots),L=new pi({props:ne}),se.push((()=>Ae(L,"values",te)));let re=[...Array(100).keys()].slice(1),ie=[];for(let t=0;t<re.length;t+=1)ie[t]=lu(su(e,re,t));const oe=e=>ke(ie[e],1,1,(()=>{ie[e]=null}));return{c(){t=T("div"),n=T("div"),r=N(),i=T("div"),s=T("div"),o=T("div"),Ie(a.$$.fragment),l=N(),c=T("div"),Ie(u.$$.fragment),p=N(),d=T("div"),h=F("位置:\n            "),Ie(m.$$.fragment),v=N(),b=T("div"),w=F("レア度:\n            "),Ie(q.$$.fragment),x=N(),E=T("div"),$=F("スキル:\n            ");for(let e=0;e<Z.length;e+=1)Z[e].c();S=N(),P=T("div"),j=F("スロット:\n            "),Ie(L.$$.fragment),M=N(),B=T("div");for(let e=0;e<ie.length;e+=1)ie[e].c();R(n,"id","imgdump"),R(d,"id","charm-spec-position"),R(d,"class","svelte-1s2cir0"),R(b,"id","charm-spec-rarity"),R(b,"class","svelte-1s2cir0"),R(E,"id","charm-spec-skills"),R(E,"class","svelte-1s2cir0"),R(P,"id","charm-spec-slots"),R(P,"class","svelte-1s2cir0"),R(c,"id","charm-spec"),R(c,"class","svelte-1s2cir0"),R(o,"id","main"),R(o,"class","svelte-1s2cir0"),R(B,"class","charm-box-overview svelte-1s2cir0"),R(s,"id","status"),R(s,"class","svelte-1s2cir0"),R(i,"id","scanner"),R(i,"class","svelte-1s2cir0"),R(t,"class","tab-content svelte-1s2cir0")},m(e,f){I(e,t,f),A(t,n),A(t,r),A(t,i),A(i,s),A(s,o),Ce(a,o,null),A(o,l),A(o,c),Ce(u,c,null),A(c,p),A(c,d),A(d,h),Ce(m,d,null),A(c,v),A(c,b),A(b,w),Ce(q,b,null),A(c,x),A(c,E),A(E,$);for(let e=0;e<Z.length;e+=1)Z[e].m(E,null);A(c,S),A(c,P),A(P,j),Ce(L,P,null),A(s,M),A(s,B);for(let e=0;e<ie.length;e+=1)ie[e].m(B,null);z=!0},p(e,[t]){a.$set({});const n={};!f&&2&t&&(f=!0,n.isRecording=e[1],fe((()=>f=!1))),u.$set(n);const r={};!_&&4&t&&(_=!0,r.page=e[2].page,fe((()=>_=!1))),!g&&4&t&&(g=!0,r.row=e[2].row,fe((()=>g=!1))),!y&&4&t&&(y=!0,r.col=e[2].col,fe((()=>y=!1))),m.$set(r);const i={};if(!k&&4&t&&(k=!0,i.value=e[2].rarity,fe((()=>k=!1))),q.$set(i),4&t){let n;for(X=[...Array(2).keys()],n=0;n<X.length;n+=1){const r=ou(e,X,n);Z[n]?(Z[n].p(r,t),qe(Z[n],1)):(Z[n]=au(r),Z[n].c(),qe(Z[n],1),Z[n].m(E,null))}for(be(),n=X.length;n<Z.length;n+=1)ee(n);we()}const s={};if(!D&&4&t&&(D=!0,s.values=e[2].slots,fe((()=>D=!1))),L.$set(s),12&t){let n;for(re=[...Array(100).keys()].slice(1),n=0;n<re.length;n+=1){const r=su(e,re,n);ie[n]?(ie[n].p(r,t),qe(ie[n],1)):(ie[n]=lu(r),ie[n].c(),qe(ie[n],1),ie[n].m(B,null))}for(be(),n=re.length;n<ie.length;n+=1)oe(n);we()}},i(e){if(!z){qe(a.$$.fragment,e),qe(u.$$.fragment,e),qe(m.$$.fragment,e),qe(q.$$.fragment,e);for(let e=0;e<X.length;e+=1)qe(Z[e]);qe(L.$$.fragment,e);for(let e=0;e<re.length;e+=1)qe(ie[e]);z=!0}},o(e){ke(a.$$.fragment,e),ke(u.$$.fragment,e),ke(m.$$.fragment,e),ke(q.$$.fragment,e),Z=Z.filter(Boolean);for(let e=0;e<Z.length;e+=1)ke(Z[e]);ke(L.$$.fragment,e),ie=ie.filter(Boolean);for(let e=0;e<ie.length;e+=1)ke(ie[e]);z=!1},d(n){n&&C(t),e[5](null),Oe(a),Oe(u),Oe(m),Oe(q),O(Z,n),Oe(L),O(ie,n)}}}function uu(e,t,n){let r,i;d(e,On,(e=>n(15,r=e))),d(e,mc,(e=>n(16,i=e)));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let o,a=new ll({scanMode:il,scanSkipMode:al}),l=!1,c=!0,u={skills:[],skillLevels:[],slots:[]};return s(void 0,void 0,void 0,(function*(){for(;!i;)yield new Promise((e=>setTimeout(e,1e3)));yield o.init()})),[o,l,u,a,e=>s(void 0,void 0,void 0,(function*(){if(!l)return;c&&(c=!1,a.adjustPosition(e));const t=a.scan(e,Mn().format());if(null==t)return;const{charm:i,isCache:s}=t;n(2,u=i),s||(yield r.registerCharm(i,e))})),function(e){se[e?"unshift":"push"]((()=>{o=e,n(0,o)}))},function(e){l=e,n(1,l)},function(t){e.$$.not_equal(u.page,t)&&(u.page=t,n(2,u))},function(t){e.$$.not_equal(u.row,t)&&(u.row=t,n(2,u))},function(t){e.$$.not_equal(u.col,t)&&(u.col=t,n(2,u))},function(t){e.$$.not_equal(u.rarity,t)&&(u.rarity=t,n(2,u))},function(t,r){e.$$.not_equal(u.skills[r],t)&&(u.skills[r]=t,n(2,u))},function(t,r){e.$$.not_equal(u.skillLevels[r],t)&&(u.skillLevels[r]=t,n(2,u))},function(t){e.$$.not_equal(u.slots,t)&&(u.slots=t,n(2,u))}]}function fu(e){let t,n,i,s,o,a,l,c,u,f,p,d,h,m,_=Math.floor(100*e[4])+"";return{c(){t=T("div"),n=T("video"),i=T("track"),c=N(),u=T("div"),f=T("progress"),p=N(),d=T("span"),h=F(_),m=F("%"),R(i,"kind","captions"),R(n,"id",s="video"+e[0]),R(n,"class","video-preview svelte-syjktf"),n.src!==(o=e[1])&&R(n,"src",o),R(n,"width",pu),R(n,"height",du),R(n,"alt",a="preview"+e[0]),R(n,"style",l=e[2]?"":"display: none"),f.value=e[4],R(f,"class","svelte-syjktf"),R(d,"class","progress-text svelte-syjktf"),R(t,"class","video-reader svelte-syjktf")},m(r,s){I(r,t,s),A(t,n),A(n,i),e[9](n),A(t,c),A(t,u),A(u,f),A(u,p),A(u,d),A(d,h),A(d,m)},p(e,[t]){1&t&&s!==(s="video"+e[0])&&R(n,"id",s),2&t&&n.src!==(o=e[1])&&R(n,"src",o),1&t&&a!==(a="preview"+e[0])&&R(n,"alt",a),4&t&&l!==(l=e[2]?"":"display: none")&&R(n,"style",l),16&t&&(f.value=e[4]),16&t&&_!==(_=Math.floor(100*e[4])+"")&&B(h,_)},i:r,o:r,d(n){n&&C(t),e[9](null)}}}const pu=1280,du=720;function hu(e,t,r){var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let s,o,a,l,{nSplits:c}=t,{index:u}=t,{videoName:f}=t,{videoData:p}=t,{isVideoVisible:d=!1}=t,{onCapture:h}=t,{onFinish:m}=t,_=new n.default.Mat(du,pu,n.default.CV_8UC4),g=0;i(void 0,void 0,void 0,(function*(){yield new Promise((e=>requestAnimationFrame(e))),yield new Promise((e=>r(3,a.oncanplay=e,a))),l=new n.default.VideoCapture(a),s=u*a.duration/c,o=(u+1)*a.duration/c,a.addEventListener("seeked",y),a.currentTime!=s?r(3,a.currentTime=s,a):y()}));const y=()=>i(void 0,void 0,void 0,(function*(){if(o-a.currentTime<1/29.97)return r(4,g=1),void m();l.read(_),h(_,f),v(1,29.97),r(4,g=(a.currentTime-s)/(o-s))})),v=(e,t)=>{const n=1e-5+(a.currentTime*t+e)/t;r(3,a.currentTime=Math.min(o,n),a)};return e.$$set=e=>{"nSplits"in e&&r(5,c=e.nSplits),"index"in e&&r(0,u=e.index),"videoName"in e&&r(6,f=e.videoName),"videoData"in e&&r(1,p=e.videoData),"isVideoVisible"in e&&r(2,d=e.isVideoVisible),"onCapture"in e&&r(7,h=e.onCapture),"onFinish"in e&&r(8,m=e.onFinish)},[u,p,d,a,g,c,f,h,m,function(e){se[e?"unshift":"push"]((()=>{a=e,r(3,a)}))}]}class mu extends Fe{constructor(e){super(),Pe(this,e,hu,fu,f,{nSplits:5,index:0,videoName:6,videoData:1,isVideoVisible:2,onCapture:7,onFinish:8})}}function _u(e,t,n){const r=e.slice();return r[22]=t[n],r}function gu(e){let t,n;const r=[e[22]];let i={};for(let e=0;e<r.length;e+=1)i=o(i,r[e]);return t=new mu({props:i}),{c(){Ie(t.$$.fragment)},m(e,r){Ce(t,e,r),n=!0},p(e,n){const i=128&n?$e(r,[Se(e[22])]):{};t.$set(i)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Oe(t,e)}}}function yu(e){let t,n,r,i,s,o=1+Number(e[3])+"",a=e[1].length+"";return{c(){t=F("Processing "),n=F(o),r=F("/"),i=F(a),s=F(" file. Please wait...")},m(e,o){I(e,t,o),I(e,n,o),I(e,r,o),I(e,i,o),I(e,s,o)},p(e,t){8&t&&o!==(o=1+Number(e[3])+"")&&B(n,o),2&t&&a!==(a=e[1].length+"")&&B(i,a)},d(e){e&&C(t),e&&C(n),e&&C(r),e&&C(i),e&&C(s)}}}function vu(e){let t;return{c(){t=F("Completed!")},m(e,n){I(e,t,n)},p:r,d(e){e&&C(t)}}}function bu(e){let t;return{c(){t=F("Loading Files...")},m(e,n){I(e,t,n)},p:r,d(e){e&&C(t)}}}function wu(e){let t,n,i,s,o,a,l,u;return{c(){t=T("input"),n=N(),i=T("img"),o=N(),a=T("div"),a.textContent="Click to Select Movie",H(t,"display","none"),R(t,"type","file"),R(t,"accept",".mp4"),t.multiple=!0,R(t,"class","svelte-18sy7xy"),i.src!==(s="https://static.thenounproject.com/png/625182-200.png")&&R(i,"src","https://static.thenounproject.com/png/625182-200.png"),R(i,"alt",""),R(i,"class","svelte-18sy7xy"),R(a,"class","svelte-18sy7xy")},m(r,s){I(r,t,s),e[10](t),I(r,n,s),I(r,i,s),I(r,o,s),I(r,a,s),l||(u=[L(t,"change",e[8]),L(t,"change",e[9]),L(i,"click",e[11]),L(a,"click",e[12])],l=!0)},p:r,d(r){r&&C(t),e[10](null),r&&C(n),r&&C(i),r&&C(o),r&&C(a),l=!1,c(u)}}}function qu(e){let t,n,r,i,s,o,a,l,c,u,f,p,d,h,m,_=e[7],g=[];for(let t=0;t<_.length;t+=1)g[t]=gu(_u(e,_,t));const y=e=>ke(g[e],1,1,(()=>{g[e]=null}));function v(e,t){return e[4]?vu:e[1].length>0?yu:void 0}let b=v(e),w=b&&b(e);let q=(mc?wu:bu)(e);return{c(){t=T("div"),n=T("div"),r=T("div");for(let e=0;e<g.length;e+=1)g[e].c();i=N(),w&&w.c(),s=N(),o=T("div"),a=T("div"),l=F("Found "),c=F(e[5]),u=F(" charms."),f=N(),p=T("textarea"),d=N(),h=T("div"),q.c(),R(r,"id","status"),R(r,"class","svelte-18sy7xy"),R(a,"class","svelte-18sy7xy"),R(p,"placeholder","納刀術,2,ひるみ軽減,1,1,0,0"),p.value=e[6],R(p,"class","svelte-18sy7xy"),R(o,"id","result"),R(o,"class","svelte-18sy7xy"),R(h,"id","upload"),R(h,"class","svelte-18sy7xy"),R(n,"id","scanner"),R(n,"class","svelte-18sy7xy"),R(t,"class","tab-content svelte-18sy7xy")},m(e,_){I(e,t,_),A(t,n),A(n,r);for(let e=0;e<g.length;e+=1)g[e].m(r,null);A(r,i),w&&w.m(r,null),A(n,s),A(n,o),A(o,a),A(a,l),A(a,c),A(a,u),A(o,f),A(o,p),A(n,d),A(n,h),q.m(h,null),m=!0},p(e,[t]){if(128&t){let n;for(_=e[7],n=0;n<_.length;n+=1){const s=_u(e,_,n);g[n]?(g[n].p(s,t),qe(g[n],1)):(g[n]=gu(s),g[n].c(),qe(g[n],1),g[n].m(r,i))}for(be(),n=_.length;n<g.length;n+=1)y(n);we()}b===(b=v(e))&&w?w.p(e,t):(w&&w.d(1),w=b&&b(e),w&&(w.c(),w.m(r,null))),(!m||32&t)&&B(c,e[5]),(!m||64&t)&&(p.value=e[6]),q.p(e,t)},i(e){if(!m){for(let e=0;e<_.length;e+=1)qe(g[e]);m=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)ke(g[e]);m=!1},d(e){e&&C(t),O(g,e),w&&w.d(),q.d()}}}function ku(e,t,n){let i,s,o=r,a=()=>(o(),o=p(_,(e=>n(7,i=e))),_);d(e,On,(e=>n(15,s=e))),e.$$.on_destroy.push((()=>o()));var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const c=(navigator.hardwareConcurrency||8)/2;let u,f,h=new ll({scanMode:il,scanSkipMode:ol}),m=[],_=lt([]);a();let g=!1,y=-1,v=!1,w=0,q="";function k(e,t){const n=h.scan(e,t);if(null==n)return;const{charm:r,isCache:i}=n;i||s.saveScreenshot(e,r.imageName)}function x(){++f===c&&(g=!0)}return[u,m,_,y,v,w,q,i,function(e){return l(this,void 0,void 0,(function*(){if(null==e.target.files)return;const t=[...e.target.files];n(4,v=!1);for(let e=0;e<t.length;e++){n(3,y=e);const r=t[e];console.log(r.name,Date()),a(n(2,_=lt([]))),f=0,g=!1;const o=new FileReader;o.readAsDataURL(r),yield new Promise((e=>{o.onload=e}));for(let e=0;e<c;e++){const e=i.length;b(_,i[e]={index:e,videoName:r.name,videoData:o.result,nSplits:c,onCapture:k,onFinish:x},i)}yield new Promise((e=>requestAnimationFrame(e)));const l=()=>{n(5,w=h.countCharms()),n(6,q=h.exportAsText())};for(;!g;)l(),yield new Promise((e=>setTimeout(e,1e3)));l();const u=h.getCharms();yield s.registerCharms(u)}const r=h.getCharms();console.log(JSON.stringify(r)),n(4,v=!0)}))},function(){m=this.files,n(1,m)},function(e){se[e?"unshift":"push"]((()=>{u=e,n(0,u)}))},()=>u.click(),()=>u.click()]}const xu=[{tabTitle:"護石スキャン",component:class extends Fe{constructor(e){super(),Pe(this,e,ku,qu,f,{})}},iconData:["M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"]},{tabTitle:"護石リアルタイム\nスキャン(β)",component:class extends Fe{constructor(e){super(),Pe(this,e,uu,cu,f,{})}},iconData:["M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"]},{tabTitle:"護石管理",component:class extends Fe{constructor(e){super(),Pe(this,e,iu,ru,f,{})}},iconData:["M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"]},{tabTitle:"護石スペック検索",component:class extends Fe{constructor(e){super(),Pe(this,e,eu,Kc,f,{})}},iconData:["M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"]},{tabTitle:"輪廻サポート(β)",component:class extends Fe{constructor(e){super(),Pe(this,e,Lc,jc,f,{},[-1,-1])}},iconData:["M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z"]},{tabTitle:"売却サポート(β)",component:class extends Fe{constructor(e){super(),Pe(this,e,$c,Ec,f,{},[-1,-1])}},iconData:["M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518l.087.02z","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z","M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"]},{tabTitle:"護石エクスポート",component:class extends Fe{constructor(e){super(),Pe(this,e,Dn,Ln,f,{})}},iconData:["M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"]},{tabTitle:"ヘルプ",component:class extends Fe{constructor(e){super(),Pe(this,e,null,Pt,f,{})}},iconData:["M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z","m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"]}];function Eu(e,t,n){const r=e.slice();return r[5]=t[n],r[6]=t,r[7]=n,r}function $u(e,t,n){const r=e.slice();return r[5]=t[n],r[7]=n,r}function Su(e,t,n){const r=e.slice();return r[9]=t[n],r}function Au(e){let t;return{c(){t=P("path"),R(t,"d",e[9])},m(e,n){I(e,t,n)},p:r,d(e){e&&C(t)}}}function Iu(e){let t,n,r,i,s,o,a,l,c=e[5].tabTitle.replace("\n","<br>")+"",u=e[5].iconData||[],f=[];for(let t=0;t<u.length;t+=1)f[t]=Au(Su(e,u,t));return{c(){t=T("li"),n=T("button"),r=P("svg");for(let e=0;e<f.length;e+=1)f[e].c();i=N(),s=T("span"),R(r,"xmlns","http://www.w3.org/2000/svg"),R(r,"width","16"),R(r,"height","19"),R(r,"fill","currentColor"),H(s,"display",e[0]?"inline":"none"),R(s,"class","svelte-1u0ku30"),R(n,"id",String(e[7])),R(n,"class",o=y(e[1]==e[7]?"active navigation-link":"navigation-link")+" svelte-1u0ku30"),R(n,"role","tab"),R(t,"class","navigation-item svelte-1u0ku30")},m(o,u){I(o,t,u),A(t,n),A(n,r);for(let e=0;e<f.length;e+=1)f[e].m(r,null);A(n,i),A(n,s),s.innerHTML=c,a||(l=L(n,"click",e[3]),a=!0)},p(e,t){if(0&t){let n;for(u=e[5].iconData||[],n=0;n<u.length;n+=1){const i=Su(e,u,n);f[n]?f[n].p(i,t):(f[n]=Au(i),f[n].c(),f[n].m(r,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}1&t&&H(s,"display",e[0]?"inline":"none"),2&t&&o!==(o=y(e[1]==e[7]?"active navigation-link":"navigation-link")+" svelte-1u0ku30")&&R(n,"class",o)},d(e){e&&C(t),O(f,e),a=!1,l()}}}function Cu(e){let t,n,r,i,s,o;function a(t){e[4](t,e[7])}var l=e[5].component;function c(e){let t={};return void 0!==e[2][e[7]]&&(t.onActivate=e[2][e[7]]),{props:t}}return l&&(n=new l(c(e)),se.push((()=>Ae(n,"onActivate",a)))),{c(){t=T("div"),n&&Ie(n.$$.fragment),i=N(),R(t,"class",s="h-100 "+(e[1]==e[7]?"d-block":"d-none"))},m(e,r){I(e,t,r),n&&Ce(n,t,null),A(t,i),o=!0},p(u,f){e=u;const p={};if(!r&&4&f&&(r=!0,p.onActivate=e[2][e[7]],fe((()=>r=!1))),l!==(l=e[5].component)){if(n){be();const e=n;ke(e.$$.fragment,1,0,(()=>{Oe(e,1)})),we()}l?(n=new l(c(e)),se.push((()=>Ae(n,"onActivate",a))),Ie(n.$$.fragment),qe(n.$$.fragment,1),Ce(n,t,i)):n=null}else l&&n.$set(p);(!o||2&f&&s!==(s="h-100 "+(e[1]==e[7]?"d-block":"d-none")))&&R(t,"class",s)},i(e){o||(n&&qe(n.$$.fragment,e),o=!0)},o(e){n&&ke(n.$$.fragment,e),o=!1},d(e){e&&C(t),n&&Oe(n)}}}function Ou(e){let t,n,r,i,s,o,a,l=xu,c=[];for(let t=0;t<l.length;t+=1)c[t]=Iu($u(e,l,t));let u=xu,f=[];for(let t=0;t<u.length;t+=1)f[t]=Cu(Eu(e,u,t));const p=e=>ke(f[e],1,1,(()=>{f[e]=null}));return{c(){t=T("div"),n=T("ul");for(let e=0;e<c.length;e+=1)c[e].c();r=N(),i=T("div"),i.innerHTML='<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="" data-url="https://mhrise-charm-scanner.yuzu-k.com" data-hashtags="MHRise,護石,ツール" data-show-count="false">Tweet</a> \n      <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>',s=N(),o=T("div");for(let e=0;e<f.length;e+=1)f[e].c();H(i,"position","fixed"),H(i,"bottom","0"),H(i,"left","5px"),R(n,"class","navigation svelte-1u0ku30"),H(n,"width",e[0]?"14rem":"3.2rem"),R(o,"class","navigation-content svelte-1u0ku30"),R(t,"id","container"),R(t,"class","svelte-1u0ku30")},m(e,l){I(e,t,l),A(t,n);for(let e=0;e<c.length;e+=1)c[e].m(n,null);A(n,r),A(n,i),A(t,s),A(t,o);for(let e=0;e<f.length;e+=1)f[e].m(o,null);a=!0},p(e,[t]){if(11&t){let i;for(l=xu,i=0;i<l.length;i+=1){const s=$u(e,l,i);c[i]?c[i].p(s,t):(c[i]=Iu(s),c[i].c(),c[i].m(n,r))}for(;i<c.length;i+=1)c[i].d(1);c.length=l.length}if((!a||1&t)&&H(n,"width",e[0]?"14rem":"3.2rem"),6&t){let n;for(u=xu,n=0;n<u.length;n+=1){const r=Eu(e,u,n);f[n]?(f[n].p(r,t),qe(f[n],1)):(f[n]=Cu(r),f[n].c(),qe(f[n],1),f[n].m(o,null))}for(be(),n=u.length;n<f.length;n+=1)p(n);we()}},i(e){if(!a){for(let e=0;e<u.length;e+=1)qe(f[e]);a=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)ke(f[e]);a=!1},d(e){e&&C(t),O(c,e),O(f,e)}}}function Tu(e,t,n){let{isNavigationOpen:r}=t,i=7,s={};return e.$$set=e=>{"isNavigationOpen"in e&&n(0,r=e.isNavigationOpen)},[r,i,s,function(e){var t;const r=null===(t=e.target.closest("button"))||void 0===t?void 0:t.id;null!=r&&(n(1,i=parseInt(r)),s[i]&&s[i]())},function(t,r){e.$$.not_equal(s[r],t)&&(s[r]=t,n(2,s))}]}class Pu extends Fe{constructor(e){super(),Pe(this,e,Tu,Ou,f,{isNavigationOpen:0})}}function Fu(e){let t,n,i,s,o,a,l,c,u,f,p;return{c(){t=T("div"),n=T("label"),i=T("input"),s=N(),o=P("svg"),a=P("circle"),l=P("path"),c=P("path"),u=P("path"),R(i,"type","checkbox"),R(i,"class","svelte-vpaeku"),R(a,"cx","50"),R(a,"cy","50"),R(a,"r","30"),R(a,"class","svelte-vpaeku"),R(l,"class","line--1 svelte-vpaeku"),R(l,"d","M0 55l14-10c4.7-3.3 9-5 13-5h72"),R(c,"class","line--2 svelte-vpaeku"),R(c,"d","M0 50h99"),R(u,"class","line--3 svelte-vpaeku"),R(u,"d","M0 45l14 10c4.7 3.3 9 5 13 5h72"),R(o,"viewBox","0 0 100 100"),R(o,"xmlns","http://www.w3.org/2000/svg"),R(n,"class","svelte-vpaeku"),R(t,"class","menu toggle-back svelte-vpaeku")},m(r,d){I(r,t,d),A(t,n),A(n,i),i.checked=e[0],A(n,s),A(n,o),A(o,a),A(o,l),A(o,c),A(o,u),f||(p=L(i,"change",e[1]),f=!0)},p(e,[t]){1&t&&(i.checked=e[0])},i:r,o:r,d(e){e&&C(t),f=!1,p()}}}function Nu(e,t,n){let{isOpen:r=!1}=t;return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen)},[r,function(){r=this.checked,n(0,r)}]}class ju extends Fe{constructor(e){super(),Pe(this,e,Nu,Fu,f,{isOpen:0})}}var Lu,Du=(Lu=document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href,function(e){var t,n,r=e||{},i=void 0!==r?r:{};i.ready=new Promise((function(e,r){t=e,n=r}));const s=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,s.debugModule("globalThis.location =",globalThis.location);const o="emscripten-bug-17951";i[o]=function e(t,n){t.env.foo=function(){};const r=i.locateFile(e.uri,void 0===h?"":h);s.debugModule("instantiateWasm() uri =",r);const o=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(o(),t).then((e=>n(e.instance,e.module))):async()=>o().then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,t))).then((e=>n(e.instance,e.module))))(),{}},i[o].uri="sqlite3.wasm";var a=Object.assign({},i),l="./this.program",c="object"==typeof window,u="function"==typeof importScripts;"object"==typeof process&&"object"==typeof process.versions&&process.versions.node;var f,p,d,h="";(c||u)&&(u?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),Lu&&(h=Lu),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var m,_,g=i.print||console.log.bind(console),y=i.printErr||console.warn.bind(console);Object.assign(i,a),a=null,i.arguments,i.thisProgram&&(l=i.thisProgram),i.quit,i.wasmBinary&&(m=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var b,w,q,k,x,E=!1,$="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&$)return $.decode(e.subarray(t,i));for(var s="";t<i;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(o);else{var c=o-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function A(e,t,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=s)break;t[n++]=a}else if(a<=2047){if(n+1>=s)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=s)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=s)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i}function I(e,t,n){return A(e,w,t,n)}function C(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function O(){var e=_.buffer;i.HEAP8=b=new Int8Array(e),i.HEAP16=q=new Int16Array(e),i.HEAP32=k=new Int32Array(e),i.HEAPU8=w=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=x=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e),i.HEAP64=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}var T=i.INITIAL_MEMORY||16777216;_=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:T/65536,maximum:32768}),O(),T=_.buffer.byteLength;var P,F,N,j,L=[],D=[],R=[],M=0,B=null;function z(e){M++,i.monitorRunDependencies&&i.monitorRunDependencies(M)}function H(e){if(M--,i.monitorRunDependencies&&i.monitorRunDependencies(M),0==M&&B){var t=B;B=null,t()}}function U(e){i.onAbort&&i.onAbort(e),y(e="Aborted("+e+")"),E=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function W(e){return e.startsWith("data:application/octet-stream;base64,")}function V(e){try{if(e==P&&m)return new Uint8Array(m);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function Q(e){for(;e.length>0;)e.shift()(i)}i.locateFile?W(P="sqlite3.wasm")||(F=P,P=i.locateFile?i.locateFile(F,h):h+F):P=new URL("sqlite3.wasm",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href).href;var K={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=K.isAbs(e),n="/"===e.substr(-1);return(e=K.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=K.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=K.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return K.normalize(e.join("/"))},join2:(e,t)=>K.normalize(e+"/"+t)},G={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:te.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=K.isAbs(r)}return(t?"/":"")+(e=K.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=G.resolve(e).substr(1),t=G.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),o=s,a=0;a<s;a++)if(r[a]!==i[a]){o=a;break}var l=[];for(a=o;a<r.length;a++)l.push("..");return(l=l.concat(i.slice(o))).join("/")}};function J(e,t,n){var r=n>0?n:C(e)+1,i=new Array(r),s=A(e,i,0,i.length);return t&&(i.length=s),i}var Y={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Y.ttys[e]={input:[],output:[],ops:t},te.registerDevice(e,Y.stream_ops)},stream_ops:{open:function(e){var t=Y.ttys[e.node.rdev];if(!t)throw new te.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new te.ErrnoError(60);for(var s=0,o=0;o<r;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new te.ErrnoError(29)}if(void 0===a&&0===s)throw new te.ErrnoError(6);if(null==a)break;s++,t[n+o]=a}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new te.ErrnoError(60);try{for(var s=0;s<r;s++)e.tty.ops.put_char(e.tty,t[n+s])}catch(e){throw new te.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=J(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(g(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(g(S(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(y(S(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(y(S(e.output,0)),e.output=[])}}};function X(e){e=function(e,t){return Math.ceil(e/t)*t}(e,65536);var t=ve(65536,e);return t?function(e,t){return w.fill(0,e,e+t),e}(t,e):0}var Z={ops_table:null,mount:function(e){return Z.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(te.isBlkdev(n)||te.isFIFO(n))throw new te.ErrnoError(63);Z.ops_table||(Z.ops_table={dir:{node:{getattr:Z.node_ops.getattr,setattr:Z.node_ops.setattr,lookup:Z.node_ops.lookup,mknod:Z.node_ops.mknod,rename:Z.node_ops.rename,unlink:Z.node_ops.unlink,rmdir:Z.node_ops.rmdir,readdir:Z.node_ops.readdir,symlink:Z.node_ops.symlink},stream:{llseek:Z.stream_ops.llseek}},file:{node:{getattr:Z.node_ops.getattr,setattr:Z.node_ops.setattr},stream:{llseek:Z.stream_ops.llseek,read:Z.stream_ops.read,write:Z.stream_ops.write,allocate:Z.stream_ops.allocate,mmap:Z.stream_ops.mmap,msync:Z.stream_ops.msync}},link:{node:{getattr:Z.node_ops.getattr,setattr:Z.node_ops.setattr,readlink:Z.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Z.node_ops.getattr,setattr:Z.node_ops.setattr},stream:te.chrdev_stream_ops}});var i=te.createNode(e,t,n,r);return te.isDir(i.mode)?(i.node_ops=Z.ops_table.dir.node,i.stream_ops=Z.ops_table.dir.stream,i.contents={}):te.isFile(i.mode)?(i.node_ops=Z.ops_table.file.node,i.stream_ops=Z.ops_table.file.stream,i.usedBytes=0,i.contents=null):te.isLink(i.mode)?(i.node_ops=Z.ops_table.link.node,i.stream_ops=Z.ops_table.link.stream):te.isChrdev(i.mode)&&(i.node_ops=Z.ops_table.chrdev.node,i.stream_ops=Z.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=te.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,te.isDir(e.mode)?t.size=4096:te.isFile(e.mode)?t.size=e.usedBytes:te.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Z.resizeFileStorage(e,t.size)},lookup:function(e,t){throw te.genericErrors[44]},mknod:function(e,t,n,r){return Z.createNode(e,t,n,r)},rename:function(e,t,n){if(te.isDir(e.mode)){var r;try{r=te.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new te.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=te.lookupNode(e,t);for(var r in n.contents)throw new te.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Z.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!te.isLink(e.mode))throw new te.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(o>8&&s.subarray)t.set(s.subarray(i,i+o),n);else for(var a=0;a<o;a++)t[n+a]=s[i+a];return o},write:function(e,t,n,r,i,s){if(t.buffer===b.buffer&&(s=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===i)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(Z.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)o.contents[i+a]=t[n+a];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&te.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new te.ErrnoError(28);return r},allocate:function(e,t,n){Z.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i){if(!te.isFile(e.node.mode))throw new te.ErrnoError(43);var s,o,a=e.node.contents;if(2&i||a.buffer!==b.buffer){if((n>0||n+t<a.length)&&(a=a.subarray?a.subarray(n,n+t):Array.prototype.slice.call(a,n,n+t)),o=!0,!(s=X(t)))throw new te.ErrnoError(48);b.set(a,s)}else o=!1,s=a.byteOffset;return{ptr:s,allocated:o}},msync:function(e,t,n,r,i){return Z.stream_ops.write(e,t,0,r,n,!1),0}}};function ee(e,t,n,r){var i=r?"":"al "+e;p(e,(n=>{!function(e,t){e||U(t)}(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&H()}),(t=>{if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&z()}var te={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=G.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new te.ErrnoError(32);for(var n=e.split("/").filter((e=>!!e)),r=te.root,i="/",s=0;s<n.length;s++){var o=s===n.length-1;if(o&&t.parent)break;if(r=te.lookupNode(r,n[s]),i=K.join2(i,n[s]),te.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var a=0;te.isLink(r.mode);){var l=te.readlink(i);if(i=G.resolve(K.dirname(i),l),r=te.lookupPath(i,{recurse_count:t.recurse_count+1}).node,a++>40)throw new te.ErrnoError(32)}}return{path:i,node:r}},getPath:e=>{for(var t;;){if(te.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%te.nameTable.length},hashAddNode:e=>{var t=te.hashName(e.parent.id,e.name);e.name_next=te.nameTable[t],te.nameTable[t]=e},hashRemoveNode:e=>{var t=te.hashName(e.parent.id,e.name);if(te.nameTable[t]===e)te.nameTable[t]=e.name_next;else for(var n=te.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=te.mayLookup(e);if(n)throw new te.ErrnoError(n,e);for(var r=te.hashName(e.id,t),i=te.nameTable[r];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===t)return i}return te.lookup(e,t)},createNode:(e,t,n,r)=>{var i=new te.FSNode(e,t,n,r);return te.hashAddNode(i),i},destroyNode:e=>{te.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=te.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>te.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=te.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return te.lookupNode(e,t),20}catch(e){}return te.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var r;try{r=te.lookupNode(e,t)}catch(e){return e.errno}var i=te.nodePermissions(e,"wx");if(i)return i;if(n){if(!te.isDir(r.mode))return 54;if(te.isRoot(r)||te.getPath(r)===te.cwd())return 10}else if(te.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?te.isLink(e.mode)?32:te.isDir(e.mode)&&("r"!==te.flagsToPermissionString(t)||512&t)?31:te.nodePermissions(e,te.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=te.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!te.streams[n])return n;throw new te.ErrnoError(33)},getStream:e=>te.streams[e],createStream:(e,t,n)=>{te.FSStream||(te.FSStream=function(){this.shared={}},te.FSStream.prototype={},Object.defineProperties(te.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new te.FSStream,e);var r=te.nextfd(t,n);return e.fd=r,te.streams[r]=e,e},closeStream:e=>{te.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=te.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new te.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{te.devices[e]={stream_ops:t}},getDevice:e=>te.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),te.syncFSRequests++,te.syncFSRequests>1&&y("warning: "+te.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=te.getMounts(te.root.mount),r=0;function i(e){return te.syncFSRequests--,t(e)}function s(e){if(e)return s.errored?void 0:(s.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((t=>{if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)}))},mount:(e,t,n)=>{var r,i="/"===n,s=!n;if(i&&te.root)throw new te.ErrnoError(10);if(!i&&!s){var o=te.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,te.isMountpoint(r))throw new te.ErrnoError(10);if(!te.isDir(r.mode))throw new te.ErrnoError(54)}var a={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,i?te.root=l:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),l},unmount:e=>{var t=te.lookupPath(e,{follow_mount:!1});if(!te.isMountpoint(t.node))throw new te.ErrnoError(28);var n=t.node,r=n.mounted,i=te.getMounts(r);Object.keys(te.nameTable).forEach((e=>{for(var t=te.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&te.destroyNode(t),t=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(r);n.mount.mounts.splice(s,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var r=te.lookupPath(e,{parent:!0}).node,i=K.basename(e);if(!i||"."===i||".."===i)throw new te.ErrnoError(28);var s=te.mayCreate(r,i);if(s)throw new te.ErrnoError(s);if(!r.node_ops.mknod)throw new te.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,te.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,te.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{te.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,te.mknod(e,t,n)),symlink:(e,t)=>{if(!G.resolve(e))throw new te.ErrnoError(44);var n=te.lookupPath(t,{parent:!0}).node;if(!n)throw new te.ErrnoError(44);var r=K.basename(t),i=te.mayCreate(n,r);if(i)throw new te.ErrnoError(i);if(!n.node_ops.symlink)throw new te.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:(e,t)=>{var n,r,i=K.dirname(e),s=K.dirname(t),o=K.basename(e),a=K.basename(t);if(n=te.lookupPath(e,{parent:!0}).node,r=te.lookupPath(t,{parent:!0}).node,!n||!r)throw new te.ErrnoError(44);if(n.mount!==r.mount)throw new te.ErrnoError(75);var l,c=te.lookupNode(n,o),u=G.relative(e,s);if("."!==u.charAt(0))throw new te.ErrnoError(28);if("."!==(u=G.relative(t,i)).charAt(0))throw new te.ErrnoError(55);try{l=te.lookupNode(r,a)}catch(e){}if(c!==l){var f=te.isDir(c.mode),p=te.mayDelete(n,o,f);if(p)throw new te.ErrnoError(p);if(p=l?te.mayDelete(r,a,f):te.mayCreate(r,a))throw new te.ErrnoError(p);if(!n.node_ops.rename)throw new te.ErrnoError(63);if(te.isMountpoint(c)||l&&te.isMountpoint(l))throw new te.ErrnoError(10);if(r!==n&&(p=te.nodePermissions(n,"w")))throw new te.ErrnoError(p);te.hashRemoveNode(c);try{n.node_ops.rename(c,r,a)}catch(e){throw e}finally{te.hashAddNode(c)}}},rmdir:e=>{var t=te.lookupPath(e,{parent:!0}).node,n=K.basename(e),r=te.lookupNode(t,n),i=te.mayDelete(t,n,!0);if(i)throw new te.ErrnoError(i);if(!t.node_ops.rmdir)throw new te.ErrnoError(63);if(te.isMountpoint(r))throw new te.ErrnoError(10);t.node_ops.rmdir(t,n),te.destroyNode(r)},readdir:e=>{var t=te.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new te.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=te.lookupPath(e,{parent:!0}).node;if(!t)throw new te.ErrnoError(44);var n=K.basename(e),r=te.lookupNode(t,n),i=te.mayDelete(t,n,!1);if(i)throw new te.ErrnoError(i);if(!t.node_ops.unlink)throw new te.ErrnoError(63);if(te.isMountpoint(r))throw new te.ErrnoError(10);t.node_ops.unlink(t,n),te.destroyNode(r)},readlink:e=>{var t=te.lookupPath(e).node;if(!t)throw new te.ErrnoError(44);if(!t.node_ops.readlink)throw new te.ErrnoError(28);return G.resolve(te.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var n=te.lookupPath(e,{follow:!t}).node;if(!n)throw new te.ErrnoError(44);if(!n.node_ops.getattr)throw new te.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>te.stat(e,!0),chmod:(e,t,n)=>{var r;if(!(r="string"==typeof e?te.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new te.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{te.chmod(e,t,!0)},fchmod:(e,t)=>{var n=te.getStream(e);if(!n)throw new te.ErrnoError(8);te.chmod(n.node,t)},chown:(e,t,n,r)=>{var i;if(!(i="string"==typeof e?te.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new te.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,n)=>{te.chown(e,t,n,!0)},fchown:(e,t,n)=>{var r=te.getStream(e);if(!r)throw new te.ErrnoError(8);te.chown(r.node,t,n)},truncate:(e,t)=>{if(t<0)throw new te.ErrnoError(28);var n;if(!(n="string"==typeof e?te.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new te.ErrnoError(63);if(te.isDir(n.mode))throw new te.ErrnoError(31);if(!te.isFile(n.mode))throw new te.ErrnoError(28);var r=te.nodePermissions(n,"w");if(r)throw new te.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=te.getStream(e);if(!n)throw new te.ErrnoError(8);if(0==(2097155&n.flags))throw new te.ErrnoError(28);te.truncate(n.node,t)},utime:(e,t,n)=>{var r=te.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:(e,t,n)=>{if(""===e)throw new te.ErrnoError(44);var r;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?te.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)r=e;else{e=K.normalize(e);try{r=te.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(r){if(128&t)throw new te.ErrnoError(20)}else r=te.mknod(e,n,0),s=!0;if(!r)throw new te.ErrnoError(44);if(te.isChrdev(r.mode)&&(t&=-513),65536&t&&!te.isDir(r.mode))throw new te.ErrnoError(54);if(!s){var o=te.mayOpen(r,t);if(o)throw new te.ErrnoError(o)}512&t&&!s&&te.truncate(r,0),t&=-131713;var a=te.createStream({node:r,path:te.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!i.logReadFiles||1&t||(te.readFiles||(te.readFiles={}),e in te.readFiles||(te.readFiles[e]=1)),a},close:e=>{if(te.isClosed(e))throw new te.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{te.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,n)=>{if(te.isClosed(e))throw new te.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new te.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new te.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,r,i)=>{if(r<0||i<0)throw new te.ErrnoError(28);if(te.isClosed(e))throw new te.ErrnoError(8);if(1==(2097155&e.flags))throw new te.ErrnoError(8);if(te.isDir(e.node.mode))throw new te.ErrnoError(31);if(!e.stream_ops.read)throw new te.ErrnoError(28);var s=void 0!==i;if(s){if(!e.seekable)throw new te.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,n,r,i);return s||(e.position+=o),o},write:(e,t,n,r,i,s)=>{if(r<0||i<0)throw new te.ErrnoError(28);if(te.isClosed(e))throw new te.ErrnoError(8);if(0==(2097155&e.flags))throw new te.ErrnoError(8);if(te.isDir(e.node.mode))throw new te.ErrnoError(31);if(!e.stream_ops.write)throw new te.ErrnoError(28);e.seekable&&1024&e.flags&&te.llseek(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new te.ErrnoError(70)}else i=e.position;var a=e.stream_ops.write(e,t,n,r,i,s);return o||(e.position+=a),a},allocate:(e,t,n)=>{if(te.isClosed(e))throw new te.ErrnoError(8);if(t<0||n<=0)throw new te.ErrnoError(28);if(0==(2097155&e.flags))throw new te.ErrnoError(8);if(!te.isFile(e.node.mode)&&!te.isDir(e.node.mode))throw new te.ErrnoError(43);if(!e.stream_ops.allocate)throw new te.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,r,i)=>{if(0!=(2&r)&&0==(2&i)&&2!=(2097155&e.flags))throw new te.ErrnoError(2);if(1==(2097155&e.flags))throw new te.ErrnoError(2);if(!e.stream_ops.mmap)throw new te.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new te.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=te.open(e,t.flags),i=te.stat(e).size,s=new Uint8Array(i);return te.read(r,s,0,i,0),"utf8"===t.encoding?n=S(s,0):"binary"===t.encoding&&(n=s),te.close(r),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var r=te.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(C(t)+1),s=A(t,i,0,i.length);te.write(r,i,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");te.write(r,t,0,t.byteLength,void 0,n.canOwn)}te.close(r)},cwd:()=>te.currentPath,chdir:e=>{var t=te.lookupPath(e,{follow:!0});if(null===t.node)throw new te.ErrnoError(44);if(!te.isDir(t.node.mode))throw new te.ErrnoError(54);var n=te.nodePermissions(t.node,"x");if(n)throw new te.ErrnoError(n);te.currentPath=t.path},createDefaultDirectories:()=>{te.mkdir("/tmp"),te.mkdir("/home"),te.mkdir("/home/web_user")},createDefaultDevices:()=>{te.mkdir("/dev"),te.registerDevice(te.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),te.mkdev("/dev/null",te.makedev(1,3)),Y.register(te.makedev(5,0),Y.default_tty_ops),Y.register(te.makedev(6,0),Y.default_tty1_ops),te.mkdev("/dev/tty",te.makedev(5,0)),te.mkdev("/dev/tty1",te.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>U("randomDevice")}();te.createDevice("/dev","random",e),te.createDevice("/dev","urandom",e),te.mkdir("/dev/shm"),te.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{te.mkdir("/proc");var e=te.mkdir("/proc/self");te.mkdir("/proc/self/fd"),te.mount({mount:()=>{var t=te.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var n=+t,r=te.getStream(n);if(!r)throw new te.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?te.createDevice("/dev","stdin",i.stdin):te.symlink("/dev/tty","/dev/stdin"),i.stdout?te.createDevice("/dev","stdout",null,i.stdout):te.symlink("/dev/tty","/dev/stdout"),i.stderr?te.createDevice("/dev","stderr",null,i.stderr):te.symlink("/dev/tty1","/dev/stderr"),te.open("/dev/stdin",0),te.open("/dev/stdout",1),te.open("/dev/stderr",1)},ensureErrnoError:()=>{te.ErrnoError||(te.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},te.ErrnoError.prototype=new Error,te.ErrnoError.prototype.constructor=te.ErrnoError,[44].forEach((e=>{te.genericErrors[e]=new te.ErrnoError(e),te.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{te.ensureErrnoError(),te.nameTable=new Array(4096),te.mount(Z,{},"/"),te.createDefaultDirectories(),te.createDefaultDevices(),te.createSpecialDirectories(),te.filesystems={MEMFS:Z}},init:(e,t,n)=>{te.init.initialized=!0,te.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,te.createStandardStreams()},quit:()=>{te.init.initialized=!1;for(var e=0;e<te.streams.length;e++){var t=te.streams[e];t&&te.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=te.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{e=(r=te.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=te.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=K.basename(e),r=te.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:(e,t,n,r)=>{e="string"==typeof e?e:te.getPath(e);for(var i=t.split("/").reverse();i.length;){var s=i.pop();if(s){var o=K.join2(e,s);try{te.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,n,r,i)=>{var s=K.join2("string"==typeof e?e:te.getPath(e),t),o=te.getMode(r,i);return te.create(s,o)},createDataFile:(e,t,n,r,i,s)=>{var o=t;e&&(e="string"==typeof e?e:te.getPath(e),o=t?K.join2(e,t):e);var a=te.getMode(r,i),l=te.create(o,a);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,f=n.length;u<f;++u)c[u]=n.charCodeAt(u);n=c}te.chmod(l,146|a);var p=te.open(l,577);te.write(p,n,0,n.length,0,s),te.close(p),te.chmod(l,a)}return l},createDevice:(e,t,n,r)=>{var i=K.join2("string"==typeof e?e:te.getPath(e),t),s=te.getMode(!!n,!!r);te.createDevice.major||(te.createDevice.major=64);var o=te.makedev(te.createDevice.major++,0);return te.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,i,s)=>{for(var o=0,a=0;a<i;a++){var l;try{l=n()}catch(e){throw new te.ErrnoError(29)}if(void 0===l&&0===o)throw new te.ErrnoError(6);if(null==l)break;o++,t[r+a]=l}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,n,i,s)=>{for(var o=0;o<i;o++)try{r(t[n+o])}catch(e){throw new te.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),te.mkdev(i,s,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!f)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=J(f(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new te.ErrnoError(29)}},createLazyFile:(e,t,n,r,i)=>{function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,s=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;i||(o=r);var a=this;a.setDataGetter((e=>{var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,r-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):J(i.responseText||"",!0)})(t,i)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!s&&r||(o=r=1,r=this.getter(0).length,o=r,g("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new s;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:n};var l=te.createFile(e,t,a,r,i);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var c={};function f(e,t,n,r,i){var s=e.node.contents;if(i>=s.length)return 0;var o=Math.min(s.length-i,r);if(s.slice)for(var a=0;a<o;a++)t[n+a]=s[i+a];else for(a=0;a<o;a++)t[n+a]=s.get(i+a);return o}return Object.keys(l.stream_ops).forEach((e=>{var t=l.stream_ops[e];c[e]=function(){return te.forceLoadFile(l),t.apply(null,arguments)}})),c.read=(e,t,n,r,i)=>(te.forceLoadFile(l),f(e,t,n,r,i)),c.mmap=(e,t,n,r,i)=>{te.forceLoadFile(l);var s=X(t);if(!s)throw new te.ErrnoError(48);return f(e,b,s,t,n),{ptr:s,allocated:!0}},l.stream_ops=c,l},createPreloadedFile:(e,t,n,r,i,s,o,a,l,c)=>{var u=t?G.resolve(K.join2(e,t)):e;function f(n){function f(n){c&&c(),a||te.createDataFile(e,t,n,r,i,l),s&&s(),H()}Browser.handledByPreloadPlugin(n,u,f,(()=>{o&&o(),H()}))||f(n)}z(),"string"==typeof n?ee(n,(e=>f(e)),o):f(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=te.indexedDB();try{var i=r.open(te.DB_NAME(),te.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=()=>{g("creating db"),i.result.createObjectStore(te.DB_STORE_NAME)},i.onsuccess=()=>{var r=i.result.transaction([te.DB_STORE_NAME],"readwrite"),s=r.objectStore(te.DB_STORE_NAME),o=0,a=0,l=e.length;function c(){0==a?t():n()}e.forEach((e=>{var t=s.put(te.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+a==l&&c()},t.onerror=()=>{a++,o+a==l&&c()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=te.indexedDB();try{var i=r.open(te.DB_NAME(),te.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=()=>{var r=i.result;try{var s=r.transaction([te.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var o=s.objectStore(te.DB_STORE_NAME),a=0,l=0,c=e.length;function u(){0==l?t():n()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{te.analyzePath(e).exists&&te.unlink(e),te.createDataFile(K.dirname(e),K.basename(e),t.result,!0,!0,!0),++a+l==c&&u()},t.onerror=()=>{l++,a+l==c&&u()}})),s.onerror=n},i.onerror=n}},ne={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(K.isAbs(t))return t;var r;if(r=-100===e?te.cwd():ne.getStreamFromFD(e).path,0==t.length){if(!n)throw new te.ErrnoError(44);return r}return K.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&K.normalize(t)!==K.normalize(te.getPath(e.node)))return-54;throw e}k[n>>2]=r.dev,k[n+8>>2]=r.ino,k[n+12>>2]=r.mode,x[n+16>>2]=r.nlink,k[n+20>>2]=r.uid,k[n+24>>2]=r.gid,k[n+28>>2]=r.rdev,j=[r.size>>>0,(N=r.size,+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[n+40>>2]=j[0],k[n+44>>2]=j[1],k[n+48>>2]=4096,k[n+52>>2]=r.blocks;var i=r.atime.getTime(),s=r.mtime.getTime(),o=r.ctime.getTime();return j=[Math.floor(i/1e3)>>>0,(N=Math.floor(i/1e3),+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[n+56>>2]=j[0],k[n+60>>2]=j[1],x[n+64>>2]=i%1e3*1e3,j=[Math.floor(s/1e3)>>>0,(N=Math.floor(s/1e3),+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[n+72>>2]=j[0],k[n+76>>2]=j[1],x[n+80>>2]=s%1e3*1e3,j=[Math.floor(o/1e3)>>>0,(N=Math.floor(o/1e3),+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[n+88>>2]=j[0],k[n+92>>2]=j[1],x[n+96>>2]=o%1e3*1e3,j=[r.ino>>>0,(N=r.ino,+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[n+104>>2]=j[0],k[n+108>>2]=j[1],0},doMsync:function(e,t,n,r,i){if(!te.isFile(t.node.mode))throw new te.ErrnoError(43);if(2&r)return 0;var s=w.slice(e,e+n);te.msync(t,s,i,n,r)},varargs:void 0,get:function(){return ne.varargs+=4,k[ne.varargs-4>>2]},getStr:function(e){return function(e,t){return e?S(w,e,t):""}(e)},getStreamFromFD:function(e){var t=te.getStream(e);if(!t)throw new te.ErrnoError(8);return t}};function re(e){return e<-9007199254740992||e>9007199254740992?NaN:Number(e)}function ie(e){return x[e>>2]+4294967296*k[e+4>>2]}var se,oe=[0,31,60,91,121,152,182,213,244,274,305,335],ae=[0,31,59,90,120,151,181,212,243,273,304,334];function le(e){var t=C(e)+1,n=ge(t);return n&&A(e,b,n,t),n}function ce(e){var t=_.buffer;try{return _.grow(e-t.byteLength+65535>>>16),O(),1}catch(e){}}se=()=>performance.now();var ue={};function fe(){if(!fe.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in ue)void 0===ue[t]?delete e[t]:e[t]=ue[t];var n=[];for(var t in e)n.push(t+"="+e[t]);fe.strings=n}return fe.strings}var pe=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=te.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},de=365,he=146;Object.defineProperties(pe.prototype,{read:{get:function(){return(this.mode&de)===de},set:function(e){e?this.mode|=de:this.mode&=-366}},write:{get:function(){return(this.mode&he)===he},set:function(e){e?this.mode|=he:this.mode&=-147}},isFolder:{get:function(){return te.isDir(this.mode)}},isDevice:{get:function(){return te.isChrdev(this.mode)}}}),te.FSNode=pe,te.staticInit();var me={__syscall_chmod:function(e,t){try{return e=ne.getStr(e),te.chmod(e,t),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_faccessat:function(e,t,n,r){try{if(t=ne.getStr(t),t=ne.calculateAt(e,t),-8&n)return-28;var i=te.lookupPath(t,{follow:!0}).node;if(!i)return-44;var s="";return 4&n&&(s+="r"),2&n&&(s+="w"),1&n&&(s+="x"),s&&te.nodePermissions(i,s)?-2:0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_fchmod:function(e,t){try{return te.fchmod(e,t),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_fchown32:function(e,t,n){try{return te.fchown(e,t,n),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_fcntl64:function(e,t,n){ne.varargs=n;try{var r=ne.getStreamFromFD(e);switch(t){case 0:return(i=ne.get())<0?-28:te.createStream(r,i).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var i=ne.get();return r.flags|=i,0;case 5:return i=ne.get(),q[i+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return s=28,k[_e()>>2]=s,-1;default:return-28}}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}var s},__syscall_fstat64:function(e,t){try{var n=ne.getStreamFromFD(e);return ne.doStat(te.stat,n.path,t)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_ftruncate64:function(e,t){try{return t=re(t),isNaN(t)?-61:(te.ftruncate(e,t),0)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_getcwd:function(e,t){try{if(0===t)return-28;var n=te.cwd(),r=C(n)+1;return t<r?-68:(I(n,e,t),r)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_ioctl:function(e,t,n){ne.varargs=n;try{var r=ne.getStreamFromFD(e);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=ne.get();return k[i>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=ne.get(),te.ioctl(r,t,i);case 21523:case 21524:return r.tty?0:-59;default:return-28}}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_lstat64:function(e,t){try{return e=ne.getStr(e),ne.doStat(te.lstat,e,t)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_mkdirat:function(e,t,n){try{return t=ne.getStr(t),t=ne.calculateAt(e,t),"/"===(t=K.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),te.mkdir(t,n,0),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_newfstatat:function(e,t,n,r){try{t=ne.getStr(t);var i=256&r,s=4096&r;return r&=-6401,t=ne.calculateAt(e,t,s),ne.doStat(i?te.lstat:te.stat,t,n)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_openat:function(e,t,n,r){ne.varargs=r;try{t=ne.getStr(t),t=ne.calculateAt(e,t);var i=r?ne.get():0;return te.open(t,n,i).fd}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_readlinkat:function(e,t,n,r){try{if(t=ne.getStr(t),t=ne.calculateAt(e,t),r<=0)return-28;var i=te.readlink(t),s=Math.min(r,C(i)),o=b[n+s];return I(i,n,r+1),b[n+s]=o,s}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_rmdir:function(e){try{return e=ne.getStr(e),te.rmdir(e),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_stat64:function(e,t){try{return e=ne.getStr(e),ne.doStat(te.stat,e,t)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_unlinkat:function(e,t,n){try{return t=ne.getStr(t),t=ne.calculateAt(e,t),0===n?te.unlink(t):512===n?te.rmdir(t):U("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},__syscall_utimensat:function(e,t,n,r){try{if(t=ne.getStr(t),t=ne.calculateAt(e,t,!0),n){var i=ie(n),s=k[n+8>>2];o=1e3*i+s/1e6,a=1e3*(i=ie(n+=16))+(s=k[n+8>>2])/1e6}else var o=Date.now(),a=o;return te.utime(t,o,a),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},_emscripten_get_now_is_monotonic:function(){return!0},_localtime_js:function(e,t){var n=new Date(1e3*ie(e));k[t>>2]=n.getSeconds(),k[t+4>>2]=n.getMinutes(),k[t+8>>2]=n.getHours(),k[t+12>>2]=n.getDate(),k[t+16>>2]=n.getMonth(),k[t+20>>2]=n.getFullYear()-1900,k[t+24>>2]=n.getDay();var r=0|function(e){var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?ae:oe)[e.getMonth()]+e.getDate()-1}(n);k[t+28>>2]=r,k[t+36>>2]=-60*n.getTimezoneOffset();var i=new Date(n.getFullYear(),0,1),s=new Date(n.getFullYear(),6,1).getTimezoneOffset(),o=i.getTimezoneOffset(),a=0|(s!=o&&n.getTimezoneOffset()==Math.min(o,s));k[t+32>>2]=a},_mmap_js:function(e,t,n,r,i,s,o){try{var a=ne.getStreamFromFD(r),l=te.mmap(a,e,i,t,n),c=l.ptr;return k[s>>2]=l.allocated,x[o>>2]=c,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},_munmap_js:function(e,t,n,r,i,s){try{var o=ne.getStreamFromFD(i);2&n&&ne.doMsync(e,o,t,r,s),te.munmap(o)}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},_tzset_js:function(e,t,n){var r=(new Date).getFullYear(),i=new Date(r,0,1),s=new Date(r,6,1),o=i.getTimezoneOffset(),a=s.getTimezoneOffset(),l=Math.max(o,a);function c(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}x[e>>2]=60*l,k[t>>2]=Number(o!=a);var u=c(i),f=c(s),p=le(u),d=le(f);a<o?(x[n>>2]=p,x[n+4>>2]=d):(x[n>>2]=d,x[n+4>>2]=p)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:se,emscripten_resize_heap:function(e){var t,n,r=w.length,i=2147483648;if((e>>>=0)>i)return!1;for(var s=1;s<=4;s*=2){var o=r*(1+.2/s);if(o=Math.min(o,e+100663296),ce(Math.min(i,(t=Math.max(e,o))+((n=65536)-t%n)%n)))return!0}return!1},environ_get:function(e,t){var n=0;return fe().forEach((function(r,i){var s=t+n;x[e+4*i>>2]=s,function(e,t,n){for(var r=0;r<e.length;++r)b[t++>>0]=e.charCodeAt(r);n||(b[t>>0]=0)}(r,s),n+=r.length+1})),0},environ_sizes_get:function(e,t){var n=fe();x[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),x[t>>2]=r,0},fd_close:function(e){try{var t=ne.getStreamFromFD(e);return te.close(t),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},fd_fdstat_get:function(e,t){try{var n=ne.getStreamFromFD(e),r=n.tty?2:te.isDir(n.mode)?3:te.isLink(n.mode)?7:4;return b[t>>0]=r,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},fd_read:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=x[t>>2],a=x[t+4>>2];t+=8;var l=te.read(e,b,o,a,r);if(l<0)return-1;if(i+=l,l<a)break;void 0!==r&&(r+=l)}return i}(ne.getStreamFromFD(e),t,n);return x[r>>2]=i,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},fd_seek:function(e,t,n,r){try{if(t=re(t),isNaN(t))return 61;var i=ne.getStreamFromFD(e);return te.llseek(i,t,n),j=[i.position>>>0,(N=i.position,+Math.abs(N)>=1?N>0?(0|Math.min(+Math.floor(N/4294967296),4294967295))>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[r>>2]=j[0],k[r+4>>2]=j[1],i.getdents&&0===t&&0===n&&(i.getdents=null),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},fd_sync:function(e){try{var t=ne.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},fd_write:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=x[t>>2],a=x[t+4>>2];t+=8;var l=te.write(e,b,o,a,r);if(l<0)return-1;i+=l,void 0!==r&&(r+=l)}return i}(ne.getStreamFromFD(e),t,n);return x[r>>2]=i,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},memory:_};!function(){var e={env:me,wasi_snapshot_preview1:me};function t(e,t){var n,r=e.exports;i.asm=r,i.asm.__indirect_function_table,n=i.asm.__wasm_call_ctors,D.unshift(n),H()}function r(e){t(e.instance)}function s(t){return(m||!c&&!u||"function"!=typeof fetch?Promise.resolve().then((function(){return V(P)})):fetch(P,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+P+"'";return e.arrayBuffer()})).catch((function(){return V(P)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){y("failed to asynchronously prepare wasm: "+e),U(e)}))}if(z(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){y("Module.instantiateWasm callback failed with error: "+e),n(e)}(m||"function"!=typeof WebAssembly.instantiateStreaming||W(P)||"function"!=typeof fetch?s(r):fetch(P,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),s(r)}))}))).catch(n)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._sqlite3_status64=function(){return(i._sqlite3_status64=i.asm.sqlite3_status64).apply(null,arguments)},i._sqlite3_status=function(){return(i._sqlite3_status=i.asm.sqlite3_status).apply(null,arguments)},i._sqlite3_db_status=function(){return(i._sqlite3_db_status=i.asm.sqlite3_db_status).apply(null,arguments)},i._sqlite3_msize=function(){return(i._sqlite3_msize=i.asm.sqlite3_msize).apply(null,arguments)},i._sqlite3_vfs_find=function(){return(i._sqlite3_vfs_find=i.asm.sqlite3_vfs_find).apply(null,arguments)},i._sqlite3_initialize=function(){return(i._sqlite3_initialize=i.asm.sqlite3_initialize).apply(null,arguments)},i._sqlite3_malloc=function(){return(i._sqlite3_malloc=i.asm.sqlite3_malloc).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.sqlite3_free).apply(null,arguments)},i._sqlite3_vfs_register=function(){return(i._sqlite3_vfs_register=i.asm.sqlite3_vfs_register).apply(null,arguments)},i._sqlite3_vfs_unregister=function(){return(i._sqlite3_vfs_unregister=i.asm.sqlite3_vfs_unregister).apply(null,arguments)},i._sqlite3_malloc64=function(){return(i._sqlite3_malloc64=i.asm.sqlite3_malloc64).apply(null,arguments)},i._sqlite3_realloc=function(){return(i._sqlite3_realloc=i.asm.sqlite3_realloc).apply(null,arguments)},i._sqlite3_realloc64=function(){return(i._sqlite3_realloc64=i.asm.sqlite3_realloc64).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.sqlite3_value_text).apply(null,arguments)},i._sqlite3_randomness=function(){return(i._sqlite3_randomness=i.asm.sqlite3_randomness).apply(null,arguments)},i._sqlite3_stricmp=function(){return(i._sqlite3_stricmp=i.asm.sqlite3_stricmp).apply(null,arguments)},i._sqlite3_strnicmp=function(){return(i._sqlite3_strnicmp=i.asm.sqlite3_strnicmp).apply(null,arguments)},i._sqlite3_uri_parameter=function(){return(i._sqlite3_uri_parameter=i.asm.sqlite3_uri_parameter).apply(null,arguments)};var _e=i.___errno_location=function(){return(_e=i.___errno_location=i.asm.__errno_location).apply(null,arguments)};i._sqlite3_uri_boolean=function(){return(i._sqlite3_uri_boolean=i.asm.sqlite3_uri_boolean).apply(null,arguments)},i._sqlite3_serialize=function(){return(i._sqlite3_serialize=i.asm.sqlite3_serialize).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.sqlite3_prepare_v2).apply(null,arguments)},i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.sqlite3_step).apply(null,arguments)},i._sqlite3_column_int64=function(){return(i._sqlite3_column_int64=i.asm.sqlite3_column_int64).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.sqlite3_reset).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.sqlite3_exec).apply(null,arguments)},i._sqlite3_column_int=function(){return(i._sqlite3_column_int=i.asm.sqlite3_column_int).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.sqlite3_finalize).apply(null,arguments)},i._sqlite3_file_control=function(){return(i._sqlite3_file_control=i.asm.sqlite3_file_control).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.sqlite3_column_name).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.sqlite3_column_text).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.sqlite3_column_type).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.sqlite3_errmsg).apply(null,arguments)},i._sqlite3_deserialize=function(){return(i._sqlite3_deserialize=i.asm.sqlite3_deserialize).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.sqlite3_clear_bindings).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.sqlite3_value_blob).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.sqlite3_value_bytes).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.sqlite3_value_double).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.sqlite3_value_int).apply(null,arguments)},i._sqlite3_value_int64=function(){return(i._sqlite3_value_int64=i.asm.sqlite3_value_int64).apply(null,arguments)},i._sqlite3_value_subtype=function(){return(i._sqlite3_value_subtype=i.asm.sqlite3_value_subtype).apply(null,arguments)},i._sqlite3_value_pointer=function(){return(i._sqlite3_value_pointer=i.asm.sqlite3_value_pointer).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.sqlite3_value_type).apply(null,arguments)},i._sqlite3_value_nochange=function(){return(i._sqlite3_value_nochange=i.asm.sqlite3_value_nochange).apply(null,arguments)},i._sqlite3_value_frombind=function(){return(i._sqlite3_value_frombind=i.asm.sqlite3_value_frombind).apply(null,arguments)},i._sqlite3_value_dup=function(){return(i._sqlite3_value_dup=i.asm.sqlite3_value_dup).apply(null,arguments)},i._sqlite3_value_free=function(){return(i._sqlite3_value_free=i.asm.sqlite3_value_free).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm.sqlite3_result_blob).apply(null,arguments)},i._sqlite3_result_error_toobig=function(){return(i._sqlite3_result_error_toobig=i.asm.sqlite3_result_error_toobig).apply(null,arguments)},i._sqlite3_result_error_nomem=function(){return(i._sqlite3_result_error_nomem=i.asm.sqlite3_result_error_nomem).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.sqlite3_result_double).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm.sqlite3_result_error).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.sqlite3_result_int).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.sqlite3_result_int64).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.sqlite3_result_null).apply(null,arguments)},i._sqlite3_result_pointer=function(){return(i._sqlite3_result_pointer=i.asm.sqlite3_result_pointer).apply(null,arguments)},i._sqlite3_result_subtype=function(){return(i._sqlite3_result_subtype=i.asm.sqlite3_result_subtype).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.sqlite3_result_text).apply(null,arguments)},i._sqlite3_result_zeroblob=function(){return(i._sqlite3_result_zeroblob=i.asm.sqlite3_result_zeroblob).apply(null,arguments)},i._sqlite3_result_zeroblob64=function(){return(i._sqlite3_result_zeroblob64=i.asm.sqlite3_result_zeroblob64).apply(null,arguments)},i._sqlite3_result_error_code=function(){return(i._sqlite3_result_error_code=i.asm.sqlite3_result_error_code).apply(null,arguments)},i._sqlite3_user_data=function(){return(i._sqlite3_user_data=i.asm.sqlite3_user_data).apply(null,arguments)},i._sqlite3_context_db_handle=function(){return(i._sqlite3_context_db_handle=i.asm.sqlite3_context_db_handle).apply(null,arguments)},i._sqlite3_vtab_nochange=function(){return(i._sqlite3_vtab_nochange=i.asm.sqlite3_vtab_nochange).apply(null,arguments)},i._sqlite3_vtab_in_first=function(){return(i._sqlite3_vtab_in_first=i.asm.sqlite3_vtab_in_first).apply(null,arguments)},i._sqlite3_vtab_in_next=function(){return(i._sqlite3_vtab_in_next=i.asm.sqlite3_vtab_in_next).apply(null,arguments)},i._sqlite3_aggregate_context=function(){return(i._sqlite3_aggregate_context=i.asm.sqlite3_aggregate_context).apply(null,arguments)},i._sqlite3_get_auxdata=function(){return(i._sqlite3_get_auxdata=i.asm.sqlite3_get_auxdata).apply(null,arguments)},i._sqlite3_set_auxdata=function(){return(i._sqlite3_set_auxdata=i.asm.sqlite3_set_auxdata).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.sqlite3_column_count).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.sqlite3_data_count).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.sqlite3_column_blob).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.sqlite3_column_bytes).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.sqlite3_column_double).apply(null,arguments)},i._sqlite3_column_value=function(){return(i._sqlite3_column_value=i.asm.sqlite3_column_value).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.sqlite3_bind_blob).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.sqlite3_bind_double).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.sqlite3_bind_int).apply(null,arguments)},i._sqlite3_bind_int64=function(){return(i._sqlite3_bind_int64=i.asm.sqlite3_bind_int64).apply(null,arguments)},i._sqlite3_bind_null=function(){return(i._sqlite3_bind_null=i.asm.sqlite3_bind_null).apply(null,arguments)},i._sqlite3_bind_pointer=function(){return(i._sqlite3_bind_pointer=i.asm.sqlite3_bind_pointer).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.sqlite3_bind_text).apply(null,arguments)},i._sqlite3_bind_parameter_count=function(){return(i._sqlite3_bind_parameter_count=i.asm.sqlite3_bind_parameter_count).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.sqlite3_bind_parameter_index).apply(null,arguments)},i._sqlite3_db_handle=function(){return(i._sqlite3_db_handle=i.asm.sqlite3_db_handle).apply(null,arguments)},i._sqlite3_stmt_readonly=function(){return(i._sqlite3_stmt_readonly=i.asm.sqlite3_stmt_readonly).apply(null,arguments)},i._sqlite3_stmt_isexplain=function(){return(i._sqlite3_stmt_isexplain=i.asm.sqlite3_stmt_isexplain).apply(null,arguments)},i._sqlite3_stmt_status=function(){return(i._sqlite3_stmt_status=i.asm.sqlite3_stmt_status).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.sqlite3_sql).apply(null,arguments)},i._sqlite3_expanded_sql=function(){return(i._sqlite3_expanded_sql=i.asm.sqlite3_expanded_sql).apply(null,arguments)},i._sqlite3_preupdate_old=function(){return(i._sqlite3_preupdate_old=i.asm.sqlite3_preupdate_old).apply(null,arguments)},i._sqlite3_preupdate_count=function(){return(i._sqlite3_preupdate_count=i.asm.sqlite3_preupdate_count).apply(null,arguments)},i._sqlite3_preupdate_depth=function(){return(i._sqlite3_preupdate_depth=i.asm.sqlite3_preupdate_depth).apply(null,arguments)},i._sqlite3_preupdate_blobwrite=function(){return(i._sqlite3_preupdate_blobwrite=i.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},i._sqlite3_preupdate_new=function(){return(i._sqlite3_preupdate_new=i.asm.sqlite3_preupdate_new).apply(null,arguments)},i._sqlite3_value_numeric_type=function(){return(i._sqlite3_value_numeric_type=i.asm.sqlite3_value_numeric_type).apply(null,arguments)},i._sqlite3_set_authorizer=function(){return(i._sqlite3_set_authorizer=i.asm.sqlite3_set_authorizer).apply(null,arguments)},i._sqlite3_strglob=function(){return(i._sqlite3_strglob=i.asm.sqlite3_strglob).apply(null,arguments)},i._sqlite3_strlike=function(){return(i._sqlite3_strlike=i.asm.sqlite3_strlike).apply(null,arguments)},i._sqlite3_auto_extension=function(){return(i._sqlite3_auto_extension=i.asm.sqlite3_auto_extension).apply(null,arguments)},i._sqlite3_cancel_auto_extension=function(){return(i._sqlite3_cancel_auto_extension=i.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},i._sqlite3_reset_auto_extension=function(){return(i._sqlite3_reset_auto_extension=i.asm.sqlite3_reset_auto_extension).apply(null,arguments)},i._sqlite3_prepare_v3=function(){return(i._sqlite3_prepare_v3=i.asm.sqlite3_prepare_v3).apply(null,arguments)},i._sqlite3_create_module=function(){return(i._sqlite3_create_module=i.asm.sqlite3_create_module).apply(null,arguments)},i._sqlite3_create_module_v2=function(){return(i._sqlite3_create_module_v2=i.asm.sqlite3_create_module_v2).apply(null,arguments)},i._sqlite3_drop_modules=function(){return(i._sqlite3_drop_modules=i.asm.sqlite3_drop_modules).apply(null,arguments)},i._sqlite3_declare_vtab=function(){return(i._sqlite3_declare_vtab=i.asm.sqlite3_declare_vtab).apply(null,arguments)},i._sqlite3_vtab_on_conflict=function(){return(i._sqlite3_vtab_on_conflict=i.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},i._sqlite3_vtab_collation=function(){return(i._sqlite3_vtab_collation=i.asm.sqlite3_vtab_collation).apply(null,arguments)},i._sqlite3_vtab_in=function(){return(i._sqlite3_vtab_in=i.asm.sqlite3_vtab_in).apply(null,arguments)},i._sqlite3_vtab_rhs_value=function(){return(i._sqlite3_vtab_rhs_value=i.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},i._sqlite3_vtab_distinct=function(){return(i._sqlite3_vtab_distinct=i.asm.sqlite3_vtab_distinct).apply(null,arguments)},i._sqlite3_keyword_name=function(){return(i._sqlite3_keyword_name=i.asm.sqlite3_keyword_name).apply(null,arguments)},i._sqlite3_keyword_count=function(){return(i._sqlite3_keyword_count=i.asm.sqlite3_keyword_count).apply(null,arguments)},i._sqlite3_keyword_check=function(){return(i._sqlite3_keyword_check=i.asm.sqlite3_keyword_check).apply(null,arguments)},i._sqlite3_complete=function(){return(i._sqlite3_complete=i.asm.sqlite3_complete).apply(null,arguments)},i._sqlite3_libversion=function(){return(i._sqlite3_libversion=i.asm.sqlite3_libversion).apply(null,arguments)},i._sqlite3_libversion_number=function(){return(i._sqlite3_libversion_number=i.asm.sqlite3_libversion_number).apply(null,arguments)},i._sqlite3_shutdown=function(){return(i._sqlite3_shutdown=i.asm.sqlite3_shutdown).apply(null,arguments)},i._sqlite3_last_insert_rowid=function(){return(i._sqlite3_last_insert_rowid=i.asm.sqlite3_last_insert_rowid).apply(null,arguments)},i._sqlite3_set_last_insert_rowid=function(){return(i._sqlite3_set_last_insert_rowid=i.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},i._sqlite3_changes64=function(){return(i._sqlite3_changes64=i.asm.sqlite3_changes64).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.sqlite3_changes).apply(null,arguments)},i._sqlite3_total_changes64=function(){return(i._sqlite3_total_changes64=i.asm.sqlite3_total_changes64).apply(null,arguments)},i._sqlite3_total_changes=function(){return(i._sqlite3_total_changes=i.asm.sqlite3_total_changes).apply(null,arguments)},i._sqlite3_txn_state=function(){return(i._sqlite3_txn_state=i.asm.sqlite3_txn_state).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.sqlite3_close_v2).apply(null,arguments)},i._sqlite3_busy_handler=function(){return(i._sqlite3_busy_handler=i.asm.sqlite3_busy_handler).apply(null,arguments)},i._sqlite3_progress_handler=function(){return(i._sqlite3_progress_handler=i.asm.sqlite3_progress_handler).apply(null,arguments)},i._sqlite3_busy_timeout=function(){return(i._sqlite3_busy_timeout=i.asm.sqlite3_busy_timeout).apply(null,arguments)},i._sqlite3_create_function=function(){return(i._sqlite3_create_function=i.asm.sqlite3_create_function).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.sqlite3_create_function_v2).apply(null,arguments)},i._sqlite3_create_window_function=function(){return(i._sqlite3_create_window_function=i.asm.sqlite3_create_window_function).apply(null,arguments)},i._sqlite3_overload_function=function(){return(i._sqlite3_overload_function=i.asm.sqlite3_overload_function).apply(null,arguments)},i._sqlite3_trace_v2=function(){return(i._sqlite3_trace_v2=i.asm.sqlite3_trace_v2).apply(null,arguments)},i._sqlite3_commit_hook=function(){return(i._sqlite3_commit_hook=i.asm.sqlite3_commit_hook).apply(null,arguments)},i._sqlite3_update_hook=function(){return(i._sqlite3_update_hook=i.asm.sqlite3_update_hook).apply(null,arguments)},i._sqlite3_rollback_hook=function(){return(i._sqlite3_rollback_hook=i.asm.sqlite3_rollback_hook).apply(null,arguments)},i._sqlite3_preupdate_hook=function(){return(i._sqlite3_preupdate_hook=i.asm.sqlite3_preupdate_hook).apply(null,arguments)},i._sqlite3_error_offset=function(){return(i._sqlite3_error_offset=i.asm.sqlite3_error_offset).apply(null,arguments)},i._sqlite3_errcode=function(){return(i._sqlite3_errcode=i.asm.sqlite3_errcode).apply(null,arguments)},i._sqlite3_extended_errcode=function(){return(i._sqlite3_extended_errcode=i.asm.sqlite3_extended_errcode).apply(null,arguments)},i._sqlite3_errstr=function(){return(i._sqlite3_errstr=i.asm.sqlite3_errstr).apply(null,arguments)},i._sqlite3_limit=function(){return(i._sqlite3_limit=i.asm.sqlite3_limit).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.sqlite3_open).apply(null,arguments)},i._sqlite3_open_v2=function(){return(i._sqlite3_open_v2=i.asm.sqlite3_open_v2).apply(null,arguments)},i._sqlite3_create_collation=function(){return(i._sqlite3_create_collation=i.asm.sqlite3_create_collation).apply(null,arguments)},i._sqlite3_create_collation_v2=function(){return(i._sqlite3_create_collation_v2=i.asm.sqlite3_create_collation_v2).apply(null,arguments)},i._sqlite3_collation_needed=function(){return(i._sqlite3_collation_needed=i.asm.sqlite3_collation_needed).apply(null,arguments)},i._sqlite3_get_autocommit=function(){return(i._sqlite3_get_autocommit=i.asm.sqlite3_get_autocommit).apply(null,arguments)},i._sqlite3_table_column_metadata=function(){return(i._sqlite3_table_column_metadata=i.asm.sqlite3_table_column_metadata).apply(null,arguments)},i._sqlite3_extended_result_codes=function(){return(i._sqlite3_extended_result_codes=i.asm.sqlite3_extended_result_codes).apply(null,arguments)},i._sqlite3_uri_key=function(){return(i._sqlite3_uri_key=i.asm.sqlite3_uri_key).apply(null,arguments)},i._sqlite3_uri_int64=function(){return(i._sqlite3_uri_int64=i.asm.sqlite3_uri_int64).apply(null,arguments)},i._sqlite3_db_name=function(){return(i._sqlite3_db_name=i.asm.sqlite3_db_name).apply(null,arguments)},i._sqlite3_db_filename=function(){return(i._sqlite3_db_filename=i.asm.sqlite3_db_filename).apply(null,arguments)},i._sqlite3_compileoption_used=function(){return(i._sqlite3_compileoption_used=i.asm.sqlite3_compileoption_used).apply(null,arguments)},i._sqlite3_compileoption_get=function(){return(i._sqlite3_compileoption_get=i.asm.sqlite3_compileoption_get).apply(null,arguments)},i._sqlite3session_diff=function(){return(i._sqlite3session_diff=i.asm.sqlite3session_diff).apply(null,arguments)},i._sqlite3session_attach=function(){return(i._sqlite3session_attach=i.asm.sqlite3session_attach).apply(null,arguments)},i._sqlite3session_create=function(){return(i._sqlite3session_create=i.asm.sqlite3session_create).apply(null,arguments)},i._sqlite3session_delete=function(){return(i._sqlite3session_delete=i.asm.sqlite3session_delete).apply(null,arguments)},i._sqlite3session_table_filter=function(){return(i._sqlite3session_table_filter=i.asm.sqlite3session_table_filter).apply(null,arguments)},i._sqlite3session_changeset=function(){return(i._sqlite3session_changeset=i.asm.sqlite3session_changeset).apply(null,arguments)},i._sqlite3session_changeset_strm=function(){return(i._sqlite3session_changeset_strm=i.asm.sqlite3session_changeset_strm).apply(null,arguments)},i._sqlite3session_patchset_strm=function(){return(i._sqlite3session_patchset_strm=i.asm.sqlite3session_patchset_strm).apply(null,arguments)},i._sqlite3session_patchset=function(){return(i._sqlite3session_patchset=i.asm.sqlite3session_patchset).apply(null,arguments)},i._sqlite3session_enable=function(){return(i._sqlite3session_enable=i.asm.sqlite3session_enable).apply(null,arguments)},i._sqlite3session_indirect=function(){return(i._sqlite3session_indirect=i.asm.sqlite3session_indirect).apply(null,arguments)},i._sqlite3session_isempty=function(){return(i._sqlite3session_isempty=i.asm.sqlite3session_isempty).apply(null,arguments)},i._sqlite3session_memory_used=function(){return(i._sqlite3session_memory_used=i.asm.sqlite3session_memory_used).apply(null,arguments)},i._sqlite3session_object_config=function(){return(i._sqlite3session_object_config=i.asm.sqlite3session_object_config).apply(null,arguments)},i._sqlite3session_changeset_size=function(){return(i._sqlite3session_changeset_size=i.asm.sqlite3session_changeset_size).apply(null,arguments)},i._sqlite3changeset_start=function(){return(i._sqlite3changeset_start=i.asm.sqlite3changeset_start).apply(null,arguments)},i._sqlite3changeset_start_v2=function(){return(i._sqlite3changeset_start_v2=i.asm.sqlite3changeset_start_v2).apply(null,arguments)},i._sqlite3changeset_start_strm=function(){return(i._sqlite3changeset_start_strm=i.asm.sqlite3changeset_start_strm).apply(null,arguments)},i._sqlite3changeset_start_v2_strm=function(){return(i._sqlite3changeset_start_v2_strm=i.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},i._sqlite3changeset_next=function(){return(i._sqlite3changeset_next=i.asm.sqlite3changeset_next).apply(null,arguments)},i._sqlite3changeset_op=function(){return(i._sqlite3changeset_op=i.asm.sqlite3changeset_op).apply(null,arguments)},i._sqlite3changeset_pk=function(){return(i._sqlite3changeset_pk=i.asm.sqlite3changeset_pk).apply(null,arguments)},i._sqlite3changeset_old=function(){return(i._sqlite3changeset_old=i.asm.sqlite3changeset_old).apply(null,arguments)},i._sqlite3changeset_new=function(){return(i._sqlite3changeset_new=i.asm.sqlite3changeset_new).apply(null,arguments)},i._sqlite3changeset_conflict=function(){return(i._sqlite3changeset_conflict=i.asm.sqlite3changeset_conflict).apply(null,arguments)},i._sqlite3changeset_fk_conflicts=function(){return(i._sqlite3changeset_fk_conflicts=i.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},i._sqlite3changeset_finalize=function(){return(i._sqlite3changeset_finalize=i.asm.sqlite3changeset_finalize).apply(null,arguments)},i._sqlite3changeset_invert=function(){return(i._sqlite3changeset_invert=i.asm.sqlite3changeset_invert).apply(null,arguments)},i._sqlite3changeset_invert_strm=function(){return(i._sqlite3changeset_invert_strm=i.asm.sqlite3changeset_invert_strm).apply(null,arguments)},i._sqlite3changeset_apply_v2=function(){return(i._sqlite3changeset_apply_v2=i.asm.sqlite3changeset_apply_v2).apply(null,arguments)},i._sqlite3changeset_apply=function(){return(i._sqlite3changeset_apply=i.asm.sqlite3changeset_apply).apply(null,arguments)},i._sqlite3changeset_apply_v2_strm=function(){return(i._sqlite3changeset_apply_v2_strm=i.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},i._sqlite3changeset_apply_strm=function(){return(i._sqlite3changeset_apply_strm=i.asm.sqlite3changeset_apply_strm).apply(null,arguments)},i._sqlite3changegroup_new=function(){return(i._sqlite3changegroup_new=i.asm.sqlite3changegroup_new).apply(null,arguments)},i._sqlite3changegroup_add=function(){return(i._sqlite3changegroup_add=i.asm.sqlite3changegroup_add).apply(null,arguments)},i._sqlite3changegroup_output=function(){return(i._sqlite3changegroup_output=i.asm.sqlite3changegroup_output).apply(null,arguments)},i._sqlite3changegroup_add_strm=function(){return(i._sqlite3changegroup_add_strm=i.asm.sqlite3changegroup_add_strm).apply(null,arguments)},i._sqlite3changegroup_output_strm=function(){return(i._sqlite3changegroup_output_strm=i.asm.sqlite3changegroup_output_strm).apply(null,arguments)},i._sqlite3changegroup_delete=function(){return(i._sqlite3changegroup_delete=i.asm.sqlite3changegroup_delete).apply(null,arguments)},i._sqlite3changeset_concat=function(){return(i._sqlite3changeset_concat=i.asm.sqlite3changeset_concat).apply(null,arguments)},i._sqlite3changeset_concat_strm=function(){return(i._sqlite3changeset_concat_strm=i.asm.sqlite3changeset_concat_strm).apply(null,arguments)},i._sqlite3session_config=function(){return(i._sqlite3session_config=i.asm.sqlite3session_config).apply(null,arguments)},i._sqlite3_sourceid=function(){return(i._sqlite3_sourceid=i.asm.sqlite3_sourceid).apply(null,arguments)},i._sqlite3_wasm_pstack_ptr=function(){return(i._sqlite3_wasm_pstack_ptr=i.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},i._sqlite3_wasm_pstack_restore=function(){return(i._sqlite3_wasm_pstack_restore=i.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},i._sqlite3_wasm_pstack_alloc=function(){return(i._sqlite3_wasm_pstack_alloc=i.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},i._sqlite3_wasm_pstack_remaining=function(){return(i._sqlite3_wasm_pstack_remaining=i.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},i._sqlite3_wasm_pstack_quota=function(){return(i._sqlite3_wasm_pstack_quota=i.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},i._sqlite3_wasm_db_error=function(){return(i._sqlite3_wasm_db_error=i.asm.sqlite3_wasm_db_error).apply(null,arguments)},i._sqlite3_wasm_test_struct=function(){return(i._sqlite3_wasm_test_struct=i.asm.sqlite3_wasm_test_struct).apply(null,arguments)},i._sqlite3_wasm_enum_json=function(){return(i._sqlite3_wasm_enum_json=i.asm.sqlite3_wasm_enum_json).apply(null,arguments)},i._sqlite3_wasm_vfs_unlink=function(){return(i._sqlite3_wasm_vfs_unlink=i.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},i._sqlite3_wasm_db_vfs=function(){return(i._sqlite3_wasm_db_vfs=i.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},i._sqlite3_wasm_db_reset=function(){return(i._sqlite3_wasm_db_reset=i.asm.sqlite3_wasm_db_reset).apply(null,arguments)},i._sqlite3_wasm_db_export_chunked=function(){return(i._sqlite3_wasm_db_export_chunked=i.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},i._sqlite3_wasm_db_serialize=function(){return(i._sqlite3_wasm_db_serialize=i.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},i._sqlite3_wasm_vfs_create_file=function(){return(i._sqlite3_wasm_vfs_create_file=i.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},i._sqlite3_wasm_posix_create_file=function(){return(i._sqlite3_wasm_posix_create_file=i.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},i._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(i._sqlite3_wasm_kvvfsMakeKeyOnPstack=i.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},i._sqlite3_wasm_kvvfs_methods=function(){return(i._sqlite3_wasm_kvvfs_methods=i.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},i._sqlite3_wasm_vtab_config=function(){return(i._sqlite3_wasm_vtab_config=i.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},i._sqlite3_wasm_db_config_ip=function(){return(i._sqlite3_wasm_db_config_ip=i.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},i._sqlite3_wasm_db_config_pii=function(){return(i._sqlite3_wasm_db_config_pii=i.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},i._sqlite3_wasm_db_config_s=function(){return(i._sqlite3_wasm_db_config_s=i.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},i._sqlite3_wasm_config_i=function(){return(i._sqlite3_wasm_config_i=i.asm.sqlite3_wasm_config_i).apply(null,arguments)},i._sqlite3_wasm_config_ii=function(){return(i._sqlite3_wasm_config_ii=i.asm.sqlite3_wasm_config_ii).apply(null,arguments)},i._sqlite3_wasm_config_j=function(){return(i._sqlite3_wasm_config_j=i.asm.sqlite3_wasm_config_j).apply(null,arguments)},i._sqlite3_wasm_init_wasmfs=function(){return(i._sqlite3_wasm_init_wasmfs=i.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},i._sqlite3_wasm_test_intptr=function(){return(i._sqlite3_wasm_test_intptr=i.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},i._sqlite3_wasm_test_voidptr=function(){return(i._sqlite3_wasm_test_voidptr=i.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},i._sqlite3_wasm_test_int64_max=function(){return(i._sqlite3_wasm_test_int64_max=i.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},i._sqlite3_wasm_test_int64_min=function(){return(i._sqlite3_wasm_test_int64_min=i.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},i._sqlite3_wasm_test_int64_times2=function(){return(i._sqlite3_wasm_test_int64_times2=i.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},i._sqlite3_wasm_test_int64_minmax=function(){return(i._sqlite3_wasm_test_int64_minmax=i.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},i._sqlite3_wasm_test_int64ptr=function(){return(i._sqlite3_wasm_test_int64ptr=i.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},i._sqlite3_wasm_test_stack_overflow=function(){return(i._sqlite3_wasm_test_stack_overflow=i.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},i._sqlite3_wasm_test_str_hello=function(){return(i._sqlite3_wasm_test_str_hello=i.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)},i._sqlite3_wasm_SQLTester_strglob=function(){return(i._sqlite3_wasm_SQLTester_strglob=i.asm.sqlite3_wasm_SQLTester_strglob).apply(null,arguments)};var ge=i._malloc=function(){return(ge=i._malloc=i.asm.malloc).apply(null,arguments)};i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i._realloc=function(){return(i._realloc=i.asm.realloc).apply(null,arguments)};var ye,ve=i._emscripten_builtin_memalign=function(){return(ve=i._emscripten_builtin_memalign=i.asm.emscripten_builtin_memalign).apply(null,arguments)};function be(e){function n(){ye||(ye=!0,i.calledRun=!0,E||(i.noFSInit||te.init.initialized||te.init(),te.ignorePermissions=!1,Q(D),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),R.unshift(e);var e;Q(R)}()))}M>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),L.unshift(e);var e;Q(L)}(),M>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),n()}),1)):n()))}if(i.stackSave=function(){return(i.stackSave=i.asm.stackSave).apply(null,arguments)},i.stackRestore=function(){return(i.stackRestore=i.asm.stackRestore).apply(null,arguments)},i.stackAlloc=function(){return(i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)},i.wasmMemory=_,B=function e(){ye||be(),ye||(B=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return be(),i.postRun||(i.postRun=[]),i.postRun.push((function(e){if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:void 0!==e?!!e.HEAPU64:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach((e=>{"function"==typeof r[e]&&(r[e]=r[e]())}));const i=Object.create(null),s=Object.create(null),o=e=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(e)||"Unknown result code #"+e;class a extends Error{constructor(...e){let t;if(e.length)if("number"==typeof(n=e[0])&&n===(0|n))if(t=e[0],1===e.length)super(o(e[0]));else{const n=o(t);"object"==typeof e[1]?super(n,e[1]):(e[0]=n+":",super(e.join(" ")))}else 2===e.length&&"object"==typeof e[1]?super(...e):super(e.join(" "));var n;this.resultCode=t||i.SQLITE_ERROR,this.name="SQLite3Error"}}a.toss=(...e)=>{throw new a(...e)};const l=a.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&l("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const c=e=>"bigint"!=typeof e&&!!(e===(0|e)&&e<=2147483647&&e>=-2147483648),u="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,f=e=>e.buffer instanceof u,p=(e,t,n)=>f(e)?e.slice(t,n):e.subarray(t,n),d=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),h=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),m=e=>d(e)||l("Value is not of a supported TypedArray type."),_=new TextDecoder("utf-8"),g=function(e,t,n){return _.decode(p(e,t,n))},y=function(e){return h(e)?g(e instanceof ArrayBuffer?new Uint8Array(e):e):Array.isArray(e)?e.join(""):(s.isPtr(e)&&(e=s.cstrToJs(e)),e)};class b extends Error{constructor(...e){2===e.length&&"object"==typeof e[1]?super(...e):e.length?super(e.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}b.toss=(...e)=>{throw new b(...e)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(e,t,n,r,i,s,o,a,l)=>{},sqlite3_create_function:(e,t,n,r,i,s,o,a)=>{},sqlite3_create_window_function:(e,t,n,r,i,s,o,a,l,c)=>{},sqlite3_prepare_v3:(e,t,n,r,i,s)=>{},sqlite3_prepare_v2:(e,t,n,r,i)=>{},sqlite3_exec:(e,t,n,r,i)=>{},sqlite3_randomness:(e,t)=>{}});const w={affirmBindableTypedArray:m,flexibleString:y,bigIntFits32:e=>e>=-0x7fffffffn-1n&&e<=0x7fffffffn,bigIntFits64:function e(t){return e._max||(e._max=BigInt("0x7fffffffffffffff"),e._min=~e._max),t>=e._min&&t<=e._max},bigIntFitsDouble:function e(t){return e._min||(e._min=Number.MIN_SAFE_INTEGER,e._max=Number.MAX_SAFE_INTEGER),t>=e._min&&t<=e._max},isBindableTypedArray:d,isInt32:c,isSQLableTypedArray:h,isTypedArray:e=>!!(e&&e.constructor&&c(e.constructor.BYTES_PER_ELEMENT))&&e,typedArrayToString:g,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:f,toss:function(...e){throw new Error(e.join(" "))},toss3:l,typedArrayPart:p,affirmDbHeader:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t="SQLite format 3";t.length>e.byteLength&&l("Input does not contain an SQLite3 database header.");for(let n=0;n<t.length;++n)t.charCodeAt(n)!==e[n]&&l("Input does not contain an SQLite3 database header.")},affirmIsDb:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=e.byteLength;(t<512||t%512!=0)&&l("Byte array size",t,"is invalid for an SQLite3 db."),w.affirmDbHeader(e)}};Object.assign(s,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||l("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||l("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),s.allocFromTypedArray=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e)),m(e);const t=s.alloc(e.byteLength||1);return s.heapForSize(e.constructor).set(e.byteLength?e:[0],t),t};{const e=r.allocExportName,t=r.deallocExportName,n=r.reallocExportName;for(const r of[e,t,n])s.exports[r]instanceof Function||l("Missing required exports[",r,"] function.");s.alloc=function e(t){return e.impl(t)||b.toss("Failed to allocate",t," bytes.")},s.alloc.impl=s.exports[e],s.realloc=function e(t,n){const r=e.impl(t,n);return n?r||b.toss("Failed to reallocate",n," bytes."):0},s.realloc.impl=s.exports[n],s.dealloc=s.exports[t]}let q;if(s.compileOptionUsed=function e(t){if(!arguments.length){if(e._result)return e._result;e._opt||(e._rx=/^([^=]+)=(.+)/,e._rxInt=/^-?\d+$/,e._opt=function(t,n){const r=e._rx.exec(t);n[0]=r?r[1]:t,n[1]=!r||(e._rxInt.test(r[2])?+r[2]:r[2])});const t={},n=[0,0];let r,s=0;for(;r=i.sqlite3_compileoption_get(s++);)e._opt(r,n),t[n[0]]=n[1];return e._result=t}if(Array.isArray(t)){const e={};return t.forEach((t=>{e[t]=i.sqlite3_compileoption_used(t)})),e}return"object"==typeof t?(Object.keys(t).forEach((e=>{t[e]=i.sqlite3_compileoption_used(e)})),t):"string"==typeof t&&!!i.sqlite3_compileoption_used(t)},s.pstack=Object.assign(Object.create(null),{restore:s.exports.sqlite3_wasm_pstack_restore,alloc:function(e){return"string"!=typeof e||(e=s.sizeofIR(e))||b.toss("Invalid value for pstack.alloc(",arguments[0],")"),s.exports.sqlite3_wasm_pstack_alloc(e)||b.toss("Could not allocate",e,"bytes from the pstack.")},allocChunks:function(e,t){"string"!=typeof t||(t=s.sizeofIR(t))||b.toss("Invalid size value for allocChunks(",arguments[1],")");const n=s.pstack.alloc(e*t),r=[];let i=0,o=0;for(;i<e;++i,o+=t)r.push(n+o);return r},allocPtr:(e=1,t=!0)=>1===e?s.pstack.alloc(t?8:s.ptrSizeof):s.pstack.allocChunks(e,t?8:s.ptrSizeof),call:function(e){const t=s.pstack.pointer;try{return e(x)}finally{s.pstack.restore(t)}}}),Object.defineProperties(s.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3_wasm_pstack_remaining}}),i.sqlite3_randomness=(...e)=>{if(1===e.length&&w.isTypedArray(e[0])&&1===e[0].BYTES_PER_ELEMENT){const t=e[0];if(0===t.byteLength)return s.exports.sqlite3_randomness(0,0),t;const n=s.pstack.pointer;try{let e=t.byteLength,r=0;const i=s.exports.sqlite3_randomness,o=s.heap8u(),a=e<512?e:512,l=s.pstack.alloc(a);do{const n=e>a?a:e;i(n,l),t.set(p(o,l,l+n),r),e-=n,r+=n}while(e>0)}catch(e){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",e)}finally{s.pstack.restore(n)}return t}s.exports.sqlite3_randomness(...e)},i.sqlite3_wasmfs_opfs_dir=function(){if(void 0!==q)return q;const e=r.wasmfsOpfsDir;if(!(e&&globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle))return q="";try{return q=e&&0===s.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],e)?e:""}catch(e){return q=""}},i.sqlite3_wasmfs_filename_is_persistent=function(e){const t=i.sqlite3_wasmfs_opfs_dir();return!(!t||!e)&&e.startsWith(t+"/")},i.sqlite3_js_db_uses_vfs=function(e,t,n=0){try{const r=i.sqlite3_vfs_find(t);return!!r&&(e?r===i.sqlite3_js_db_vfs(e,n)&&r:r===i.sqlite3_vfs_find(0)&&r)}catch(e){return!1}},i.sqlite3_js_vfs_list=function(){const e=[];let t=i.sqlite3_vfs_find(0);for(;t;){const n=new i.sqlite3_vfs(t);e.push(s.cstrToJs(n.$zName)),t=n.$pNext,n.dispose()}return e},i.sqlite3_js_db_export=function(e,t=0){(e=s.xWrap.testConvertArg("sqlite3*",e))||l("Invalid sqlite3* argument."),s.bigIntEnabled||l("BigInt64 support is not enabled.");const n=s.scopedAllocPush();let r;try{const i=s.scopedAlloc(8+s.ptrSizeof),o=i+8,a=t?s.isPtr(t)?t:s.scopedAllocCString(""+t):0;let c=s.exports.sqlite3_wasm_db_serialize(e,a,o,i,0);c&&l("Database serialization failed with code",x.capi.sqlite3_js_rc_str(c)),r=s.peekPtr(o);const u=s.peek(i,"i64");return c=u?s.heap8u().slice(r,r+Number(u)):new Uint8Array,c}finally{r&&s.exports.sqlite3_free(r),s.scopedAllocPop(n)}},i.sqlite3_js_db_vfs=(e,t=0)=>s.sqlite3_wasm_db_vfs(e,t),i.sqlite3_js_aggregate_context=(e,t)=>i.sqlite3_aggregate_context(e,t)||(t?b.toss("Cannot allocate",t,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(e,t,n){let r;t&&s.isPtr(t)?r=t:t instanceof ArrayBuffer||t instanceof Uint8Array?(r=s.allocFromTypedArray(t),(arguments.length<3||!w.isInt32(n)||n<0)&&(n=t.byteLength)):a.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!w.isInt32(n)||n<0)&&a.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const t=s.sqlite3_wasm_posix_create_file(e,r,n);t&&a.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(t))}finally{s.dealloc(r)}},i.sqlite3_js_vfs_create_file=function(e,t,n,o){let l;r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options."),n?(s.isPtr(n)?l=n:n instanceof ArrayBuffer&&(n=new Uint8Array(n)),n instanceof Uint8Array?(l=s.allocFromTypedArray(n),(arguments.length<4||!w.isInt32(o)||o<0)&&(o=n.byteLength)):a.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):l=0,(!w.isInt32(o)||o<0)&&(s.dealloc(l),a.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const n=s.sqlite3_wasm_vfs_create_file(e,t,l,o);n&&a.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(n))}finally{s.dealloc(l)}},i.sqlite3_js_sql_to_string=e=>{if("string"==typeof e)return e;const t=y(v);return t===v?void 0:t},w.isUIThread()){const e=function(e){const t=Object.create(null);return t.prefix="kvvfs-"+e,t.stores=[],"session"!==e&&""!==e||t.stores.push(globalThis.sessionStorage),"local"!==e&&""!==e||t.stores.push(globalThis.localStorage),t};i.sqlite3_js_kvvfs_clear=function(t=""){let n=0;const r=e(t);return r.stores.forEach((e=>{const t=[];let i;for(i=0;i<e.length;++i){const n=e.key(i);n.startsWith(r.prefix)&&t.push(n)}t.forEach((t=>e.removeItem(t))),n+=t.length})),n},i.sqlite3_js_kvvfs_size=function(t=""){let n=0;const r=e(t);return r.stores.forEach((e=>{let t;for(t=0;t<e.length;++t){const i=e.key(t);i.startsWith(r.prefix)&&(n+=i.length,n+=e.getItem(i).length)}})),2*n}}i.sqlite3_db_config=function(e,t,...n){switch(this.s||(this.s=s.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=s.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=s.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),t){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(e,t,n[0],n[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(e,t,n[0],n[1],n[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(e,t,n[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(e,t=!0){let n;const r=i.sqlite3_value_type(e);switch(r){case i.SQLITE_INTEGER:s.bigIntEnabled?(n=i.sqlite3_value_int64(e),w.bigIntFitsDouble(n)&&(n=Number(n))):n=i.sqlite3_value_double(e);break;case i.SQLITE_FLOAT:n=i.sqlite3_value_double(e);break;case i.SQLITE_TEXT:n=i.sqlite3_value_text(e);break;case i.SQLITE_BLOB:{const t=i.sqlite3_value_bytes(e),r=i.sqlite3_value_blob(e);t&&!r&&x.WasmAllocError.toss("Cannot allocate memory for blob argument of",t,"byte(s)"),n=t?s.heap8u().slice(r,r+Number(t)):null;break}case i.SQLITE_NULL:n=null;break;default:t&&l(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",r),n=void 0}return n},i.sqlite3_values_to_js=function(e,t,n=!0){let r;const o=[];for(r=0;r<e;++r)o.push(i.sqlite3_value_to_js(s.peekPtr(t+s.ptrSizeof*r),n));return o},i.sqlite3_result_error_js=function(e,t){t instanceof b?i.sqlite3_result_error_nomem(e):i.sqlite3_result_error(e,""+t,-1)},i.sqlite3_result_js=function(e,t){if(t instanceof Error)i.sqlite3_result_error_js(e,t);else try{switch(typeof t){case"undefined":break;case"boolean":i.sqlite3_result_int(e,t?1:0);break;case"bigint":w.bigIntFits32(t)?i.sqlite3_result_int(e,Number(t)):w.bigIntFitsDouble(t)?i.sqlite3_result_double(e,Number(t)):s.bigIntEnabled?w.bigIntFits64(t)?i.sqlite3_result_int64(e,t):l("BigInt value",t.toString(),"is too BigInt for int64."):l("BigInt value",t.toString(),"is too BigInt.");break;case"number":{let n;n=w.isInt32(t)?i.sqlite3_result_int:s.bigIntEnabled&&Number.isInteger(t)&&w.bigIntFits64(BigInt(t))?i.sqlite3_result_int64:i.sqlite3_result_double,n(e,t);break}case"string":{const[n,r]=s.allocCString(t,!0);i.sqlite3_result_text(e,n,r,i.SQLITE_WASM_DEALLOC);break}case"object":if(null===t){i.sqlite3_result_null(e);break}if(w.isBindableTypedArray(t)){const n=s.allocFromTypedArray(t);i.sqlite3_result_blob(e,n,t.byteLength,i.SQLITE_WASM_DEALLOC);break}default:l("Don't not how to handle this UDF result value:",typeof t,t)}}catch(t){i.sqlite3_result_error_js(e,t)}},i.sqlite3_column_js=function(e,t,n=!0){const r=i.sqlite3_column_value(e,t);return 0===r?void 0:i.sqlite3_value_to_js(r,n)};const k=function(e,t,n){n=i[n],this.ptr?s.pokePtr(this.ptr,0):this.ptr=s.allocPtr();const r=n(e,t,this.ptr);if(r)return a.toss(r,arguments[2]+"() failed with code "+r);const o=s.peekPtr(this.ptr);return o?i.sqlite3_value_to_js(o,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(e,t)=>k(e,t,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(e,t)=>k(e,t,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(e,t)=>k(e,t,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(e,t)=>k(e,t,"sqlite3changeset_old");const x={WasmAllocError:b,SQLite3Error:a,capi:i,util:w,wasm:s,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function e(){if(e.isReady instanceof Promise)return e.isReady;let n=t.initializersAsync;delete t.initializersAsync;const i=async()=>(x.__isUnderTest||(delete x.util,delete x.StructBinder),x),s=e=>{throw r.error("an async sqlite3 initializer failed:",e),e};if(!n||!n.length)return e.isReady=i().catch(s);n=n.map((e=>e instanceof Function?async t=>e(x):e)),n.push(i);let o=Promise.resolve(x);for(;n.length;)o=o.then(n.shift());return e.isReady=o.catch(s)},scriptInfo:void 0};try{t.initializers.forEach((e=>{e(x)}))}catch(e){throw console.error("sqlite3 bootstrap initializer threw:",e),e}return delete t.initializers,t.sqlite3=x,x},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){void 0===e.bigIntEnabled&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const t=(...e)=>{throw new Error(e.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const n=e.pointerIR||"i32",r=e.ptrSizeof="i32"===n?4:"i64"===n?8:t("Unhandled ptrSizeof:",n),i=Object.create(null);i.heapSize=0,i.memory=null,i.freeFuncIndexes=[],i.scopedAlloc=[],i.utf8Decoder=new TextDecoder,i.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=e=>{switch(e){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return r;default:return(""+e).endsWith("*")?r:void 0}};const s=function(){if(i.memory){if(i.heapSize===i.memory.buffer.byteLength)return i}else i.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;const t=i.memory.buffer;return i.HEAP8=new Int8Array(t),i.HEAP8U=new Uint8Array(t),i.HEAP16=new Int16Array(t),i.HEAP16U=new Uint16Array(t),i.HEAP32=new Int32Array(t),i.HEAP32U=new Uint32Array(t),e.bigIntEnabled&&(i.HEAP64=new BigInt64Array(t),i.HEAP64U=new BigUint64Array(t)),i.HEAP32F=new Float32Array(t),i.HEAP64F=new Float64Array(t),i.heapSize=t.byteLength,i};e.heap8=()=>s().HEAP8,e.heap8u=()=>s().HEAP8U,e.heap16=()=>s().HEAP16,e.heap16u=()=>s().HEAP16U,e.heap32=()=>s().HEAP32,e.heap32u=()=>s().HEAP32U,e.heapForSize=function(n,r=!0){const o=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:s();switch(n){case Int8Array:return o.HEAP8;case Uint8Array:return o.HEAP8U;case Int16Array:return o.HEAP16;case Uint16Array:return o.HEAP16U;case Int32Array:return o.HEAP32;case Uint32Array:return o.HEAP32U;case 8:return r?o.HEAP8U:o.HEAP8;case 16:return r?o.HEAP16U:o.HEAP16;case 32:return r?o.HEAP32U:o.HEAP32;case 64:if(o.HEAP64)return r?o.HEAP64U:o.HEAP64;break;default:if(e.bigIntEnabled){if(n===globalThis.BigUint64Array)return o.HEAP64U;if(n===globalThis.BigInt64Array)return o.HEAP64;break}}t("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(t){const n=e.functionTable();return t<n.length?n.get(t):void 0},e.jsFuncToWasm=function e(n,r){if(e._||(e._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(e,t,n){n<128?e[t](n):e[t](n%128|128,n>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(t){const n=e._.rxJSig.exec(t);return n?n[2]:t.substr(1)},letterType:n=>e._.sigTypes[n]||t("Invalid signature letter:",n),pushSigType:(t,n)=>t.push(e._.typeCodes[e._.letterType(n)])}),"string"==typeof n){const e=r;r=n,n=e}const i=e._.sigParams(r),s=[1,96];e._.uleb128Encode(s,"push",i.length);for(const t of i)e._.pushSigType(s,t);return"v"===r[0]?s.push(0):(s.push(1),e._.pushSigType(s,r[0])),e._.uleb128Encode(s,"unshift",s.length),s.unshift(0,97,115,109,1,0,0,0,1),s.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(s)),{e:{f:n}}).exports.f};const o=function(n,r,s){if(s&&!i.scopedAlloc.length&&t("No scopedAllocPush() scope is active."),"string"==typeof n){const e=r;r=n,n=e}"string"==typeof r&&n instanceof Function||t("Invalid arguments: expecting (function,signature) or (signature,function).");const o=e.functionTable(),a=o.length;let l;for(;i.freeFuncIndexes.length&&(l=i.freeFuncIndexes.pop(),o.get(l));)l=null;l||(l=a,o.grow(1));try{return o.set(l,n),s&&i.scopedAlloc[i.scopedAlloc.length-1].push(l),l}catch(e){if(!(e instanceof TypeError))throw l===a&&i.freeFuncIndexes.push(a),e}try{const t=e.jsFuncToWasm(n,r);o.set(l,t),s&&i.scopedAlloc[i.scopedAlloc.length-1].push(l)}catch(e){throw l===a&&i.freeFuncIndexes.push(a),e}return l};e.installFunction=(e,t)=>o(e,t,!1),e.scopedInstallFunction=(e,t)=>o(e,t,!0),e.uninstallFunction=function(t){if(!t&&0!==t)return;const n=i.freeFuncIndexes,r=e.functionTable();n.push(t);const s=r.get(t);return r.set(t,null),s},e.peek=function(r,o="i8"){o.endsWith("*")&&(o=n);const a=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:s(),l=Array.isArray(r)?[]:void 0;let c;do{switch(l&&(r=arguments[0].shift()),o){case"i1":case"i8":c=a.HEAP8[r>>0];break;case"i16":c=a.HEAP16[r>>1];break;case"i32":c=a.HEAP32[r>>2];break;case"float":case"f32":c=a.HEAP32F[r>>2];break;case"double":case"f64":c=Number(a.HEAP64F[r>>3]);break;case"i64":if(e.bigIntEnabled){c=BigInt(a.HEAP64[r>>3]);break}default:t("Invalid type for peek():",o)}l&&l.push(c)}while(l&&arguments[0].length);return l||c},e.poke=function(e,r,o="i8"){o.endsWith("*")&&(o=n);const a=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:s();for(const n of Array.isArray(e)?e:[e])switch(o){case"i1":case"i8":a.HEAP8[n>>0]=r;continue;case"i16":a.HEAP16[n>>1]=r;continue;case"i32":a.HEAP32[n>>2]=r;continue;case"float":case"f32":a.HEAP32F[n>>2]=r;continue;case"double":case"f64":a.HEAP64F[n>>3]=r;continue;case"i64":if(a.HEAP64){a.HEAP64[n>>3]=BigInt(r);continue}default:t("Invalid type for poke(): "+o)}return this},e.peekPtr=(...t)=>e.peek(1===t.length?t[0]:t,n),e.pokePtr=(t,r=0)=>e.poke(t,r,n),e.peek8=(...t)=>e.peek(1===t.length?t[0]:t,"i8"),e.poke8=(t,n)=>e.poke(t,n,"i8"),e.peek16=(...t)=>e.peek(1===t.length?t[0]:t,"i16"),e.poke16=(t,n)=>e.poke(t,n,"i16"),e.peek32=(...t)=>e.peek(1===t.length?t[0]:t,"i32"),e.poke32=(t,n)=>e.poke(t,n,"i32"),e.peek64=(...t)=>e.peek(1===t.length?t[0]:t,"i64"),e.poke64=(t,n)=>e.poke(t,n,"i64"),e.peek32f=(...t)=>e.peek(1===t.length?t[0]:t,"f32"),e.poke32f=(t,n)=>e.poke(t,n,"f32"),e.peek64f=(...t)=>e.peek(1===t.length?t[0]:t,"f64"),e.poke64f=(t,n)=>e.poke(t,n,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=e=>"number"==typeof e&&e===(0|e)&&e>=0,e.isPtr=e.isPtr32,e.cstrlen=function(t){if(!t||!e.isPtr(t))return null;const n=s().HEAP8U;let r=t;for(;0!==n[r];++r);return r-t};const a="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;e.cstrToJs=function(t){const n=e.cstrlen(t);return n?(r=s().HEAP8U,o=t,l=t+n,i.utf8Decoder.decode(r.buffer instanceof a?r.slice(o,l):r.subarray(o,l))):null===n?n:"";var r,o,l},e.jstrlen=function(e){if("string"!=typeof e)return null;const t=e.length;let n=0;for(let r=0;r<t;++r){let t=e.charCodeAt(r);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++r)),t<=127?++n:n+=t<=2047?2:t<=65535?3:4}return n},e.jstrcpy=function(e,n,r=0,i=-1,s=!0){if(n&&(n instanceof Int8Array||n instanceof Uint8Array)||t("jstrcpy() target must be an Int8Array or Uint8Array."),i<0&&(i=n.length-r),!(i>0&&r>=0))return 0;let o=0,a=e.length;const l=r,c=r+i-(s?1:0);for(;o<a&&r<c;++o){let t=e.charCodeAt(o);if(t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++o)),t<=127){if(r>=c)break;n[r++]=t}else if(t<=2047){if(r+1>=c)break;n[r++]=192|t>>6,n[r++]=128|63&t}else if(t<=65535){if(r+2>=c)break;n[r++]=224|t>>12,n[r++]=128|t>>6&63,n[r++]=128|63&t}else{if(r+3>=c)break;n[r++]=240|t>>18,n[r++]=128|t>>12&63,n[r++]=128|t>>6&63,n[r++]=128|63&t}}return s&&(n[r++]=0),r-l},e.cstrncpy=function(n,r,i){if(n&&r||t("cstrncpy() does not accept NULL strings."),i<0)i=e.cstrlen(strPtr)+1;else if(!(i>0))return 0;const s=e.heap8u();let o,a=0;for(;a<i&&(o=s[r+a]);++a)s[n+a]=o;return a<i&&(s[n+a++]=0),a},e.jstrToUintArray=(e,t=!1)=>i.utf8Encoder.encode(t?e+"\0":e);const l=(e,n)=>{e.alloc instanceof Function&&e.dealloc instanceof Function||t("Object is missing alloc() and/or dealloc() function(s)","required by",n+"().")},c=function(t,n,r,o){if(l(e,o),"string"!=typeof t)return null;{const e=i.utf8Encoder.encode(t),o=r(e.length+1),a=s().HEAP8U;return a.set(e,o),a[o+e.length]=0,n?[o,e.length]:o}};e.allocCString=(t,n=!1)=>c(t,n,e.alloc,"allocCString()"),e.scopedAllocPush=function(){l(e,"scopedAllocPush");const t=[];return i.scopedAlloc.push(t),t},e.scopedAllocPop=function(n){l(e,"scopedAllocPop");const r=arguments.length?i.scopedAlloc.indexOf(n):i.scopedAlloc.length-1;r<0&&t("Invalid state object for scopedAllocPop()."),0===arguments.length&&(n=i.scopedAlloc[r]),i.scopedAlloc.splice(r,1);for(let t;t=n.pop();)e.functionEntry(t)?e.uninstallFunction(t):e.dealloc(t)},e.scopedAlloc=function(n){i.scopedAlloc.length||t("No scopedAllocPush() scope is active.");const r=e.alloc(n);return i.scopedAlloc[i.scopedAlloc.length-1].push(r),r},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>i.scopedAlloc.length,set:()=>t("The 'active' property is read-only.")}),e.scopedAllocCString=(t,n=!1)=>c(t,n,e.scopedAlloc,"scopedAllocCString()");const u=function(t,n){const r=e[t?"scopedAlloc":"alloc"]((n.length+1)*e.ptrSizeof);let i=0;return n.forEach((n=>{e.pokePtr(r+e.ptrSizeof*i++,e[t?"scopedAllocCString":"allocCString"](""+n))})),e.pokePtr(r+e.ptrSizeof*i,0),r};e.scopedAllocMainArgv=e=>u(!0,e),e.allocMainArgv=e=>u(!1,e),e.cArgvToJs=(t,n)=>{const r=[];for(let i=0;i<t;++i){const t=e.peekPtr(n+e.ptrSizeof*i);r.push(t?e.cstrToJs(t):null)}return r},e.scopedAllocCall=function(t){e.scopedAllocPush();try{return t()}finally{e.scopedAllocPop()}};const f=function(t,i,s){l(e,s);const o=i?"i64":n;let a=e[s](t*(i?8:r));if(e.poke(a,0,o),1===t)return a;const c=[a];for(let n=1;n<t;++n)a+=i?8:r,c[n]=a,e.poke(a,0,o);return c};e.allocPtr=(e=1,t=!0)=>f(e,t,"alloc"),e.scopedAllocPtr=(e=1,t=!0)=>f(e,t,"scopedAlloc"),e.xGet=function(n){return e.exports[n]||t("Cannot find exported symbol:",n)};const p=(e,n)=>t(e+"() requires",n,"argument(s).");e.xCall=function(n,...r){const i=e.xGet(n);return i instanceof Function||t("Exported symbol",n,"is not a function."),i.length!==r.length&&p(n,i.length),2===arguments.length&&Array.isArray(arguments[1])?i.apply(null,arguments[1]):i.apply(null,r)},i.xWrap=Object.create(null),i.xWrap.convert=Object.create(null),i.xWrap.convert.arg=new Map,i.xWrap.convert.result=new Map;const d=i.xWrap.convert.arg,h=i.xWrap.convert.result;e.bigIntEnabled&&d.set("i64",(e=>BigInt(e)));const m="i32"===n?e=>0|e:e=>BigInt(e)|BigInt(0);d.set("i32",m).set("i16",(e=>65535&(0|e))).set("i8",(e=>255&(0|e))).set("f32",(e=>Number(e).valueOf())).set("float",d.get("f32")).set("f64",d.get("f32")).set("double",d.get("f64")).set("int",d.get("i32")).set("null",(e=>e)).set(null,d.get("null")).set("**",m).set("*",m),h.set("*",m).set("pointer",m).set("number",(e=>Number(e))).set("void",(e=>{})).set("null",(e=>e)).set(null,h.get("null"));{const r=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&r.push("i64");const i=d.get(n);for(const e of r)d.set(e+"*",i),h.set(e+"*",i),h.set(e,d.get(e)||t("Missing arg converter:",e))}const _=function(t){return"string"==typeof t?e.scopedAllocCString(t):t?m(t):null};d.set("string",_).set("utf8",_).set("pointer",_),h.set("string",(t=>e.cstrToJs(t))).set("utf8",h.get("string")).set("string:dealloc",(t=>{try{return t?e.cstrToJs(t):null}finally{e.dealloc(t)}})).set("utf8:dealloc",h.get("string:dealloc")).set("json",(t=>JSON.parse(e.cstrToJs(t)))).set("json:dealloc",(t=>{try{return t?JSON.parse(e.cstrToJs(t)):null}finally{e.dealloc(t)}}));const g=class{constructor(e){this.name=e.name||"unnamed adapter"}convertArg(e,n,r){t("AbstractArgAdapter must be subclassed.")}};d.FuncPtrAdapter=class n extends g{constructor(e){super(e),d.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",e),this.name=e.name||"unnamed",this.signature=e.signature,e.contextKey instanceof Function&&(this.contextKey=e.contextKey,e.bindScope||(e.bindScope="context")),this.bindScope=e.bindScope||t("FuncPtrAdapter options requires a bindScope (explicit or implied)."),n.bindScopes.indexOf(e.bindScope)<0&&t("Invalid options.bindScope ("+e.bindMod+") for FuncPtrAdapter. Expecting one of: ("+n.bindScopes.join(", ")+")"),this.isTransient="transient"===this.bindScope,this.isContext="context"===this.bindScope,this.isPermanent="permanent"===this.bindScope,this.singleton="singleton"===this.bindScope?[]:void 0,this.callProxy=e.callProxy instanceof Function?e.callProxy:void 0}contextKey(e,t){return this}contextMap(e){const t=this.__cmap||(this.__cmap=new Map);let n=t.get(e);return void 0===n&&t.set(e,n=[]),n}convertArg(t,r,s){let a=this.singleton;if(!a&&this.isContext&&(a=this.contextMap(this.contextKey(r,s))),a&&a[0]===t)return a[1];if(t instanceof Function){this.callProxy&&(t=this.callProxy(t));const e=o(t,this.signature,this.isTransient);if(n.debugFuncInstall&&n.debugOut("FuncPtrAdapter installed",this,this.contextKey(r,s),"@"+e,t),a){if(a[1]){n.debugFuncInstall&&n.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(r,s),"@"+a[1],t);try{i.scopedAlloc[i.scopedAlloc.length-1].push(a[1])}catch(e){}}a[0]=t,a[1]=e}return e}if(e.isPtr(t)||null==t){if(a&&a[1]&&a[1]!==t){n.debugFuncInstall&&n.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(r,s),"@"+a[1],t);try{i.scopedAlloc[i.scopedAlloc.length-1].push(a[1])}catch(e){}a[0]=a[1]=0|t}return t||0}throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},d.FuncPtrAdapter.warnOnUse=!1,d.FuncPtrAdapter.debugFuncInstall=!1,d.FuncPtrAdapter.debugOut=console.debug.bind(console),d.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const y=e=>d.get(e)||t("Argument adapter not found:",e),v=e=>h.get(e)||t("Result adapter not found:",e);i.xWrap.convertArg=(e,...t)=>y(e)(...t),i.xWrap.convertArgNoCheck=(e,...t)=>d.get(e)(...t),i.xWrap.convertResult=(e,t)=>null===e?t:e?v(e)(t):void 0,i.xWrap.convertResultNoCheck=(e,t)=>null===e?t:e?h.get(e)(t):void 0,e.xWrap=function(n,r,...s){3===arguments.length&&Array.isArray(arguments[2])&&(s=arguments[2]),e.isPtr(n)&&(n=e.functionEntry(n)||t("Function pointer not found in WASM function table."));const o=n instanceof Function,a=o?n:e.xGet(n);if(o&&(n=a.name||"unnamed function"),s.length!==a.length&&p(n,a.length),null===r&&0===a.length)return a;null!=r&&v(r);for(const e of s)e instanceof g?d.set(e,((...t)=>e.convertArg(...t))):y(e);const l=i.xWrap;return 0===a.length?(...e)=>e.length?p(n,a.length):l.convertResult(r,a.call(null)):function(...t){t.length!==a.length&&p(n,a.length);const i=e.scopedAllocPush();try{for(const e in t)t[e]=l.convertArgNoCheck(s[e],t[e],t,e);return l.convertResultNoCheck(r,a.apply(null,t))}finally{e.scopedAllocPop(i)}}};const b=function(e,n,r,i,s,o){if("string"==typeof r){if(1===n)return o.get(r);if(2===n)return i?(i instanceof Function||t(s,"requires a function argument."),o.set(r,i),e):(o.get(r),e)}t("Invalid arguments to",s)};return e.xWrap.resultAdapter=function e(t,n){return b(e,arguments.length,t,n,"resultAdapter()",h)},e.xWrap.argAdapter=function e(t,n){return b(e,arguments.length,t,n,"argAdapter()",d)},e.xWrap.FuncPtrAdapter=d.FuncPtrAdapter,e.xCallWrapped=function(t,n,r,...i){return Array.isArray(arguments[3])&&(i=arguments[3]),e.xWrap(t,n,r||[]).apply(null,i||[])},e.xWrap.testConvertArg=i.xWrap.convertArg,e.xWrap.testConvertResult=i.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const t=()=>fetch(e.uri,{credentials:"same-origin"}),n=this,r=function(t){if(e.wasmUtilTarget){const r=(...e)=>{throw new Error(e.join(" "))},i=e.wasmUtilTarget;if(i.module=t.module,i.instance=t.instance,i.instance.exports.memory||(i.memory=e.imports&&e.imports.env&&e.imports.env.memory||r("Missing 'memory' object!")),!i.alloc&&t.instance.exports.malloc){const e=t.instance.exports;i.alloc=function(t){return e.malloc(t)||r("Allocation of",t,"bytes failed.")},i.dealloc=function(t){e.free(t)}}n(i)}return e.onload&&e.onload(t,e),t};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(t(),e.imports||{}).then(r)}:function(){return t().then((e=>e.arrayBuffer())).then((t=>WebAssembly.instantiate(t,e.imports||{}))).then(r)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(t){const n=(...e)=>{throw new Error(e.join(" "))};t.heap instanceof WebAssembly.Memory||t.heap instanceof Function||n("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach((function(e){t[e]instanceof Function||n("Config option '"+e+"' must be a function.")}));const r=e,i=t.heap instanceof Function?t.heap:()=>new Uint8Array(t.heap.buffer),s=t.alloc,o=t.dealloc,a=t.log||console.log.bind(console),l=t.memberPrefix||"",c=t.memberSuffix||"",u=void 0===t.bigIntEnabled?!!globalThis.BigInt64Array:!!t.bigIntEnabled,f=globalThis.BigInt,p=globalThis.BigInt64Array,d=t.ptrSizeof||4,h=t.ptrIR||"i32";r.debugFlags||(r.__makeDebugFlags=function(e=null){e&&e.__flags&&(e=e.__flags);const t=function e(t){return 0===arguments.length?e.__flags:(t<0?(delete e.__flags.getter,delete e.__flags.setter,delete e.__flags.alloc,delete e.__flags.dealloc):(e.__flags.getter=0!=(1&t),e.__flags.setter=0!=(2&t),e.__flags.alloc=0!=(4&t),e.__flags.dealloc=0!=(8&t)),e._flags)};return Object.defineProperty(t,"__flags",{iterable:!1,writable:!1,value:Object.create(e)}),e||t(0),t},r.debugFlags=r.__makeDebugFlags());const m=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),_=e=>(e=>"("===e[1])(e)?"p":e[0],g=function(e){switch(_(e)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return h;case"j":return"i64";case"f":return"float";case"d":return"double"}n("Unhandled signature IR:",e)},y=p?()=>!0:()=>n("BigInt64Array is not available."),v=(e,t)=>e+"::"+t,b=new WeakMap,w="(pointer-is-external)",q=function(e,t,n){if(n||(n=b.get(t)),n){if(b.delete(t),Array.isArray(t.ondispose)){let r;for(;r=t.ondispose.shift();)try{r instanceof Function?r.call(t):r instanceof L?r.dispose():"number"==typeof r&&o(r)}catch(t){console.warn("ondispose() for",e.structName,"@",n,"threw. NOT propagating it.",t)}}else if(t.ondispose instanceof Function)try{t.ondispose()}catch(t){console.warn("ondispose() for",e.structName,"@",n,"threw. NOT propagating it.",t)}delete t.ondispose,e.debugFlags.__flags.dealloc&&a("debug.dealloc:",t[w]?"EXTERNAL":"",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+n),t[w]||o(n)}},k=e=>({configurable:!1,writable:!1,iterable:!1,value:e}),x=function(e,t,r){let o=!r;r?Object.defineProperty(t,w,k(r)):(r=s(e.structInfo.sizeof))||n("Allocation of",e.structName,"structure failed.");try{e.debugFlags.__flags.alloc&&a("debug.alloc:",o?"":"EXTERNAL",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+r),o&&i().fill(0,r,r+e.structInfo.sizeof),b.set(t,r)}catch(n){throw q(e,t,r),n}},E=k((e=>l+e+c)),$=function(e,t,r=!0){let i=e.members[t];if(!i&&(l||c)){for(const n of Object.values(e.members))if(n.key===t){i=n;break}!i&&r&&n(v(e.name,t),"is not a mapped struct member.")}return i},S=function e(t,n,r=!1){e._||(e._=e=>e.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const i=$(t.structInfo,n,!0);return r?e._(i.signature):i.signature},A={configurable:!1,enumerable:!1,get:function(){return b.get(this)},set:()=>n("Cannot assign the 'pointer' property of a struct.")},I=k((function(){const e=[];for(const t of Object.keys(this.structInfo.members))e.push(this.memberKey(t));return e})),C=new TextDecoder("utf-8"),O=new TextEncoder,T="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,P=function(e){"s"!==e.signature&&n("Invalid member type signature for C-string value:",JSON.stringify(e))},F=function(e,t){const n=$(e.structInfo,t,!0);P(n);const r=e[n.key];if(!r)return null;let s=r;const o=i();for(;0!==o[s];++s);return r===s?"":(a=o,l=r,c=s,C.decode(a.buffer instanceof T?a.slice(l,c):a.subarray(l,c)));var a,l,c},N=function(e,...t){e.ondispose?Array.isArray(e.ondispose)||(e.ondispose=[e.ondispose]):e.ondispose=[],e.ondispose.push(...t)},j=function(e){const t=O.encode(e),r=s(t.length+1);r||n("Allocation error while duplicating string:",e);const o=i();return o.set(t,r),o[r+t.length]=0,r},L=function(e,t){arguments[2]!==k&&n("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:k(e),structInfo:k(t)})};L.prototype=Object.create(null,{dispose:k((function(){q(this.constructor,this)})),lookupMember:k((function(e,t=!0){return $(this.structInfo,e,t)})),memberToJsString:k((function(e){return F(this,e)})),memberIsString:k((function(e,t=!0){return function(e,t,n=!1){const r=$(e.structInfo,t,n);return!(!r||1!==r.signature.length||"s"!==r.signature[0])&&r}(this,e,t)})),memberKey:E,memberKeys:I,memberSignature:k((function(e,t=!1){return S(this,e,t)})),memoryDump:k((function(){const e=this.pointer;return e?new Uint8Array(i().slice(e,e+this.structInfo.sizeof)):null})),pointer:A,setMemberCString:k((function(e,t){return function(e,t,n){const r=$(e.structInfo,t,!0);P(r);const i=j(n);return e[r.key]=i,N(e,i),e}(this,e,t)}))}),Object.assign(L.prototype,{addOnDispose:function(...e){return N(this,...e),this}}),Object.defineProperties(L,{allocCString:k(j),isA:k((e=>e instanceof L)),hasExternalPointer:k((e=>e instanceof L&&!!e[w])),memberKey:E});const D=e=>Number.isFinite(e)||e instanceof(f||Number),R=function e(t,r,s){if(!e._){e._={getters:{},setters:{},sw:{}};const t=["i","c","C","p","P","s","f","d","v()"];u&&t.push("j"),t.forEach((function(t){e._.getters[t]=function(e){switch(_(e)){case"p":case"P":case"s":switch(d){case 4:return"getInt32";case 8:return y()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return y()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}n("Unhandled DataView getter for signature:",e)}(t),e._.setters[t]=function(e){switch(_(e)){case"p":case"P":case"s":switch(d){case 4:return"setInt32";case 8:return y()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return y()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}n("Unhandled DataView setter for signature:",e)}(t),e._.sw[t]=function(e){switch(_(e)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return y()&&f;case"p":case"P":case"s":switch(d){case 4:return Number;case 8:return y()&&f}}n("Unhandled DataView set wrapper for signature:",e)}(t)}));const r=/^[ipPsjfdcC]$/,i=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;e.sigCheck=function(e,t,s,o){Object.prototype.hasOwnProperty.call(e,s)&&n(e.structName,"already has a property named",s+"."),r.test(o)||i.test(o)||n("Malformed signature for",v(e.structName,t)+":",o)}}const o=t.memberKey(r);e.sigCheck(t.prototype,r,o,s.signature),s.key=o,s.name=r;const l=_(s.signature),c=v(t.prototype.structName,o),p=t.prototype.debugFlags.__flags,h=Object.create(null);var b,w;h.configurable=!1,h.enumerable=!1,h.get=function(){p.getter&&a("debug.getter:",e._.getters[l],"for",g(l),c,"@",this.pointer,"+",s.offset,"sz",s.sizeof);let t=new DataView(i().buffer,this.pointer+s.offset,s.sizeof)[e._.getters[l]](0,m);return p.getter&&a("debug.getter:",c,"result =",t),t},s.readOnly?h.set=(b=t.prototype.structName,w=o,()=>n(v(b,w),"is read-only.")):h.set=function(t){if(p.setter&&a("debug.setter:",e._.setters[l],"for",g(l),c,"@",this.pointer,"+",s.offset,"sz",s.sizeof,t),this.pointer||n("Cannot set struct property on disposed instance."),null===t)t=0;else for(;!D(t);){if("P"===s.signature&&t instanceof L){t=t.pointer||0,p.setter&&a("debug.setter:",c,"resolved to",t);break}n("Invalid value for pointer-type",c+".")}new DataView(i().buffer,this.pointer+s.offset,s.sizeof)[e._.setters[l]](0,e._.sw[l](t),m)},Object.defineProperty(t.prototype,o,h)},M=function e(t,i){1===arguments.length?t=(i=t).name:i.name||(i.name=t),t||n("Struct name is required.");let s=!1;Object.keys(i.members).forEach((e=>{const r=i.members[e];r.sizeof?1===r.sizeof?"c"===r.signature||"C"===r.signature||n("Unexpected sizeof==1 member",v(i.name,e),"with signature",r.signature):(0!=r.sizeof%4&&(console.warn("Invalid struct member description =",r,"from",i),n(t,"member",e,"sizeof is not aligned. sizeof="+r.sizeof)),0!=r.offset%4&&(console.warn("Invalid struct member description =",r,"from",i),n(t,"member",e,"offset is not aligned. offset="+r.offset))):n(t,"member",e,"is missing sizeof."),(!s||s.offset<r.offset)&&(s=r)})),s?i.sizeof<s.offset+s.sizeof&&n("Invalid struct config:",t,"max member offset ("+s.offset+") ","extends past end of struct (sizeof="+i.sizeof+")."):n("No member property descriptions found.");const o=k(r.__makeDebugFlags(e.debugFlags)),a=function e(r){this instanceof e?arguments.length?((r!==(0|r)||r<=0)&&n("Invalid pointer value for",t,"constructor."),x(e,this,r)):x(e,this):n("The",t,"constructor may only be called via 'new'.")};return Object.defineProperties(a,{debugFlags:o,isA:k((e=>e instanceof a)),memberKey:E,memberKeys:I,methodInfoForKey:k((function(e){})),structInfo:k(i),structName:k(t)}),a.prototype=new L(t,i,k),Object.defineProperties(a.prototype,{debugFlags:o,constructor:k(a)}),Object.keys(i.members).forEach((e=>R(a,e,i.members[e]))),a};return M.StructType=L,M.config=t,M.allocCString=j,M.debugFlags||(M.debugFlags=r.__makeDebugFlags(r.debugFlags)),M},globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=(...e)=>{throw new Error(e.join(" "))};e.SQLite3Error.toss;const n=e.capi,r=e.wasm,i=e.util;if(globalThis.WhWasmUtilInstaller(r),delete globalThis.WhWasmUtilInstaller,r.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new r.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:e=>{let t;return(i,s,o,a)=>{try{const n=r.cArgvToJs(s,o);return t||(t=r.cArgvToJs(s,a)),0|e(n,t)}catch(e){return e.resultCode||n.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(e,t)=>e[0],callProxy:e=>(t,i,s,o,a,l)=>{try{return s=s&&r.cstrToJs(s),o=o&&r.cstrToJs(o),a=a&&r.cstrToJs(a),l=l&&r.cstrToJs(l),e(t,i,s,o,a,l)||0}catch(e){return e.resultCode||n.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new r.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(e,t)=>e[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],r.exports.sqlite3_activate_see instanceof Function&&r.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),r.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:e=>e[0],callProxy:e=>(t,n,i,s,o,a,l)=>{e(t,n,i,r.cstrToJs(s),r.cstrToJs(o),a,l)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:e=>e[0],callProxy:e=>(t,n,i,s,o)=>{e(t,n,r.cstrToJs(i),r.cstrToJs(s),o)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],r.bigIntEnabled&&r.exports.sqlite3changegroup_add){const e={signature:"i(ps)",callProxy:e=>(t,i)=>{try{return 0|e(t,r.cstrToJs(i))}catch(e){return e.resultCode||n.SQLITE_ERROR}}};r.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xFilter",...e,contextKey:(e,t)=>e[0]}),"*"]])}r.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:r.heap8u,alloc:r.alloc,dealloc:r.dealloc,bigIntEnabled:r.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const s=r.xWrap.argAdapter("string");r.xWrap.argAdapter("string:flexible",(e=>s(i.flexibleString(e)))),r.xWrap.argAdapter("string:static",function(e){return r.isPtr(e)?e:this[e=""+e]||(this[e]=r.allocCString(e))}.bind(Object.create(null)));const o=r.xWrap.argAdapter("*"),a=function(){};r.xWrap.argAdapter("sqlite3_filename",o)("sqlite3_context*",o)("sqlite3_value*",o)("void*",o)("sqlite3_changegroup*",o)("sqlite3_changeset_iter*",o)("sqlite3_session*",o)("sqlite3_stmt*",(t=>o(t instanceof(e?.oo1?.Stmt||a)?t.pointer:t)))("sqlite3*",(t=>o(t instanceof(e?.oo1?.DB||a)?t.pointer:t)))("sqlite3_index_info*",(e=>o(e instanceof(n.sqlite3_index_info||a)?e.pointer:e)))("sqlite3_module*",(e=>o(e instanceof(n.sqlite3_module||a)?e.pointer:e)))("sqlite3_vfs*",(t=>"string"==typeof t?n.sqlite3_vfs_find(t)||e.SQLite3Error.toss(n.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",t):o(t instanceof(n.sqlite3_vfs||a)?t.pointer:t)));const l=r.xWrap.resultAdapter("*");r.xWrap.resultAdapter("sqlite3*",l)("sqlite3_context*",l)("sqlite3_stmt*",l)("sqlite3_value*",l)("sqlite3_vfs*",l)("void*",l),0===r.exports.sqlite3_step.length&&(r.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const e of r.bindingSignatures)n[e[0]]=r.xWrap.apply(null,e);for(const e of r.bindingSignatures.wasm)r[e[0]]=r.xWrap.apply(null,e);const c=function(e){return()=>t(e+"() is unavailable due to lack","of BigInt support in this build.")};for(const e of r.bindingSignatures.int64)n[e[0]]=r.bigIntEnabled?r.xWrap.apply(null,e):c(e[0]);if(delete r.bindingSignatures,r.exports.sqlite3_wasm_db_error){const t=r.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");i.sqlite3_wasm_db_error=function(r,i,s){return i instanceof e.WasmAllocError?(i=n.SQLITE_NOMEM,s=0):i instanceof Error&&(s=s||""+i,i=i.resultCode||n.SQLITE_ERROR),r?t(r,i,s):i}}else i.sqlite3_wasm_db_error=function(e,t,n){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),t}}{const s=r.xCall("sqlite3_wasm_enum_json");s||t("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),r.ctype=JSON.parse(r.cstrToJs(s));const o=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];r.bigIntEnabled&&o.push("serialize","session","vtab");for(const e of o)for(const t of Object.entries(r.ctype[e]))n[t[0]]=t[1];r.functionEntry(n.SQLITE_WASM_DEALLOC)||t("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+n.SQLITE_WASM_DEALLOC+").");const a=Object.create(null);for(const e of["resultCodes"])for(const t of Object.entries(r.ctype[e]))a[t[1]]=t[0];n.sqlite3_js_rc_str=e=>a[e];const l=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!i.isUIThread(),sqlite3_index_info:!r.bigIntEnabled,sqlite3_index_constraint:!r.bigIntEnabled,sqlite3_index_orderby:!r.bigIntEnabled,sqlite3_index_constraint_usage:!r.bigIntEnabled});for(const t of r.ctype.structs)l[t.name]||(n[t.name]=e.StructBinder(t));if(n.sqlite3_index_info){for(const e of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])n.sqlite3_index_info[e]=n[e],delete n[e];n.sqlite3_vtab_config=r.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const s=(e,t,r)=>i.sqlite3_wasm_db_error(e,n.SQLITE_MISUSE,t+"() requires "+r+" argument"+(1===r?"":"s")+"."),o=e=>i.sqlite3_wasm_db_error(e,n.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),a=e=>r.xWrap.argAdapter("sqlite3*")(e),l=e=>r.isPtr(e)?r.cstrToJs(e):e,c=function(e,t){e=a(e);let n=this.dbMap.get(e);return t?(!n&&t>0&&this.dbMap.set(e,n=Object.create(null)),n):(this.dbMap.delete(e),n)}.bind(Object.assign(Object.create(null),{dbMap:new Map}));c.addCollation=function(e,t){const n=c(e,1);n.collation||(n.collation=new Set),n.collation.add(l(t).toLowerCase())},c._addUDF=function(e,t,n,r){t=l(t).toLowerCase();let i=r.get(t);i||r.set(t,i=new Set),i.add(n<0?-1:n)},c.addFunction=function(e,t,n){const r=c(e,1);r.udf||(r.udf=new Map),this._addUDF(e,t,n,r.udf)},c.addWindowFunc=function(e,t,n){const r=c(e,1);r.wudf||(r.wudf=new Map),this._addUDF(e,t,n,r.wudf)},c.cleanup=function(e){const t=[e=a(e)];for(const e of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const i=r.exports[e];t.length=i.length;try{n[e](...t)}catch(n){console.warn("close-time call of",e+"(",t,") threw:",n)}}const i=c(e,0);if(!i)return;if(i.collation){for(const t of i.collation)try{n.sqlite3_create_collation_v2(e,t,n.SQLITE_UTF8,0,0,0)}catch(e){}delete i.collation}let s;for(s=0;s<2;++s){const t=s?i.wudf:i.udf;if(!t)continue;const r=s?n.sqlite3_create_window_function:n.sqlite3_create_function_v2;for(const i of t){const t=i[0],o=i[1],a=[e,t,0,n.SQLITE_UTF8,0,0,0,0,0];s&&a.push(0);for(const e of o)try{a[2]=e,r.apply(null,a)}catch(e){}o.clear()}t.clear()}delete i.udf,delete i.wudf};{const e=r.xWrap("sqlite3_close_v2","int","sqlite3*");n.sqlite3_close_v2=function(t){if(1!==arguments.length)return s(t,"sqlite3_close_v2",1);if(t)try{c.cleanup(t)}catch(e){}return e(t)}}if(n.sqlite3session_table_filter){const e=r.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);n.sqlite3session_delete=function(t){if(1!==arguments.length)return s(pDb,"sqlite3session_delete",1);t&&n.sqlite3session_table_filter(t,0,0),e(t)}}{const e=(e,t)=>"argv["+t+"]:"+e[0]+":"+r.cstrToJs(e[1]).toLowerCase(),t=r.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new r.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:e}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:e})]);n.sqlite3_create_collation_v2=function(e,r,a,l,u,f){if(6!==arguments.length)return s(e,"sqlite3_create_collation_v2",6);if(0==(15&a))a|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(15&a))return o(e);try{const n=t(e,r,a,l,u,f);return 0===n&&u instanceof Function&&c.addCollation(e,r),n}catch(t){return i.sqlite3_wasm_db_error(e,t)}},n.sqlite3_create_collation=(e,t,r,i,o)=>5===arguments.length?n.sqlite3_create_collation_v2(e,t,r,i,o,0):s(e,"sqlite3_create_collation",5)}{const e=function(e,t){return e[0]+":"+(e[2]<0?-1:e[2])+":"+t+":"+r.cstrToJs(e[1]).toLowerCase()},t=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,r,i)=>{try{e(t,...n.sqlite3_values_to_js(r,i))}catch(e){n.sqlite3_result_error_js(t,e)}}},xFinalAndValue:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{n.sqlite3_result_js(t,e(t))}catch(e){n.sqlite3_result_error_js(t,e)}}},xFunc:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,r,i)=>{try{n.sqlite3_result_js(t,e(t,...n.sqlite3_values_to_js(r,i)))}catch(e){n.sqlite3_result_error_js(t,e)}}},xDestroy:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{e(t)}catch(e){console.error("UDF xDestroy method threw:",e)}}}}),a=r.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xFunc",...t.xFunc}),new r.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]),l=r.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xValue",...t.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xInverse",...t.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]);n.sqlite3_create_function_v2=function e(t,r,l,u,f,p,d,h,m){if(e.length!==arguments.length)return s(t,"sqlite3_create_function_v2",e.length);if(0==(15&u))u|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(15&u))return o(t);try{const e=a(t,r,l,u,f,p,d,h,m);return 0===e&&(p instanceof Function||d instanceof Function||h instanceof Function||m instanceof Function)&&c.addFunction(t,r,l),e}catch(e){return console.error("sqlite3_create_function_v2() setup threw:",e),i.sqlite3_wasm_db_error(t,e,"Creation of UDF threw: "+e)}},n.sqlite3_create_function=function e(t,r,i,o,a,l,c,u){return e.length===arguments.length?n.sqlite3_create_function_v2(t,r,i,o,a,l,c,u,0):s(t,"sqlite3_create_function",e.length)},n.sqlite3_create_window_function=function e(t,r,a,u,f,p,d,h,m,_){if(e.length!==arguments.length)return s(t,"sqlite3_create_window_function",e.length);if(0==(15&u))u|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(15&u))return o(t);try{const e=l(t,r,a,u,f,p,d,h,m,_);return 0===e&&(p instanceof Function||d instanceof Function||h instanceof Function||m instanceof Function||_ instanceof Function)&&c.addWindowFunc(t,r,a),e}catch(e){return console.error("sqlite3_create_window_function() setup threw:",e),i.sqlite3_wasm_db_error(t,e,"Creation of UDF threw: "+e)}},n.sqlite3_create_function_v2.udfSetResult=n.sqlite3_create_function.udfSetResult=n.sqlite3_create_window_function.udfSetResult=n.sqlite3_result_js,n.sqlite3_create_function_v2.udfConvertArgs=n.sqlite3_create_function.udfConvertArgs=n.sqlite3_create_window_function.udfConvertArgs=n.sqlite3_values_to_js,n.sqlite3_create_function_v2.udfSetError=n.sqlite3_create_function.udfSetError=n.sqlite3_create_window_function.udfSetError=n.sqlite3_result_error_js}{const e=(e,t)=>("string"==typeof e?t=-1:i.isSQLableTypedArray(e)?(t=e.byteLength,e=i.typedArrayToString(e instanceof ArrayBuffer?new Uint8Array(e):e)):Array.isArray(e)&&(e=e.join(""),t=-1),[e,t]),t={basic:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};n.sqlite3_prepare_v3=function r(o,a,l,c,u,f){if(r.length!==arguments.length)return s(o,"sqlite3_prepare_v3",r.length);const[p,d]=e(a,l);switch(typeof p){case"string":return t.basic(o,p,d,c,u,null);case"number":return t.full(o,p,d,c,u,f);default:return i.sqlite3_wasm_db_error(o,n.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},n.sqlite3_prepare_v2=function e(t,r,i,o,a){return e.length===arguments.length?n.sqlite3_prepare_v3(t,r,i,0,o,a):s(t,"sqlite3_prepare_v2",e.length)}}{const e=r.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),t=r.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);n.sqlite3_bind_text=function t(o,a,l,c,u){if(t.length!==arguments.length)return s(n.sqlite3_db_handle(o),"sqlite3_bind_text",t.length);if(r.isPtr(l)||null===l)return e(o,a,l,c,u);let f,p;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(pMem)&&(l=pMem.join(""));try{if(i.isSQLableTypedArray(l))f=r.allocFromTypedArray(l),p=l.byteLength;else{if("string"!=typeof l)return i.sqlite3_wasm_db_error(n.sqlite3_db_handle(o),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");[f,p]=r.allocCString(l)}return e(o,a,f,p,n.SQLITE_WASM_DEALLOC)}catch(e){return r.dealloc(f),i.sqlite3_wasm_db_error(n.sqlite3_db_handle(o),e)}},n.sqlite3_bind_blob=function e(o,a,l,c,u){if(e.length!==arguments.length)return s(n.sqlite3_db_handle(o),"sqlite3_bind_blob",e.length);if(r.isPtr(l)||null===l)return t(o,a,l,c,u);let f,p;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(l)&&(l=l.join(""));try{if(i.isBindableTypedArray(l))f=r.allocFromTypedArray(l),p=c>=0?c:l.byteLength;else{if("string"!=typeof l)return i.sqlite3_wasm_db_error(n.sqlite3_db_handle(o),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");[f,p]=r.allocCString(l)}return t(o,a,f,p,n.SQLITE_WASM_DEALLOC)}catch(e){return r.dealloc(f),i.sqlite3_wasm_db_error(n.sqlite3_db_handle(o),e)}}}n.sqlite3_config=function(e,...t){if(arguments.length<2)return n.SQLITE_MISUSE;switch(e){case n.SQLITE_CONFIG_COVERING_INDEX_SCAN:case n.SQLITE_CONFIG_MEMSTATUS:case n.SQLITE_CONFIG_SMALL_MALLOC:case n.SQLITE_CONFIG_SORTERREF_SIZE:case n.SQLITE_CONFIG_STMTJRNL_SPILL:case n.SQLITE_CONFIG_URI:return r.exports.sqlite3_wasm_config_i(e,t[0]);case n.SQLITE_CONFIG_LOOKASIDE:return r.exports.sqlite3_wasm_config_ii(e,t[0],t[1]);case n.SQLITE_CONFIG_MEMDB_MAXSIZE:return r.exports.sqlite3_wasm_config_j(e,t[0]);case n.SQLITE_CONFIG_GETMALLOC:case n.SQLITE_CONFIG_GETMUTEX:case n.SQLITE_CONFIG_GETPCACHE2:case n.SQLITE_CONFIG_GETPCACHE:case n.SQLITE_CONFIG_HEAP:case n.SQLITE_CONFIG_LOG:case n.SQLITE_CONFIG_MALLOC:case n.SQLITE_CONFIG_MMAP_SIZE:case n.SQLITE_CONFIG_MULTITHREAD:case n.SQLITE_CONFIG_MUTEX:case n.SQLITE_CONFIG_PAGECACHE:case n.SQLITE_CONFIG_PCACHE2:case n.SQLITE_CONFIG_PCACHE:case n.SQLITE_CONFIG_PCACHE_HDRSZ:case n.SQLITE_CONFIG_PMASZ:case n.SQLITE_CONFIG_SERIALIZED:case n.SQLITE_CONFIG_SINGLETHREAD:case n.SQLITE_CONFIG_SQLLOG:case n.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return n.SQLITE_NOTFOUND}};{const e=new Set;n.sqlite3_auto_extension=function(t){if(t instanceof Function)t=r.installFunction("i(ppp)",t);else if(1!==arguments.length||!r.isPtr(t))return n.SQLITE_MISUSE;const i=r.exports.sqlite3_auto_extension(t);return t!==arguments[0]&&(0===i?e.add(t):r.uninstallFunction(t)),i},n.sqlite3_cancel_auto_extension=function(e){return e&&1===arguments.length&&r.isPtr(e)?r.exports.sqlite3_cancel_auto_extension(e):0},n.sqlite3_reset_auto_extension=function(){r.exports.sqlite3_reset_auto_extension();for(const t of e)r.uninstallFunction(t);e.clear()}}const u=n.sqlite3_vfs_find("kvvfs");if(u)if(i.isUIThread()){const e=new n.sqlite3_kvvfs_methods(r.exports.sqlite3_wasm_kvvfs_methods());delete n.sqlite3_kvvfs_methods;const t=r.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,i=r.pstack,s=e=>115===r.peek(e)?sessionStorage:localStorage,o={xRead:(e,n,o,a)=>{const l=i.pointer,c=r.scopedAllocPush();try{const u=t(e,n);if(!u)return-3;const f=r.cstrToJs(u),p=s(e).getItem(f);if(!p)return-1;const d=p.length;if(a<=0)return d;if(1===a)return r.poke(o,0),d;const h=r.scopedAllocCString(p);return a>d+1&&(a=d+1),r.heap8u().copyWithin(o,h,h+a-1),r.poke(o+a-1,0),a-1}catch(e){return console.error("kvstorageRead()",e),-2}finally{i.restore(l),r.scopedAllocPop(c)}},xWrite:(e,o,a)=>{const l=i.pointer;try{const n=t(e,o);if(!n)return 1;const c=r.cstrToJs(n);return s(e).setItem(c,r.cstrToJs(a)),0}catch(e){return console.error("kvstorageWrite()",e),n.SQLITE_IOERR}finally{i.restore(l)}},xDelete:(e,o)=>{const a=i.pointer;try{const n=t(e,o);return n?(s(e).removeItem(r.cstrToJs(n)),0):1}catch(e){return console.error("kvstorageDelete()",e),n.SQLITE_IOERR}finally{i.restore(a)}}};for(const t of Object.keys(o))e[e.memberKey(t)]=r.installFunction(e.memberSignature(t),o[t])}else n.sqlite3_vfs_unregister(u);r.xWrap.FuncPtrAdapter.warnOnUse=!0})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){e.version={libVersion:"3.45.2",libVersionNumber:3045002,sourceId:"2024-03-12 11:06:23 d8cd6d49b46a395b13955387d05e9e1a2a47e54fb99f3c9b59835bbefad6af77",downloadVersion:3450200}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=(...t)=>{throw new e.SQLite3Error(...t)},n=e.capi,r=e.wasm,i=e.util,s=new WeakMap,o=new WeakMap,a=(e,t,n)=>{const r=Object.getOwnPropertyDescriptor(e,t);return r?r.value:n},l=function(e,r){return r&&(e instanceof p&&(e=e.pointer),t(r,"sqlite3 result code",r+":",e?n.sqlite3_errmsg(e):n.sqlite3_errstr(r))),arguments[0]},c=r.installFunction("i(ippp)",function(e,t,i,s){n.SQLITE_TRACE_STMT===e&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+t+":",r.cstrToJs(s))}.bind({counter:0})),u=Object.create(null),f=function i(...a){if(!i._name2vfs){i._name2vfs=Object.create(null);const e="function"==typeof importScripts&&(e=>t("The VFS for",e,"is only available in the main window thread."));i._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:e||(()=>"local")},i._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:e||(()=>"session")}}const f=i.normalizeArgs(...a);let p=f.filename,d=f.vfs,h=f.flags;("string"!=typeof p&&"number"!=typeof p||"string"!=typeof h||d&&"string"!=typeof d&&"number"!=typeof d)&&(e.config.error("Invalid DB ctor args",f,arguments),t("Invalid arguments for DB constructor."));let m="number"==typeof p?r.cstrToJs(p):p;const _=i._name2vfs[m];_&&(d=_.vfs,p=m=_.filename(m));let g,y=0;h.indexOf("c")>=0&&(y|=n.SQLITE_OPEN_CREATE|n.SQLITE_OPEN_READWRITE),h.indexOf("w")>=0&&(y|=n.SQLITE_OPEN_READWRITE),0===y&&(y|=n.SQLITE_OPEN_READONLY),y|=n.SQLITE_OPEN_EXRESCODE;const v=r.pstack.pointer;try{const e=r.pstack.allocPtr();let t=n.sqlite3_open_v2(p,e,y,d||0);g=r.peekPtr(e),l(g,t),n.sqlite3_extended_result_codes(g,1),h.indexOf("t")>=0&&n.sqlite3_trace_v2(g,n.SQLITE_TRACE_STMT,c,g)}catch(e){throw g&&n.sqlite3_close_v2(g),e}finally{r.pstack.restore(v)}this.filename=m,s.set(this,g),o.set(this,Object.create(null));try{const r=n.sqlite3_js_db_vfs(g);r||t("Internal error: cannot get VFS for new db handle.");const i=u[r];i instanceof Function?i(this,e):i&&l(g,n.sqlite3_exec(g,i,0,0,0))}catch(e){throw this.close(),e}};f.setVfsPostOpenSql=function(e,t){u[e]=t},f.normalizeArgs=function(e=":memory:",t="c",n=null){const r={};return 1===arguments.length&&arguments[0]&&"object"==typeof arguments[0]?(Object.assign(r,arguments[0]),void 0===r.flags&&(r.flags="c"),void 0===r.vfs&&(r.vfs=null),void 0===r.filename&&(r.filename=":memory:")):(r.filename=e,r.flags=t,r.vfs=n),r};const p=function(...e){f.apply(this,e)};p.dbCtorHelper=f;const d={null:1,number:2,string:3,boolean:4,blob:5};d[void 0],d.null,r.bigIntEnabled&&(d.bigint=d.number);const h=function(){d!==arguments[2]&&t(n.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],s.set(this,arguments[1]),this.parameterCount=n.sqlite3_bind_parameter_count(this.pointer)},m=function(e){return e.pointer||t("DB has been closed."),e},_=function(e,n){return(n!==(0|n)||n<0||n>=e.columnCount)&&t("Column index",n,"is out of range."),e},g=function(e,r){const s=Object.create(null);switch(s.opt=Object.create(null),r.length){case 1:"string"==typeof r[0]||i.isSQLableTypedArray(r[0])||Array.isArray(r[0])?s.sql=r[0]:r[0]&&"object"==typeof r[0]&&(s.opt=r[0],s.sql=s.opt.sql);break;case 2:s.sql=r[0],s.opt=r[1];break;default:t("Invalid argument count for exec().")}s.sql=i.flexibleString(s.sql),"string"!=typeof s.sql&&t("Missing SQL argument or unsupported SQL value type.");const o=s.opt;switch(o.returnValue){case"resultRows":o.resultRows||(o.resultRows=[]),s.returnVal=()=>o.resultRows;break;case"saveSql":o.saveSql||(o.saveSql=[]),s.returnVal=()=>o.saveSql;break;case void 0:case"this":s.returnVal=()=>e;break;default:t("Invalid returnValue value:",o.returnValue)}if(o.callback||o.returnValue||void 0===o.rowMode||(o.resultRows||(o.resultRows=[]),s.returnVal=()=>o.resultRows),o.callback||o.resultRows)switch(void 0===o.rowMode?"array":o.rowMode){case"object":s.cbArg=e=>e.get(Object.create(null));break;case"array":s.cbArg=e=>e.get([]);break;case"stmt":Array.isArray(o.resultRows)&&t("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),s.cbArg=e=>e;break;default:if(i.isInt32(o.rowMode)){s.cbArg=e=>e.get(o.rowMode);break}if("string"==typeof o.rowMode&&o.rowMode.length>1&&"$"===o.rowMode[0]){const e=o.rowMode.substr(1);s.cbArg=r=>{const i=r.get(Object.create(null))[e];return void 0===i?t(n.SQLITE_NOTFOUND,"exec(): unknown result column:",e):i};break}t("Invalid rowMode:",o.rowMode)}return s},y=(e,t,n,...r)=>{const i=e.prepare(t);try{const e=i.bind(n).step()?i.get(...r):void 0;return i.reset(),e}finally{i.finalize()}},v=(e,t,n,r)=>e.exec({sql:t,bind:n,rowMode:r,returnValue:"resultRows"});p.checkRc=(e,t)=>l(e,t),p.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return m(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch(e){}const e=this.pointer;if(Object.keys(o.get(this)).forEach(((e,t)=>{if(t&&t.pointer)try{t.finalize()}catch(e){}})),s.delete(this),o.delete(this),n.sqlite3_close_v2(e),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch(e){}delete this.filename}},changes:function(e=!1,t=!1){const r=m(this).pointer;return e?t?n.sqlite3_total_changes64(r):n.sqlite3_total_changes(r):t?n.sqlite3_changes64(r):n.sqlite3_changes(r)},dbFilename:function(e="main"){return n.sqlite3_db_filename(m(this).pointer,e)},dbName:function(e=0){return n.sqlite3_db_name(m(this).pointer,e)},dbVfsName:function(e=0){let t;const i=n.sqlite3_js_db_vfs(m(this).pointer,e);if(i){const e=new n.sqlite3_vfs(i);try{t=r.cstrToJs(e.$zName)}finally{e.dispose()}}return t},prepare:function(e){m(this);const i=r.pstack.pointer;let s,a;try{s=r.pstack.alloc(8),p.checkRc(this,n.sqlite3_prepare_v2(this.pointer,e,-1,s,null)),a=r.peekPtr(s)}finally{r.pstack.restore(i)}a||t("Cannot prepare empty SQL.");const l=new h(this,a,d);return o.get(this)[a]=l,l},exec:function(){m(this);const e=g(this,arguments);if(!e.sql)return t("exec() requires an SQL string.");const s=e.opt,o=s.callback,a=Array.isArray(s.resultRows)?s.resultRows:void 0;let l,c=s.bind,u=!!(e.cbArg||s.columnNames||a);const f=r.scopedAllocPush(),_=Array.isArray(s.saveSql)?s.saveSql:void 0;try{const t=i.isSQLableTypedArray(e.sql);let m=t?e.sql.byteLength:r.jstrlen(e.sql);const g=r.scopedAlloc(2*r.ptrSizeof+(m+1)),y=g+r.ptrSizeof;let v=y+r.ptrSizeof;const b=v+m;for(t?r.heap8().set(e.sql,v):r.jstrcpy(e.sql,r.heap8(),v,m,!1),r.poke(v+m,0);v&&r.peek(v,"i8");){r.pokePtr([g,y],0),p.checkRc(this,n.sqlite3_prepare_v3(this.pointer,v,m,0,g,y));const t=r.peekPtr(g);if(v=r.peekPtr(y),m=b-v,t){if(_&&_.push(n.sqlite3_sql(t).trim()),l=new h(this,t,d),c&&l.parameterCount&&(l.bind(c),c=null),u&&l.columnCount){let t=Array.isArray(s.columnNames)?0:1;if(u=!1,e.cbArg||a){for(;l.step();l._lockedByExec=!1){0==t++&&l.getColumnNames(s.columnNames),l._lockedByExec=!0;const n=e.cbArg(l);if(a&&a.push(n),o&&!1===o.call(s,n,l))break}l._lockedByExec=!1}0===t&&l.getColumnNames(s.columnNames)}else l.step();l.reset().finalize(),l=null}}}finally{r.scopedAllocPop(f),l&&(delete l._lockedByExec,l.finalize())}return e.returnVal()},createFunction:function(e,r,s){const o=e=>e instanceof Function;switch(arguments.length){case 1:e=(s=e).name,r=s.xFunc||0;break;case 2:o(r)||(r=(s=r).xFunc||0)}s||(s={}),"string"!=typeof e&&t("Invalid arguments: missing function name.");let l=s.xStep||0,c=s.xFinal||0;const u=s.xValue||0,f=s.xInverse||0;let d;o(r)?(d=!1,(o(l)||o(c))&&t("Ambiguous arguments: scalar or aggregate?"),l=c=null):o(l)?(o(c)||t("Missing xFinal() callback for aggregate or window UDF."),r=null):o(c)?t("Missing xStep() callback for aggregate or window UDF."):t("Missing function-type properties."),!1===d?(o(u)||o(f))&&t("xValue and xInverse are not permitted for non-window UDFs."):o(u)?(o(f)||t("xInverse must be provided if xValue is."),d=!0):o(f)&&t("xValue must be provided if xInverse is.");const h=s.pApp;null==h||"number"==typeof h&&i.isInt32(h)||t("Invalid value for pApp property. Must be a legal WASM pointer value.");const m=s.xDestroy||0;m&&!o(m)&&t("xDestroy property must be a function.");let _=0;a(s,"deterministic")&&(_|=n.SQLITE_DETERMINISTIC),a(s,"directOnly")&&(_|=n.SQLITE_DIRECTONLY),a(s,"innocuous")&&(_|=n.SQLITE_INNOCUOUS),e=e.toLowerCase();const g=r||l,y=a(s,"arity"),v="number"==typeof y?y:g.length?g.length-1:0;let b;return b=d?n.sqlite3_create_window_function(this.pointer,e,v,n.SQLITE_UTF8|_,h||0,l,c,u,f,m):n.sqlite3_create_function_v2(this.pointer,e,v,n.SQLITE_UTF8|_,h||0,r,l,c,m),p.checkRc(this,b),this},selectValue:function(e,t,n){return y(this,e,t,0,n)},selectValues:function(e,t,n){const r=this.prepare(e),i=[];try{for(r.bind(t);r.step();)i.push(r.get(0,n));r.reset()}finally{r.finalize()}return i},selectArray:function(e,t){return y(this,e,t,[])},selectObject:function(e,t){return y(this,e,t,{})},selectArrays:function(e,t){return v(this,e,t,"array")},selectObjects:function(e,t){return v(this,e,t,"object")},openStatementCount:function(){return this.pointer?Object.keys(o.get(this)).length:0},transaction:function(e){let r="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&t(n.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),r+=" "+arguments[0],e=arguments[1]),m(this).exec(r);try{const t=e(this);return this.exec("COMMIT"),t}catch(e){throw this.exec("ROLLBACK"),e}},savepoint:function(e){m(this).exec("SAVEPOINT oo1");try{const t=e(this);return this.exec("RELEASE oo1"),t}catch(e){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),e}},checkRc:function(e){return l(this,e)}};const b=function(e){return e.pointer||t("Stmt has been closed."),e},w=function(e){return function(e){let t=d[null==e?"null":typeof e];switch(t){case d.boolean:case d.null:case d.number:case d.string:return t;case d.bigint:if(r.bigIntEnabled)return t;default:return i.isBindableTypedArray(e)?d.blob:void 0}}(e)||t("Unsupported bind() argument type:",typeof e)},q=function(e,n){return e._lockedByExec&&t("Operation is illegal when statement is locked:",n),e},k=function s(o,a,l,c){q(b(o),"bind()"),s._||(s._tooBigInt=e=>t("BigInt value is too big to store without precision loss:",e),s._={string:function(e,t,i,s){const[o,a]=r.allocCString(i,!0);return(s?n.sqlite3_bind_blob:n.sqlite3_bind_text)(e.pointer,t,o,a,n.SQLITE_WASM_DEALLOC)}}),w(c),a=function(e,r){const s="number"==typeof r?r:n.sqlite3_bind_parameter_index(e.pointer,r);return 0!==s&&i.isInt32(s)?(s<1||s>e.parameterCount)&&t("Bind index",r,"is out of range."):t("Invalid bind() parameter name: "+r),s}(o,a);let u=0;switch(null==c?d.null:l){case d.null:u=n.sqlite3_bind_null(o.pointer,a);break;case d.string:u=s._.string(o,a,c,!1);break;case d.number:{let e;i.isInt32(c)?e=n.sqlite3_bind_int:"bigint"==typeof c?i.bigIntFits64(c)?r.bigIntEnabled?e=n.sqlite3_bind_int64:i.bigIntFitsDouble(c)?(c=Number(c),e=n.sqlite3_bind_double):s._tooBigInt(c):s._tooBigInt(c):(c=Number(c),e=r.bigIntEnabled&&Number.isInteger(c)?n.sqlite3_bind_int64:n.sqlite3_bind_double),u=e(o.pointer,a,c);break}case d.boolean:u=n.sqlite3_bind_int(o.pointer,a,c?1:0);break;case d.blob:{if("string"==typeof c){u=s._.string(o,a,c,!0);break}c instanceof ArrayBuffer?c=new Uint8Array(c):i.isBindableTypedArray(c)||t("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const e=r.alloc(c.byteLength||1);r.heap8().set(c.byteLength?c:[0],e),u=n.sqlite3_bind_blob(o.pointer,a,e,c.byteLength,n.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",c),t("Unsupported bind() argument type: "+typeof c)}return u&&p.checkRc(o.db.pointer,u),o._mayGet=!1,o};h.prototype={finalize:function(){if(this.pointer){q(this,"finalize()");const e=n.sqlite3_finalize(this.pointer);return delete o.get(this.db)[this.pointer],s.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,e}},clearBindings:function(){return q(b(this),"clearBindings()"),n.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(e){q(this,"reset()"),e&&this.clearBindings();const t=n.sqlite3_reset(b(this).pointer);return this._mayGet=!1,l(this.db,t),this},bind:function(){let e,n;switch(b(this),arguments.length){case 1:e=1,n=arguments[0];break;case 2:e=arguments[0],n=arguments[1];break;default:t("Invalid bind() arguments.")}return void 0===n?this:(this.parameterCount||t("This statement has no bindable parameters."),this._mayGet=!1,null===n?k(this,e,d.null,n):Array.isArray(n)?(1!==arguments.length&&t("When binding an array, an index argument is not permitted."),n.forEach(((e,t)=>k(this,t+1,w(e),e))),this):(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),"object"!=typeof n||i.isBindableTypedArray(n)?k(this,e,w(n),n):(1!==arguments.length&&t("When binding an object, an index argument is not permitted."),Object.keys(n).forEach((e=>k(this,e,w(n[e]),n[e]))),this)))},bindAsBlob:function(e,n){b(this),1===arguments.length&&(n=e,e=1);const r=w(n);return d.string!==r&&d.blob!==r&&d.null!==r&&t("Invalid value type for bindAsBlob()"),k(this,e,d.blob,n)},step:function(){q(this,"step()");const t=n.sqlite3_step(b(this).pointer);switch(t){case n.SQLITE_DONE:return this._mayGet=!1;case n.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",t,n.sqlite3_js_rc_str(t),"SQL =",n.sqlite3_sql(this.pointer)),p.checkRc(this.db.pointer,t)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const e=this.step();return this.reset(),e}finally{try{this.finalize()}catch(e){}}},get:function(e,s){if(b(this)._mayGet||t("Stmt.step() has not (recently) returned true."),Array.isArray(e)){let t=0;const n=this.columnCount;for(;t<n;)e[t]=this.get(t++);return e}if(e&&"object"==typeof e){let t=0;const r=this.columnCount;for(;t<r;)e[n.sqlite3_column_name(this.pointer,t)]=this.get(t++);return e}switch(_(this,e),void 0===s?n.sqlite3_column_type(this.pointer,e):s){case n.SQLITE_NULL:return null;case n.SQLITE_INTEGER:if(r.bigIntEnabled){const t=n.sqlite3_column_int64(this.pointer,e);return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t).valueOf():t}{const r=n.sqlite3_column_double(this.pointer,e);return(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)&&t("Integer is out of range for JS integer range: "+r),i.isInt32(r)?0|r:r}case n.SQLITE_FLOAT:return n.sqlite3_column_double(this.pointer,e);case n.SQLITE_TEXT:return n.sqlite3_column_text(this.pointer,e);case n.SQLITE_BLOB:{const t=n.sqlite3_column_bytes(this.pointer,e),i=n.sqlite3_column_blob(this.pointer,e),s=new Uint8Array(t);return t&&s.set(r.heap8u().slice(i,i+t),0),t&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(s.buffer),s}default:t("Don't know how to translate","type of result column #"+e+".")}t("Not reached.")},getInt:function(e){return this.get(e,n.SQLITE_INTEGER)},getFloat:function(e){return this.get(e,n.SQLITE_FLOAT)},getString:function(e){return this.get(e,n.SQLITE_TEXT)},getBlob:function(e){return this.get(e,n.SQLITE_BLOB)},getJSON:function(e){const t=this.get(e,n.SQLITE_STRING);return null===t?t:JSON.parse(t)},getColumnName:function(e){return n.sqlite3_column_name(_(b(this),e).pointer,e)},getColumnNames:function(e=[]){_(b(this),0);const t=this.columnCount;for(let r=0;r<t;++r)e.push(n.sqlite3_column_name(this.pointer,r));return e},getParamIndex:function(e){return b(this).parameterCount?n.sqlite3_bind_parameter_index(this.pointer,e):void 0}};{const e={enumerable:!0,get:function(){return s.get(this)},set:()=>t("The pointer property is read-only.")};Object.defineProperty(h.prototype,"pointer",e),Object.defineProperty(p.prototype,"pointer",e)}if(Object.defineProperty(h.prototype,"columnCount",{enumerable:!1,get:function(){return n.sqlite3_column_count(this.pointer)},set:()=>t("The columnCount property is read-only.")}),e.oo1={DB:p,Stmt:h},i.isUIThread()){e.oo1.JsStorageDb=function(e="session"){"session"!==e&&"local"!==e&&t("JsStorageDb db name must be one of 'session' or 'local'."),f.call(this,{filename:e,flags:"c",vfs:"kvvfs"})};const r=e.oo1.JsStorageDb;r.prototype=Object.create(p.prototype),r.clearStorage=n.sqlite3_js_kvvfs_clear,r.prototype.clearStorage=function(){return r.clearStorage(m(this).filename)},r.storageSize=n.sqlite3_js_kvvfs_size,r.prototype.storageSize=function(){return r.storageSize(m(this).filename)}}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){e.initWorker1API=function(){const e=(...e)=>{throw new Error(e.join(" "))};globalThis.WorkerGlobalScope instanceof Function||e("initWorker1API() must be run from a Worker thread.");const t=this.sqlite3||e("Missing this.sqlite3 object."),n=t.oo1.DB,r=function(e){let t=i.idMap.get(e);return t||(t="db#"+ ++i.idSeq+"@"+e.pointer,i.idMap.set(e,t),t)},i={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(e){const t=new n(e);return this.dbs[r(t)]=t,this.dbList.indexOf(t)<0&&this.dbList.push(t),t},close:function(e,n){if(e){delete this.dbs[r(e)];const i=e.filename,s=t.wasm.sqlite3_wasm_db_vfs(e.pointer,0);e.close();const o=this.dbList.indexOf(e);o>=0&&this.dbList.splice(o,1),n&&i&&s&&t.wasm.sqlite3_wasm_vfs_unlink(s,i)}},post:function(e,t){t&&t.length?(globalThis.postMessage(e,Array.from(t)),t.length=0):globalThis.postMessage(e)},dbs:Object.create(null),getDb:function(t,n=!0){return this.dbs[t]||(n?e("Unknown (or closed) DB ID:",t):void 0)}},s=function(t,n=!0){const r=i.getDb(t.dbId,!1)||i.dbList[0];return n?function(t=i.dbList[0]){return t&&t.pointer?t:e("DB is not opened.")}(r):r},o={open:function(n){const s=Object.create(null),o=n.args||Object.create(null);o.simulateError&&e("Throwing because of simulateError flag.");const a=Object.create(null);let l,c;var u;if(s.vfs=o.vfs,""===(u=o.filename)||":"===u[0]?s.filename=o.filename||"":(s.filename=o.filename,l=o.byteArray,l&&(c=function(e){const n=/^file:.+(vfs=(\w+))/.exec(e);return t.capi.sqlite3_vfs_find(n?n[2]:0)}(o.filename))),c){let e;try{e=t.wasm.allocFromTypedArray(l);const n=t.wasm.sqlite3_wasm_vfs_create_file(c,s.filename,e,l.byteLength);n&&t.SQLite3Error.toss(n)}catch(e){throw new t.SQLite3Error(e.name+" creating "+o.filename+": "+e.message,{cause:e})}finally{e&&t.wasm.dealloc(e)}}const f=i.open(s);return a.filename=f.filename,a.persistent=!!t.capi.sqlite3_js_db_uses_vfs(f.pointer,"opfs"),a.dbId=r(f),a.vfs=f.dbVfsName(),a},close:function(e){const t=s(e,!1),n={filename:t&&t.filename};if(t){const n=!(!e.args||"object"!=typeof e.args||!e.args.unlink);i.close(t,n)}return n},exec:function(t){const n="string"==typeof t.args?{sql:t.args}:t.args||Object.create(null);"stmt"===n.rowMode?e("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):n.sql||e("'exec' requires input SQL.");const r=s(t);(n.callback||Array.isArray(n.resultRows))&&(r._blobXfer=i.xfer);const o=n.callback;let a=0;const l=!!n.columnNames;"string"==typeof o&&(l||(n.columnNames=[]),n.callback=function(e,t){i.post({type:o,columnNames:n.columnNames,rowNumber:++a,row:e},i.xfer)});try{const e=n.countChanges?r.changes(!0,64===n.countChanges):void 0;r.exec(n),void 0!==e&&(n.changeCount=r.changes(!0,64===n.countChanges)-e),n.callback instanceof Function&&(n.callback=o,i.post({type:o,columnNames:n.columnNames,rowNumber:null,row:void 0}))}finally{delete r._blobXfer,n.callback&&(n.callback=o)}return n},"config-get":function(){const e=Object.create(null),n=t.config;return["bigIntEnabled"].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)&&(e[t]=n[t])})),e.version=t.version,e.vfsList=t.capi.sqlite3_js_vfs_list(),e.opfsEnabled=!!t.opfs,e},export:function(e){const n=s(e),r={byteArray:t.capi.sqlite3_js_db_export(n.pointer),filename:n.filename,mimetype:"application/x-sqlite3"};return i.xfer.push(r.byteArray.buffer),r},toss:function(t){e("Testing worker exception")},"opfs-tree":async function(n){return t.opfs||e("OPFS support is unavailable."),await t.opfs.treeList()}};globalThis.onmessage=async function(t){let n,r=(t=t.data).dbId,s=t.type;const a=performance.now();try{o.hasOwnProperty(s)&&o[s]instanceof Function?n=await o[s](t):e("Unknown db worker message type:",t.type)}catch(e){s="error",n={operation:t.type,message:e.message,errorClass:e.name,input:t},e.stack&&(n.stack="string"==typeof e.stack?e.stack.split(/\n\s*/):e.stack)}r||(r=n.dbId||i.dbList[0]),i.post({type:s,dbId:r,messageId:t.messageId,workerReceivedTime:a,workerRespondTime:performance.now(),departureTime:t.departureTime,result:n},i.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.wasm,n=e.capi,r=e.util.toss3,i=Object.create(null),s=Object.create(null),o=e.StructBinder;e.vfs=i,e.vtab=s;const a=n.sqlite3_index_info;a.prototype.nthConstraint=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const n=this.$aConstraint+a.sqlite3_index_constraint.structInfo.sizeof*e;return t?n:new a.sqlite3_index_constraint(n)},a.prototype.nthConstraintUsage=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const n=this.$aConstraintUsage+a.sqlite3_index_constraint_usage.structInfo.sizeof*e;return t?n:new a.sqlite3_index_constraint_usage(n)},a.prototype.nthOrderBy=function(e,t=!1){if(e<0||e>=this.$nOrderBy)return!1;const n=this.$aOrderBy+a.sqlite3_index_orderby.structInfo.sizeof*e;return t?n:new a.sqlite3_index_orderby(n)};const l=function e(n,i,s,a=e.installMethodArgcCheck){if(n instanceof o.StructType?s instanceof Function||t.isPtr(s)||r("Usage errror: expecting a Function or WASM pointer to one."):r("Usage error: target object is-not-a StructType."),1===arguments.length)return(t,r)=>e(n,t,r,a);e.argcProxy||(e.argcProxy=function(e,t,n,i){return function(...s){return n.length!==arguments.length&&r("Argument mismatch for",e.structInfo.name+"::"+t+": Native signature is:",i),n.apply(this,s)}},e.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach(((e,n)=>{if("number"==typeof e)try{t.uninstallFunction(e)}catch(e){}})),delete this.ondispose.__removeFuncList)});const l=n.memberSignature(i);l.length<2&&r("Member",i,"does not have a function pointer signature:",l);const c=n.memberKey(i),u=a&&!t.isPtr(s)?e.argcProxy(n,c,s,l):s;if(t.isPtr(u))u&&!t.functionEntry(u)&&r("Pointer",u,"is not a WASM function table entry."),n[c]=u;else{const r=t.installFunction(u,n.memberSignature(i,!0));n[c]=r,n.ondispose&&n.ondispose.__removeFuncList||(n.addOnDispose("ondispose.__removeFuncList handler",e.removeFuncList),n.ondispose.__removeFuncList=[]),n.ondispose.__removeFuncList.push(c,r)}return(t,r)=>e(n,t,r,a)};l.installMethodArgcCheck=!1;const c=function(e,t,n=l.installMethodArgcCheck){const r=new Map;for(const i of Object.keys(t)){const s=t[i],o=r.get(s);if(o){const t=e.memberKey(i);e[t]=e[e.memberKey(o)]}else l(e,i,s,n),r.set(s,i)}return e};o.StructType.prototype.installMethod=function(e,t,n=l.installMethodArgcCheck){return arguments.length<3&&e&&"object"==typeof e?c(this,...arguments):l(this,...arguments)},o.StructType.prototype.installMethods=function(e,t=l.installMethodArgcCheck){return c(this,e,t)},n.sqlite3_vfs.prototype.registerVfs=function(t=!1){this instanceof e.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");const i=n.sqlite3_vfs_register(this,t?1:0);return i&&r("sqlite3_vfs_register(",this,") failed with rc",i),this.pointer!==n.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},i.installVfs=function(e){let n=0;const i=["io","vfs"];for(const r of i){const i=e[r];i&&(++n,c(i.struct,i.methods,!!i.applyArgcCheck),"vfs"===r&&(i.struct.$zName||"string"!=typeof i.name||i.struct.addOnDispose(i.struct.$zName=t.allocCString(i.name)),i.struct.registerVfs(!!i.asDefault)))}return n||r("Misuse: installVfs() options object requires at least","one of:",i),this};const u=function(n,r){const i=function(n,r){return function(i,s=!1){if(0===arguments.length&&(i=new r),i instanceof r)return this.set(i.pointer,i),i;t.isPtr(i)||e.SQLite3Error.toss("Invalid argument to",n+"()");let o=this.get(i);return s&&this.delete(i),o}.bind(new Map)}(n,r);return Object.assign(Object.create(null),{StructType:r,create:e=>{const n=i();return t.pokePtr(e,n.pointer),n},get:e=>i(e),unget:e=>i(e,!0),dispose:e=>{const t=i(e,!0);t&&t.dispose()}})};s.xVtab=u("xVtab",n.sqlite3_vtab),s.xCursor=u("xCursor",n.sqlite3_vtab_cursor),s.xIndexInfo=e=>new n.sqlite3_index_info(e),s.xError=function t(r,i,s){if(t.errorReporter instanceof Function)try{t.errorReporter("sqlite3_module::"+r+"(): "+i.message)}catch(e){}let o;return i instanceof e.WasmAllocError?o=n.SQLITE_NOMEM:arguments.length>2?o=s:i instanceof e.SQLite3Error&&(o=i.resultCode),o||n.SQLITE_ERROR},s.xError.errorReporter=console.error.bind(console),s.xRowid=(e,n)=>t.poke(e,n,"i64"),s.setupModule=function(i){let o=!1;const a=this instanceof n.sqlite3_module?this:i.struct||(o=new n.sqlite3_module);try{const n=i.methods||r("Missing 'methods' object.");for(const e of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const t=e[0],r=e[1];!0===n[t]?n[t]=n[r]:!0===n[r]&&(n[r]=n[t])}if(i.catchExceptions){const r=function(n,r){return["xConnect","xCreate"].indexOf(n)>=0?function(i,o,a,l,c,u){try{return r(...arguments)||0}catch(r){return r instanceof e.WasmAllocError||(t.dealloc(t.peekPtr(u)),t.pokePtr(u,t.allocCString(r.message))),s.xError(n,r)}}:function(...e){try{return r(...e)||0}catch(e){return s.xError(n,e)}}},i=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],o=Object.create(null);for(const e of i){const t=n[e];t instanceof Function&&("xConnect"===e&&n.xCreate===t?o[e]=n.xCreate:"xCreate"===e&&n.xConnect===t?o[e]=n.xConnect:o[e]=r(e,t))}c(a,o,!1)}else c(a,n,!!i.applyArgcCheck);if(0===a.$iVersion){let e;e="number"==typeof i.iVersion?i.iVersion:a.$xShadowName?3:a.$xSavePoint||a.$xRelease||a.$xRollbackTo?2:1,a.$iVersion=e}}catch(e){throw o&&o.dispose(),e}return a},n.sqlite3_module.prototype.setupModule=function(e){return s.setupModule.call(this,e)}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=function t(n){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if("undefined"==typeof WorkerGlobalScope)return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!(globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));n&&"object"==typeof n||(n=Object.create(null));const r=new URL(globalThis.location.href).searchParams;return r.has("opfs-disable")?Promise.resolve(e):(void 0===n.verbose&&(n.verbose=r.has("opfs-verbose")?+r.get("opfs-verbose")||2:1),void 0===n.sanityChecks&&(n.sanityChecks=r.has("opfs-sanity-check")),void 0===n.proxyUri&&(n.proxyUri=t.defaultProxyUri),"function"==typeof n.proxyUri&&(n.proxyUri=n.proxyUri()),new Promise((function(t,r){const i=[e.config.error,e.config.warn,e.config.log],s=(e,...t)=>{n.verbose>e&&i[e]("OPFS syncer:",...t)},o=(...e)=>s(2,...e),a=(...e)=>s(1,...e),l=(...e)=>s(0,...e),c=e.util.toss,u=e.capi,f=e.util,p=e.wasm,d=u.sqlite3_vfs,h=u.sqlite3_file,m=u.sqlite3_io_methods,_=Object.create(null);_.metrics={dump:function(){let t,n=0,r=0,i=0;for(t in E.opIds){const e=$[t];n+=e.count,r+=e.time,i+=e.wait,e.avgTime=e.count&&e.time?e.time/e.count:0,e.avgWait=e.count&&e.wait?e.wait/e.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",$,"\nTotal of",n,"op(s) for",r,"ms (incl. "+i+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",$.s11n),q.postMessage({type:"opfs-async-metrics"})},reset:function(){let e;for(e in E.opIds)(t=$[e]=Object.create(null)).count=t.time=t.wait=0;var t;let n=$.s11n=Object.create(null);n=n.serialize=Object.create(null),n.count=n.time=0,n=$.s11n.deserialize=Object.create(null),n.count=n.time=0}};const g=new m,y=(new d).addOnDispose((()=>g.dispose()));let v;const b=e=>(v=!0,y.dispose(),r(e)),w=()=>(v=!1,t(e)),q=new Worker(new URL("sqlite3-opfs-async-proxy.js",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href));setTimeout((()=>{void 0===v&&b(new Error("Timeout while waiting for OPFS async proxy worker."))}),4e3),q._originalOnError=q.onerror,q.onerror=function(e){l("Error initializing OPFS asyncer:",e),b(new Error("Loading OPFS async Worker failed for unknown reasons."))};const k=u.sqlite3_vfs_find(null),x=k?new d(k):null;g.$iVersion=1,y.$iVersion=2,y.$szOsFile=u.sqlite3_file.structInfo.sizeof,y.$mxPathname=1024,y.$zName=p.allocCString("opfs"),y.$xDlOpen=y.$xDlError=y.$xDlSym=y.$xDlClose=null,y.addOnDispose("$zName",y.$zName,"cleanup default VFS wrapper",(()=>x?x.dispose():null));const E=Object.create(null);E.verbose=n.verbose,E.littleEndian=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),E.asyncIdleWaitTime=150,E.asyncS11nExceptions=1,E.fileBufferSize=65536,E.sabS11nOffset=E.fileBufferSize,E.sabS11nSize=2*y.$mxPathname,E.sabIO=new SharedArrayBuffer(E.fileBufferSize+E.sabS11nSize),E.opIds=Object.create(null);const $=Object.create(null);{let e=0;E.opIds.whichOp=e++,E.opIds.rc=e++,E.opIds.xAccess=e++,E.opIds.xClose=e++,E.opIds.xDelete=e++,E.opIds.xDeleteNoWait=e++,E.opIds.xFileSize=e++,E.opIds.xLock=e++,E.opIds.xOpen=e++,E.opIds.xRead=e++,E.opIds.xSleep=e++,E.opIds.xSync=e++,E.opIds.xTruncate=e++,E.opIds.xUnlock=e++,E.opIds.xWrite=e++,E.opIds.mkdir=e++,E.opIds["opfs-async-metrics"]=e++,E.opIds["opfs-async-shutdown"]=e++,E.opIds.retry=e++,E.sabOP=new SharedArrayBuffer(4*e),_.metrics.reset()}E.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach((e=>{void 0===(E.sq3Codes[e]=u[e])&&c("Maintenance required: not found:",e)})),E.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const S=(e,...t)=>{const n=E.opIds[e]||c("Invalid op ID:",e);E.s11n.serialize(...t),Atomics.store(E.sabOPView,E.opIds.rc,-1),Atomics.store(E.sabOPView,E.opIds.whichOp,n),Atomics.notify(E.sabOPView,E.opIds.whichOp);const r=performance.now();Atomics.wait(E.sabOPView,E.opIds.rc,-1);const i=Atomics.load(E.sabOPView,E.opIds.rc);if($[e].wait+=performance.now()-r,i&&E.asyncS11nExceptions){const t=E.s11n.deserialize();t&&l(e+"() async error:",...t)}return i};_.debug={asyncShutdown:()=>{a("Shutting down OPFS async listener. The OPFS VFS will no longer work."),S("opfs-async-shutdown")},asyncRestart:()=>{a("Attempting to restart OPFS VFS async listener. Might work, might not."),q.postMessage({type:"opfs-async-restart"})}};const A=function e(t=16){e._chars||(e._n=(e._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789").length);const n=[];let r=0;for(;r<t;++r){const t=Math.random()*(64*e._n)%e._n|0;n[r]=e._chars[t]}return n.join("")},I=Object.create(null),C=Object.create(null);C.op=void 0,C.start=void 0;const O=e=>{C.start=performance.now(),C.op=e,++$[e].count},T=()=>$[C.op].time+=performance.now()-C.start,P={xCheckReservedLock:function(e,t){const n=I[e];return p.poke(t,n.lockType?1:0,"i32"),0},xClose:function(e){O("xClose");let t=0;const n=I[e];return n&&(delete I[e],t=S("xClose",e),n.sq3File&&n.sq3File.dispose()),T(),t},xDeviceCharacteristics:function(e){return u.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,n){return u.SQLITE_NOTFOUND},xFileSize:function(e,t){O("xFileSize");let n=S("xFileSize",e);if(0==n)try{const e=E.s11n.deserialize()[0];p.poke(t,e,"i64")}catch(e){l("Unexpected error reading xFileSize() result:",e),n=E.sq3Codes.SQLITE_IOERR}return T(),n},xLock:function(e,t){O("xLock");const n=I[e];let r=0;return n.lockType?n.lockType=t:(r=S("xLock",e,t),0===r&&(n.lockType=t)),T(),r},xRead:function(e,t,n,r){O("xRead");const i=I[e];let s;try{s=S("xRead",e,n,Number(r)),0!==s&&u.SQLITE_IOERR_SHORT_READ!==s||p.heap8u().set(i.sabView.subarray(0,n),t)}catch(e){l("xRead(",arguments,") failed:",e,i),s=u.SQLITE_IOERR_READ}return T(),s},xSync:function(e,t){O("xSync"),++$.xSync.count;const n=S("xSync",e,t);return T(),n},xTruncate:function(e,t){O("xTruncate");const n=S("xTruncate",e,Number(t));return T(),n},xUnlock:function(e,t){O("xUnlock");const n=I[e];let r=0;return u.SQLITE_LOCK_NONE===t&&n.lockType&&(r=S("xUnlock",e,t)),0===r&&(n.lockType=t),T(),r},xWrite:function(e,t,n,r){O("xWrite");const i=I[e];let s;try{i.sabView.set(p.heap8u().subarray(t,t+n)),s=S("xWrite",e,n,Number(r))}catch(e){l("xWrite(",arguments,") failed:",e,i),s=u.SQLITE_IOERR_WRITE}return T(),s}},F={xAccess:function(e,t,n,r){O("xAccess");const i=S("xAccess",p.cstrToJs(t));return p.poke(r,i?0:1,"i32"),T(),0},xCurrentTime:function(e,t){return p.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return p.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,n){O("xDelete");const r=S("xDelete",p.cstrToJs(t),n,!1);return T(),r},xFullPathname:function(e,t,n,r){return p.cstrncpy(r,t,n)<n?0:u.SQLITE_CANTOPEN},xGetLastError:function(e,t,n){return a("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(e,t,n,r,i){O("xOpen");let s=0;0===t?t=A():"number"==typeof t&&(u.sqlite3_uri_boolean(t,"opfs-unlock-asap",0)&&(s|=E.opfsFlags.OPFS_UNLOCK_ASAP),t=p.cstrToJs(t));const o=Object.create(null);o.fid=n,o.filename=t,o.sab=new SharedArrayBuffer(E.fileBufferSize),o.flags=r;const a=S("xOpen",n,t,r,s);return a||(o.readOnly&&p.poke(i,u.SQLITE_OPEN_READONLY,"i32"),I[n]=o,o.sabView=E.sabFileBufView,o.sq3File=new h(n),o.sq3File.$pMethods=g.pointer,o.lockType=u.SQLITE_LOCK_NONE),T(),a}};if(x&&(y.$xRandomness=x.$xRandomness,y.$xSleep=x.$xSleep),y.$xRandomness||(F.xRandomness=function(e,t,n){const r=p.heap8u();let i=0;for(;i<t;++i)r[n+i]=255e3*Math.random()&255;return i}),y.$xSleep||(F.xSleep=function(e,t){return Atomics.wait(E.sabOPView,E.opIds.xSleep,0,t),0}),_.getResolvedPath=function(e,t){const n=new URL(e,"file://irrelevant").pathname;return t?n.split("/").filter((e=>!!e)):n},_.getDirForFilename=async function(e,t=!1){const n=_.getResolvedPath(e,!0),r=n.pop();let i=_.rootDirectory;for(const e of n)e&&(i=await i.getDirectoryHandle(e,{create:!!t}));return[i,r]},_.mkdir=async function(e){try{return await _.getDirForFilename(e+"/filepart",!0),!0}catch(e){return!1}},_.entryExists=async function(e){try{const[t,n]=await _.getDirForFilename(e);return await t.getFileHandle(n),!0}catch(e){return!1}},_.randomFilename=A,_.registerVfs=(e=!1)=>p.exports.sqlite3_vfs_register(y.pointer,e?1:0),_.treeList=async function(){const e=Object.create(null);return await async function e(t,n){n.name=t.name,n.dirs=[],n.files=[];for await(const r of t.values())if("directory"===r.kind){const t=Object.create(null);n.dirs.push(t),await e(r,t)}else n.files.push(r.name)}(_.rootDirectory,e),e},_.rmfr=async function(){const e=_.rootDirectory,t={recurse:!0};for await(const n of e.values())e.removeEntry(n.name,t)},_.unlink=async function(e,t=!1,n=!1){try{const[n,r]=await _.getDirForFilename(e,!1);return await n.removeEntry(r,{recursive:t}),!0}catch(e){if(n)throw new Error("unlink(",arguments[0],") failed: "+e.message,{cause:e});return!1}},_.traverse=async function(e){const t={recursive:!0,directory:_.rootDirectory};"function"==typeof e&&(e={callback:e}),async function t(n,r){for await(const i of n.values()){if(!1===e.callback(i,n,r))return!1;if(e.recursive&&"directory"===i.kind&&!1===await t(i,r+1))break}}((e=Object.assign(t,e||{})).directory,0)},_.importDb=async function(e,t){if(t instanceof Function)return async function(e,t){const[n,r]=await _.getDirForFilename(e,!0),i=await n.getFileHandle(r,{create:!0});let s,o=await i.createSyncAccessHandle(),a=0,l=!1;try{for(o.truncate(0);void 0!==(s=await t());)s instanceof ArrayBuffer&&(s=new Uint8Array(s)),0===a&&s.byteLength>=15&&(f.affirmDbHeader(s),l=!0),o.write(s,{at:a}),a+=s.byteLength;if((a<512||0!=a%512)&&c("Input size",a,"is not correct for an SQLite database."),!l){const e=new Uint8Array(20);o.read(e,{at:0}),f.affirmDbHeader(e)}return o.write(new Uint8Array([1,1]),{at:18}),a}catch(e){throw await o.close(),o=void 0,await n.removeEntry(r).catch((()=>{})),e}finally{o&&await o.close()}}(e,t);t instanceof ArrayBuffer&&(t=new Uint8Array(t)),f.affirmIsDb(t);const n=t.byteLength,[r,i]=await _.getDirForFilename(e,!0);let s,o=0;try{const e=await r.getFileHandle(i,{create:!0});return s=await e.createSyncAccessHandle(),s.truncate(0),o=s.write(t,{at:0}),o!=n&&c("Expected to write "+n+" bytes but wrote "+o+"."),s.write(new Uint8Array([1,1]),{at:18}),o}catch(e){throw s&&(await s.close(),s=void 0),await r.removeEntry(i).catch((()=>{})),e}finally{s&&await s.close()}},e.oo1){const t=function(...t){const n=e.oo1.DB.dbCtorHelper.normalizeArgs(...t);n.vfs=y.$zName,e.oo1.DB.dbCtorHelper.call(this,n)};t.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=t,t.importDb=_.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(y.pointer,(function(e,t){t.capi.sqlite3_busy_timeout(e,1e4),t.capi.sqlite3_exec(e,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)}))}q.onmessage=function({data:t}){switch(t.type){case"opfs-unavailable":b(new Error(t.payload.join(" ")));break;case"opfs-async-loaded":q.postMessage({type:"opfs-async-init",args:E});break;case"opfs-async-inited":if(!0===v)break;try{e.vfs.installVfs({io:{struct:g,methods:P},vfs:{struct:y,methods:F}}),E.sabOPView=new Int32Array(E.sabOP),E.sabFileBufView=new Uint8Array(E.sabIO,0,E.fileBufferSize),E.sabS11nView=new Uint8Array(E.sabIO,E.sabS11nOffset,E.sabS11nSize),(()=>{if(E.s11n)return E.s11n;const e=new TextDecoder,t=new TextEncoder("utf-8"),n=new Uint8Array(E.sabIO,E.sabS11nOffset,E.sabS11nSize),r=new DataView(E.sabIO,E.sabS11nOffset,E.sabS11nSize);E.s11n=Object.create(null);const i=Object.create(null);i.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},i.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},i.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},i.string={id:4};const s=e=>i[typeof e]||c("Maintenance required: this value type cannot be serialized.",e),o=e=>{switch(e){case i.number.id:return i.number;case i.bigint.id:return i.bigint;case i.boolean.id:return i.boolean;case i.string.id:return i.string;default:c("Invalid type ID:",e)}};E.s11n.deserialize=function(t=!1){++$.s11n.deserialize.count;const i=performance.now(),s=n[0],a=s?[]:null;if(s){const t=[];let i,l,c,u=1;for(i=0;i<s;++i,++u)t.push(o(n[u]));for(i=0;i<s;++i){const s=t[i];s.getter?(c=r[s.getter](u,E.littleEndian),u+=s.size):(l=r.getInt32(u,E.littleEndian),u+=4,c=e.decode(n.slice(u,u+l)),u+=l),a.push(c)}}return t&&(n[0]=0),$.s11n.deserialize.time+=performance.now()-i,a},E.s11n.serialize=function(...e){const i=performance.now();if(++$.s11n.serialize.count,e.length){const i=[];let o=0,a=1;for(n[0]=255&e.length;o<e.length;++o,++a)i.push(s(e[o])),n[a]=i[o].id;for(o=0;o<e.length;++o){const s=i[o];if(s.setter)r[s.setter](a,e[o],E.littleEndian),a+=s.size;else{const i=t.encode(e[o]);r.setInt32(a,i.byteLength,E.littleEndian),a+=4,n.set(i,a),a+=i.byteLength}}}else n[0]=0;$.s11n.serialize.time+=performance.now()-i},E.s11n})(),n.sanityChecks&&(a("Running sanity checks because of opfs-sanity-check URL arg..."),function(){const e=p.scopedAllocPush(),t=new h;try{const n=t.pointer,r=u.SQLITE_OPEN_CREATE|u.SQLITE_OPEN_READWRITE|u.SQLITE_OPEN_MAIN_DB,i=p.scopedAlloc(8),s="/sanity/check/file"+A(8),f=p.scopedAllocCString(s);let d;if(E.s11n.serialize("This is ä string."),d=E.s11n.deserialize(),o("deserialize() says:",d),"This is ä string."!==d[0]&&c("String d13n error."),F.xAccess(y.pointer,f,0,i),d=p.peek(i,"i32"),o("xAccess(",s,") exists ?=",d),d=F.xOpen(y.pointer,f,n,r,i),o("open rc =",d,"state.sabOPView[xOpen] =",E.sabOPView[E.opIds.xOpen]),0!==d)return void l("open failed with code",d);F.xAccess(y.pointer,f,0,i),d=p.peek(i,"i32"),d||c("xAccess() failed to detect file."),d=P.xSync(t.pointer,0),d&&c("sync failed w/ rc",d),d=P.xTruncate(t.pointer,1024),d&&c("truncate failed w/ rc",d),p.poke(i,0,"i64"),d=P.xFileSize(t.pointer,i),d&&c("xFileSize failed w/ rc",d),o("xFileSize says:",p.peek(i,"i64")),d=P.xWrite(t.pointer,f,10,1),d&&c("xWrite() failed!");const h=p.scopedAlloc(16);d=P.xRead(t.pointer,h,6,2),p.poke(h+6,0);let m=p.cstrToJs(h);o("xRead() got:",m),"sanity"!==m&&c("Unexpected xRead() value."),F.xSleep&&(o("xSleep()ing before close()ing..."),F.xSleep(y.pointer,2e3),o("waking up from xSleep()")),d=P.xClose(n),o("xClose rc =",d,"sabOPView =",E.sabOPView),o("Deleting file:",s),F.xDelete(y.pointer,f,4660),F.xAccess(y.pointer,f,0,i),d=p.peek(i,"i32"),d&&c("Expecting 0 from xAccess(",s,") after xDelete()."),a("End of OPFS sanity checks.")}finally{t.dispose(),p.scopedAllocPop(e)}}()),globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory?navigator.storage.getDirectory().then((t=>{q.onerror=q._originalOnError,delete q._originalOnError,e.opfs=_,_.rootDirectory=t,o("End of OPFS sqlite3_vfs setup.",y),w()})).catch(b):w()}catch(e){l(e),b(e)}break;default:{const e="Unexpected message from the OPFS async worker: "+JSON.stringify(t);l(e),b(new Error(e));break}}}})))};t.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push((async e=>{try{let n=t.defaultProxyUri;return e.scriptInfo.sqlite3Dir&&(t.defaultProxyUri=e.scriptInfo.sqlite3Dir+n),t().catch((t=>{e.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",t.message)}))}catch(t){return e.config.error("installOpfsVfs() exception:",t),Promise.reject(t)}}))})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.util.toss,n=e.util.toss3,r=Object.create(null),i=e.capi,s=e.util,o=e.wasm,a=512,l=4096,c=i.SQLITE_OPEN_MAIN_DB|i.SQLITE_OPEN_MAIN_JOURNAL|i.SQLITE_OPEN_SUPER_JOURNAL|i.SQLITE_OPEN_WAL,u=".opaque",f=()=>Math.random().toString(36).slice(2),p=new TextDecoder,d=new TextEncoder,h=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),m=[e.config.error,e.config.warn,e.config.log];e.config.log;const _=e.config.warn;e.config.error;const g=new Map,y=e=>g.get(e),v=(e,t)=>{t?g.set(e,t):g.delete(e)},b=new Map,w=e=>b.get(e),q=(e,t)=>{t?b.set(e,t):b.delete(e)},k={xCheckReservedLock:function(e,t){const n=w(e);return n.log("xCheckReservedLock"),n.storeErr(),o.poke32(t,1),0},xClose:function(e){const t=w(e);t.storeErr();const n=t.getOFileForS3File(e);if(n)try{t.log(`xClose ${n.path}`),t.mapS3FileToOFile(e,!1),n.sah.flush(),n.flags&i.SQLITE_OPEN_DELETEONCLOSE&&t.deletePath(n.path)}catch(e){return t.storeErr(e,i.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(e){return i.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,n){return i.SQLITE_NOTFOUND},xFileSize:function(e,t){const n=w(e);n.log("xFileSize");const r=n.getOFileForS3File(e).sah.getSize()-l;return o.poke64(t,BigInt(r)),0},xLock:function(e,t){const n=w(e);return n.log(`xLock ${t}`),n.storeErr(),n.getOFileForS3File(e).lockType=t,0},xRead:function(e,t,n,r){const s=w(e);s.storeErr();const a=s.getOFileForS3File(e);s.log(`xRead ${a.path} ${n} @ ${r}`);try{const e=a.sah.read(o.heap8u().subarray(t,t+n),{at:l+Number(r)});return e<n?(o.heap8u().fill(0,t+e,t+n),i.SQLITE_IOERR_SHORT_READ):0}catch(e){return s.storeErr(e,i.SQLITE_IOERR)}},xSectorSize:function(e){return 4096},xSync:function(e,t){const n=w(e);n.log(`xSync ${t}`),n.storeErr();const r=n.getOFileForS3File(e);try{return r.sah.flush(),0}catch(e){return n.storeErr(e,i.SQLITE_IOERR)}},xTruncate:function(e,t){const n=w(e);n.log(`xTruncate ${t}`),n.storeErr();const r=n.getOFileForS3File(e);try{return r.sah.truncate(l+Number(t)),0}catch(e){return n.storeErr(e,i.SQLITE_IOERR)}},xUnlock:function(e,t){const n=w(e);return n.log("xUnlock"),n.getOFileForS3File(e).lockType=t,0},xWrite:function(e,n,r,s){const a=w(e);a.storeErr();const c=a.getOFileForS3File(e);a.log(`xWrite ${c.path} ${r} ${s}`);try{return r===c.sah.write(o.heap8u().subarray(n,n+r),{at:l+Number(s)})?0:t("Unknown write() failure.")}catch(e){return a.storeErr(e,i.SQLITE_IOERR)}}},x=new i.sqlite3_io_methods;x.$iVersion=1,e.vfs.installVfs({io:{struct:x,methods:k}});const E={xAccess:function(e,t,n,r){const i=y(e);i.storeErr();try{const e=i.getPath(t);o.poke32(r,i.hasFilename(e)?1:0)}catch(e){o.poke32(r,0)}return 0},xCurrentTime:function(e,t){return o.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return o.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,n){const r=y(e);r.log(`xDelete ${o.cstrToJs(t)}`),r.storeErr();try{return r.deletePath(r.getPath(t)),0}catch(e){return r.storeErr(e),i.SQLITE_IOERR_DELETE}},xFullPathname:function(e,t,n,r){return o.cstrncpy(r,t,n)<n?0:i.SQLITE_CANTOPEN},xGetLastError:function(e,t,n){const r=y(e),s=r.popErr();if(r.log(`xGetLastError ${t} e =`,s),s){const e=o.scopedAllocPush();try{const[r,i]=o.scopedAllocCString(s.message,!0);o.cstrncpy(n,r,t),i>t&&o.poke8(n+t-1,0)}catch(s){return i.SQLITE_NOMEM}finally{o.scopedAllocPop(e)}}return s?s.sqlite3Rc||i.SQLITE_IOERR:0},xOpen:function(e,n,r,s,a){const l=y(e);try{l.log(`xOpen ${o.cstrToJs(n)} ${s}`);const e=n&&o.peek8(n)?l.getPath(n):f();let c=l.getSAHForPath(e);!c&&s&i.SQLITE_OPEN_CREATE&&(l.getFileCount()<l.getCapacity()?(c=l.nextAvailableSAH(),l.setAssociatedPath(c,e,s)):t("SAH pool is full. Cannot create file",e)),c||t("file not found:",e);const u={path:e,flags:s,sah:c};l.mapS3FileToOFile(r,u),u.lockType=i.SQLITE_LOCK_NONE;const p=new i.sqlite3_file(r);return p.$pMethods=x.pointer,p.dispose(),o.poke32(a,s),0}catch(e){return l.storeErr(e),i.SQLITE_CANTOPEN}}};class ${vfsDir;#dhVfsRoot;#dhOpaque;#dhVfsParent;#mapSAHToName=new Map;#mapFilenameToSAH=new Map;#availableSAH=new Set;#mapS3FileToOFile_=new Map;#apBody=new Uint8Array(516);#dvBody;#cVfs;#verbosity;constructor(t=Object.create(null)){this.#verbosity=t.verbosity??h.verbosity,this.vfsName=t.name||h.name,this.#cVfs=function(t){e.capi.sqlite3_vfs_find(t)&&n("VFS name is already registered:",t);const r=new i.sqlite3_vfs,s=i.sqlite3_vfs_find(null),l=s?new i.sqlite3_vfs(s):null;return r.$iVersion=2,r.$szOsFile=i.sqlite3_file.structInfo.sizeof,r.$mxPathname=a,r.addOnDispose(r.$zName=o.allocCString(t),(()=>v(r.pointer,0))),l&&(r.$xRandomness=l.$xRandomness,r.$xSleep=l.$xSleep,l.dispose()),r.$xRandomness||E.xRandomness||(E.xRandomness=function(e,t,n){const r=o.heap8u();let i=0;for(;i<t;++i)r[n+i]=255e3*Math.random()&255;return i}),r.$xSleep||E.xSleep||(E.xSleep=(e,t)=>0),e.vfs.installVfs({vfs:{struct:r,methods:E}}),r}(this.vfsName),v(this.#cVfs.pointer,this),this.vfsDir=t.directory||"."+this.vfsName,this.#dvBody=new DataView(this.#apBody.buffer,this.#apBody.byteOffset),this.isReady=this.reset(!(t.clearOnInit??!h.clearOnInit)).then((()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(t.initialCapacity||h.initialCapacity)}))}#logImpl(e,...t){this.#verbosity>e&&m[e](this.vfsName+":",...t)}log(...e){this.#logImpl(2,...e)}warn(...e){this.#logImpl(1,...e)}error(...e){this.#logImpl(0,...e)}getVfs(){return this.#cVfs}getCapacity(){return this.#mapSAHToName.size}getFileCount(){return this.#mapFilenameToSAH.size}getFileNames(){const e=[],t=this.#mapFilenameToSAH.keys();for(const n of t)e.push(n);return e}async addCapacity(e){for(let t=0;t<e;++t){const e=f(),t=await this.#dhOpaque.getFileHandle(e,{create:!0}),n=await t.createSyncAccessHandle();this.#mapSAHToName.set(n,e),this.setAssociatedPath(n,"",0)}return this.getCapacity()}async reduceCapacity(e){let t=0;for(const n of Array.from(this.#availableSAH)){if(t===e||this.getFileCount()===this.getCapacity())break;const r=this.#mapSAHToName.get(n);n.close(),await this.#dhOpaque.removeEntry(r),this.#mapSAHToName.delete(n),this.#availableSAH.delete(n),++t}return t}releaseAccessHandles(){for(const e of this.#mapSAHToName.keys())e.close();this.#mapSAHToName.clear(),this.#mapFilenameToSAH.clear(),this.#availableSAH.clear()}async acquireAccessHandles(e){const t=[];for await(const[e,n]of this.#dhOpaque)"file"===n.kind&&t.push([e,n]);return Promise.all(t.map((async([t,n])=>{try{const r=await n.createSyncAccessHandle();if(this.#mapSAHToName.set(r,t),e)r.truncate(l),this.setAssociatedPath(r,"",0);else{const e=this.getAssociatedPath(r);e?this.#mapFilenameToSAH.set(e,r):this.#availableSAH.add(r)}}catch(e){throw this.storeErr(e),this.releaseAccessHandles(),e}})))}getAssociatedPath(e){e.read(this.#apBody,{at:0});const t=this.#dvBody.getUint32(512);if(this.#apBody[0]&&(t&i.SQLITE_OPEN_DELETEONCLOSE||0==(t&c)))return _(`Removing file with unexpected flags ${t.toString(16)}`,this.#apBody),this.setAssociatedPath(e,"",0),"";const n=new Uint32Array(2);e.read(n,{at:516});const r=this.computeDigest(this.#apBody);if(n.every(((e,t)=>e===r[t]))){const t=this.#apBody.findIndex((e=>0===e));return 0===t&&e.truncate(l),t?p.decode(this.#apBody.subarray(0,t)):""}return _("Disassociating file with bad digest."),this.setAssociatedPath(e,"",0),""}setAssociatedPath(e,n,r){const i=d.encodeInto(n,this.#apBody);a<=i.written+1&&t("Path too long:",n),this.#apBody.fill(0,i.written,a),this.#dvBody.setUint32(512,r);const s=this.computeDigest(this.#apBody);e.write(this.#apBody,{at:0}),e.write(s,{at:516}),e.flush(),n?(this.#mapFilenameToSAH.set(n,e),this.#availableSAH.delete(e)):(e.truncate(l),this.#availableSAH.add(e))}computeDigest(e){let t=3735928559,n=1103547991;for(const r of e)t=31*t+307*r,n=31*n+307*r;return new Uint32Array([t>>>0,n>>>0])}async reset(e){await this.isReady;let t,n=await navigator.storage.getDirectory();for(const e of this.vfsDir.split("/"))e&&(t=n,n=await n.getDirectoryHandle(e,{create:!0}));return this.#dhVfsRoot=n,this.#dhVfsParent=t,this.#dhOpaque=await this.#dhVfsRoot.getDirectoryHandle(u,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(e)}getPath(e){return o.isPtr(e)&&(e=o.cstrToJs(e)),(e instanceof URL?e:new URL(e,"file://localhost/")).pathname}deletePath(e){const t=this.#mapFilenameToSAH.get(e);return t&&(this.#mapFilenameToSAH.delete(e),this.setAssociatedPath(t,"",0)),!!t}storeErr(e,t){return e&&(e.sqlite3Rc=t||i.SQLITE_IOERR,this.error(e)),this.$error=e,t}popErr(){const e=this.$error;return this.$error=void 0,e}nextAvailableSAH(){const[e]=this.#availableSAH.keys();return e}getOFileForS3File(e){return this.#mapS3FileToOFile_.get(e)}mapS3FileToOFile(e,t){t?(this.#mapS3FileToOFile_.set(e,t),q(e,this)):(this.#mapS3FileToOFile_.delete(e),q(e,!1))}hasFilename(e){return this.#mapFilenameToSAH.has(e)}getSAHForPath(e){return this.#mapFilenameToSAH.get(e)}async removeVfs(){if(!this.#cVfs.pointer||!this.#dhOpaque)return!1;i.sqlite3_vfs_unregister(this.#cVfs.pointer),this.#cVfs.dispose();try{this.releaseAccessHandles(),await this.#dhVfsRoot.removeEntry(u,{recursive:!0}),this.#dhOpaque=void 0,await this.#dhVfsParent.removeEntry(this.#dhVfsRoot.name,{recursive:!0}),this.#dhVfsRoot=this.#dhVfsParent=void 0}catch(t){e.config.error(this.vfsName,"removeVfs() failed:",t)}return!0}exportFile(e){const n=this.#mapFilenameToSAH.get(e)||t("File not found:",e),r=n.getSize()-l,i=new Uint8Array(r>0?r:0);if(r>0){const e=n.read(i,{at:l});e!=r&&t("Expected to read "+r+" bytes but read "+e+".")}return i}async importDbChunked(e,n){const r=this.#mapFilenameToSAH.get(e)||this.nextAvailableSAH()||t("No available handles to import to.");r.truncate(0);let o,a=0,c=!1;try{for(;void 0!==(o=await n());)o instanceof ArrayBuffer&&(o=new Uint8Array(o)),0===a&&o.byteLength>=15&&(s.affirmDbHeader(o),c=!0),r.write(o,{at:l+a}),a+=o.byteLength;if((a<512||0!=a%512)&&t("Input size",a,"is not correct for an SQLite database."),!c){const e=new Uint8Array(20);r.read(e,{at:0}),s.affirmDbHeader(e)}r.write(new Uint8Array([1,1]),{at:4114})}catch(e){throw this.setAssociatedPath(r,"",0),e}return this.setAssociatedPath(r,e,i.SQLITE_OPEN_MAIN_DB),a}importDb(e,n){if(n instanceof ArrayBuffer)n=new Uint8Array(n);else if(n instanceof Function)return this.importDbChunked(e,n);const r=this.#mapFilenameToSAH.get(e)||this.nextAvailableSAH()||t("No available handles to import to."),s=n.byteLength;(s<512||s%512!=0)&&t("Byte array size is invalid for an SQLite db.");const o="SQLite format 3";for(let e=0;e<o.length;++e)o.charCodeAt(e)!==n[e]&&t("Input does not contain an SQLite database header.");const a=r.write(n,{at:l});return a!=s?(this.setAssociatedPath(r,"",0),t("Expected to write "+s+" bytes but wrote "+a+".")):(r.write(new Uint8Array([1,1]),{at:4114}),this.setAssociatedPath(r,e,i.SQLITE_OPEN_MAIN_DB)),a}}class S{#p;constructor(e){this.#p=e,this.vfsName=e.vfsName}async addCapacity(e){return this.#p.addCapacity(e)}async reduceCapacity(e){return this.#p.reduceCapacity(e)}getCapacity(){return this.#p.getCapacity(this.#p)}getFileCount(){return this.#p.getFileCount()}getFileNames(){return this.#p.getFileNames()}async reserveMinimumCapacity(e){const t=this.#p.getCapacity();return t<e?this.#p.addCapacity(e-t):t}exportFile(e){return this.#p.exportFile(e)}importDb(e,t){return this.#p.importDb(e,t)}async wipeFiles(){return this.#p.reset(!0)}unlink(e){return this.#p.deletePath(e)}async removeVfs(){return this.#p.removeVfs()}}e.installOpfsSAHPoolVfs=async function(n=Object.create(null)){const i=n.name||h.name;return r[i]?r[i]:globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory?r[i]=(async()=>{const e=await navigator.storage.getDirectory(),n=".opfs-sahpool-sync-check-"+f(),r=await e.getFileHandle(n,{create:!0}),i=(await r.createSyncAccessHandle()).close();return await i,await e.removeEntry(n),i?.then&&t("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0})().then((async function(){if(n.$testThrowInInit)throw n.$testThrowInInit;const t=new $(n);return t.isReady.then((async()=>{const n=new S(t);if(e.oo1){const r=e.oo1,i=t.getVfs(),s=function(...e){const t=r.DB.dbCtorHelper.normalizeArgs(...e);t.vfs=i.$zName,r.DB.dbCtorHelper.call(this,t)};s.prototype=Object.create(r.DB.prototype),n.OpfsSAHPoolDb=s,r.DB.dbCtorHelper.setVfsPostOpenSql(i.pointer,(function(e,t){t.capi.sqlite3_exec(e,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)}))}return t.log("VFS initialized."),n})).catch((async e=>(await t.removeVfs().catch((()=>{})),e)))})).catch((e=>r[i]=Promise.reject(e))):r[i]=Promise.reject(new Error("Missing required OPFS APIs."))}})),void 0!==e){const t=Object.assign(Object.create(null),{exports:"undefined"==typeof wasmExports?e.asm:wasmExports,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});let n;globalThis.sqlite3ApiConfig=t;try{n=globalThis.sqlite3ApiBootstrap()}catch(e){throw console.error("sqlite3ApiBootstrap() error:",e),e}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")})),r.ready});const Ru=function(){const e=Du;if(!e)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const t=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:"undefined"!=typeof WorkerGlobalScope,location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(t.debugModule=t.urlParams.has("sqlite3.debugModule")?(...e)=>console.warn("sqlite3.debugModule:",...e):()=>{},t.urlParams.has("sqlite3.dir"))t.sqlite3Dir=t.urlParams.get("sqlite3.dir")+"/";else if(t.moduleScript){const e=t.moduleScript.src.split("/");e.pop(),t.sqlite3Dir=e.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return e(...r).then((e=>{const r=e.sqlite3;r.scriptInfo=t,n.__isUnderTest&&(r.__isUnderTest=!0);const i=r.asyncPostInit;return delete r.asyncPostInit,i()})).catch((e=>{throw console.error("Exception loading sqlite3 module:",e),e}))},globalThis.sqlite3InitModule.ready=e.ready,globalThis.sqlite3InitModuleState.moduleScript){const e=globalThis.sqlite3InitModuleState;let t=e.moduleScript.src.split("/");t.pop(),e.scriptDir=t.join("/")+"/"}return t.debugModule("sqlite3InitModuleState =",t),globalThis.sqlite3InitModule}();var Mu=Du=Ru;globalThis.sqlite3Worker1Promiser=function e(t=e.defaultConfig){if(1===arguments.length&&"function"==typeof arguments[0]){const n=t;(t=Object.assign(Object.create(null),e.defaultConfig)).onready=n}else t=Object.assign(Object.create(null),e.defaultConfig,t);const n=Object.create(null),r=function(){},i=t.onerror||r,s=t.debug||r,o=t.generateMessageId?void 0:Object.create(null),a=t.generateMessageId||function(e){return e.type+"#"+(o[e.type]=(o[e.type]||0)+1)},l=(...e)=>{throw new Error(e.join(" "))};let c;return t.worker||(t.worker=e.defaultConfig.worker),"function"==typeof t.worker&&(t.worker=t.worker()),t.worker.onmessage=function(e){e=e.data,s("worker1.onmessage",e);let r=n[e.messageId];if(!r)return e&&"sqlite3-api"===e.type&&"worker1-ready"===e.result?void(t.onready&&t.onready()):(r=n[e.type],r&&r.onrow?void r.onrow(e):void(t.onunhandled?t.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",e)));switch(delete n[e.messageId],e.type){case"error":return void r.reject(e);case"open":c||(c=e.dbId);break;case"close":e.dbId===c&&(c=void 0)}try{r.resolve(e)}catch(e){r.reject(e)}},function(){let e;1===arguments.length?e=arguments[0]:2===arguments.length?(e=Object.create(null),e.type=arguments[0],e.args=arguments[1],e.dbId=e.args.dbId):l("Invalid arugments for sqlite3Worker1Promiser()-created factory."),e.dbId||"open"===e.type||(e.dbId=c),e.messageId=a(e),e.departureTime=performance.now();const r=Object.create(null);let i;r.message=e,"exec"===e.type&&e.args&&("function"==typeof e.args.callback?(i=e.messageId+":row",r.onrow=e.args.callback,e.args.callback=i,n[i]=r):"string"==typeof e.args.callback&&l("exec callback may not be a string when using the Promise interface."));let o=new Promise((function(i,o){r.resolve=i,r.reject=o,n[e.messageId]=r,s("Posting",e.type,"message to Worker dbId="+(c||"default")+":",e),t.worker.postMessage(e)}));return i&&(o=o.finally((()=>delete n[i]))),o}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("sqlite3-worker1-bundler-friendly.mjs",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href),{type:"module"})},onerror:(...e)=>console.error("worker1 promiser error",...e)};const Bu={"無し":{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},"火耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"水耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"雷耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"氷耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"龍耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"毒耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"麻痺耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"睡眠耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"爆破やられ耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"植生学":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"地質学":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"飛び込み":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"陽動":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"泥雪耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"満足感":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"腹減り耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"剥ぎ取り鉄人":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"防御":{0:0,1:1,2:2,3:3,4:4,5:4,6:5,7:6},"火属性攻撃強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"水属性攻撃強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"雷属性攻撃強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"氷属性攻撃強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"龍属性攻撃強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"ボマー":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"滑走強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"毒属性強化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"スタミナ奪取":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"笛吹き名人":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"回復速度":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"砥石使用高速化":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"風圧耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"ひるみ軽減":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"ブレ抑制":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"気絶耐性":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"装填速度":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"反動軽減":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"不屈":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"乗り名人":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"体術":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"体力回復量UP":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"アイテム使用強化":{0:0,1:2,2:4,3:4,4:6,5:8,6:8,7:10},"翔蟲使い":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"壁面移動":{0:0,1:2,2:4,3:4,4:6,5:8,6:8,7:10},"精霊の加護":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"早食い":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"属性やられ耐性":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"破壊王":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"広域化":{0:0,1:2,2:3,3:3,4:4,5:6,6:6,7:7},"KO術":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"納刀術":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"回避性能":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"回避距離UP":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"抜刀術【力】":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"泡沫の舞":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"逆襲":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"耐震":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"鈍器使い":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"高速変形":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"見切り":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"攻撃":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"渾身":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"強化持続":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"スタミナ急速回復":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"ガード性能":{0:0,1:2,2:3,3:5,4:6,5:8,6:9,7:11},"ガード強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"砲弾装填":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"特殊射撃強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"火事場力":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"心眼":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"集中":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"ランナー":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"砲術":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"会心撃【属性】":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"弾導強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"超会心":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"弱点特効":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"挑戦者":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"フルチャージ":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"逆恨み":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"死中に活":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"力の解放":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"麻痺属性強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"睡眠属性強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"爆破属性強化":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"剛刃研磨":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"業物":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"弾丸節約":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"達人芸":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"耳栓":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"抜刀術【技】":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"キノコ大好き":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"攻めの守勢":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"装填拡張":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"通常弾・連射矢強化":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"貫通弾・貫通矢強化":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"散弾・拡散矢強化":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"速射強化":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"ジャンプ鉄人":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"鬼火纏":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"幸運":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"匠":{0:0,1:3,2:4,3:7,4:8,5:11,6:12,7:15},"壁面移動【翔】":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"刃鱗磨き":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"合気":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"疾之息吹":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"弓溜め段階解放":{0:0,1:4,2:8,3:12,4:16,5:20,6:24,7:28},"研磨術【鋭】":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"チューンアップ":{0:0,1:3,2:6,3:9,4:12,5:15,6:18,7:21},"チャージマスター":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"災禍転福":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"供応":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"顕如盤石":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},"攻勢":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"連撃":{0:0,1:2,2:4,3:6,4:8,5:10,6:12,7:14},"霞皮の恩恵":{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7}};class zu{constructor(e={}){this.dbName="mhrise-charm-manager",this.tableName="charms",this.db=null,this.indexeddb=null,this.charms=null,this.workers={},e.isDemoMode&&(this.tableName="demoCharms"),this._init()}sql(e){const t=e.startsWith("select")?{rowMode:"object",returnValue:"resultRows"}:{};return console.log({query:e,params:t}),this.db.exec(e,t)}async _init(){const e=await Mu();this.db=new e.oo1.JsStorageDb("local"),console.log("DB open: ",this.db.isOpen()),await this._createTable(),this.indexeddb=new Ja(this.tableName),this.indexeddb.version(1).stores({images:"name"}),this.updateCharmArray()}reset(){this.sql(`drop table if exists ${this.tableName}`),this._createTable()}registerCharm(e,t){this.saveScreenshot(t,e.imageName),this.registerCharms([e])}registerCharms(e){const t=e.map((e=>{Array.isArray(e.slots)||console.log("!!!!!! slots is not array !!!!!!");const t=e.slots.join(", "),n=e.imageName?`'${e.imageName}'`:"NULL";return"("+[`'${e.skills[0]}'`,e.skillLevels[0],`'${e.skills[1]}'`,e.skillLevels[1],t,n].join(", ")+")"})).join(",\n");console.log(t),this.sql(`\n      insert or ignore into ${this.tableName}\n      (skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3, imagename)\n      values\n      ${t}\n    `),(()=>{clearTimeout(this._timer);const e=this;this._timer=setTimeout((()=>e.updateCharmArray()),1e3)})()}saveScreenshot(e,t){this.indexeddb.images.put({name:t,rows:e.rows,cols:e.cols,type:e.type(),data:e.data.slice(0)})}searchCharms(e){return this.sql(e)}_createTable(){this.sql(`create table if not exists ${this.tableName}(\n               skill1      varchar(20),\n               skill1Level int,\n               skill2      varchar(20),\n               skill2Level int,\n               slot1       int,\n               slot2       int,\n               slot3       int,\n               imagename   varchar(128),\n               unique (skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3))`),this.sql(`create index if not exists '${this.tableName}.skill1' on ${this.tableName}(skill1, skill1Level)`),this.sql(`create index if not exists '${this.tableName}.skill2' on ${this.tableName}(skill2, skill2Level)`),this.sql(`create index if not exists '${this.tableName}.slots'  on ${this.tableName}(slot1, slot2, slot3)`)}async getScreenshot(e){const t=await this.indexeddb.images.get(e);return n.default.matFromArray(t.rows,t.cols,t.type,t.data)}updateCharmArray(){this.charms=this.searchCharms(`select rowid,* from ${this.tableName}`).map((e=>(null!=Bu[e.skill1]&&null!=Bu[e.skill2]&&(e.evaluation=Bu[e.skill1][e.skill1Level]+Bu[e.skill2][e.skill2Level]+e.slot1+e.slot2+e.slot3),e))),this.searchSubstitutableCharms()}async searchSubstitutableCharms(){const e="substitutable-charm-searcher";null==this.workers[e]&&(this.workers[e]=new Worker("mhrise-charm-substitution-search.worker.js")),this.workers[e].addEventListener("message",(e=>{console.log(e);const t=JSON.parse(e.data.result);this._applySubstitutableCharmsUpdate(t)})),this.workers[e].postMessage({charmsJson:JSON.stringify(this.charms)})}_applySubstitutableCharmsUpdate(e){var t;for(const n of this.charms){const[r,i]=null!==(t=e[0])&&void 0!==t?t:[Number.MAX_SAFE_INTEGER,[]];n.rowid>r?console.log("internal error"):n.rowid<r?n.substitutableCharms=[]:(n.substitutableCharms=i.map((e=>this.charms.find((t=>t.rowid===e)))),e.shift())}this.charms=[...this.charms]}_row2obj(e){return{skills:[e.skill1,e.skill2],skillLevels:[e.skill1Level,e.skill2Level],slots:[e.slot1,e.slot2,e.slot3]}}_isSameCharm(e,t){return JSON.stringify(e)===JSON.stringify(t)}}function Hu(e){let t,n,r,i,s,o,a,l,c,u,f,p;function d(t){e[1](t)}let h={};return void 0!==e[0]&&(h.isOpen=e[0]),r=new ju({props:h}),se.push((()=>Ae(r,"isOpen",d))),c=new Pu({props:{isNavigationOpen:e[0]}}),{c(){t=T("main"),n=T("header"),Ie(r.$$.fragment),s=N(),o=T("h1"),o.textContent=`${Uu}`,a=N(),l=T("div"),Ie(c.$$.fragment),u=N(),f=T("div"),f.textContent=`v${Wu}`,R(o,"class","svelte-1kyfeff"),R(n,"class","svelte-1kyfeff"),R(l,"id","nav-wrapper"),R(l,"class","svelte-1kyfeff"),R(f,"id","version"),R(f,"class","svelte-1kyfeff"),R(t,"class","svelte-1kyfeff")},m(e,i){I(e,t,i),A(t,n),Ce(r,n,null),A(n,s),A(n,o),A(t,a),A(t,l),Ce(c,l,null),A(t,u),A(t,f),p=!0},p(e,[t]){const n={};!i&&1&t&&(i=!0,n.isOpen=e[0],fe((()=>i=!1))),r.$set(n);const s={};1&t&&(s.isNavigationOpen=e[0]),c.$set(s)},i(e){p||(qe(r.$$.fragment,e),qe(c.$$.fragment,e),p=!0)},o(e){ke(r.$$.fragment,e),ke(c.$$.fragment,e),p=!1},d(e){e&&C(t),Oe(r),Oe(c)}}}const Uu="MHRise Charm Scanner",Wu="0.9.1";function Vu(e,t,n){let r,i;d(e,On,(e=>n(2,r=e))),d(e,mc,(e=>n(3,i=e)));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};let o=!0;return window.addEventListener("load",(()=>s(void 0,void 0,void 0,(function*(){b(On,r=new zu,r),yield ll.init(),b(mc,i=!0,i)})))),[o,function(e){o=e,n(0,o)}]}return new class extends Fe{constructor(e){super(),Pe(this,e,Vu,Hu,f,{})}}({target:document.body,props:{}})}(cv);
//# sourceMappingURL=bundle.js.map
