var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(e,t,n){e.$$.on_destroy.push(c(t,n))}function h(e,t,n,r){if(e){const i=f(e,t,n,r);return e[0](i)}}function f(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function d(e,t,n,r,i,o,s){const a=function(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}(t,r,i,o);if(a){const i=f(t,n,r,s);e.p(i,a)}}function p(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function m(e){return null==e?"":e}function g(e,t,n=t){return e.set(n),t}function v(t){return t&&a(t.destroy)?t.destroy:e}const y="undefined"!=typeof window;let b=y?()=>window.performance.now():()=>Date.now(),k=y?e=>requestAnimationFrame(e):e;const w=new Set;function $(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&k($)}function _(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function j(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function O(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(e){return document.createTextNode(e)}function A(){return E(" ")}function N(){return E("")}function I(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function P(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function T(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:P(e,r,t[r])}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function L(e,t){e.value=null==t?"":t}function R(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function D(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function M(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function B(e,t,n){e.classList[n?"add":"remove"](t)}function K(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class z{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=S(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)x(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const q=new Set;let V,H=0;function U(e,t,n,r,i,o,s,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=e.ownerDocument;q.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(S("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${i}ms 1 both`,H+=1,h}function G(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),H-=i,H||k((()=>{H||(q.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),q.clear())})))}function W(e){V=e}function X(){if(!V)throw new Error("Function called outside component initialization");return V}function Y(e){X().$$.on_mount.push(e)}function J(){const e=X();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=K(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}const Q=[],Z=[],ee=[],te=[],ne=Promise.resolve();let re=!1;function ie(e){ee.push(e)}function oe(e){te.push(e)}let se=!1;const ae=new Set;function le(){if(!se){se=!0;do{for(let e=0;e<Q.length;e+=1){const t=Q[e];W(t),ce(t.$$)}for(W(null),Q.length=0;Z.length;)Z.pop()();for(let e=0;e<ee.length;e+=1){const t=ee[e];ae.has(t)||(ae.add(t),t())}ee.length=0}while(Q.length);for(;te.length;)te.pop()();re=!1,se=!1,ae.clear()}}function ce(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}let ue;function he(e,t,n){e.dispatchEvent(K(`${t?"intro":"outro"}${n}`))}const fe=new Set;let de;function pe(){de={r:0,c:[],p:de}}function me(){de.r||s(de.c),de=de.p}function ge(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function ve(e,t,n,r){if(e&&e.o){if(fe.has(e))return;fe.add(e),de.c.push((()=>{fe.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const ye={duration:0};function be(n,r,i,o){let l=r(n,i),c=o?0:1,u=null,h=null,f=null;function d(){f&&G(n,f)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:i=0,duration:o=300,easing:a=t,tick:m=e,css:g}=l||ye,v={start:b()+i,b:r};r||(v.group=de,de.r+=1),u||h?h=v:(g&&(d(),f=U(n,c,r,o,i,a,g)),r&&m(0,1),u=p(v,o),ie((()=>he(n,r,"start"))),function(e){let t;0===w.size&&k($),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(h&&e>h.start&&(u=p(h,o),h=null,he(n,u.b,"start"),g&&(d(),f=U(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)m(c=u.b,1-c),he(n,u.b,"end"),h||(u.b?d():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),m(c,1-c)}return!(!u&&!h)})))}return{run(e){a(l)?(ue||(ue=Promise.resolve(),ue.then((()=>{ue=null}))),ue).then((()=>{l=l(),m(e)})):m(e)},end(){d(),u=h=null}}}function ke(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function we(e){return"object"==typeof e&&null!==e?e:{}}function $e(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function _e(e){e&&e.c()}function xe(e,t,n,i){const{fragment:o,on_mount:l,on_destroy:c,after_update:u}=e.$$;o&&o.m(t,n),i||ie((()=>{const t=l.map(r).filter(a);c?c.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(ie)}function Ce(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){-1===e.$$.dirty[0]&&(Q.push(e),re||(re=!0,ne.then(le)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(t,n,r,i,a,l,c=[-1]){const u=V;W(t);const h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:o(),dirty:c,skip_bound:!1};let f=!1;if(h.ctx=r?r(t,n.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),f&&je(t,e)),n})):[],h.update(),f=!0,s(h.before_update),h.fragment=!!i&&i(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(C)}else h.fragment&&h.fragment.c();n.intro&&ge(t.$$.fragment),xe(t,n.target,n.anchor,n.customElement),le()}W(u)}class Oe{$destroy(){Ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Ee=function(){return(Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ae(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ne=Object.keys,Ie=Array.isArray,Pe="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function Te(e,t){return"object"!=typeof t||Ne(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||Pe.Promise||(Pe.Promise=Promise);var Fe=Object.getPrototypeOf,Le={}.hasOwnProperty;function Re(e,t){return Le.call(e,t)}function De(e,t){"function"==typeof t&&(t=t(Fe(e))),Ne(t).forEach((function(n){Be(e,n,t[n])}))}var Me=Object.defineProperty;function Be(e,t,n,r){Me(e,t,Te(n&&Re(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ke(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Be(e.prototype,"constructor",e),{extend:De.bind(null,e.prototype)}}}}var ze=Object.getOwnPropertyDescriptor;function qe(e,t){var n;return ze(e,t)||(n=Fe(e))&&qe(n,t)}var Ve=[].slice;function He(e,t,n){return Ve.call(e,t,n)}function Ue(e,t){return t(e)}function Ge(e){if(!e)throw new Error("Assertion Failed")}function We(e){Pe.setImmediate?setImmediate(e):setTimeout(e,0)}function Xe(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Ye(e,t){if(Re(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=Ye(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:Ye(a,t.substr(s+1))}}function Je(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Ge("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Je(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?Ie(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l||(l=e[s]={}),Je(l,a,n)}}else void 0===n?Ie(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Qe(e,t){"string"==typeof t?Je(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Je(e,t,void 0)}))}function Ze(e){var t={};for(var n in e)Re(e,n)&&(t[n]=e[n]);return t}var et=[].concat;function tt(e){return et.apply([],e)}var nt="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(tt([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return Pe[e]})),rt=nt.map((function(e){return Pe[e]})),it=Xe(nt,(function(e){return[e,!0]}));function ot(e){if(!e||"object"!=typeof e)return e;var t;if(Ie(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(ot(e[n]))}else if(rt.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)Re(e,i)&&(t[i]=ot(e[i]));return t}var st={}.toString;function at(e){return st.call(e).slice(8,-1)}var lt=function(e,t){return"Array"===t?""+e.map((function(e){return lt(e,at(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function ct(e,t,n,r){return n=n||{},r=r||"",Ne(e).forEach((function(i){if(Re(t,i)){var o=e[i],s=t[i];if("object"==typeof o&&"object"==typeof s&&o&&s){var a=at(o),l=at(s);a===l?it[a]?lt(o,a)!==lt(s,l)&&(n[r+i]=t[i]):ct(o,s,n,r+i+"."):n[r+i]=t[i]}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),Ne(t).forEach((function(i){Re(e,i)||(n[r+i]=t[i])})),n}var ut="undefined"!=typeof Symbol&&Symbol.iterator,ht=ut?function(e){var t;return null!=e&&(t=e[ut])&&t.apply(e)}:function(){return null},ft={};function dt(e){var t,n,r,i;if(1===arguments.length){if(Ie(e))return e.slice();if(this===ft&&"string"==typeof e)return[e];if(i=ht(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var pt="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},mt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gt(e,t){mt=e,vt=t}var vt=function(){return!0},yt=!new Error("").stack;function bt(){if(yt)try{throw new Error}catch(e){return e}return new Error}function kt(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(vt).map((function(e){return"\n"+e})).join("")):""}var wt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wt),_t={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function xt(e,t){this._e=bt(),this.name=e,this.message=t}function Ct(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function jt(e,t,n,r){this._e=bt(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ct(e,t)}function St(e,t){this._e=bt(),this.name="BulkError",this.failures=t,this.message=Ct(e,t)}Ke(xt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+kt(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ke(jt).from(xt),Ke(St).from(xt);var Ot=$t.reduce((function(e,t){return e[t]=t+"Error",e}),{}),Et=xt,At=$t.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=bt(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=_t[t]||n,this.inner=null)}return Ke(r).from(Et),e[t]=r,e}),{});At.Syntax=SyntaxError,At.Type=TypeError,At.Range=RangeError;var Nt=wt.reduce((function(e,t){return e[t+"Error"]=At[t],e}),{});var It=$t.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=At[t]),e}),{});function Pt(){}function Tt(e){return e}function Ft(e,t){return null==e||e===Tt?t:function(n){return t(e(n))}}function Lt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Rt(e,t){return e===Pt?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Lt(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Lt(i,this.onerror):i),void 0!==o?o:n}}function Dt(e,t){return e===Pt?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Lt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Lt(r,this.onerror):r)}}function Mt(e,t){return e===Pt?t:function(n){var r=e.apply(this,arguments);Te(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Lt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Lt(o,this.onerror):o),void 0===r?void 0===s?void 0:s:Te(r,s)}}function Bt(e,t){return e===Pt?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Kt(e,t){return e===Pt?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}It.ModifyError=jt,It.DexieError=xt,It.BulkError=St;var zt={},qt="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Vt=qt[0],Ht=qt[1],Ut=qt[2],Gt=Ht&&Ht.then,Wt=Vt&&Vt.constructor,Xt=!!Ut,Yt=!1,Jt=Ut?function(){Ut.then(wn)}:Pe.setImmediate?setImmediate.bind(null,wn):Pe.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){wn(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(wn,0)},Qt=function(e,t){ln.push([e,t]),en&&(Jt(),en=!1)},Zt=!0,en=!0,tn=[],nn=[],rn=null,on=Tt,sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Un,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Un(e[0],e[1])}catch(e){}}))}},an=sn,ln=[],cn=0,un=[];function hn(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Pt,this._lib=!1;var t=this._PSD=an;if(mt&&(this._stackHolder=bt(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==zt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&mn(this,this._value))}this._state=null,this._value=null,++t.ref,pn(this,e)}var fn={get:function(){var e=an,t=Nn;function n(n,r){var i=this,o=!e.global&&(e!==an||t!==Nn),s=o&&!Fn(),a=new hn((function(t,a){vn(i,new dn(qn(n,e,o,s),qn(r,e,o,s),t,a,e))}));return mt&&kn(a,this),a}return n.prototype=zt,n},set:function(e){Be(this,"then",e&&e.prototype===zt?fn:{get:function(){return e},set:fn.set})}};function dn(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function pn(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&$n();t&&"function"==typeof t.then?pn(e,(function(e,n){t instanceof hn?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,gn(e)),n&&_n()}}),mn.bind(null,e))}catch(t){mn(e,t)}}function mn(e,t){if(nn.push(t),null===e._state){var n=e._lib&&$n();t=on(t),e._state=!1,e._value=t,mt&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=qe(t,"stack");t._promise=e,Be(t,"stack",{get:function(){return Yt?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){tn.some((function(t){return t._value===e._value}))||tn.push(e)}(e),gn(e),n&&_n()}}function gn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)vn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===cn&&(++cn,Qt((function(){0==--cn&&xn()}),[]))}function vn(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++cn,Qt(yn,[n,e,t])}else e._listeners.push(t)}function yn(e,t,n){try{rn=t;var r,i=t._value;t._state?r=e(i):(nn.length&&(nn=[]),r=e(i),-1===nn.indexOf(i)&&function(e){var t=tn.length;for(;t;)if(tn[--t]._value===e._value)return void tn.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{rn=null,0==--cn&&xn(),--n.psd.ref||n.psd.finalize()}}function bn(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=kt(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return mt&&((r=kt(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&bn(e._prev,t,n)),t}function kn(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function wn(){$n()&&_n()}function $n(){var e=Zt;return Zt=!1,en=!1,e}function _n(){var e,t,n;do{for(;ln.length>0;)for(e=ln,ln=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(ln.length>0);Zt=!0,en=!0}function xn(){var e=tn;tn=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=un.slice(0),n=t.length;n;)t[--n]()}function Cn(e){return new hn(zt,!1,e)}function jn(e,t){var n=an;return function(){var r=$n(),i=an;try{return Mn(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Mn(i,!1),r&&_n()}}}De(hn.prototype,{then:fn,_then:function(e,t){vn(this,new dn(null,null,e,t,an))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Cn(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Cn(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Cn(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Yt=!0;var e=bn(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Yt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new hn((function(r,i){var o=setTimeout((function(){return i(new At.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Be(hn.prototype,Symbol.toStringTag,"Dexie.Promise"),sn.env=Bn(),De(hn,{all:function(){var e=dt.apply(null,arguments).map(Ln);return new hn((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return hn.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof hn)return e;if(e&&"function"==typeof e.then)return new hn((function(t,n){e.then(t,n)}));var t=new hn(zt,!0,e);return kn(t,rn),t},reject:Cn,race:function(){var e=dt.apply(null,arguments).map(Ln);return new hn((function(t,n){e.map((function(e){return hn.resolve(e).then(t,n)}))}))},PSD:{get:function(){return an},set:function(e){return an=e}},totalEchoes:{get:function(){return Nn}},newPSD:Pn,usePSD:Kn,scheduler:{get:function(){return Qt},set:function(e){Qt=e}},rejectionMapper:{get:function(){return on},set:function(e){on=e}},follow:function(e,t){return new hn((function(n,r){return Pn((function(t,n){var r=an;r.unhandleds=[],r.onunhandled=n,r.finalize=Lt((function(){var e=this;!function(e){function t(){e(),un.splice(un.indexOf(t),1)}un.push(t),++cn,Qt((function(){0==--cn&&xn()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Wt&&(Wt.allSettled&&Be(hn,"allSettled",(function(){var e=dt.apply(null,arguments).map(Ln);return new hn((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return hn.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Wt.any&&"undefined"!=typeof AggregateError&&Be(hn,"any",(function(){var e=dt.apply(null,arguments).map(Ln);return new hn((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return hn.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Sn={awaits:0,echoes:0,id:0},On=0,En=[],An=0,Nn=0,In=0;function Pn(e,t,n,r){var i=an,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++In;var s=sn.env;o.env=Xt?{Promise:hn,PromiseProp:{value:hn,configurable:!0,writable:!0},all:hn.all,race:hn.race,allSettled:hn.allSettled,any:hn.any,resolve:hn.resolve,reject:hn.reject,nthen:Vn(s.nthen,o),gthen:Vn(s.gthen,o)}:{},t&&Te(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Kn(o,e,n,r);return 0===o.ref&&o.finalize(),a}function Tn(){return Sn.id||(Sn.id=++On),++Sn.awaits,Sn.echoes+=100,Sn.id}function Fn(){return!!Sn.awaits&&(0==--Sn.awaits&&(Sn.id=0),Sn.echoes=100*Sn.awaits,!0)}function Ln(e){return Sn.echoes&&e&&e.constructor===Wt?(Tn(),e.then((function(e){return Fn(),e}),(function(e){return Fn(),Gn(e)}))):e}function Rn(e){++Nn,Sn.echoes&&0!=--Sn.echoes||(Sn.echoes=Sn.id=0),En.push(an),Mn(e,!0)}function Dn(){var e=En[En.length-1];En.pop(),Mn(e,!1)}function Mn(e,t){var n=an;if((t?!Sn.echoes||An++&&e===an:!An||--An&&e===an)||zn(t?Rn.bind(null,e):Dn),e!==an&&(an=e,n===sn&&(sn.env=Bn()),Xt)){var r=sn.env.Promise,i=e.env;Ht.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Pe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Bn(){var e=Pe.Promise;return Xt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Pe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ht.then,gthen:e.prototype.then}:{}}function Kn(e,t,n,r,i){var o=an;try{return Mn(e,!0),t(n,r,i)}finally{Mn(o,!1)}}function zn(e){Gt.call(Vt,e)}function qn(e,t,n,r){return"function"!=typeof e?e:function(){var i=an;n&&Tn(),Mn(t,!0);try{return e.apply(this,arguments)}finally{Mn(i,!1),r&&zn(Fn)}}}function Vn(e,t){return function(n,r){return e.call(this,qn(n,t),qn(r,t))}}-1===(""+Gt).indexOf("[native code]")&&(Tn=Fn=Pt);var Hn="unhandledrejection";function Un(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(Pe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Hn,!0,!0),Te(r,i)):Pe.CustomEvent&&Te(r=new CustomEvent(Hn,{detail:i}),i),r&&Pe.dispatchEvent&&(dispatchEvent(r),!Pe.PromiseRejectionEvent&&Pe.onunhandledrejection))try{Pe.onunhandledrejection(r)}catch(e){}mt&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Gn=hn.reject;function Wn(e,t,n,r){if(e._state.openComplete||an.letThrough){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(e){return Gn(e)}return i._promise(t,(function(e,t){return Pn((function(){return an.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Gn(new At.DatabaseClosed);e.open().catch(Pt)}return e._state.dbReadyPromise.then((function(){return Wn(e,t,n,r)}))}var Xn="3.0.3",Yn=String.fromCharCode(65535),Jn=-1/0,Qn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Zn="String expected.",er=[],tr="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),nr=tr,rr=tr,ir=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},or="__dbnames",sr="readonly",ar="readwrite";function lr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var cr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ur(e){return function(t){return void 0===Ye(t,e)&&Qe(t=ot(t),e),t}}var hr=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||an.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new At.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var s=$n();try{return r&&r.db===this.db?r===an.trans?r._promise(e,o,n):Pn((function(){return r._promise(e,o,n)}),{trans:r,transless:an.transless||an}):Wn(this.db,e,[this.name],o)}finally{s&&_n()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Ie(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=Ne(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Yn)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&mt&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var s=t.reduce((function(t,n){var i=t[0],s=t[1],a=r[n],l=e[n];return[i||a,i||!a?lr(s,a&&a.multi?function(e){var t=Ye(e,n);return Ie(t)&&t.some((function(e){return o(l,e)}))}:function(e){return o(l,Ye(e,n))}):s]}),[null,null]),a=s[0],l=s[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Ie(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(Re(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){Te(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=e;return o&&i&&(s=ur(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})})).then((function(e){return e.numFailures?hn.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Je(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||Ie(t))throw new At.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Ie(e))return this.where(":id").equals(e).modify(t);Ne(t).forEach((function(n){Je(e,n,t[n])}));var n=Ye(e,this.schema.primKey.keyPath);return void 0===n?Gn(new At.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=e;return o&&i&&(s=ur(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?hn.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Je(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?hn.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:cr})})).then((function(e){return e.numFailures?hn.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new At.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new At.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&s?e.map(ur(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return o?n:i;throw new St(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",Object.keys(s).map((function(e){return s[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new At.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new At.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&s?e.map(ur(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return o?n:i;throw new St(r.name+".bulkPut(): "+t+" of "+l+" operations failed",Object.keys(s).map((function(e){return s[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new St(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function fr(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return s(e);r||(r=Bt),i||(i=Pt);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function s(e){Ne(e).forEach((function(t){var n=e[t];if(Ie(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new At.InvalidArgument("Invalid event config");var r=o(t,Tt,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){We((function(){e.apply(null,t)}))}))}))}}))}}function dr(e,t){return Ke(t).from({prototype:e}),t}function pr(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function mr(e,t){e.filter=lr(e.filter,t)}function gr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return lr(r(),t())}:t,e.justLimit=n&&!r}function vr(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new At.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function yr(e,t,n){var r=vr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function br(e,t,n,r){var i=e.replayFilter?lr(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),Re(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),kr(yr(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return kr(yr(e,r,n),lr(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function kr(e,t,n,r){var i=jn(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=Pt}),(function(t){e.fail(t),n=Pt}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var wr=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Gn.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Gn.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=lr(t.algorithm,e)},e.prototype._iterate=function(e,t){return br(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&Te(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return br(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(pr(n,!0))return r.count({trans:e,query:{index:vr(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return br(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&pr(n,!0)&&n.limit>0){var r=n.valueMapper,i=vr(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return br(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,pr(t)?gr(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):gr(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),gr(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return mr(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return mr(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=lr(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&pr(t,!0)&&t.limit>0)return this._read((function(e){var n=vr(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return mr(this._ctx,(function(e){var t=e.primaryKey.toString(),r=Re(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=Ne(e),s=o.length;i=function(t){for(var n=!1,r=0;r<s;++r){var i=o[r],a=e[i];Ye(t,i)!==a&&(Je(t,i,a),n=!0)}return n}}var a=n.table.core,l=a.schema.primaryKey,c=l.outbound,u=l.extractKey,h="testmode"in fi?1:2e3,f=t.db.core.cmp,d=[],p=0,m=[],g=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;for(var i=0,o=Ne(n);i<o.length;i++){var s=o[i];d.push(n[s])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var o=Math.min(h,e.length-n);return a.getMany({trans:r,keys:e.slice(n,n+o)}).then((function(s){for(var l=[],d=[],p=c?[]:null,m=[],v=0;v<o;++v){var y=s[v],b={value:ot(y),primKey:e[n+v]};!1!==i.call(b,b.value,b)&&(null==b.value?m.push(e[n+v]):c||0===f(u(y),u(b.value))?(d.push(b.value),c&&p.push(e[n+v])):(m.push(e[n+v]),l.push(b.value)))}return Promise.resolve(l.length>0&&a.mutate({trans:r,type:"add",values:l}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);g(l.length,e)}))).then((function(e){return d.length>0&&a.mutate({trans:r,type:"put",keys:p,values:d}).then((function(e){return g(d.length,e)}))})).then((function(){return m.length>0&&a.mutate({trans:r,type:"delete",keys:m}).then((function(e){return g(m.length,e)}))})).then((function(){return e.length>n+o&&t(n+h)}))}))};return t(0).then((function(){if(d.length>0)throw new jt("Error modifying one or more objects",d,p,m);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return pr(e)&&(e.isPrimKey&&!rr||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new jt("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function $r(e,t){return e<t?-1:e===t?0:1}function _r(e,t){return e>t?-1:e===t?0:1}function xr(e,t,n){var r=e instanceof Ar?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Cr(e){return new e.Collection(e,(function(){return Er("")})).limit(0)}function jr(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[l],c)<0&&(a=l)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Sr(e,t,n,r){var i,o,s,a,l,c,u,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return xr(e,Zn);function f(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),s="next"===e?$r:_r;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}f("next");var d=new e.Collection(e,(function(){return Or(a[0],l[h-1]+r)}));d._ondirectionchange=function(e){f(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=o(i);if(t(f,l,p))return!0;for(var d=null,m=p;m<h;++m){var g=jr(i,f,a[m],l[m],s,c);null===g&&null===d?p=m+1:(null===d||s(d,g)>0)&&(d=g)}return n(null!==d?function(){e.continue(d+u)}:r),!1})),d}function Or(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Er(e){return{type:1,lower:e,upper:e}}var Ar=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Cr(this):new this.Collection(this,(function(){return Or(e,t,!n,!r)}))}catch(e){return xr(this,Qn)}},e.prototype.equals=function(e){return null==e?xr(this,Qn):new this.Collection(this,(function(){return Er(e)}))},e.prototype.above=function(e){return null==e?xr(this,Qn):new this.Collection(this,(function(){return Or(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?xr(this,Qn):new this.Collection(this,(function(){return Or(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?xr(this,Qn):new this.Collection(this,(function(){return Or(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?xr(this,Qn):new this.Collection(this,(function(){return Or(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?xr(this,Zn):this.between(e,e+Yn,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Sr(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Yn)},e.prototype.equalsIgnoreCase=function(e){return Sr(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=dt.apply(ft,arguments);return 0===e.length?Cr(this):Sr(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=dt.apply(ft,arguments);return 0===e.length?Cr(this):Sr(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Yn)},e.prototype.anyOf=function(){var e=this,t=dt.apply(ft,arguments),n=this._cmp;try{t.sort(n)}catch(e){return xr(this,Qn)}if(0===t.length)return Cr(this);var r=new this.Collection(this,(function(){return Or(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var s=e.key;n(s,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(s,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Jn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=dt.apply(ft,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return xr(this,Qn)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Jn,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===e.length)return Cr(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return xr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",At.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var u,h=i;function f(e,t){return h(e[0],t[0])}try{(u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=s(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(f)}catch(e){return xr(this,Qn)}var d=0,p=c?function(e){return i(e,u[d][1])>0}:function(e){return i(e,u[d][1])>=0},m=l?function(e){return o(e,u[d][0])>0}:function(e){return o(e,u[d][0])>=0};var g=p,v=new this.Collection(this,(function(){return Or(u[0][0],u[u.length-1][1],!l,!c)}));return v._ondirectionchange=function(e){"next"===e?(g=p,h=i):(g=m,h=o),u.sort(f)},v._addAlgorithm((function(e,t,r){for(var o=e.key;g(o);)if(++d===u.length)return t(r),!1;return!!function(e){return!p(e)&&!m(e)}(o)||(0===n._cmp(o,u[d][1])||0===n._cmp(o,u[d][0])||t((function(){h===i?e.continue(u[d][0]):e.continue(u[d][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=dt.apply(ft,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Cr(this):this.inAnyRange(e.map((function(e){return[e,e+Yn]}))):xr(this,"startsWithAnyOf() only works with strings")},e}();function Nr(e){return 1===e.length?e[0]:e}function Ir(e){try{return e.only([[]]),[[]]}catch(e){return Yn}}function Pr(e){return jn((function(t){return Tr(t),e(t.target.error),!1}))}function Tr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Fr=function(){function e(){}return e.prototype._lock=function(){return Ge(!an.global),++this._reculock,1!==this._reculock||an.global||(an.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ge(!an.global),0==--this._reculock)for(an.global||(an.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Kn(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&an.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Ge(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new At.DatabaseClosed(r);case"MissingAPIError":throw new At.MissingAPI(r.message,r);default:throw new At.OpenFailed(r)}if(!this.active)throw new At.TransactionInactive;return Ge(null===this._completion._state),(e=this.idbtrans=e||n.transaction(Nr(this.storeNames),this.mode)).onerror=jn((function(n){Tr(n),t._reject(e.error)})),e.onabort=jn((function(n){Tr(n),t.active&&t._reject(new At.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=jn((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Gn(new At.ReadOnly("Transaction is readonly"));if(!this.active)return Gn(new At.TransactionInactive);if(this._locked())return new hn((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},an])}));if(n)return Pn((function(){var e=new hn((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new hn((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=hn.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new hn((function(e,r){n.then((function(n){return t._waitingQueue.push(jn(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(jn(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new At.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(Re(t,e))return t[e];var n=this.schema[e];if(!n)throw new At.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function Lr(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Rr(t)}}function Rr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Dr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Xe(n,(function(e){return[e.name,e]}))}}function Mr(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return Ye(t,e)}}(e):function(t){return Ye(t,e)}}function Br(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function Kr(e){return[].slice.call(e)}var zr=0;function qr(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Vr(e,t,n,r){var i=t.cmp.bind(t);function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var s=function(e,t){var n=Kr(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=Ie(t),i=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Mr(t)},indexes:Kr(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,s={name:t,compound:Ie(i),keyPath:i,unique:n,multiEntry:r,extractKey:Mr(i)};return o[qr(i)]=s,s})),getIndexByKeyPath:function(e){return o[qr(e)]}};return o[":id"]=s.primaryKey,null!=t&&(o[qr(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),a=s.schema,l=s.hasGetAll,c=a.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,s=n.keys,a=n.values,l=n.range,c=n.wantResults;return new Promise((function(n,u){n=jn(n);var h=r.objectStore(t),f=null==h.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var m,g=c&&Ae(s||Br(e.primaryKey,{type:i,keys:s,values:a})),v=[],y=0,b=function(e){++y,Tr(e),g&&(g[e.target._reqno]=void 0),v[e.target._reqno]=e.target.error},k=function(e){var t=e.target;g[t._reqno]=t.result};if("deleteRange"===i){if(4===l.type)return n({numFailures:y,failures:v,results:g,lastResult:void 0});m=3===l.type?h.clear():h.delete(o(l))}else{var w=d?f?[a,s]:[a,null]:[s,null],$=w[0],_=w[1];if(d)for(var x=0;x<p;++x)(m=_&&void 0!==_[x]?h[i]($[x],_[x]):h[i]($[x]))._reqno=x,g&&void 0===g[x]&&(m.onsuccess=k),m.onerror=b;else for(x=0;x<p;++x)(m=h[i]($[x]))._reqno=x,m.onerror=b}var C=function(e){var t=e.target.result;g&&(g[p-1]=t),n({numFailures:y,failures:v,results:g,lastResult:t})};m.onerror=function(e){b(e),C(e)},m.onsuccess=C}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=jn(e);for(var o,s=n.objectStore(t),a=r.length,l=new Array(a),c=0,u=0,h=function(t){var n=t.target;l[n._pos]=n.result,++u===c&&e(l)},f=Pr(i),d=0;d<a;++d)null!=r[d]&&((o=s.get(r[d]))._pos=d,o.onsuccess=h,o.onerror=f,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=jn(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Pr(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=jn(r);var s=n.trans,a=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,h=c.index,f=c.range,d=s.objectStore(t),p=h.isPrimaryKey?d:d.index(h.name),m=o(f);if(0===l)return r({result:[]});if(e){var g=a?p.getAll(m,u):p.getAllKeys(m,u);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=Pr(i)}else{var v=0,y=a||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),b=[];y.onsuccess=function(e){var t=y.result;return t?(b.push(a?t.value:t.primaryKey),++v===l?r({result:b}):void t.continue()):r({result:b})},y.onerror=Pr(i)}}))}}(l),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,s=e.reverse,a=e.unique;return new Promise((function(e,l){e=jn(e);var c=i.index,u=i.range,h=n.objectStore(t),f=c.isPrimaryKey?h:h.index(c.name),d=s?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in f)?f.openCursor(o(u),d):f.openKeyCursor(o(u),d);p.onerror=Pr(l),p.onsuccess=jn((function(t){var r=p.result;if(r){r.___id=++zr,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var s=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=jn(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=jn(e),p.onerror=Pr(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=jn((function(e){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=s,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,s=n.range;return new Promise((function(e,n){var a=r.objectStore(t),l=i.isPrimaryKey?a:a.index(i.name),c=o(s),u=c?l.count(c):l.count();u.onsuccess=jn((function(t){return e(t.target.result)})),u.onerror=Pr(n)}))}}}(e)})),u={};return c.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:Ir(n),schema:a}}function Hr(e,t,n,r){var i=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return Ee(Ee({},e),n(e))}),e)}(Vr(t,n.indexedDB,i,r),e.dbcore)}}function Ur(e,t){var n=t.db,r=Hr(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Gr(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=qe(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?Be(t,n,{get:function(){return this.table(n)},set:function(e){Me(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Wr(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function Xr(e,t){return e._cfg.version-t._cfg.version}function Yr(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var s=o._reject.bind(o),a=an.transless||an;Pn((function(){an.trans=o,an.transless=a,0===t?(Ne(i).forEach((function(e){Qr(n,e,i[e].primKey,i[e].indexes)})),Ur(e,n),hn.follow((function(){return e.on.populate.fire(o)})).catch(s)):function(e,t,n,r){var i=[],o=e._versions,s=e._dbSchema=ei(e,e.idbdb,r),a=!1;function l(){return i.length?hn.resolve(i.shift()(n.idbtrans)).then(l):hn.resolve()}return o.filter((function(e){return e._cfg.version>=t})).forEach((function(o){i.push((function(){var i=s,l=o._cfg.dbschema;ti(e,i,r),ti(e,l,r),s=e._dbSchema=l;var c=Jr(i,l);c.add.forEach((function(e){Qr(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new At.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Zr(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Zr(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=o._cfg.contentUpgrade;if(u&&o._cfg.version>t){Ur(e,r),n._memoizedTables={},a=!0;var h=Ze(l);c.del.forEach((function(e){h[e]=i[e]})),Wr(e,[e.Transaction.prototype]),Gr(e,[e.Transaction.prototype],Ne(h),h),n.schema=h;var f,d=pt(u);d&&Tn();var p=hn.follow((function(){if((f=u(n))&&d){var e=Fn.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?hn.resolve(f):p.then((function(){return f}))}})),i.push((function(t){a&&nr||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(o._cfg.dbschema,t);Wr(e,[e.Transaction.prototype]),Gr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((function(){var e,t;t=r,Ne(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||Qr(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(s)}))}function Jr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!tr)s.recreate=!0,r.change.push(s);else{var a=i.idxByName,l=o.idxByName,c=void 0;for(c in a)l[c]||s.del.push(c);for(c in l){var u=a[c],h=l[c];u?u.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,o])}return r}function Qr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Zr(i,e)})),i}function Zr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ei(e,t,n){var r={};return He(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=Lr(Rr(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[],a=0;a<t.indexNames.length;++a){var l=t.index(t.indexNames[a]);i=l.keyPath;var c=Lr(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(c)}r[e]=Dr(e,o,s)})),r}function ti(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var l=s.indexNames[a],c=s.index(l).keyPath,u="string"==typeof c?c:"["+He(c).join("+")+"]";if(t[o]){var h=t[o].idxByName[u];h&&(h.name=l,delete t[o].idxByName[u],t[o].idxByName[l]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pe.WorkerGlobalScope&&Pe instanceof Pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var ni,ri=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){Ne(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Lr(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Ie(r),0===t)})),i=r.shift();if(i.multi)throw new At.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new At.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new At.Schema("Index must have a name and cannot be an empty string")})),t[n]=Dr(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?Te(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){Te(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Wr(t,[t._allTables,t,t.Transaction.prototype]),Gr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Ne(i),i),t._storeNames=Ne(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function ii(e){return Pn((function(){return an.letThrough=!0,e()}))}function oi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Gn(t.dbOpenError):e}));mt&&(t.openCanceller._stackHolder=bt()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return hn.race([t.openCanceller,new hn((function(r,o){if(!n)throw new At.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var s=e.name,a=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!a)throw new At.MissingAPI("IndexedDB API not available");a.onerror=Pr(o),a.onblocked=jn(e._fireOnBlocked),a.onupgradeneeded=jn((function(r){if(i=a.transaction,t.autoSchema&&!e._options.allowEmptyDB){a.onerror=Tr,i.abort(),a.result.close();var l=n.deleteDatabase(s);l.onsuccess=l.onerror=jn((function(){o(new At.NoSuchDatabase("Database "+s+" doesnt exist"))}))}else{i.onerror=Pr(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=a.result,Yr(e,c/10,i,o)}}),o),a.onsuccess=jn((function(){i=null;var n=e.idbdb=a.result,o=He(n.objectStoreNames);if(o.length>0)try{var l=n.transaction(Nr(o),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=ei(0,t,n);e._storeNames=He(t.objectStoreNames,0),Gr(e,[e._allTables],Ne(r),r)}(e,n,l):(ti(e,e._dbSchema,l),function(e,t){var n=Jr(ei(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ur(e,l)}catch(e){}er.push(e),n.onversionchange=jn((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),ni.add(s),r()}),o)}))]).then((function(){return t.onReadyBeingFired=[],hn.resolve(ii(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Kt,Pt);return t.onReadyBeingFired=[],hn.resolve(ii(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Gn(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function si(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):Ie(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function ai(e,t,n){var r=arguments.length;if(r<2)throw new At.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=tt(i);return[e,o,n]}function li(e,t,n,r,i){return hn.resolve().then((function(){var o=an.transless||an,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:o};r?s.idbtrans=r.idbtrans:s.create();var l,c=pt(i);c&&Tn();var u=hn.follow((function(){if(l=i.call(s,s))if(c){var e=Fn.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=si(l))}),a);return(l&&"function"==typeof l.then?hn.resolve(l).then((function(e){return s.active?e:Gn(new At.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return l}))).then((function(e){return r&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),Gn(e)}))}))}function ci(e,t,n){for(var r=Ie(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var ui={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return Ee(Ee({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function s(e,t,n){var r=qr(e),a=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u=Ee(Ee({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:l,extractKey:Mr(e),unique:!c&&n.unique});(a.push(u),u.isPrimaryKey||o.push(u),l>1)&&s(2===l?e[0]:e.slice(0,l-1),t+1,n);return a.sort((function(e,t){return e.keyTail-t.keyTail})),u}var a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];s(u.keyPath,0,u)}function h(t){var n,r,i=t.query.index;return i.isVirtual?Ee(Ee({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:ci(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:ci(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}return Ee(Ee({},n),{schema:Ee(Ee({},r),{primaryKey:a,indexes:o,getIndexByKeyPath:function(e){var t=i[qr(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,s=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(h(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(ci(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(ci(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(ci(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},hi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return Ee(Ee({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return Ee(Ee({},n),{mutate:function(e){var i=an.trans,o=i.table(t).hook,s=o.deleting,a=o.creating,l=o.updating;switch(e.type){case"add":if(a.fire===Pt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(a.fire===Pt&&l.fire===Pt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(s.fire===Pt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(s.fire===Pt)break;return i._promise("readwrite",(function(){return function(e){return u(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=an.trans,i=e.keys||Br(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?Ee(Ee({},e),{keys:i,wantResults:!0}):Ee({},e)).type&&(e.values=Ae(e.values)),e.keys&&(e.keys=Ae(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,i).then((function(o){var c=i.map((function(n,i){var c=o[i],u={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){var h=a.fire.call(u,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,r.outbound||Je(e.values[i],r.keyPath,n))}else{var f=ct(c,e.values[i]),d=l.fire.call(u,f,n,c,t);if(d){var p=e.values[i];Object.keys(d).forEach((function(e){Re(p,e)?p[e]=d[e]:Je(p,e,d[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,s=t.numFailures,a=t.lastResult,l=0;l<i.length;++l){var u=r?r[l]:i[l],h=c[l];null==u?h.onerror&&h.onerror(n[l]):h.onsuccess&&h.onsuccess("put"===e.type&&o[l]?e.values[l]:u)}return{failures:n,results:r,numFailures:s,lastResult:a}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,Ee(Ee({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}})}})}},fi=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=Ee({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var s,a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pt,dbReadyPromise:null,cancelOpen:Pt,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new hn((function(e){a.dbReadyResolve=e})),a.openCanceller=new hn((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=fr(this,"populate","blocked","versionchange",{ready:[Kt,Pt]}),this.on.ready.subscribe=Ue(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||hn.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(s=this,dr(wr.prototype,(function(e,t){this.db=s;var n=cr,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table,a=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==Tt?a:null}}))),this.Table=function(e){return dr(hr.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:fr(null,{creating:[Rt,Pt],reading:[Ft,Tt],updating:[Mt,Pt],deleting:[Dt,Pt]})}))}(this),this.Transaction=function(e){return dr(Fr.prototype,(function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=fr(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new hn((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Gn(e)}))}))}(this),this.Version=function(e){return dr(ri.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return dr(Ar.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new At.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Ir(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),er.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(ui),this.use(hi),o.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new At.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new At.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Xr),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||an.letThrough?e():new hn((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new At.DatabaseClosed);t.open().catch(Pt)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return oi(this)},e.prototype.close=function(){var e=er.indexOf(this),t=this._state;if(e>=0&&er.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new At.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new hn((function(e){t.dbReadyResolve=e})),t.openCanceller=new hn((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new hn((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=jn((function(){ni.remove(e.name),r()})),t.onerror=Pr(i),t.onblocked=e._fireOnBlocked};if(t)throw new At.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return Ne(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=ai.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=an.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,s,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===sr)o=sr;else{if("rw"!=e&&e!=ar)throw new At.InvalidArgument("Invalid transaction mode: "+e);o=ar}if(i){if(i.mode===sr&&o===ar){if(!a)throw new At.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new At.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):Gn(e)}var l=li.bind(null,this,o,s,i,n);return i?i._promise(o,l,"lock"):an.trans?Kn(an.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!Re(this._allTables,e))throw new At.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),di=fi;De(di,Ee(Ee({},It),{delete:function(e){return new di(e).delete()},exists:function(e){return new di(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return ni?ni.getDatabaseNames().then(e):hn.resolve([])},defineClass:function(){return function(e){Te(this,e)}},ignoreTransaction:function(e){return an.trans?Kn(an.transless,e):e()},vip:ii,async:function(e){return function(){try{var t=si(e.apply(this,arguments));return t&&"function"==typeof t.then?t:hn.resolve(t)}catch(e){return Gn(e)}}},spawn:function(e,t,n){try{var r=si(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:hn.resolve(r)}catch(e){return Gn(e)}},currentTransaction:{get:function(){return an.trans||null}},waitFor:function(e,t){var n=hn.resolve("function"==typeof e?di.ignoreTransaction(e):e).timeout(t||6e4);return an.trans?an.trans.waitFor(n):n},Promise:hn,debug:{get:function(){return mt},set:function(e){gt(e,"dexie"===e?function(){return!0}:ir)}},derive:Ke,extend:Te,props:De,override:Ue,Events:fr,getByKeyPath:Ye,setByKeyPath:Je,delByKeyPath:Qe,shallowClone:Ze,deepClone:ot,getObjectDiff:ct,asap:We,minKey:Jn,addons:[],connections:er,errnames:Ot,dependencies:function(){try{return{indexedDB:Pe.indexedDB||Pe.mozIndexedDB||Pe.webkitIndexedDB||Pe.msIndexedDB,IDBKeyRange:Pe.IDBKeyRange||Pe.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Xn,version:Xn.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:di,Dexie:di})),di.maxKey=Ir(di.dependencies.IDBKeyRange),function(e){try{ni=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new fi(or,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?hn.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==or}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==or&&t.put({name:e}).catch(Pt)},remove:function(e){return!n&&e!==or&&t.delete(e).catch(Pt)}}}(e)}catch(e){}}(fi.dependencies.indexedDB),hn.rejectionMapper=function(e,t){if(!e||e instanceof xt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Nt[e.name])return e;var n=new Nt[e.name](t||e.message,e);return"stack"in e&&Be(n,"stack",{get:function(){return this.inner.stack}}),n},gt(mt,ir);const pi={"無し":0,"龍耐性":1,"氷耐性":1,"雷耐性":1,"水耐性":1,"火耐性":1,"毒耐性":1,"麻痺耐性":1,"睡眠耐性":1,"爆破やられ耐性":1,"植生学":1,"地質学":1,"飛び込み":1,"陽動":1,"泥雪耐性":1,"満足感":1,"腹減り耐性":1,"剥ぎ取り鉄人":1,"防御":1,"龍属性攻撃強化":1,"氷属性攻撃強化":1,"雷属性攻撃強化":1,"水属性攻撃強化":1,"火属性攻撃強化":1,"ボマー":1,"滑走強化":1,"毒属性強化":1,"スタミナ奪取":1,"笛吹き名人":1,"回復速度":1,"砥石使用高速化":1,"風圧耐性":1,"ひるみ軽減":1,"ブレ抑制":1,"気絶耐性":1,"装填速度":1,"反動軽減":1,"不屈":2,"乗り名人":2,"体術":2,"体力回復量UP":2,"アイテム使用強化":2,"翔蟲使い":2,"壁面移動":2,"精霊の加護":2,"早食い":2,"属性やられ耐性":2,"破壊王":2,"広域化":2,"KO術":2,"納刀術":2,"回避性能":2,"回避距離UP":2,"抜刀術【力】":2,"泡沫の舞":2,"逆襲":2,"耐震":2,"鈍器使い":2,"高速変形":2,"見切り":2,"攻撃":2,"渾身":2,"強化持続":2,"スタミナ急速回復":2,"ガード性能":2,"ガード強化":2,"砲弾装填":2,"特殊射撃強化":2,"火事場力":2,"心眼":2,"集中":2,"ランナー":2,"砲術":2,"会心撃【属性】":2,"弾導強化":2,"超会心":2,"弱点特効":2,"挑戦者":2,"フルチャージ":2,"逆恨み":2,"死中に活":2,"力の解放":2,"麻痺属性強化":2,"睡眠属性強化":2,"爆破属性強化":2,"剛刃研磨":2,"業物":2,"弾丸節約":2,"達人芸":2,"耳栓":3,"抜刀術【技】":3,"キノコ大好き":3,"攻めの守勢":3,"装填拡張":3,"通常弾・連射矢強化":3,"貫通弾・貫通矢強化":3,"散弾・拡散矢強化":3,"速射強化":3,"ジャンプ鉄人":3,"鬼火纏":3,"幸運":3,"匠":3};class mi{MAX_SKILLS=2;MAX_SLOTS=3;db=null;indexeddb=null;charms=null;charmTableName="charms";constructor(e={}){const{isDemoMode:t}=e;t&&(this.charmTableName="demoCharms"),this._init()}sql(e,t){return new Promise(((n,r)=>{this.db.transaction((i=>i.executeSql(e,t,((e,t)=>n({tx:e,result:t})),((...e)=>r(e)))))}))}async _init(){this.db=openDatabase("mhrise-charm-manager","","MHRise charm manager",5e3),await this._createTable(),await this.sql(`alter table ${this.charmTableName} add column imagename varchar(128)`).catch((()=>{})),this.indexeddb=new fi(this.charmTableName),this.indexeddb.version(1).stores({images:"name"}),this.updateCharmArray()}async reset(){await this.sql(`drop table if exists ${this.charmTableName}`),await this._createTable()}async registerCharms(e){const t=e.map((e=>{const t=Array.isArray(e.slots)?e.slots.join(", "):"string"==typeof e.slots?e.slots.replace(/-/g,", "):e.slots,n=e.imageName?`"${e.imageName}"`:"NULL";return"("+[`"${e.skills[0]}"`,e.skillLevels[0],`"${e.skills[1]}"`,e.skillLevels[1],t,n].join(", ")+")"})).join(",\n");console.log(t),await this.sql(`insert or ignore into ${this.charmTableName} values ${t}`),this.updateCharmArray()}async searchCharms(e){const{tx:t,result:n}=await this.sql(e);return n.rows}async _createTable(){await this.sql(`create table if not exists ${this.charmTableName}(\n               skill1      varchar(20),\n               skill1Level int,\n               skill2      varchar(20),\n               skill2Level int,\n               slot1       int,\n               slot2       int,\n               slot3       int,\n               imagename   varchar(128),\n               unique (skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3))`),await this.sql(`create index if not exists '${this.charmTableName}.skill1' on ${this.charmTableName}(skill1, skill1Level)`),await this.sql(`create index if not exists '${this.charmTableName}.skill2' on ${this.charmTableName}(skill2, skill2Level)`),await this.sql(`create index if not exists '${this.charmTableName}.slots'  on ${this.charmTableName}(slot1, slot2, slot3)`)}async getScreenshot(e){const t=await this.indexeddb.images.get(e);return cv.matFromArray(t.rows,t.cols,t.type,t.data)}async findSubstitutableCharms(e){const t=[],n=[];for(t[0]=e.skillLevels[0];t[0]>=0;t[0]--)for(t[1]=e.skillLevels[1];t[1]>=0;t[1]--){const r=[...Array(this.MAX_SKILLS).keys()].map((n=>e.skillLevels[n]-t[n]));if(r.reduce(((e,t)=>e+t),0)+e.slots.filter((e=>e)).length>this.MAX_SLOTS)break;const i=[...e.slots,...Array.from({length:r[0]},(()=>pi[e.skills[0]])),...Array.from({length:r[1]},(()=>pi[e.skills[1]]))].filter((e=>e)).sort().reverse(),o=[t[0]?`(skill1 = '${e.skills[0]}' and skill1Level >= ${t[0]})`:"",t[1]?`(skill2 = '${e.skills[1]}' and skill2Level >= ${t[1]})`:""].filter((e=>e)).join(" and "),s=[t[1]?`(skill1 = '${e.skills[1]}' and skill1Level >= ${t[1]})`:"",t[0]?`(skill2 = '${e.skills[0]}' and skill2Level >= ${t[0]})`:""].filter((e=>e)).join(" and "),a=o.length?"("+[`(${o})`,`(${s})`].filter((e=>e)).join(" or ")+") and ":"",l=`select rowid,* from ${this.charmTableName} where ${a} slot1 >= ${i[0]||0} and slot2 >= ${i[1]||0} and slot3 >= ${i[2]||0}`,{result:c}=await this.sql(l);n.push(...[...c.rows].filter((t=>!this._isSameCharm(this._row2obj(t),e))))}return n.sort(((e,t)=>e.rowid<t.rowid?-1:e.rowid>t.rowid?1:0))}async updateCharmArray(){this.charms=[...await this.searchCharms(`select rowid,* from ${this.charmTableName}`)].map((e=>(e.evaluation=pi[e.skill1]*e.skill1Level+pi[e.skill2]*e.skill2Level+e.slot1+e.slot2+e.slot3,e))),this.searchSubstitutableCharms()}async searchSubstitutableCharms(){for(;"function"!=typeof Module.getSubstitutesAll;)await new Promise((e=>setTimeout(e,100)));const e=Module.getSubstitutesAll(JSON.stringify(this.charms)),t=JSON.parse(e);for(const e in this.charms){const[n,r]=t[0]||[Number.MAX_SAFE_INTEGER,[]];this.charms[e].rowid>n?console.log("internal error"):this.charms[e].rowid<n?this.charms[e].substitutableCharms=[]:(this.charms[e].substitutableCharms=r.map((e=>this.charms[e-1])),t.shift())}}_row2obj(e){return{skills:[e.skill1,e.skill2],skillLevels:[e.skill1Level,e.skill2Level],slots:[e.slot1,e.slot2,e.slot3]}}_isSameCharm(e,t){return JSON.stringify(e)===JSON.stringify(t)}}function gi(e){return new Promise((t=>{const n=new Image;n.src=e,n.onload=()=>{const e=cv.imread(n);t(e)}}))}function vi(e,t,n,r,i){const o=new cv.Size(t.cols,t.rows),s=new cv.Rect(n,o),a=e.roi(s),l=new cv.Mat;cv.threshold(t,l,r,255,cv.THRESH_BINARY);const c=new cv.Mat;a.copyTo(c,l);const u=new cv.Mat;cv.absdiff(t,c,u),cv.cvtColor(u,u,cv.COLOR_BGR2GRAY);const h=new cv.Mat;return cv.threshold(u,h,i,255,cv.THRESH_BINARY),u.delete(),c.delete(),l.delete(),a.delete(),h}function yi(e,t,n,r=63,i=63,o=(()=>{})){let s=Number.MAX_SAFE_INTEGER,a=null;for(const[l,c]of Object.entries(t)){const t=vi(e,c,n,r,i);o(t,l);const u=cv.countNonZero(t);s>u&&(s=u,a=l),t.delete()}return a}function bi(e){return e instanceof Promise?e:Array.isArray(e)?Promise.all(e.map(bi)):"object"==typeof e?function(e){const t=Object.keys(e).map((t=>bi(e[t]).then((e=>({key:t,value:e})))));return Promise.all(t).then((e=>e.reduce(((e,t)=>(e[t.key]=t.value,e)),{})))}(e):Promise.resolve(e)}class ki{MAX_PAGE=34;COLUMNS_PER_PAGE=10;ROWS_PER_PAGE=5;POINT_RARITY=new cv.Point(1190,176);POINT_SLOTS=new cv.Point(1160,200);POINT_SKILL1=new cv.Point(1033,266);POINT_SKILL2=new cv.Point(1033,317);POINT_SKILL_LEVEL1=new cv.Point(1190,290);POINT_SKILL_LEVEL2=new cv.Point(1190,340);POINT_PAGE=new cv.Point(787,582);POINT_CHARM_AREA_LEFT_TOP=new cv.Point(634,359);SIZE_CHARM_AREA=new cv.Size(357,199);indexeddb=null;nCharms=0;charms={};templates=null;async init(){this.templates={frame:gi("img/templates/frame.png"),rare:{7:gi("img/templates/rare/7.jpg"),6:gi("img/templates/rare/6.jpg"),5:gi("img/templates/rare/5.jpg"),4:gi("img/templates/rare/4.jpg")},lvl:{0:gi("img/templates/lvl/0.jpg"),1:gi("img/templates/lvl/1.jpg"),2:gi("img/templates/lvl/2.jpg"),3:gi("img/templates/lvl/3.jpg"),4:gi("img/templates/lvl/4.jpg"),5:gi("img/templates/lvl/5.jpg")},slot:{"0-0-0":gi("img/templates/slot/0.jpg"),"1-0-0":gi("img/templates/slot/1.jpg"),"1-1-0":gi("img/templates/slot/11.jpg"),"1-1-1":gi("img/templates/slot/111.jpg"),"2-0-0":gi("img/templates/slot/2.jpg"),"2-1-0":gi("img/templates/slot/21.jpg"),"2-1-1":gi("img/templates/slot/211.jpg"),"2-2-0":gi("img/templates/slot/22.jpg"),"2-2-1":gi("img/templates/slot/221.jpg"),"3-0-0":gi("img/templates/slot/3.jpg"),"3-1-0":gi("img/templates/slot/31.jpg"),"3-1-1":gi("img/templates/slot/311.jpg"),"3-2-0":gi("img/templates/slot/32.jpg"),"3-2-1":gi("img/templates/slot/321.jpg")},skill:{"KO術":gi("img/templates/skill/KO術.jpg"),"匠":gi("img/templates/skill/匠.jpg"),"不屈":gi("img/templates/skill/不屈.jpg"),"体術":gi("img/templates/skill/体術.jpg"),"幸運":gi("img/templates/skill/幸運.jpg"),"心眼":gi("img/templates/skill/心眼.jpg"),"攻撃":gi("img/templates/skill/攻撃.jpg"),"業物":gi("img/templates/skill/業物.jpg"),"渾身":gi("img/templates/skill/渾身.jpg"),"無し":gi("img/templates/skill/無し.jpg"),"砲術":gi("img/templates/skill/砲術.jpg"),"耐震":gi("img/templates/skill/耐震.jpg"),"耳栓":gi("img/templates/skill/耳栓.jpg"),"逆襲":gi("img/templates/skill/逆襲.jpg"),"防御":gi("img/templates/skill/防御.jpg"),"陽動":gi("img/templates/skill/陽動.jpg"),"集中":gi("img/templates/skill/集中.jpg"),"ボマー":gi("img/templates/skill/ボマー.jpg"),"地質学":gi("img/templates/skill/地質学.jpg"),"広域化":gi("img/templates/skill/広域化.jpg"),"挑戦者":gi("img/templates/skill/挑戦者.jpg"),"早食い":gi("img/templates/skill/早食い.jpg"),"植生学":gi("img/templates/skill/植生学.jpg"),"毒耐性":gi("img/templates/skill/毒耐性.jpg"),"水耐性":gi("img/templates/skill/水耐性.jpg"),"氷耐性":gi("img/templates/skill/氷耐性.jpg"),"満足感":gi("img/templates/skill/満足感.jpg"),"火耐性":gi("img/templates/skill/火耐性.jpg"),"破壊王":gi("img/templates/skill/破壊王.jpg"),"納刀術":gi("img/templates/skill/納刀術.jpg"),"見切り":gi("img/templates/skill/見切り.jpg"),"超会心":gi("img/templates/skill/超会心.jpg"),"逆恨み":gi("img/templates/skill/逆恨み.jpg"),"達人芸":gi("img/templates/skill/達人芸.jpg"),"雷耐性":gi("img/templates/skill/雷耐性.jpg"),"鬼火纏":gi("img/templates/skill/鬼火纏.jpg"),"龍耐性":gi("img/templates/skill/龍耐性.jpg"),"ブレ抑制":gi("img/templates/skill/ブレ抑制.jpg"),"ランナー":gi("img/templates/skill/ランナー.jpg"),"乗り名人":gi("img/templates/skill/乗り名人.jpg"),"剛刃研磨":gi("img/templates/skill/剛刃研磨.jpg"),"力の解放":gi("img/templates/skill/力の解放.jpg"),"反動軽減":gi("img/templates/skill/反動軽減.jpg"),"回復速度":gi("img/templates/skill/回復速度.jpg"),"回避性能":gi("img/templates/skill/回避性能.jpg"),"壁面移動":gi("img/templates/skill/壁面移動.jpg"),"弱点特効":gi("img/templates/skill/弱点特効.jpg"),"強化持続":gi("img/templates/skill/強化持続.jpg"),"弾丸節約":gi("img/templates/skill/弾丸節約.jpg"),"弾導強化":gi("img/templates/skill/弾導強化.jpg"),"死中に活":gi("img/templates/skill/死中に活.jpg"),"気絶耐性":gi("img/templates/skill/気絶耐性.jpg"),"泡沫の舞":gi("img/templates/skill/泡沫の舞.jpg"),"泥雪耐性":gi("img/templates/skill/泥雪耐性.jpg"),"滑走強化":gi("img/templates/skill/滑走強化.jpg"),"火事場力":gi("img/templates/skill/火事場力.jpg"),"睡眠耐性":gi("img/templates/skill/睡眠耐性.jpg"),"砲弾装填":gi("img/templates/skill/砲弾装填.jpg"),"翔蟲使い":gi("img/templates/skill/翔蟲使い.jpg"),"装填拡張":gi("img/templates/skill/装填拡張.jpg"),"装填速度":gi("img/templates/skill/装填速度.jpg"),"速射強化":gi("img/templates/skill/速射強化.jpg"),"鈍器使い":gi("img/templates/skill/鈍器使い.jpg"),"風圧耐性":gi("img/templates/skill/風圧耐性.jpg"),"飛び込み":gi("img/templates/skill/飛び込み.jpg"),"高速変形":gi("img/templates/skill/高速変形.jpg"),"麻痺耐性":gi("img/templates/skill/麻痺耐性.jpg"),"回避距離UP":gi("img/templates/skill/回避距離UP.jpg"),"ひるみ軽減":gi("img/templates/skill/ひるみ軽減.jpg"),"ガード強化":gi("img/templates/skill/ガード強化.jpg"),"ガード性能":gi("img/templates/skill/ガード性能.jpg"),"攻めの守勢":gi("img/templates/skill/攻めの守勢.jpg"),"毒属性強化":gi("img/templates/skill/毒属性強化.jpg"),"笛吹き名人":gi("img/templates/skill/笛吹き名人.jpg"),"精霊の加護":gi("img/templates/skill/精霊の加護.jpg"),"腹減り耐性":gi("img/templates/skill/腹減り耐性.jpg"),"体力回復量UP":gi("img/templates/skill/体力回復量UP.jpg"),"キノコ大好き":gi("img/templates/skill/キノコ大好き.jpg"),"ジャンプ鉄人":gi("img/templates/skill/ジャンプ鉄人.jpg"),"スタミナ奪取":gi("img/templates/skill/スタミナ奪取.jpg"),"フルチャージ":gi("img/templates/skill/フルチャージ.jpg"),"剥ぎ取り鉄人":gi("img/templates/skill/剥ぎ取り鉄人.jpg"),"抜刀術【力】":gi("img/templates/skill/抜刀術【力】.jpg"),"抜刀術【技】":gi("img/templates/skill/抜刀術【技】.jpg"),"爆破属性強化":gi("img/templates/skill/爆破属性強化.jpg"),"特殊射撃強化":gi("img/templates/skill/特殊射撃強化.jpg"),"睡眠属性強化":gi("img/templates/skill/睡眠属性強化.jpg"),"麻痺属性強化":gi("img/templates/skill/麻痺属性強化.jpg"),"会心撃【属性】":gi("img/templates/skill/会心撃【属性】.jpg"),"属性やられ耐性":gi("img/templates/skill/属性やられ耐性.jpg"),"水属性攻撃強化":gi("img/templates/skill/水属性攻撃強化.jpg"),"氷属性攻撃強化":gi("img/templates/skill/氷属性攻撃強化.jpg"),"火属性攻撃強化":gi("img/templates/skill/火属性攻撃強化.jpg"),"爆破やられ耐性":gi("img/templates/skill/爆破やられ耐性.jpg"),"砥石使用高速化":gi("img/templates/skill/砥石使用高速化.jpg"),"雷属性攻撃強化":gi("img/templates/skill/雷属性攻撃強化.jpg"),"龍属性攻撃強化":gi("img/templates/skill/龍属性攻撃強化.jpg"),"アイテム使用強化":gi("img/templates/skill/アイテム使用強化.jpg"),"スタミナ急速回復":gi("img/templates/skill/スタミナ急速回復.jpg"),"散弾・拡散矢強化":gi("img/templates/skill/散弾・拡散矢強化.jpg"),"貫通弾・貫通矢強化":gi("img/templates/skill/貫通弾・貫通矢強化.jpg"),"通常弾・連射矢強化":gi("img/templates/skill/通常弾・連射矢強化.jpg")}},this.templates.page={};for(let e=1;e<=this.MAX_PAGE;e++)this.templates.page[e]=gi(`img/templates/page/${e}.png`);this.templates=await bi(this.templates),this.reset(),this.indexeddb=new fi("charms"),this.indexeddb.version(1).stores({images:"name"})}reset(){this.nCharms=0,this.charms={};for(let e=1;e<=this.MAX_PAGE;e++){this.charms[e]={};for(let t=1;t<=this.ROWS_PER_PAGE;t++)this.charms[e][t]={}}}isScaned(e,t,n){return null!=this.charms[e][t][n]}store(e,t){const{page:n,row:r,col:i}=e,{screenshot:o,movieName:s}=t,a=`${s}_${n}-${r}-${i}`;this.indexeddb.images.put({name:a,rows:o.rows,cols:o.cols,type:o.type(),data:o.data.slice(0)}),this.charms[n][r][i]={...e,imageName:a},this.nCharms++}scan(e,t){const n=this._getCurrentPage(e),[r,i]=this._getCurrentCharmPos(e);if(i<.35)return null;const[o,s]=r;if(this.isScaned(n,s,o))return null;const a=this._getRarity(e),l=this._getSlots(e),c=this._getSkills(e),u=this._getSkillLevels(e);this.store({page:n,row:s,col:o,rarity:a,slots:l,skills:c,skillLevels:u},{screenshot:e,movieName:t})}countCharms(){return this.nCharms}generateInsertScript(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push({"第一スキル":i.skills[0],"第一スキルポイント":i.skillLevels[0],"第二スキル":i.skills[1],"第二スキルポイント":i.skillLevels[1],"スロット":i.slots})}return`const inputs = ${JSON.stringify(e)}\n\neval( await (await fetch('https://code.jquery.com/jquery-3.6.0.slim.min.js')).text() )\n\nfor (const input of inputs) {\n  Object.entries(input).forEach(([key, value]) => {\n    $(\`select[aria-label="\${key}"]\`).val(value)\n    $(\`select[aria-label="\${key}"]\`)[0].dispatchEvent(new Event('change', { bubbles: true }))\n  })\n\n  $('button:contains("追加")').click()\n}`}exportAsText(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push(`${i.skills[0]},${i.skillLevels[0]},${i.skills[1]},${i.skillLevels[1]},${i.slots.replace(/-/g,",")}`)}return e.join("\n")}getCharms(){const e=[];for(let t=1;t<=this.MAX_PAGE;t++)for(let n=1;n<=this.ROWS_PER_PAGE;n++)for(let r=1;r<=this.COLUMNS_PER_PAGE;r++){const i=this.charms[t][n][r];null!=i&&e.push(i)}return e}_getRarity(e){return yi(e,this.templates.rare,this.POINT_RARITY,63,63)}_getSlots(e){return yi(e,this.templates.slot,this.POINT_SLOTS,0,63)}_getSkills(e){return[yi(e,this.templates.skill,this.POINT_SKILL1,0,63),yi(e,this.templates.skill,this.POINT_SKILL2,0,63)]}_getSkillLevels(e){return[yi(e,this.templates.lvl,this.POINT_SKILL_LEVEL1,0,127),yi(e,this.templates.lvl,this.POINT_SKILL_LEVEL2,0,127)]}_getCurrentPage(e){return yi(e,this.templates.page,this.POINT_PAGE,31,63)}_getCurrentCharmPos(e){const t=new cv.Rect(this.POINT_CHARM_AREA_LEFT_TOP,this.SIZE_CHARM_AREA),n=e.roi(t),r=new cv.Mat;cv.matchTemplate(n,this.templates.frame,r,cv.TM_CCOEFF_NORMED);const{maxLoc:i,maxVal:o}=cv.minMaxLoc(r);return r.delete(),n.delete(),[[1+Math.floor(.5+i.x/36),1+Math.floor(.5+i.y/41)],o]}}function wi(t){let n,r,i,o,s,a,l,c,u,h,f;return{c(){n=S("div"),r=S("label"),i=S("input"),o=A(),s=O("svg"),a=O("circle"),l=O("path"),c=O("path"),u=O("path"),P(i,"type","checkbox"),P(i,"class","svelte-vpaeku"),P(a,"cx","50"),P(a,"cy","50"),P(a,"r","30"),P(a,"class","svelte-vpaeku"),P(l,"class","line--1 svelte-vpaeku"),P(l,"d","M0 55l14-10c4.7-3.3 9-5 13-5h72"),P(c,"class","line--2 svelte-vpaeku"),P(c,"d","M0 50h99"),P(u,"class","line--3 svelte-vpaeku"),P(u,"d","M0 45l14 10c4.7 3.3 9 5 13 5h72"),P(s,"viewBox","0 0 100 100"),P(s,"xmlns","http://www.w3.org/2000/svg"),P(r,"class","svelte-vpaeku"),P(n,"class","menu toggle-back svelte-vpaeku")},m(e,d){x(e,n,d),_(n,r),_(r,i),i.checked=t[0],_(r,o),_(r,s),_(s,a),_(s,l),_(s,c),_(s,u),h||(f=I(i,"change",t[1]),h=!0)},p(e,[t]){1&t&&(i.checked=e[0])},i:e,o:e,d(e){e&&C(n),h=!1,f()}}}function $i(e,t,n){let{isOpen:r=!1}=t;return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen)},[r,function(){r=this.checked,n(0,r)}]}class _i extends Oe{constructor(e){super(),Se(this,e,$i,wi,l,{isOpen:0})}}function xi(e){let t,n,r,i,o,s;const a=e[5].default,l=h(a,e,e[4],null);return{c(){t=S("div"),n=S("div"),l&&l.c(),P(n,"class",r=m(e[0])+" svelte-1u332e1"),P(n,"style",e[1]),B(n,"svelte-lightbox-unselectable",e[2]),P(t,"class","clickable svelte-1u332e1")},m(r,a){x(r,t,a),_(t,n),l&&l.m(n,null),i=!0,o||(s=I(t,"click",e[6]),o=!0)},p(e,[t]){l&&l.p&&(!i||16&t)&&d(l,a,e,e[4],t,null,null),(!i||1&t&&r!==(r=m(e[0])+" svelte-1u332e1"))&&P(n,"class",r),(!i||2&t)&&P(n,"style",e[1]),5&t&&B(n,"svelte-lightbox-unselectable",e[2])},i(e){i||(ge(l,e),i=!0)},o(e){ve(l,e),i=!1},d(e){e&&C(t),l&&l.d(e),o=!1,s()}}}function Ci(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=J();let{thumbnailClasses:s=""}=t,{thumbnailStyle:a=""}=t,{protect:l=!1}=t;return e.$$set=e=>{"thumbnailClasses"in e&&n(0,s=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,a=e.thumbnailStyle),"protect"in e&&n(2,l=e.protect),"$$scope"in e&&n(4,i=e.$$scope)},[s,a,l,o,i,r,()=>o("click")]}class ji extends Oe{constructor(e){super(),Se(this,e,Ci,xi,l,{thumbnailClasses:0,thumbnailStyle:1,protect:2})}}function Si(e){const t=e-1;return t*t*t+1}function Oi(e,{delay:n=0,duration:r=400,easing:i=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*o}}function Ei(e,{delay:t=0,duration:n=400,easing:r=Si,x:i=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*i}px, ${(1-e)*o}px);\n\t\t\topacity: ${l-u*t}`}}function Ai(e,{delay:t=0,duration:n=400,easing:r=Si}={}){const i=getComputedStyle(e),o=+i.opacity,s=parseFloat(i.height),a=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),u=parseFloat(i.marginBottom),h=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*o};height: ${e*s}px;padding-top: ${e*a}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*h}px;border-bottom-width: ${e*f}px;`}}function Ni(t){let n,r,i,o,s,a,l;return{c(){n=S("div"),r=S("button"),i=E("×"),P(r,"size",t[0]),P(r,"style",t[1]),P(r,"class",o=m(t[3])+" svelte-12yipzn"),P(n,"class",s=m("svelte-lightbox-header "+t[2])+" svelte-12yipzn")},m(e,o){x(e,n,o),_(n,r),_(r,i),a||(l=I(r,"click",t[5]),a=!0)},p(e,[t]){1&t&&P(r,"size",e[0]),2&t&&P(r,"style",e[1]),8&t&&o!==(o=m(e[3])+" svelte-12yipzn")&&P(r,"class",o),4&t&&s!==(s=m("svelte-lightbox-header "+e[2])+" svelte-12yipzn")&&P(n,"class",s)},i:e,o:e,d(e){e&&C(n),a=!1,l()}}}function Ii(e,t,n){const r=J();let{size:i="xs"}=t,{style:o=""}=t,{headerClasses:s=""}=t,{buttonClasses:a=""}=t;return e.$$set=e=>{"size"in e&&n(0,i=e.size),"style"in e&&n(1,o=e.style),"headerClasses"in e&&n(2,s=e.headerClasses),"buttonClasses"in e&&n(3,a=e.buttonClasses)},[i,o,s,a,r,()=>r("close")]}class Pi extends Oe{constructor(e){super(),Se(this,e,Ii,Ni,l,{size:0,style:1,headerClasses:2,buttonClasses:3})}}function Ti(e){let t,n;const r=e[4].default,i=h(r,e,e[3],null);return{c(){t=S("div"),i&&i.c(),P(t,"class","svelte-x9zrc7"),B(t,"svelte-lightbox-image-portrait",e[2])},m(e,r){x(e,t,r),i&&i.m(t,null),n=!0},p(e,o){i&&i.p&&(!n||8&o)&&d(i,r,e,e[3],o,null,null),4&o&&B(t,"svelte-lightbox-image-portrait",e[2])},i(e){n||(ge(i,e),n=!0)},o(e){ve(i,e),n=!1},d(e){e&&C(t),i&&i.d(e)}}}function Fi(t){let n,r,i,o,s;return{c(){n=S("img"),n.src!==(r=t[0].src)&&P(n,"src",r),P(n,"alt",i=t[0].alt),P(n,"style",o=t[0].style),P(n,"class",s=t[0].class)},m(e,t){x(e,n,t)},p(e,t){1&t&&n.src!==(r=e[0].src)&&P(n,"src",r),1&t&&i!==(i=e[0].alt)&&P(n,"alt",i),1&t&&o!==(o=e[0].style)&&P(n,"style",o),1&t&&s!==(s=e[0].class)&&P(n,"class",s)},i:e,o:e,d(e){e&&C(n)}}}function Li(e){let t,n,r,i;const o=[Fi,Ti],s=[];function a(e,t){return e[0].src?0:1}return n=a(e),r=s[n]=o[n](e),{c(){t=S("div"),r.c(),P(t,"class","svelte-lightbox-body svelte-x9zrc7"),B(t,"svelte-lightbox-unselectable",e[1])},m(e,r){x(e,t,r),s[n].m(t,null),i=!0},p(e,[i]){let l=n;n=a(e),n===l?s[n].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),r=s[n],r?r.p(e,i):(r=s[n]=o[n](e),r.c()),ge(r,1),r.m(t,null)),2&i&&B(t,"svelte-lightbox-unselectable",e[1])},i(e){i||(ge(r),i=!0)},o(e){ve(r),i=!1},d(e){e&&C(t),s[n].d()}}}function Ri(e,t,n){let{$$slots:r={},$$scope:i}=t,{image:o={}}=t,{protect:s=!1}=t,{portrait:a=!1}=t;return e.$$set=e=>{"image"in e&&n(0,o=e.image),"protect"in e&&n(1,s=e.protect),"portrait"in e&&n(2,a=e.portrait),"$$scope"in e&&n(3,i=e.$$scope)},[o,s,a,i,r]}class Di extends Oe{constructor(e){super(),Se(this,e,Ri,Li,l,{image:0,protect:1,portrait:2})}}function Mi(e){let t,n,r,i,o,s=e[3]+1+"";return{c(){t=S("p"),n=E("Image "),r=E(s),i=E(" of "),o=E(e[2])},m(e,s){x(e,t,s),_(t,n),_(t,r),_(t,i),_(t,o)},p(e,t){8&t&&s!==(s=e[3]+1+"")&&F(r,s),4&t&&F(o,e[2])},d(e){e&&C(t)}}}function Bi(t){let n,r,i,o,s,a,l=t[2]&&Mi(t);return{c(){n=S("div"),r=S("h2"),i=A(),o=S("h5"),s=A(),l&&l.c(),P(n,"class",a=m("svelte-lightbox-footer "+t[4])+" svelte-1u8lh7d"),P(n,"style",t[5])},m(e,a){x(e,n,a),_(n,r),r.innerHTML=t[0],_(n,i),_(n,o),o.innerHTML=t[1],_(n,s),l&&l.m(n,null)},p(e,[t]){1&t&&(r.innerHTML=e[0]),2&t&&(o.innerHTML=e[1]),e[2]?l?l.p(e,t):(l=Mi(e),l.c(),l.m(n,null)):l&&(l.d(1),l=null),16&t&&a!==(a=m("svelte-lightbox-footer "+e[4])+" svelte-1u8lh7d")&&P(n,"class",a),32&t&&P(n,"style",e[5])},i:e,o:e,d(e){e&&C(n),l&&l.d()}}}function Ki(e,t,n){let{title:r=""}=t,{description:i=""}=t,{galleryLength:o}=t,{activeImage:s}=t,{classes:a=""}=t,{style:l=""}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"description"in e&&n(1,i=e.description),"galleryLength"in e&&n(2,o=e.galleryLength),"activeImage"in e&&n(3,s=e.activeImage),"classes"in e&&n(4,a=e.classes),"style"in e&&n(5,l=e.style)},[r,i,o,s,a,l]}class zi extends Oe{constructor(e){super(),Se(this,e,Ki,Bi,l,{title:0,description:1,galleryLength:2,activeImage:3,classes:4,style:5})}}function qi(e){let t;const n=e[14].default,r=h(n,e,e[25],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||33554432&i)&&d(r,n,e,e[25],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function Vi(e){let t,n,r,i,o,a,l,c,u,h,f,d,p,g,v,y,b,k,w,$;function j(t){e[16](t)}function O(t){e[17](t)}function E(t){e[18](t)}i=new Pi({}),i.$on("close",e[15]);let N={$$slots:{default:[qi]},$$scope:{ctx:e}};function T(t){e[19](t)}function F(t){e[20](t)}function L(t){e[21](t)}function R(t){e[22](t)}void 0!==e[2]&&(N.image=e[2]),void 0!==e[3]&&(N.protect=e[3]),void 0!==e[4]&&(N.portrait=e[4]),a=new Di({props:N}),Z.push((()=>$e(a,"image",j))),Z.push((()=>$e(a,"protect",O))),Z.push((()=>$e(a,"portrait",E)));let D={};return void 0!==e[7]&&(D.title=e[7]),void 0!==e[8]&&(D.description=e[8]),void 0!==e[0].length&&(D.galleryLength=e[0].length),void 0!==e[1]&&(D.activeImage=e[1]),f=new zi({props:D}),Z.push((()=>$e(f,"title",T))),Z.push((()=>$e(f,"description",F))),Z.push((()=>$e(f,"galleryLength",L))),Z.push((()=>$e(f,"activeImage",R))),{c(){t=S("div"),n=S("div"),r=S("div"),_e(i.$$.fragment),o=A(),_e(a.$$.fragment),h=A(),_e(f.$$.fragment),P(r,"class","svelte-lightbox svelte-tpon2m"),P(n,"class",y=m(e[9])+" svelte-tpon2m"),P(n,"style",e[5]),P(t,"class","cover clearfix svelte-tpon2m")},m(s,l){x(s,t,l),_(t,n),_(n,r),xe(i,r,null),_(r,o),xe(a,r,null),_(r,h),xe(f,r,null),k=!0,w||($=[I(r,"click",e[23]),I(n,"click",e[24])],w=!0)},p(t,[r]){e=t;const i={};33554432&r&&(i.$$scope={dirty:r,ctx:e}),!l&&4&r&&(l=!0,i.image=e[2],oe((()=>l=!1))),!c&&8&r&&(c=!0,i.protect=e[3],oe((()=>c=!1))),!u&&16&r&&(u=!0,i.portrait=e[4],oe((()=>u=!1))),a.$set(i);const o={};!d&&128&r&&(d=!0,o.title=e[7],oe((()=>d=!1))),!p&&256&r&&(p=!0,o.description=e[8],oe((()=>p=!1))),!g&&1&r&&(g=!0,o.galleryLength=e[0].length,oe((()=>g=!1))),!v&&2&r&&(v=!0,o.activeImage=e[1],oe((()=>v=!1))),f.$set(o),(!k||512&r&&y!==(y=m(e[9])+" svelte-tpon2m"))&&P(n,"class",y),(!k||32&r)&&P(n,"style",e[5])},i(t){k||(ge(i.$$.fragment,t),ge(a.$$.fragment,t),ge(f.$$.fragment,t),ie((()=>{b||(b=be(n,Oi,{duration:e[6]},!0)),b.run(1)})),k=!0)},o(t){ve(i.$$.fragment,t),ve(a.$$.fragment,t),ve(f.$$.fragment,t),b||(b=be(n,Oi,{duration:e[6]},!1)),b.run(0),k=!1},d(e){e&&C(t),Ce(i),Ce(a),Ce(f),e&&b&&b.end(),w=!1,s($)}}}function Hi(e,t,n){let r,{$$slots:i={},$$scope:o}=t;const s=J();let a,l,{modalClasses:c=""}=t,{modalStyle:u=""}=t,{transitionDuration:h=500}=t,{image:f={}}=t,{protect:d=!1}=t,{portrait:p=!1}=t,{title:m=""}=t,{description:g=""}=t,{gallery:v}=t,{activeImage:y}=t;return e.$$set=e=>{"modalClasses"in e&&n(11,c=e.modalClasses),"modalStyle"in e&&n(5,u=e.modalStyle),"transitionDuration"in e&&n(6,h=e.transitionDuration),"image"in e&&n(2,f=e.image),"protect"in e&&n(3,d=e.protect),"portrait"in e&&n(4,p=e.portrait),"title"in e&&n(12,m=e.title),"description"in e&&n(13,g=e.description),"gallery"in e&&n(0,v=e.gallery),"activeImage"in e&&n(1,y=e.activeImage),"$$scope"in e&&n(25,o=e.$$scope)},e.$$.update=()=>{2048&e.$$.dirty&&n(9,r=`${c} svelte-lightbox-overlay clearfix`),4096&e.$$.dirty&&n(7,a=m),8192&e.$$.dirty&&n(8,l=g),12291&e.$$.dirty&&(!v||m||g||(n(7,a=v[y].title),n(8,l=v[y].description)))},[v,y,f,d,p,u,h,a,l,r,s,c,m,g,i,()=>s("close"),function(e){f=e,n(2,f)},function(e){d=e,n(3,d)},function(e){p=e,n(4,p)},function(e){a=e,n(7,a),n(12,m),n(0,v),n(13,g),n(1,y)},function(e){l=e,n(8,l),n(13,g),n(0,v),n(12,m),n(1,y)},function(t){e.$$.not_equal(v.length,t)&&(v.length=t,n(0,v))},function(e){y=e,n(1,y)},()=>s("modalClick"),()=>s("topModalClick"),o]}class Ui extends Oe{constructor(e){super(),Se(this,e,Hi,Vi,l,{modalClasses:11,modalStyle:5,transitionDuration:6,image:2,protect:3,portrait:4,title:12,description:13,gallery:0,activeImage:1})}}function Gi(e){let t,n,r,i,o,a,l,c,u,f,p,m,g,v,y,b,k;const w=e[6].default,$=h(w,e,e[5],null);return{c(){t=S("div"),n=S("button"),r=O("svg"),i=O("g"),o=O("path"),l=A(),c=S("div"),$&&$.c(),u=A(),f=S("button"),p=O("svg"),m=O("g"),g=O("path"),P(o,"class","arrow svelte-wwe8hv"),P(o,"d","M8.7,7.22,4.59,11.33a1,1,0,0,0,0,1.41l4,4"),P(r,"viewBox","0 0 24 24"),P(r,"xmlns","http://www.w3.org/2000/svg"),P(r,"class","svelte-wwe8hv"),n.disabled=a=0===e[0],P(n,"class","previous-button svelte-wwe8hv"),P(c,"class","slot svelte-wwe8hv"),P(g,"class","arrow svelte-wwe8hv"),P(g,"d","M15.3,16.78l4.11-4.11a1,1,0,0,0,0-1.41l-4-4"),P(p,"viewBox","0 0 24 24"),P(p,"xmlns","http://www.w3.org/2000/svg"),P(p,"class","svelte-wwe8hv"),f.disabled=v=e[0]===e[2]?.length-1,P(f,"class","next-button svelte-wwe8hv"),P(t,"class","wrapper svelte-wwe8hv")},m(s,a){x(s,t,a),_(t,n),_(n,r),_(r,i),_(i,o),_(t,l),_(t,c),$&&$.m(c,null),e[7](c),_(t,u),_(t,f),_(f,p),_(p,m),_(m,g),y=!0,b||(k=[I(n,"click",e[3]),I(f,"click",e[4])],b=!0)},p(e,[t]){(!y||1&t&&a!==(a=0===e[0]))&&(n.disabled=a),$&&$.p&&(!y||32&t)&&d($,w,e,e[5],t,null,null),(!y||5&t&&v!==(v=e[0]===e[2]?.length-1))&&(f.disabled=v)},i(e){y||(ge($,e),y=!0)},o(e){ve($,e),y=!1},d(n){n&&C(t),$&&$.d(n),e[7](null),b=!1,s(k)}}}function Wi(e,t,n){let r,i,{$$slots:o={},$$scope:s}=t,{activeImage:a=0}=t;return e.$$set=e=>{"activeImage"in e&&n(0,a=e.activeImage),"$$scope"in e&&n(5,s=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(2,i=r?.children),5&e.$$.dirty&&(console.log(typeof i),i&&a<i.length?(Object.values(i).forEach((e=>(e.hidden=!0,e))),n(2,i[a].hidden=!1,i)):i&&a>=i.length&&console.error("LightboxGallery: Selected image doesn't exist, invalid activeImage"))},[a,r,i,()=>{n(0,a--,a)},()=>{n(0,a++,a)},s,o,function(e){Z[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Xi extends Oe{constructor(e){super(),Se(this,e,Wi,Gi,l,{activeImage:0})}}const Yi=[];function Ji(t,n=e){let r;const i=[];function o(e){if(l(t,e)&&(t=e,r)){const e=!Yi.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),Yi.push(n,t)}if(e){for(let e=0;e<Yi.length;e+=2)Yi[e][0](Yi[e+1]);Yi.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const l=[s,a];return i.push(l),1===i.length&&(r=n(o)||e),s(t),()=>{const e=i.indexOf(l);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}const Qi=e=>({}),Zi=e=>({}),eo=e=>({}),to=e=>({}),no=e=>({}),ro=e=>({});function io(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function oo(e){let t;const n=e[17].thumbnail,r=h(n,e,e[32],ro);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,no,ro)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function so(e){let t,n,r,i;const o=[oo,io],s=[];function a(e,t){return e[12]||e[5]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=N()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function ao(e){let t,n,r,i,o,s,a,l,c,u,h,f;function d(t){e[22](t)}function p(t){e[23](t)}function m(t){e[24](t)}function g(t){e[25](t)}function v(t){e[26](t)}function y(t){e[27](t)}function b(t){e[28](t)}function k(t){e[29](t)}function w(t){e[30](t)}function $(t){e[31](t)}let _={$$slots:{default:[fo]},$$scope:{ctx:e}};return void 0!==e[2]&&(_.modalClasses=e[2]),void 0!==e[3]&&(_.modalStyle=e[3]),void 0!==e[8]&&(_.transitionDuration=e[8]),void 0!==e[10]&&(_.image=e[10]),void 0!==e[9]&&(_.protect=e[9]),void 0!==e[11]&&(_.portrait=e[11]),void 0!==e[6]&&(_.title=e[6]),void 0!==e[7]&&(_.description=e[7]),void 0!==e[5]&&(_.gallery=e[5]),void 0!==e[4]&&(_.activeImage=e[4]),t=new Ui({props:_}),Z.push((()=>$e(t,"modalClasses",d))),Z.push((()=>$e(t,"modalStyle",p))),Z.push((()=>$e(t,"transitionDuration",m))),Z.push((()=>$e(t,"image",g))),Z.push((()=>$e(t,"protect",v))),Z.push((()=>$e(t,"portrait",y))),Z.push((()=>$e(t,"title",b))),Z.push((()=>$e(t,"description",k))),Z.push((()=>$e(t,"gallery",w))),Z.push((()=>$e(t,"activeImage",$))),t.$on("close",e[14]),t.$on("topModalClick",e[14]),t.$on("modalClick",e[14]),{c(){_e(t.$$.fragment)},m(e,n){xe(t,e,n),f=!0},p(e,f){const d={};4144&f[0]|2&f[1]&&(d.$$scope={dirty:f,ctx:e}),!n&&4&f[0]&&(n=!0,d.modalClasses=e[2],oe((()=>n=!1))),!r&&8&f[0]&&(r=!0,d.modalStyle=e[3],oe((()=>r=!1))),!i&&256&f[0]&&(i=!0,d.transitionDuration=e[8],oe((()=>i=!1))),!o&&1024&f[0]&&(o=!0,d.image=e[10],oe((()=>o=!1))),!s&&512&f[0]&&(s=!0,d.protect=e[9],oe((()=>s=!1))),!a&&2048&f[0]&&(a=!0,d.portrait=e[11],oe((()=>a=!1))),!l&&64&f[0]&&(l=!0,d.title=e[6],oe((()=>l=!1))),!c&&128&f[0]&&(c=!0,d.description=e[7],oe((()=>c=!1))),!u&&32&f[0]&&(u=!0,d.gallery=e[5],oe((()=>u=!1))),!h&&16&f[0]&&(h=!0,d.activeImage=e[4],oe((()=>h=!1))),t.$set(d)},i(e){f||(ge(t.$$.fragment,e),f=!0)},o(e){ve(t.$$.fragment,e),f=!1},d(e){Ce(t,e)}}}function lo(e){let t;const n=e[17].default,r=h(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function co(e){let t,n,r;function i(t){e[21](t)}let o={$$slots:{default:[ho]},$$scope:{ctx:e}};return void 0!==e[4]&&(o.activeImage=e[4]),t=new Xi({props:o}),Z.push((()=>$e(t,"activeImage",i))),{c(){_e(t.$$.fragment)},m(e,n){xe(t,e,n),r=!0},p(e,r){const i={};2&r[1]&&(i.$$scope={dirty:r,ctx:e}),!n&&16&r[0]&&(n=!0,i.activeImage=e[4],oe((()=>n=!1))),t.$set(i)},i(e){r||(ge(t.$$.fragment,e),r=!0)},o(e){ve(t.$$.fragment,e),r=!1},d(e){Ce(t,e)}}}function uo(e){let t;const n=e[17].image,r=h(n,e,e[32],to);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2&i[1])&&d(r,n,e,e[32],i,eo,to)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function ho(e){let t,n;const r=e[17].thumbnail,i=h(r,e,e[32],Zi),o=e[17].default,s=h(o,e,e[32],null);return{c(){i&&i.c(),t=A(),s&&s.c()},m(e,r){i&&i.m(e,r),x(e,t,r),s&&s.m(e,r),n=!0},p(e,t){i&&i.p&&(!n||2&t[1])&&d(i,r,e,e[32],t,Qi,Zi),s&&s.p&&(!n||2&t[1])&&d(s,o,e,e[32],t,null,null)},i(e){n||(ge(i,e),ge(s,e),n=!0)},o(e){ve(i,e),ve(s,e),n=!1},d(e){i&&i.d(e),e&&C(t),s&&s.d(e)}}}function fo(e){let t,n,r,i;const o=[uo,co,lo],s=[];function a(e,t){return e[12]?0:e[5]?1:2}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=N()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function po(e){let t,n,r,i,o,s,a,l,c;function u(t){e[18](t)}function h(t){e[19](t)}function f(t){e[20](t)}let d={$$slots:{default:[so]},$$scope:{ctx:e}};void 0!==e[0]&&(d.thumbnailClasses=e[0]),void 0!==e[1]&&(d.thumbnailStyle=e[1]),void 0!==e[9]&&(d.protect=e[9]),t=new ji({props:d}),Z.push((()=>$e(t,"thumbnailClasses",u))),Z.push((()=>$e(t,"thumbnailStyle",h))),Z.push((()=>$e(t,"protect",f))),t.$on("click",e[14]);let p=e[13]&&ao(e);return{c(){_e(t.$$.fragment),o=A(),p&&p.c(),s=N()},m(n,r){xe(t,n,r),x(n,o,r),p&&p.m(n,r),x(n,s,r),a=!0,l||(c=I(window,"keydown",e[15]),l=!0)},p(e,o){const a={};4128&o[0]|2&o[1]&&(a.$$scope={dirty:o,ctx:e}),!n&&1&o[0]&&(n=!0,a.thumbnailClasses=e[0],oe((()=>n=!1))),!r&&2&o[0]&&(r=!0,a.thumbnailStyle=e[1],oe((()=>r=!1))),!i&&512&o[0]&&(i=!0,a.protect=e[9],oe((()=>i=!1))),t.$set(a),e[13]?p?(p.p(e,o),8192&o[0]&&ge(p,1)):(p=ao(e),p.c(),ge(p,1),p.m(s.parentNode,s)):p&&(pe(),ve(p,1,1,(()=>{p=null})),me())},i(e){a||(ge(t.$$.fragment,e),ge(p),a=!0)},o(e){ve(t.$$.fragment,e),ve(p),a=!1},d(e){Ce(t,e),e&&C(o),p&&p.d(e),e&&C(s),l=!1,c()}}}function mo(e,t,n){let{$$slots:r={},$$scope:i}=t,{thumbnailClasses:o=""}=t,{thumbnailStyle:s=""}=t,{modalClasses:a=""}=t,{modalStyle:l=""}=t,{activeImage:c=0}=t,{gallery:u=!1}=t,{title:h=""}=t,{description:f=""}=t,{transitionDuration:d=500}=t,{protect:p=!1}=t,{image:m={}}=t,{portrait:g=!1}=t,{noScroll:v=!0}=t,{thumbnail:y=!1}=t,b=!1;let k=()=>{};Y((()=>{let e=document.body.style.overflow;k=()=>{document.body.style.overflow=b?"hidden":e}}));return e.$$set=e=>{"thumbnailClasses"in e&&n(0,o=e.thumbnailClasses),"thumbnailStyle"in e&&n(1,s=e.thumbnailStyle),"modalClasses"in e&&n(2,a=e.modalClasses),"modalStyle"in e&&n(3,l=e.modalStyle),"activeImage"in e&&n(4,c=e.activeImage),"gallery"in e&&n(5,u=e.gallery),"title"in e&&n(6,h=e.title),"description"in e&&n(7,f=e.description),"transitionDuration"in e&&n(8,d=e.transitionDuration),"protect"in e&&n(9,p=e.protect),"image"in e&&n(10,m=e.image),"portrait"in e&&n(11,g=e.portrait),"noScroll"in e&&n(16,v=e.noScroll),"thumbnail"in e&&n(12,y=e.thumbnail),"$$scope"in e&&n(32,i=e.$$scope)},[o,s,a,l,c,u,h,f,d,p,m,g,y,b,()=>{n(13,b=!b),v&&k()},e=>{"Escape"===e.code&&n(13,b=!1)},v,r,function(e){o=e,n(0,o)},function(e){s=e,n(1,s)},function(e){p=e,n(9,p)},function(e){c=e,n(4,c)},function(e){a=e,n(2,a)},function(e){l=e,n(3,l)},function(e){d=e,n(8,d)},function(e){m=e,n(10,m)},function(e){p=e,n(9,p)},function(e){g=e,n(11,g)},function(e){h=e,n(6,h)},function(e){f=e,n(7,f)},function(e){u=e,n(5,u)},function(e){c=e,n(4,c)},i]}class go extends Oe{constructor(e){super(),Se(this,e,mo,po,l,{thumbnailClasses:0,thumbnailStyle:1,modalClasses:2,modalStyle:3,activeImage:4,gallery:5,title:6,description:7,transitionDuration:8,protect:9,image:10,portrait:11,noScroll:16,thumbnail:12},[-1,-1])}}function vo(e){let t,n;return{c(){t=S("img"),t.src!==(n="img/screenshots/charm-scanning.png")&&P(t,"src","img/screenshots/charm-scanning.png"),P(t,"alt","charm scanning")},m(e,n){x(e,t,n)},d(e){e&&C(t)}}}function yo(e){let t,n;return{c(){t=S("img"),t.src!==(n="img/screenshots/charm-img.png")&&P(t,"src","img/screenshots/charm-img.png"),P(t,"alt","charm scrennshot")},m(e,n){x(e,t,n)},d(e){e&&C(t)}}}function bo(e){let t,n;return{c(){t=S("img"),t.src!==(n="img/screenshots/charm-substitutes.png")&&P(t,"src","img/screenshots/charm-substitutes.png"),P(t,"alt","charm substitutes")},m(e,n){x(e,t,n)},d(e){e&&C(t)}}}function ko(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,b,k,w,$,j,O,E,N,I,T,F,L,R;return h=new go({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[vo]},$$scope:{ctx:e}}}),k=new go({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[yo]},$$scope:{ctx:e}}}),$=new go({props:{thumbnailStyle:"width: 24rem; max-width: 90%; border: solid 1px #eee",$$slots:{default:[bo]},$$scope:{ctx:e}}}),{c(){t=S("div"),n=S("div"),n.innerHTML='<div class="card-body"><h2 class="svelte-a811x">■ 概要</h2> \n      <p class="svelte-a811x">モンスターハンターライズの護石用ツールです。<br/>\n        手持ちの護石を自動読み取りすることができます。<br/> \n        <br/>\n        読み取った護石は、スキャン時の画像や上位互換の護石が確認できます。<br/>\n        また、護石を性能検索することもできます。<br/></p></div>',r=A(),i=S("div"),o=S("div"),s=S("h2"),s.textContent="■ 護石スキャン",a=A(),l=S("p"),l.innerHTML='護石のスキルやスロットを自動読み取りします。<br/>\n        Nintendo Switch の 30 秒キャプチャ動画を用意するだけで、自動でデータ化できます。\n        (<a href="sample/input.mp4">動画例</a>)<br/> \n        <br/>\n        出力形式は、&lt;スキル1&gt;,&lt;スキル1Lv&gt;,&lt;スキル2&gt;,&lt;スキル2Lv&gt;,&lt;スロット1Lv&gt;,&lt;スロット2Lv&gt;,&lt;スロット3Lv&gt; です。<br/> \n        <a href="https://mhrise.wiki-db.com/sim/">泣きシミュ</a> さんでそのままインポートできます。<br/> \n        <br/>\n        キャプチャ動画の読み取りと、護石管理ページとの関係については、<a href="#h2-charm-manager">護石管理</a>を参照してください。<br/> \n        <br/>\n        (注意)<br/>\n        - <span style="color: red">装飾品をつけたままだと、装飾品分のスキルも読み込まれてしまいます。</span> (一括解除が有用です)<br/>\n        - キャプチャ動画のファイル名はデフォルトのまま使用することを推奨します。<br/>',c=A(),u=S("div"),_e(h.$$.fragment),f=A(),d=S("div"),p=S("div"),m=S("h2"),m.textContent="■ 護石管理",g=A(),v=S("p"),v.innerHTML='スキャンした護石の一覧を見ることができます。<br/>\n        護石データは蓄積され、次回、同じブラウザで開いた時にも保持されます。<br/> \n        <br/>\n        護石一覧における表示順は、動画読み込み順 → ゲーム内での表示順です。<br/>\n        動画を撮る際に、レア度ソートし、1 ページ目から順に撮ることで、輪廻錬金での表示順と同じになります。<br/> \n        <br/>\n        表中の &quot;合計スキルレベル&quot; は、<br/> \n        <span class="px-3 font-weight-bold">(スキルを装飾品換算した場合のスロットLv) × (スキルLv) + (スロットLv)</span><br/>\n        として計算しています。<br/> \n        <br/>\n        例: 納刀術2, ひるみ軽減1, スロット 3-1-0 の場合<br/> \n        <span class="px-3">2 × 2 + 1 × 1 + 3 + 1 + 0 = 9</span><br/> \n        <br/>\n        右端の画像ボタンを押すことで、スキャン時のスクリーンショットを確認できます。<br/>\n        右端に上向き矢印がある場合、上位互換の護石があります。クリックで該当の護石を確認することができます。<br/> \n        <br/>',y=A(),b=S("div"),_e(k.$$.fragment),w=A(),_e($.$$.fragment),j=A(),O=S("div"),O.innerHTML='<div class="card-body"><h2 class="svelte-a811x">■ 護石スペック検索</h2> \n      <p class="svelte-a811x">スキャンした護石を検索することができます。\n        装飾品でスキルが実現できる場合も検索対象に含まれます。</p></div>',E=A(),N=S("div"),N.innerHTML='<div class="card-body"><h2 class="svelte-a811x">■ 護石インポート・エクスポート</h2> \n      <p class="svelte-a811x">スキャンした護石のエクスポート・インポートが行えます。<br/>\n        入出力形式は、護石スキャン時と同様です。<br/> \n        <br/> \n        <span style="color: red">上書きインポートを使用すると、保存している護石情報が全て失なわれます。<br/>\n          また、インポート・エクスポートでは画像を扱っていないので、エクスポート → 上書きインポートすると護石画像が見れなくなります。<br/></span></p></div>',I=A(),T=S("div"),T.innerHTML='<div class="card-body"><h2 class="svelte-a811x">■ FAQ</h2> \n      <h3 class="svelte-a811x">Q. 護石管理のページで表示される護石がスキャンした数より少ないです</h3> \n      <p class="svelte-a811x">A.<br/>\n        完全に同性能 (スキル、スキルレベル、スロット全て同じ) 護石は登録されない仕様になっています。<br/> \n        <br/>\n        これは、複数の動画を読み取った時に、同一の護石か別の同性能護石か判別する術がないためです。<br/>\n        「重複していると思って輪廻に使ったら、同じ護石が登録されているだけだった」<br/>\n        という事態を考慮し、安全重視の仕様にしています。<br/> \n        <br/>\n        スキャン時の出力は重複も含めて表示されるので、必要があればそちらをご利用下さい。</p></div>',F=A(),L=S("div"),L.innerHTML='<div class="card-body"><h2 class="svelte-a811x">■ お問い合わせ</h2> \n      <p class="svelte-a811x">不具合報告や要望は <a href="https://github.com/ks-yuzu/mhrise-charm-scanner-web/issues">GitHub issue</a> にてお願いします。</p></div>',P(n,"class","card border border-light shadow-sm svelte-a811x"),P(s,"class","svelte-a811x"),P(l,"class","svelte-a811x"),P(u,"class","lightboxes svelte-a811x"),P(o,"class","card-body"),P(i,"class","card border border-light shadow-sm svelte-a811x"),P(m,"id","h2-charm-manager"),P(m,"class","svelte-a811x"),P(v,"class","svelte-a811x"),P(b,"class","lightboxes svelte-a811x"),P(p,"class","card-body"),P(d,"class","card border border-light shadow-sm svelte-a811x"),P(O,"class","card border border-light shadow-sm svelte-a811x"),P(N,"class","card border border-light shadow-sm svelte-a811x"),P(T,"class","card border border-light shadow-sm svelte-a811x"),P(L,"class","card border border-light shadow-sm svelte-a811x"),P(t,"id","description"),P(t,"class","svelte-a811x")},m(e,C){x(e,t,C),_(t,n),_(t,r),_(t,i),_(i,o),_(o,s),_(o,a),_(o,l),_(o,c),_(o,u),xe(h,u,null),_(t,f),_(t,d),_(d,p),_(p,m),_(p,g),_(p,v),_(p,y),_(p,b),xe(k,b,null),_(b,w),xe($,b,null),_(t,j),_(t,O),_(t,E),_(t,N),_(t,I),_(t,T),_(t,F),_(t,L),R=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),h.$set(n);const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),k.$set(r);const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),$.$set(i)},i(e){R||(ge(h.$$.fragment,e),ge(k.$$.fragment,e),ge($.$$.fragment,e),R=!0)},o(e){ve(h.$$.fragment,e),ve(k.$$.fragment,e),ve($.$$.fragment,e),R=!1},d(e){e&&C(t),Ce(h),Ce(k),Ce($)}}}function wo(e,t){let n=["children","$$scope","$$slots"].concat(t);const r={};for(const t of Object.keys(e))n.includes(t)||(r[t]=e[t]);return r}function $o(e){document.body.style.paddingRight=e>0?`${e}px`:null}function _o(){const e=function(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],n=t?parseInt(t.style.paddingRight||0,10):0;window&&document.body.clientWidth<window.innerWidth&&$o(n+e)}function xo(e){var t,n,r="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=xo(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(n=xo(t))&&(r&&(r+=" "),r+=n);else"boolean"==typeof e||e.call||(r&&(r+=" "),r+=e);return r}function Co(){let e,t=0,n="";for(;t<arguments.length;)(e=xo(arguments[t++]))&&(n&&(n+=" "),n+=e);return n}function jo(e,t=[]){const n=["focus","blur","change","input","update","submit","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture",...t];function r(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}return e=>{const t=[];for(let i=0;i<n.length;i++)t.push(I(e,n[i],r));return{destroy:()=>{for(let e=0;e<t.length;e++)t[e]()}}}}function So(e){let t,r,i,o,s;const a=e[22].default,l=h(a,e,e[21],null),c=l||function(e){let t,n,r,i;const o=[No,Ao,Eo],s=[];function a(e,t){return e[2]?0:e[1]?1:2}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=N()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}(e);let u=[e[12],{type:e[4]},{class:e[9]},{disabled:e[3]},{value:e[6]},{"aria-label":r=e[8]||e[10]},{style:e[0]}],f={};for(let e=0;e<u.length;e+=1)f=n(f,u[e]);return{c(){t=S("button"),c&&c.c(),T(t,f)},m(n,r){x(n,t,r),c&&c.m(t,null),e[23](t),i=!0,o||(s=v(e[11].call(null,t)),o=!0)},p(e,n){l?l.p&&(!i||2097152&n)&&d(l,a,e,e[21],n,null,null):c&&c.p&&2097158&n&&c.p(e,n),T(t,f=ke(u,[e[12],(!i||16&n)&&{type:e[4]},(!i||512&n)&&{class:e[9]},(!i||8&n)&&{disabled:e[3]},(!i||64&n)&&{value:e[6]},(!i||1280&n&&r!==(r=e[8]||e[10]))&&{"aria-label":r},(!i||1&n)&&{style:e[0]}]))},i(e){i||(ge(c,e),i=!0)},o(e){ve(c,e),i=!1},d(n){n&&C(t),c&&c.d(n),e[23](null),o=!1,s()}}}function Oo(e){let t,r,i,o,s,a,l;const c=[Po,Io],u=[];function h(e,t){return e[1]?0:1}r=h(e),i=u[r]=c[r](e);let f=[e[12],{class:e[9]},{disabled:e[3]},{href:e[5]},{"aria-label":o=e[8]||e[10]},{style:e[0]}],d={};for(let e=0;e<f.length;e+=1)d=n(d,f[e]);return{c(){t=S("a"),i.c(),T(t,d)},m(n,i){x(n,t,i),u[r].m(t,null),s=!0,a||(l=v(e[11].call(null,t)),a=!0)},p(e,n){let a=r;r=h(e),r===a?u[r].p(e,n):(pe(),ve(u[a],1,1,(()=>{u[a]=null})),me(),i=u[r],i?i.p(e,n):(i=u[r]=c[r](e),i.c()),ge(i,1),i.m(t,null)),T(t,d=ke(f,[e[12],(!s||512&n)&&{class:e[9]},(!s||8&n)&&{disabled:e[3]},(!s||32&n)&&{href:e[5]},(!s||1280&n&&o!==(o=e[8]||e[10]))&&{"aria-label":o},(!s||1&n)&&{style:e[0]}]))},i(e){s||(ge(i),s=!0)},o(e){ve(i),s=!1},d(e){e&&C(t),u[r].d(),a=!1,l()}}}function Eo(e){let t;const n=e[22].default,r=h(n,e,e[21],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2097152&i)&&d(r,n,e,e[21],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function Ao(t){let n;return{c(){n=E(t[1])},m(e,t){x(e,n,t)},p(e,t){2&t&&F(n,e[1])},i:e,o:e,d(e){e&&C(n)}}}function No(t){let n;return{c(){n=S("span"),n.textContent="×",P(n,"aria-hidden","true")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function Io(e){let t;const n=e[22].default,r=h(n,e,e[21],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||2097152&i)&&d(r,n,e,e[21],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function Po(t){let n;return{c(){n=E(t[1])},m(e,t){x(e,n,t)},p(e,t){2&t&&F(n,e[1])},i:e,o:e,d(e){e&&C(n)}}}function To(e){let t,n,r,i;const o=[Oo,So],s=[];function a(e,t){return e[5]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=N()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?s[t].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function Fo(e,t,r){let i,o,s,{$$slots:a={},$$scope:l}=t;const c=jo(V);let u,{class:h=""}=t,{active:f=!1}=t,{block:d=!1}=t,{children:m}=t,{close:g=!1}=t,{color:v}=t,{disabled:y=!1}=t,{type:b="button"}=t,{href:k=""}=t,{outline:w=!1}=t,{size:$=""}=t,{style:_=""}=t,{value:x=""}=t,{gradient:C}=t,{rounded:j}=t;j&&(_="border-radius: 10em"+_),v||(v=k?"primary":"default");const S=wo(t,["color","gradient","value","style","size"]);return e.$$set=e=>{r(24,t=n(n({},t),p(e))),"class"in e&&r(14,h=e.class),"active"in e&&r(15,f=e.active),"block"in e&&r(16,d=e.block),"children"in e&&r(1,m=e.children),"close"in e&&r(2,g=e.close),"color"in e&&r(13,v=e.color),"disabled"in e&&r(3,y=e.disabled),"type"in e&&r(4,b=e.type),"href"in e&&r(5,k=e.href),"outline"in e&&r(17,w=e.outline),"size"in e&&r(18,$=e.size),"style"in e&&r(0,_=e.style),"value"in e&&r(6,x=e.value),"gradient"in e&&r(19,C=e.gradient),"rounded"in e&&r(20,j=e.rounded),"$$scope"in e&&r(21,l=e.$$scope)},e.$$.update=()=>{r(8,i=t["aria-label"]),1040388&e.$$.dirty&&r(9,o=Co(h,{close:g},g||"btn waves-effect waves-light",C?`${C}-gradient`:g||`btn${w?"-outline":""}-${v}`,!!$&&`btn-${$}`,!!d&&"btn-block",{active:f})),4&e.$$.dirty&&r(10,s=g?"Close":null)},t=p(t),[_,m,g,y,b,k,x,u,i,o,s,c,S,v,h,f,d,w,$,C,j,l,a,function(e){Z[e?"unshift":"push"]((()=>{u=e,r(7,u)}))}]}class Lo extends Oe{constructor(e){super(),Se(this,e,Fo,To,l,{class:14,active:15,block:16,children:1,close:2,color:13,disabled:3,type:4,href:5,outline:17,size:18,style:0,value:6,gradient:19,rounded:20})}}function Ro(e){let t,r,i,o,s;const a=e[6].default,l=h(a,e,e[5],null);let c=[e[1],{role:"group"},{class:r=e[2].join(" ")}],u={};for(let e=0;e<c.length;e+=1)u=n(u,c[e]);return{c(){t=S("div"),l&&l.c(),T(t,u)},m(n,r){x(n,t,r),l&&l.m(t,null),i=!0,o||(s=v(e[0].call(null,t)),o=!0)},p(e,[n]){l&&l.p&&(!i||32&n)&&d(l,a,e,e[5],n,null,null),T(t,u=ke(c,[e[1],{role:"group"},{class:r}]))},i(e){i||(ge(l,e),i=!0)},o(e){ve(l,e),i=!1},d(e){e&&C(t),l&&l.d(e),o=!1,s()}}}function Do(e,t,r){let{$$slots:i={},$$scope:o}=t;const s=jo(V),a=wo(t,[]);let{size:l}=t,{vertical:c}=t,u=[c?"btn-group-vertical":"btn-group"];return l&&u.push(`btn-group-${l}`),e.$$set=e=>{r(7,t=n(n({},t),p(e))),"size"in e&&r(3,l=e.size),"vertical"in e&&r(4,c=e.vertical),"$$scope"in e&&r(5,o=e.$$scope)},t=p(t),[s,a,u,l,c,o,i]}class Mo extends Oe{constructor(e){super(),Se(this,e,Do,Ro,l,{size:3,vertical:4})}}const Bo=e=>({}),Ko=e=>({});function zo(e){let t,n,r,i,o,a,l,c,u,f,p,m,g;const v=e[38].external,y=h(v,e,e[37],Ko),b=e[38].default,k=h(b,e,e[37],null);return{c(){t=S("div"),n=S("div"),r=S("div"),y&&y.c(),i=A(),k&&k.c(),l=A(),c=S("div"),P(r,"class",o=Co("modal-content",e[8])),P(n,"class",e[13]),P(n,"role","document"),P(t,"arialabelledby",e[5]),P(t,"class",e[12]),P(t,"role","dialog"),R(t,"display","block"),P(c,"class",u=Co({"modal-backdrop":e[6]},"show",e[7]))},m(o,s){x(o,t,s),_(t,n),_(n,r),y&&y.m(r,null),_(r,i),k&&k.m(r,null),e[39](n),x(o,l,s),x(o,c,s),p=!0,m||(g=[I(t,"introend",e[15]),I(t,"outroend",e[16]),I(t,"click",e[14]),I(t,"mousedown",e[17])],m=!0)},p(i,s){e=i,y&&y.p&&(!p||64&s[1])&&d(y,v,e,e[37],s,Bo,Ko),k&&k.p&&(!p||64&s[1])&&d(k,b,e,e[37],s,null,null),(!p||256&s[0]&&o!==(o=Co("modal-content",e[8])))&&P(r,"class",o),(!p||8192&s[0])&&P(n,"class",e[13]),(!p||32&s[0])&&P(t,"arialabelledby",e[5]),(!p||4096&s[0])&&P(t,"class",e[12]),(!p||192&s[0]&&u!==(u=Co({"modal-backdrop":e[6]},"show",e[7])))&&P(c,"class",u)},i(n){p||(ge(y,n),ge(k,n),ie((()=>{a||(a=be(t,Ei,{x:e[0],y:e[1],duration:e[9]&&e[3]},!0)),a.run(1)})),ie((()=>{f||(f=be(c,Oi,{duration:e[9]&&e[4]},!0)),f.run(1)})),p=!0)},o(n){ve(y,n),ve(k,n),a||(a=be(t,Ei,{x:e[0],y:e[1],duration:e[9]&&e[3]},!1)),a.run(0),f||(f=be(c,Oi,{duration:e[9]&&e[4]},!1)),f.run(0),p=!1},d(n){n&&C(t),y&&y.d(n),k&&k.d(n),e[39](null),n&&a&&a.end(),n&&C(l),n&&C(c),n&&f&&f.end(),m=!1,s(g)}}}function qo(e){let t,n,r=e[10]&&e[2]&&zo(e);return{c(){r&&r.c(),t=N()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,n){e[10]&&e[2]?r?(r.p(e,n),1028&n[0]&&ge(r,1)):(r=zo(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}let Vo=0;const Ho="modal-dialog";function Uo(e,t,r){let i,{$$slots:o={},$$scope:s}=t;jo(V);let{class:a=""}=t,{isOpen:l}=t,{autoFocus:c=!0}=t,{centered:u=!1}=t,{duration:h=500}=t,{backdropDuration:f=h}=t,{scrollable:d=!1}=t,{size:m=""}=t,{toggle:g}=t,{labelledBy:v=""}=t,{backdrop:y=!0}=t,{onEnter:b}=t,{onExit:k}=t,{onOpened:w=(()=>{})}=t,{onClosed:$=(()=>{})}=t,{wrapClassName:_=""}=t,{modalClassName:x=""}=t,{backdropClassName:C=""}=t,{contentClassName:j=""}=t,{fade:S=!0}=t,{zIndex:O=1050}=t,{unmountOnClose:E=!0}=t,{returnFocusAfterClose:A=!0}=t,{displacementX:N=0}=t,{displacementY:I=-300}=t,{side:P}=t,{position:T=""}=t,{fullHeight:F}=t,{frame:L}=t;wo(t,["isOpen","autoFocus","centered","duration","backdropDuration","scrollable","size","toggle","labelledBy","toggle","onEnter","onExit","onOpened","onClosed","wrapClassName","modalClassName","backdropClassName","contentClassName","fade","zIndex","unmountOnClose","returnFocusAfterClose","side","position","frame","backdrop"]);let R,D,M,B,K,z,q=!1,H=!1,U=l,G=q;var W;function J(){M&&M.parentNode&&"function"==typeof M.parentNode.focus&&M.parentNode.focus()}function Q(){try{R=document.activeElement}catch(e){R=null}D=function(){const e=window?window.getComputedStyle(document.body,null):{};return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}(),_o(),0===Vo&&(document.body.className=Co(document.body.className,"modal-open")),++Vo,r(10,H=!0)}function ee(){R&&("function"==typeof R.focus&&A&&R.focus(),R=null)}function te(){ee()}function ne(){if(Vo<=1){const e=new RegExp(`(^| )${"modal-open"}( |$)`);document.body.className=document.body.className.replace(e," ").trim()}ee(),Vo=Math.max(0,Vo-1),$o(D)}return Y((()=>{l&&(Q(),q=!0),"function"==typeof b&&b(),q&&c&&J()})),W=()=>{"function"==typeof k&&k(),te(),q&&ne()},X().$$.on_destroy.push(W),function(e){X().$$.after_update.push(e)}((()=>{l&&!U&&(Q(),q=!0),c&&q&&!G&&J(),U=l,G=q})),-1!==T.indexOf("right")&&(N=300,F&&(I=0)),-1!==T.indexOf("left")&&(N=-300,F&&(I=0)),-1!==T.indexOf("top")&&(I=-300,F&&(N=0)),-1!==T.indexOf("bottom")&&(I=300,F&&(N=0)),z=Co("modal","show",x),e.$$set=e=>{r(54,t=n(n({},t),p(e))),"class"in e&&r(18,a=e.class),"isOpen"in e&&r(2,l=e.isOpen),"autoFocus"in e&&r(19,c=e.autoFocus),"centered"in e&&r(20,u=e.centered),"duration"in e&&r(3,h=e.duration),"backdropDuration"in e&&r(4,f=e.backdropDuration),"scrollable"in e&&r(21,d=e.scrollable),"size"in e&&r(22,m=e.size),"toggle"in e&&r(23,g=e.toggle),"labelledBy"in e&&r(5,v=e.labelledBy),"backdrop"in e&&r(6,y=e.backdrop),"onEnter"in e&&r(24,b=e.onEnter),"onExit"in e&&r(25,k=e.onExit),"onOpened"in e&&r(26,w=e.onOpened),"onClosed"in e&&r(27,$=e.onClosed),"wrapClassName"in e&&r(28,_=e.wrapClassName),"modalClassName"in e&&r(29,x=e.modalClassName),"backdropClassName"in e&&r(7,C=e.backdropClassName),"contentClassName"in e&&r(8,j=e.contentClassName),"fade"in e&&r(9,S=e.fade),"zIndex"in e&&r(30,O=e.zIndex),"unmountOnClose"in e&&r(31,E=e.unmountOnClose),"returnFocusAfterClose"in e&&r(32,A=e.returnFocusAfterClose),"displacementX"in e&&r(0,N=e.displacementX),"displacementY"in e&&r(1,I=e.displacementY),"side"in e&&r(33,P=e.side),"position"in e&&r(34,T=e.position),"fullHeight"in e&&r(35,F=e.fullHeight),"frame"in e&&r(36,L=e.frame),"$$scope"in e&&r(37,s=e.$$scope)},e.$$.update=()=>{7602176&e.$$.dirty[0]|60&e.$$.dirty[1]&&r(13,i=Co(Ho,a,{[`modal-${m}`]:m,"modal-dialog-centered":u,"modal-dialog-scrollable":d,"modal-side":P,"modal-full-height":F,"modal-frame":L,[`modal-${T}`]:T}))},t=p(t),[N,I,l,h,f,v,y,C,j,S,H,M,z,i,function(e){if(e.target===B){if(e.stopPropagation(),!l||!y)return;const t=M?M.parentNode:null;t&&e.target===t&&g&&g(e)}},function(){K=function(e,...t){return e.addEventListener(...t),()=>e.removeEventListener(...t)}(document,"keydown",(e=>{e.key&&"Escape"===e.key&&g(e)})),w()},function(){$(),K&&K(),E&&te(),ne(),H&&(q=!1),r(10,H=!1)},function(e){B=e.target},a,c,u,d,m,g,b,k,w,$,_,x,O,E,A,P,T,F,L,s,o,function(e){Z[e?"unshift":"push"]((()=>{M=e,r(11,M)}))}]}class Go extends Oe{constructor(e){super(),Se(this,e,Uo,qo,l,{class:18,isOpen:2,autoFocus:19,centered:20,duration:3,backdropDuration:4,scrollable:21,size:22,toggle:23,labelledBy:5,backdrop:6,onEnter:24,onExit:25,onOpened:26,onClosed:27,wrapClassName:28,modalClassName:29,backdropClassName:7,contentClassName:8,fade:9,zIndex:30,unmountOnClose:31,returnFocusAfterClose:32,displacementX:0,displacementY:1,side:33,position:34,fullHeight:35,frame:36},[-1,-1])}}function Wo(e){let t,r,i,o;const s=e[5].default,a=h(s,e,e[4],null);let l=[e[2],{class:e[0]}],c={};for(let e=0;e<l.length;e+=1)c=n(c,l[e]);return{c(){t=S("div"),a&&a.c(),T(t,c)},m(n,s){x(n,t,s),a&&a.m(t,null),r=!0,i||(o=v(e[1].call(null,t)),i=!0)},p(e,[n]){a&&a.p&&(!r||16&n)&&d(a,s,e,e[4],n,null,null),T(t,c=ke(l,[e[2],(!r||1&n)&&{class:e[0]}]))},i(e){r||(ge(a,e),r=!0)},o(e){ve(a,e),r=!1},d(e){e&&C(t),a&&a.d(e),i=!1,o()}}}function Xo(e,t,r){let i,{$$slots:o={},$$scope:s}=t;const a=jo(V);let{class:l=""}=t;const c=wo(t);return e.$$set=e=>{r(6,t=n(n({},t),p(e))),"class"in e&&r(3,l=e.class),"$$scope"in e&&r(4,s=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&r(0,i=Co(l,"modal-body"))},t=p(t),[i,a,c,l,s,o]}class Yo extends Oe{constructor(e){super(),Se(this,e,Xo,Wo,l,{class:3})}}const Jo=e=>({}),Qo=e=>({});function Zo(e){let t;const n=e[10].default,r=h(n,e,e[9],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||512&i)&&d(r,n,e,e[9],i,null,null)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function es(t){let n;return{c(){n=E(t[2])},m(e,t){x(e,n,t)},p(e,t){4&t&&F(n,e[2])},i:e,o:e,d(e){e&&C(n)}}}function ts(e){let t,n,r,i,o;return{c(){t=S("button"),n=S("span"),r=E(e[3]),P(n,"aria-hidden","true"),P(t,"type","button"),P(t,"class","close"),P(t,"aria-label",e[1])},m(s,l){x(s,t,l),_(t,n),_(n,r),i||(o=I(t,"click",(function(){a(e[0])&&e[0].apply(this,arguments)})),i=!0)},p(n,i){e=n,8&i&&F(r,e[3]),2&i&&P(t,"aria-label",e[1])},d(e){e&&C(t),i=!1,o()}}}function ns(e){let t,r,i,o,s,a,l,c;const u=[es,Zo],f=[];function p(e,t){return e[2]?0:1}i=p(e),o=f[i]=u[i](e);const m=e[10].close,g=h(m,e,e[9],Qo),y=g||function(e){let t,n="function"==typeof e[0]&&ts(e);return{c(){n&&n.c(),t=N()},m(e,r){n&&n.m(e,r),x(e,t,r)},p(e,r){"function"==typeof e[0]?n?n.p(e,r):(n=ts(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}(e);let b=[e[6],{class:e[4]}],k={};for(let e=0;e<b.length;e+=1)k=n(k,b[e]);return{c(){t=S("div"),r=S("h5"),o.c(),s=A(),y&&y.c(),P(r,"class","modal-title"),T(t,k)},m(n,o){x(n,t,o),_(t,r),f[i].m(r,null),_(t,s),y&&y.m(t,null),a=!0,l||(c=v(e[5].call(null,t)),l=!0)},p(e,[n]){let s=i;i=p(e),i===s?f[i].p(e,n):(pe(),ve(f[s],1,1,(()=>{f[s]=null})),me(),o=f[i],o?o.p(e,n):(o=f[i]=u[i](e),o.c()),ge(o,1),o.m(r,null)),g?g.p&&(!a||512&n)&&d(g,m,e,e[9],n,Jo,Qo):y&&y.p&&11&n&&y.p(e,n),T(t,k=ke(b,[e[6],(!a||16&n)&&{class:e[4]}]))},i(e){a||(ge(o),ge(y,e),a=!0)},o(e){ve(o),ve(y,e),a=!1},d(e){e&&C(t),f[i].d(),y&&y.d(e),l=!1,c()}}}function rs(e,t,r){let i,o,{$$slots:s={},$$scope:a}=t;const l=jo(V);let{class:c=""}=t,{toggle:u}=t,{closeAriaLabel:h="Close"}=t,{charCode:f=215}=t,{children:d}=t;const m=wo(t);return e.$$set=e=>{r(11,t=n(n({},t),p(e))),"class"in e&&r(7,c=e.class),"toggle"in e&&r(0,u=e.toggle),"closeAriaLabel"in e&&r(1,h=e.closeAriaLabel),"charCode"in e&&r(8,f=e.charCode),"children"in e&&r(2,d=e.children),"$$scope"in e&&r(9,a=e.$$scope)},e.$$.update=()=>{256&e.$$.dirty&&r(3,i="number"==typeof f?String.fromCharCode(f):f),128&e.$$.dirty&&r(4,o=Co(c,"modal-header"))},t=p(t),[u,h,d,i,o,l,m,c,f,a,s]}class is extends Oe{constructor(e){super(),Se(this,e,rs,ns,l,{class:7,toggle:0,closeAriaLabel:1,charCode:8,children:2})}}function os(e){let t,r,i,o;const s=e[5].default,a=h(s,e,e[4],null);let l=[e[2],{class:e[0]}],c={};for(let e=0;e<l.length;e+=1)c=n(c,l[e]);return{c(){t=S("div"),a&&a.c(),T(t,c)},m(n,s){x(n,t,s),a&&a.m(t,null),r=!0,i||(o=v(e[1].call(null,t)),i=!0)},p(e,[n]){a&&a.p&&(!r||16&n)&&d(a,s,e,e[4],n,null,null),T(t,c=ke(l,[e[2],(!r||1&n)&&{class:e[0]}]))},i(e){r||(ge(a,e),r=!0)},o(e){ve(a,e),r=!1},d(e){e&&C(t),a&&a.d(e),i=!1,o()}}}function ss(e,t,r){let i,{$$slots:o={},$$scope:s}=t;const a=jo(V);let{class:l=""}=t;const c=wo(t);return e.$$set=e=>{r(6,t=n(n({},t),p(e))),"class"in e&&r(3,l=e.class),"$$scope"in e&&r(4,s=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&r(0,i=Co(l,"modal-footer"))},t=p(t),[i,a,c,l,s,o]}class as extends Oe{constructor(e){super(),Se(this,e,ss,os,l,{class:3})}}function ls(e){let t;return{c(){t=E("確認")},m(e,n){x(e,t,n)},d(e){e&&C(t)}}}function cs(e){let t;return{c(){t=E(e[0])},m(e,n){x(e,t,n)},p(e,n){1&n&&F(t,e[0])},d(e){e&&C(t)}}}function us(e){let t;return{c(){t=E(e[2])},m(e,n){x(e,t,n)},p(e,n){4&n&&F(t,e[2])},d(e){e&&C(t)}}}function hs(e){let t;return{c(){t=E("Cancel")},m(e,n){x(e,t,n)},d(e){e&&C(t)}}}function fs(e){let t,n,r,i;return t=new Lo({props:{color:e[1],$$slots:{default:[us]},$$scope:{ctx:e}}}),t.$on("click",e[6]),r=new Lo({props:{color:"primary",outline:!0,$$slots:{default:[hs]},$$scope:{ctx:e}}}),r.$on("click",e[5]),{c(){_e(t.$$.fragment),n=A(),_e(r.$$.fragment)},m(e,o){xe(t,e,o),x(e,n,o),xe(r,e,o),i=!0},p(e,n){const i={};2&n&&(i.color=e[1]),1028&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const o={};1024&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){i||(ge(t.$$.fragment,e),ge(r.$$.fragment,e),i=!0)},o(e){ve(t.$$.fragment,e),ve(r.$$.fragment,e),i=!1},d(e){Ce(t,e),e&&C(n),Ce(r,e)}}}function ds(e){let t,n,r,i,o,s;return t=new is({props:{toggle:e[4],$$slots:{default:[ls]},$$scope:{ctx:e}}}),r=new Yo({props:{$$slots:{default:[cs]},$$scope:{ctx:e}}}),o=new as({props:{$$slots:{default:[fs]},$$scope:{ctx:e}}}),{c(){_e(t.$$.fragment),n=A(),_e(r.$$.fragment),i=A(),_e(o.$$.fragment)},m(e,a){xe(t,e,a),x(e,n,a),xe(r,e,a),x(e,i,a),xe(o,e,a),s=!0},p(e,n){const i={};1024&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const s={};1025&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s);const a={};1030&n&&(a.$$scope={dirty:n,ctx:e}),o.$set(a)},i(e){s||(ge(t.$$.fragment,e),ge(r.$$.fragment,e),ge(o.$$.fragment,e),s=!0)},o(e){ve(t.$$.fragment,e),ve(r.$$.fragment,e),ve(o.$$.fragment,e),s=!1},d(e){Ce(t,e),e&&C(n),Ce(r,e),e&&C(i),Ce(o,e)}}}function ps(e){let t,n;return t=new Go({props:{isOpen:e[3],toggle:e[4],$$slots:{default:[ds]},$$scope:{ctx:e}}}),{c(){_e(t.$$.fragment)},m(e,r){xe(t,e,r),n=!0},p(e,[n]){const r={};8&n&&(r.isOpen=e[3]),1031&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ms(e,t,n){let r,i,o,s="primary",a="OK",l=!1;return[r,s,a,l,function(){n(3,l=!l)},function(){n(3,l=!1),o()},function(e){n(3,l=!1),i(e)},e=>new Promise(((t,c)=>{n(0,r=e.message||""),n(1,s=e.colorOkayButton||"primary"),n(2,a=e.labelOkayButton||"OK"),i=n=>{(e.onOkay||(e=>{}))(n),t(!0)},o=()=>{(e.onCancel||(()=>{}))(),c("cancel")},n(3,l=!0)}))]}class gs extends Oe{constructor(e){super(),Se(this,e,ms,ps,l,{confirm:7})}get confirm(){return this.$$.ctx[7]}}const vs=Ji(null);function ys(e,t,n){const r=e.slice();return r[14]=t[n],r}function bs(e){let t,n,r=e[14].label+"";return{c(){t=E(r),n=A()},m(e,r){x(e,t,r),x(e,n,r)},p(e,n){5&n&&r!==(r=e[14].label+"")&&F(t,r)},d(e){e&&C(t),e&&C(n)}}}function ks(e){let t,n;return t=new Lo({props:{color:"primary",class:"shadow-0 mx-1 px-0",style:"width: 8rem;",disabled:e[14].isDisabled(),$$slots:{default:[bs]},$$scope:{ctx:e}}}),t.$on("click",(function(){a(e[14].onClick)&&e[14].onClick.apply(this,arguments)})),{c(){_e(t.$$.fragment)},m(e,r){xe(t,e,r),n=!0},p(n,r){e=n;const i={};5&r&&(i.disabled=e[14].isDisabled()),131077&r&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ws(e){let t,n,r=[{label:"エクスポート",isDisabled:e[7],onClick:e[5]},{label:"追加インポート",isDisabled:e[8],onClick:e[9]},{label:"上書きインポート",isDisabled:e[10],onClick:e[11]}],i=[];for(let t=0;t<3;t+=1)i[t]=ks(ys(e,r,t));const o=e=>ve(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<3;e+=1)i[e].c();t=N()},m(e,r){for(let t=0;t<3;t+=1)i[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(61&n){let s;for(r=[{label:"エクスポート",isDisabled:e[7],onClick:e[5]},{label:"追加インポート",isDisabled:e[8],onClick:e[9]},{label:"上書きインポート",isDisabled:e[10],onClick:e[11]}],s=0;s<3;s+=1){const o=ys(e,r,s);i[s]?(i[s].p(o,n),ge(i[s],1)):(i[s]=ks(o),i[s].c(),ge(i[s],1),i[s].m(t.parentNode,t))}for(pe(),s=3;s<3;s+=1)o(s);me()}},i(e){if(!n){for(let e=0;e<3;e+=1)ge(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<3;e+=1)ve(i[e]);n=!1},d(e){j(i,e),e&&C(t)}}}function $s(e){let t,n,r,i,o,s,a,l,c,u,h;function f(t){e[12](t)}o=new Mo({props:{class:"shadow-0",$$slots:{default:[ws]},$$scope:{ctx:e}}});let d={};return void 0!==e[1]&&(d.confirm=e[1]),a=new gs({props:d}),Z.push((()=>$e(a,"confirm",f))),{c(){t=S("div"),n=S("div"),r=S("textarea"),i=A(),_e(o.$$.fragment),s=A(),_e(a.$$.fragment),P(r,"id","input"),P(r,"class","svelte-1m5otor"),P(n,"id","charm-ixporter"),P(n,"class","svelte-1m5otor"),P(t,"class","tab-content svelte-1m5otor")},m(l,f){x(l,t,f),_(t,n),_(n,r),L(r,e[0]),_(n,i),xe(o,n,null),_(n,s),xe(a,n,null),c=!0,u||(h=I(r,"input",e[6]),u=!0)},p(e,[t]){1&t&&L(r,e[0]);const n={};131077&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const i={};!l&&2&t&&(l=!0,i.confirm=e[1],oe((()=>l=!1))),a.$set(i)},i(e){c||(ge(o.$$.fragment,e),ge(a.$$.fragment,e),c=!0)},o(e){ve(o.$$.fragment,e),ve(a.$$.fragment,e),c=!1},d(e){e&&C(t),Ce(o),Ce(a),u=!1,h()}}}function _s(e,t,n){let r;u(e,vs,(e=>n(2,r=e)));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const o={APPEND:"append",OVERWRITE:"overwrite"};let s,a="";function l({mode:e}){return i(this,void 0,void 0,(function*(){if(a.trim().length<=0)return void console.log("blank!!");if(e!==o.APPEND&&e!==o.OVERWRITE)return void console.log("internal error");const t=yield s({message:e===o.OVERWRITE?"護石を上書きインポートします。\n既存の護石は削除され、元に戻すことはできません。よろしいですか？":"護石を追加インポートします。",colorOkayButton:"danger",onOkay:()=>{},onCancel:()=>{}});console.log(t),e===o.OVERWRITE&&(yield r.reset()),console.log(r.charms);const n=a.trim().split("\n").map((e=>{const[t,n,r,i,o,s,a,...l]=e.split(/,\s*/);return{skills:[t,r],skillLevels:[n,i],slots:[o,s,a]}}));console.log(n),r.registerCharms(n)}))}return[a,s,r,o,l,function(){return i(this,void 0,void 0,(function*(){n(0,a=r.charms.map((e=>{const{skill1:t,skill1Level:n,skill2:r,skill2Level:i,slot1:o,slot2:s,slot3:a}=e;return[t,n,r,i,o,s,a].join(",")})).join("\n"))}))},function(){a=this.value,n(0,a)},()=>null==r,()=>null==r||0===a.trim().length,()=>l({mode:o.APPEND}),()=>null==r||0===a.trim().length,()=>l({mode:o.OVERWRITE}),function(e){s=e,n(1,s)}]}const xs=e=>({noResultsText:2&e[0]}),Cs=e=>({noResultsText:e[1]});function js(e,t,n){const r=e.slice();return r[79]=t[n],r[81]=n,r}const Ss=e=>({item:131072&e[0],label:131072&e[0]}),Os=e=>({item:e[79].item,label:e[79].highlighted?e[79].highlighted.label:e[79].label});function Es(t){let n,r,i;return{c(){n=S("span"),n.textContent="✖",P(n,"class","autocomplete-clear-button svelte-77usy")},m(e,o){x(e,n,o),r||(i=I(n,"click",t[27]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function As(e){let t,n;const r=e[50]["no-results"],i=h(r,e,e[49],Cs),o=i||function(e){let t;return{c(){t=E(e[1])},m(e,n){x(e,t,n)},p(e,n){2&n[0]&&F(t,e[1])},d(e){e&&C(t)}}}(e);return{c(){t=S("div"),o&&o.c(),P(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,r){x(e,t,r),o&&o.m(t,null),n=!0},p(e,t){i?i.p&&(!n||2&t[0]|262144&t[1])&&d(i,r,e,e[49],t,xs,Cs):o&&o.p&&2&t[0]&&o.p(e,t)},i(e){n||(ge(o,e),n=!0)},o(e){ve(o,e),n=!1},d(e){e&&C(t),o&&o.d(e)}}}function Ns(e){let t,n,r,i=e[17],o=[];for(let t=0;t<i.length;t+=1)o[t]=Ls(js(e,i,t));const s=e=>ve(o[e],1,1,(()=>{o[e]=null}));let a=e[0]>0&&e[17].length>e[0]&&Rs(e);return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=A(),a&&a.c(),n=N()},m(e,i){for(let t=0;t<o.length;t+=1)o[t].m(e,i);x(e,t,i),a&&a.m(e,i),x(e,n,i),r=!0},p(e,r){if(1212417&r[0]|262144&r[1]){let n;for(i=e[17],n=0;n<i.length;n+=1){const s=js(e,i,n);o[n]?(o[n].p(s,r),ge(o[n],1)):(o[n]=Ls(s),o[n].c(),ge(o[n],1),o[n].m(t.parentNode,t))}for(pe(),n=i.length;n<o.length;n+=1)s(n);me()}e[0]>0&&e[17].length>e[0]?a?a.p(e,r):(a=Rs(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(e){if(!r){for(let e=0;e<i.length;e+=1)ge(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ve(o[e]);r=!1},d(e){j(o,e),e&&C(t),a&&a.d(e),e&&C(n)}}}function Is(e){let t,n,r=e[79]&&Ps(e);return{c(){r&&r.c(),t=N()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,n){e[79]?r?(r.p(e,n),131072&n[0]&&ge(r,1)):(r=Ps(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function Ps(e){let t,n,r,i,o;const a=e[50].item,l=h(a,e,e[49],Os),c=l||function(e){let t;function n(e,t){return e[79].highlighted?Fs:Ts}let r=n(e),i=r(e);return{c(){i.c(),t=N()},m(e,n){i.m(e,n),x(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}(e);function u(){return e[53](e[79])}function f(){return e[54](e[81])}return{c(){t=S("div"),c&&c.c(),P(t,"class",n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy")},m(e,n){x(e,t,n),c&&c.m(t,null),r=!0,i||(o=[I(t,"click",u),I(t,"pointerenter",f)],i=!0)},p(i,o){e=i,l?l.p&&(!r||131072&o[0]|262144&o[1])&&d(l,a,e,e[49],o,Ss,Os):c&&c.p&&131072&o[0]&&c.p(e,o),(!r||32768&o[0]&&n!==(n="autocomplete-list-item "+(e[81]===e[15]?"selected":"")+" svelte-77usy"))&&P(t,"class",n)},i(e){r||(ge(c,e),r=!0)},o(e){ve(c,e),r=!1},d(e){e&&C(t),c&&c.d(e),i=!1,s(o)}}}function Ts(e){let t,n,r=e[79].label+"";return{c(){n=N(),t=new z(n)},m(e,i){t.m(r,e,i),x(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].label+"")&&t.p(r)},d(e){e&&C(n),e&&t.d()}}}function Fs(e){let t,n,r=e[79].highlighted.label+"";return{c(){n=N(),t=new z(n)},m(e,i){t.m(r,e,i),x(e,n,i)},p(e,n){131072&n[0]&&r!==(r=e[79].highlighted.label+"")&&t.p(r)},d(e){e&&C(n),e&&t.d()}}}function Ls(e){let t,n,r=e[79]&&(e[0]<=0||e[81]<e[0])&&Is(e);return{c(){r&&r.c(),t=N()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,n){e[79]&&(e[0]<=0||e[81]<e[0])?r?(r.p(e,n),131073&n[0]&&ge(r,1)):(r=Is(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function Rs(e){let t,n,r,i,o=e[17].length-e[0]+"";return{c(){t=S("div"),n=E("..."),r=E(o),i=E(" results not shown"),P(t,"class","autocomplete-list-item-no-results svelte-77usy")},m(e,o){x(e,t,o),_(t,n),_(t,r),_(t,i)},p(e,t){131073&t[0]&&o!==(o=e[17].length-e[0]+"")&&F(r,o)},d(e){e&&C(t)}}}function Ds(e){let t,n,r,i,o,a,l,c,u,h,f,d,p,m,g,v=e[11]&&Es(e);const y=[Ns,As],b=[];function k(e,t){return e[17]&&e[17].length>0?0:e[1]?1:-1}return~(u=k(e))&&(h=b[u]=y[u](e)),{c(){t=S("div"),n=S("input"),a=A(),v&&v.c(),l=A(),c=S("div"),h&&h.c(),P(n,"type","text"),P(n,"class",r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"),P(n,"id",i=e[5]?e[5]:""),P(n,"autocomplete",o=e[8]?"on":"off"),P(n,"placeholder",e[2]),P(n,"name",e[6]),n.disabled=e[12],P(n,"title",e[7]),P(c,"class",f=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"),P(t,"class",d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy")},m(r,i){x(r,t,i),_(t,n),e[51](n),L(n,e[16]),_(t,a),v&&v.m(t,null),_(t,l),_(t,c),~u&&b[u].m(c,null),e[55](c),p=!0,m||(g=[I(window,"click",e[21]),I(n,"input",e[52]),I(n,"input",e[24]),I(n,"focus",e[26]),I(n,"keydown",e[22]),I(n,"click",e[25]),I(n,"keypress",e[23])],m=!0)},p(e,s){(!p||16&s[0]&&r!==(r=(e[4]?e[4]:"")+" input autocomplete-input svelte-77usy"))&&P(n,"class",r),(!p||32&s[0]&&i!==(i=e[5]?e[5]:""))&&P(n,"id",i),(!p||256&s[0]&&o!==(o=e[8]?"on":"off"))&&P(n,"autocomplete",o),(!p||4&s[0])&&P(n,"placeholder",e[2]),(!p||64&s[0])&&P(n,"name",e[6]),(!p||4096&s[0])&&(n.disabled=e[12]),(!p||128&s[0])&&P(n,"title",e[7]),65536&s[0]&&n.value!==e[16]&&L(n,e[16]),e[11]?v?v.p(e,s):(v=Es(e),v.c(),v.m(t,l)):v&&(v.d(1),v=null);let a=u;u=k(e),u===a?~u&&b[u].p(e,s):(h&&(pe(),ve(b[a],1,1,(()=>{b[a]=null})),me()),~u?(h=b[u],h?h.p(e,s):(h=b[u]=y[u](e),h.c()),ge(h,1),h.m(c,null)):h=null),(!p||262656&s[0]&&f!==(f=(e[9]?e[9]:"")+" autocomplete-list "+(e[18]?"":"hidden")+"\n    is-fullwidth svelte-77usy"))&&P(c,"class",f),(!p||3080&s[0]&&d!==(d=(e[3]?e[3]:"")+"\n  "+(e[10]?"hide-arrow is-multiple":"")+"\n  "+(e[11]?"show-clear":"")+" autocomplete select is-fullwidth "+e[19]+" svelte-77usy"))&&P(t,"class",d)},i(e){p||(ge(h),p=!0)},o(e){ve(h),p=!1},d(n){n&&C(t),e[51](null),v&&v.d(),~u&&b[u].d(),e[55](null),m=!1,s(g)}}}function Ms(e,t){let n;"function"!=typeof e&&console.error("Not a function: "+e+", argument: "+t);try{n=e(t)}catch(n){console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}let r=n;return null==r&&(r=""),"string"!=typeof r&&(r=r.toString()),r}function Bs(e,t,n){let r,{$$slots:o={},$$scope:s}=t,{items:a=[]}=t,{searchFunction:l=!1}=t,{labelFieldName:c}=t,{keywordsFieldName:u=c}=t,{valueFieldName:h}=t,{labelFunction:f=function(e){return null==e?"":c?e[c]:e}}=t,{keywordsFunction:d=function(e){return null==e?"":u?e[u]:f(e)}}=t,{valueFunction:p=function(e){return null==e?e:h?e[h]:e}}=t,{keywordsCleanFunction:m=function(e){return e}}=t,{textCleanFunction:g=function(e){return e}}=t,{beforeChange:v=function(e,t){return!0}}=t,{onChange:y=function(e){}}=t,{selectFirstIfEmpty:b=!1}=t,{minCharactersToSearch:k=1}=t,{maxItemsToShowInList:w=0}=t,{delay:$=0}=t,{localFiltering:_=!0}=t,{noResultsText:x="No results found"}=t,{placeholder:C}=t,{className:j}=t,{inputClassName:S}=t,{inputId:O}=t,{name:E}=t,{title:A}=t,{html5autocomplete:N}=t,{dropdownClassName:I}=t,{hideArrow:P=!1}=t,{showClear:T=!1}=t,{disabled:F=!1}=t,{debug:L=!1}=t,{selectedItem:R}=t,{value:D}=t;const M="sautocomplete-"+Math.floor(1e3*Math.random());let B,K,z,q,V,H=!1,U=-1,G=0,W=[];function X(e){return Ms(f,e)}function Y(e){const t=Ms(d,e);let n=Ms(m,t);return n=n.toLowerCase().trim(),L&&console.log("Extracted keywords: '"+n+"' from item: "+JSON.stringify(e)),n}function J(){let e;L&&(e=performance.now(),console.log("prepare items to search"),console.log("items: "+JSON.stringify(a))),Array.isArray(a)||(console.warn("Autocomplete items / search function did not return array but",a),n(28,a=[]));const t=a?a.length:0;if(W=new Array(t),t>0&&a.forEach(((e,t)=>{const n=function(e){return{keywords:Y(e),label:X(e),item:e}}(e);null==n&&console.log("Undefined item for: ",e),W[t]=n})),L){const t=performance.now();console.log(W.length+" items to search prepared in "+(t-e)+" milliseconds")}}async function Q(){let e;L&&(e=performance.now(),console.log("Searching user entered text: '"+z+"'"));const t=function(e){if(null==e)return"";const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();if(n(48,G=t.length),k>1&&G<k)return"";const r=g(t).toLowerCase().trim();return L&&console.log("Change user entered text '"+e+"' into '"+r+"'"),r}(z);if(""===t)return n(17,q=W),fe(),void(L&&console.log("User entered text is empty set the list of items to all items"));let r;if(l&&(n(28,a=await l(t)),J()),_){const e=t.split(" ");r=W.filter((t=>{if(!t)return!1;const n=t.keywords;let r=0;return e.forEach((e=>{n.includes(e)&&r++})),r>=e.length}))}else r=W;const i=de(t,["label"]),o=r.map(i);if(n(17,q=o),fe(),L){const t=performance.now();console.log("Search took "+(t-e)+" milliseconds, found "+q.length+" items")}}function ee(e){if(L&&console.log("selectListItem"),void 0===e)return L&&console.log(`listItem ${i} is undefined. Can not select.`),!1;const t=e.item;return v(R,t)&&n(29,R=t),!0}function te(){L&&console.log("selectItem");ee(q[U])&&ue()}function ne(){L&&console.log("up"),ce(),U>0&&n(15,U--,U),ie()}function re(){L&&console.log("down"),ce(),U<q.length-1&&n(15,U++,U),ie()}function ie(){L&&console.log("highlight");const e=".selected";L&&console.log("Seaching DOM element: .selected in "+K);const t=K&&K.querySelector(e);t?"function"==typeof t.scrollIntoViewIfNeeded?(L&&console.log("Scrolling selected item into view"),t.scrollIntoViewIfNeeded()):L&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):L&&console.warn("Selected item not found to scroll into view")}function oe(e){L&&console.log("onListItemClick"),ee(e)&&ue()}function se(){Q(),n(15,U=0),ce()}function ae(e){L&&console.log("onEsc"),e.stopPropagation(),H&&(B.focus(),ue())}function le(){if(L&&console.log("resetListToAllItemsAndOpen"),n(17,q=W),ce(),R){L&&console.log("Searching currently selected item: "+JSON.stringify(R));for(let e=0;e<W.length;e++){const t=W[e];if(void 0!==t){if(L&&console.log("Item "+e+": "+JSON.stringify(t)),R==t.item){n(15,U=e),L&&console.log("Found selected item: "+e+": "+JSON.stringify(t)),ie();break}}else L&&console.log(`listItem ${e} is undefined. Skipping.`)}}}function ce(){L&&console.log("open"),he()||n(47,H=!0)}function ue(){L&&console.log("close"),n(47,H=!1),!z&&b&&(de=0,te())}function he(){return k>1&&G<k}function fe(){he()&&ue()}function de(e,t){const n="("+e.trim().replace(/\s/g,")(.*)(")+")",r=new RegExp(n,"ig");let i=1;const o=n.split(")(").length+1;let s="";for(;i<o;i++)s+=i%2?`<b>$${i}</b>`:`$${i}`;return e=>{const n=Object.assign({highlighted:{}},e);return t&&t.forEach((e=>{n[e]&&(n.highlighted[e]=n[e].replace(r,s))})),n}}return e.$$set=e=>{"items"in e&&n(28,a=e.items),"searchFunction"in e&&n(31,l=e.searchFunction),"labelFieldName"in e&&n(32,c=e.labelFieldName),"keywordsFieldName"in e&&n(33,u=e.keywordsFieldName),"valueFieldName"in e&&n(34,h=e.valueFieldName),"labelFunction"in e&&n(35,f=e.labelFunction),"keywordsFunction"in e&&n(36,d=e.keywordsFunction),"valueFunction"in e&&n(37,p=e.valueFunction),"keywordsCleanFunction"in e&&n(38,m=e.keywordsCleanFunction),"textCleanFunction"in e&&n(39,g=e.textCleanFunction),"beforeChange"in e&&n(40,v=e.beforeChange),"onChange"in e&&n(41,y=e.onChange),"selectFirstIfEmpty"in e&&n(42,b=e.selectFirstIfEmpty),"minCharactersToSearch"in e&&n(43,k=e.minCharactersToSearch),"maxItemsToShowInList"in e&&n(0,w=e.maxItemsToShowInList),"delay"in e&&n(44,$=e.delay),"localFiltering"in e&&n(45,_=e.localFiltering),"noResultsText"in e&&n(1,x=e.noResultsText),"placeholder"in e&&n(2,C=e.placeholder),"className"in e&&n(3,j=e.className),"inputClassName"in e&&n(4,S=e.inputClassName),"inputId"in e&&n(5,O=e.inputId),"name"in e&&n(6,E=e.name),"title"in e&&n(7,A=e.title),"html5autocomplete"in e&&n(8,N=e.html5autocomplete),"dropdownClassName"in e&&n(9,I=e.dropdownClassName),"hideArrow"in e&&n(10,P=e.hideArrow),"showClear"in e&&n(11,T=e.showClear),"disabled"in e&&n(12,F=e.disabled),"debug"in e&&n(46,L=e.debug),"selectedItem"in e&&n(29,R=e.selectedItem),"value"in e&&n(30,D=e.value),"$$scope"in e&&n(49,s=e.$$scope)},e.$$.update=()=>{536870912&e.$$.dirty[0]&&(n(30,D=p(R)),n(16,z=X(R)),y(R)),268435456&e.$$.dirty[0]|196608&e.$$.dirty[1]&&n(18,r=H&&(a&&a.length>0||G>0)),268435456&e.$$.dirty[0]&&J()},[w,x,C,j,S,O,E,A,N,I,P,T,F,B,K,U,z,q,r,M,oe,function(e){L&&console.log("onDocumentClick: "+JSON.stringify(e.target)),e.target.closest("."+M)?(L&&console.log("onDocumentClick inside"),ie()):(L&&console.log("onDocumentClick outside"),ue())},function(e){L&&console.log("onKeyDown");let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const n={Tab:H?re.bind(this):null,ShiftTab:H?ne.bind(this):null,ArrowDown:re.bind(this),ArrowUp:ne.bind(this),Escape:ae.bind(this)}[t];"function"==typeof n&&(e.preventDefault(),n(e))},function(e){L&&console.log("onKeyPress"),"Enter"===e.key&&(e.preventDefault(),te())},function(e){L&&console.log("onInput"),n(16,z=e.target.value),V&&clearTimeout(V),$?V=setTimeout(se,$):se()},function(){L&&console.log("onInputClick"),le()},function(){L&&console.log("onFocus"),le()},function(){L&&console.log("clear"),n(16,z=""),n(29,R=void 0),setTimeout((()=>{B.focus(),ue()}))},a,R,D,l,c,u,h,f,d,p,m,g,v,y,b,k,$,_,L,H,G,s,o,function(e){Z[e?"unshift":"push"]((()=>{B=e,n(13,B)}))},function(){z=this.value,n(16,z)},e=>oe(e),e=>{n(15,U=e)},function(e){Z[e?"unshift":"push"]((()=>{K=e,n(14,K)}))}]}class Ks extends Oe{constructor(e){super(),Se(this,e,Bs,Ds,l,{items:28,searchFunction:31,labelFieldName:32,keywordsFieldName:33,valueFieldName:34,labelFunction:35,keywordsFunction:36,valueFunction:37,keywordsCleanFunction:38,textCleanFunction:39,beforeChange:40,onChange:41,selectFirstIfEmpty:42,minCharactersToSearch:43,maxItemsToShowInList:0,delay:44,localFiltering:45,noResultsText:1,placeholder:2,className:3,inputClassName:4,inputId:5,name:6,title:7,html5autocomplete:8,dropdownClassName:9,hideArrow:10,showClear:11,disabled:12,debug:46,selectedItem:29,value:30},[-1,-1,-1])}}function zs(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}const qs=e=>({row:8192&e[0]}),Vs=e=>({row:e[36],n:e[38]});function Hs(e,t,n){const r=e.slice();return r[39]=t[n],r}const Us=e=>({row:8192&e[0]}),Gs=e=>({row:e[36],n:e[38]});function Ws(e,t,n){const r=e.slice();return r[39]=t[n],r}const Xs=e=>({sortOrder:2&e[0],sortBy:1&e[0]}),Ys=e=>({sortOrder:e[1],sortBy:e[0]});function Js(e,t,n){const r=e.slice();return r[39]=t[n],r[44]=t,r[45]=n,r}function Qs(e,t,n){const r=e.slice();return r[46]=t[n],r}function Zs(e){let t,n,r,i,o,s=e[12][e[39].key],a=[];for(let t=0;t<s.length;t+=1)a[t]=ta(Qs(e,s,t));function l(){e[28].call(t,e[39])}return{c(){t=S("select"),n=S("option");for(let e=0;e<a.length;e+=1)a[e].c();n.__value=void 0,n.value=n.__value,P(t,"class",r=m(e[15](e[9]))+" svelte-uczycn"),void 0===e[2][e[39].key]&&ie(l)},m(r,s){x(r,t,s),_(t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);D(t,e[2][e[39].key]),i||(o=I(t,"change",l),i=!0)},p(n,i){if(e=n,4104&i[0]){let n;for(s=e[12][e[39].key],n=0;n<s.length;n+=1){const r=Qs(e,s,n);a[n]?a[n].p(r,i):(a[n]=ta(r),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}512&i[0]&&r!==(r=m(e[15](e[9]))+" svelte-uczycn")&&P(t,"class",r),4108&i[0]&&D(t,e[2][e[39].key])},d(e){e&&C(t),j(a,e),i=!1,o()}}}function ea(e){let t,n,r;function i(){e[27].call(t,e[39])}return{c(){t=S("input")},m(o,s){x(o,t,s),L(t,e[2][e[39].key]),n||(r=I(t,"input",i),n=!0)},p(n,r){e=n,4108&r[0]&&t.value!==e[2][e[39].key]&&L(t,e[2][e[39].key])},d(e){e&&C(t),n=!1,r()}}}function ta(e){let t,n,r,i=e[46].name+"";return{c(){t=S("option"),n=E(i),t.__value=r=e[46].value,t.value=t.__value},m(e,r){x(e,t,r),_(t,n)},p(e,o){4104&o[0]&&i!==(i=e[46].name+"")&&F(n,i),4104&o[0]&&r!==(r=e[46].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&C(t)}}}function na(e){let t,n;function r(e,t){return void 0!==e[39].searchValue?ea:void 0!==e[12][e[39].key]?Zs:void 0}let i=r(e),o=i&&i(e);return{c(){t=S("th"),o&&o.c(),n=A()},m(e,r){x(e,t,r),o&&o.m(t,null),_(t,n)},p(e,s){i===(i=r(e))&&o?o.p(e,s):(o&&o.d(1),o=i&&i(e),o&&(o.c(),o.m(t,n)))},d(e){e&&C(t),o&&o.d()}}}function ra(e){let t,n,r,i,o,s=e[39].title+"",a=e[0]===e[39].key&&oa(e);return{c(){t=S("th"),n=E(s),r=A(),a&&a.c(),i=A(),P(t,"class",o=m(e[39].headerClass)+" svelte-uczycn")},m(e,o){x(e,t,o),_(t,n),_(t,r),a&&a.m(t,null),_(t,i)},p(e,r){8&r[0]&&s!==(s=e[39].title+"")&&F(n,s),e[0]===e[39].key?a?a.p(e,r):(a=oa(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),4104&r[0]&&o!==(o=m(e[39].headerClass)+" svelte-uczycn")&&P(t,"class",o)},d(e){e&&C(t),a&&a.d()}}}function ia(e){let t,n,r,i,o,s,a,l=e[39].title+"",c=e[0]===e[39].key&&sa(e);function u(...t){return e[29](e[39],...t)}return{c(){t=S("th"),n=E(l),r=A(),c&&c.c(),i=A(),P(t,"class",o=m(e[15](["isSortable",e[39].headerClass]))+" svelte-uczycn")},m(e,o){x(e,t,o),_(t,n),_(t,r),c&&c.m(t,null),_(t,i),s||(a=I(t,"click",u),s=!0)},p(r,s){e=r,8&s[0]&&l!==(l=e[39].title+"")&&F(n,l),e[0]===e[39].key?c?c.p(e,s):(c=sa(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),4104&s[0]&&o!==(o=m(e[15](["isSortable",e[39].headerClass]))+" svelte-uczycn")&&P(t,"class",o)},d(e){e&&C(t),c&&c.d(),s=!1,a()}}}function oa(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=E(n)},m(e,n){x(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&F(t,n)},d(e){e&&C(t)}}}function sa(e){let t,n=(1===e[1]?e[4]:e[5])+"";return{c(){t=E(n)},m(e,n){x(e,t,n)},p(e,r){50&r[0]&&n!==(n=(1===e[1]?e[4]:e[5])+"")&&F(t,n)},d(e){e&&C(t)}}}function aa(e){let t;function n(e,t){return e[39].sortable?ia:ra}let r=n(e),i=r(e);return{c(){i.c(),t=N()},m(e,n){i.m(e,n),x(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}function la(t){let n,r,i=(t[39].renderValue?t[39].renderValue(t[36]):t[39].value(t[36]))+"";return{c(){r=N(),n=new z(r)},m(e,t){n.m(i,e,t),x(e,r,t)},p(e,t){8200&t[0]&&i!==(i=(e[39].renderValue?e[39].renderValue(e[36]):e[39].value(e[36]))+"")&&n.p(i)},i:e,o:e,d(e){e&&C(r),e&&n.d()}}}function ca(e){let t,r,i;const o=[e[39].renderComponent.props||{},{row:e[36]},{col:e[39]}];var s=e[39].renderComponent.component||e[39].renderComponent;function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&_e(t.$$.fragment),r=N()},m(e,n){t&&xe(t,e,n),x(e,r,n),i=!0},p(e,n){const i=8200&n[0]?ke(o,[8&n[0]&&we(e[39].renderComponent.props||{}),8192&n[0]&&{row:e[36]},8&n[0]&&{col:e[39]}]):{};if(s!==(s=e[39].renderComponent.component||e[39].renderComponent)){if(t){pe();const e=t;ve(e.$$.fragment,1,0,(()=>{Ce(e,1)})),me()}s?(t=new s(a()),_e(t.$$.fragment),ge(t.$$.fragment,1),xe(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&ge(t.$$.fragment,e),i=!0)},o(e){t&&ve(t.$$.fragment,e),i=!1},d(e){e&&C(r),t&&Ce(t,e)}}}function ua(e){let t,n,r,i,o,s,a,l;const c=[ca,la],u=[];function h(e,t){return e[39].renderComponent?0:1}function f(...t){return e[30](e[36],e[39],...t)}return n=h(e),r=u[n]=c[n](e),{c(){t=S("td"),r.c(),i=A(),P(t,"class",o=m(e[15]([e[39].class,e[11]]))+" svelte-uczycn")},m(e,r){x(e,t,r),u[n].m(t,null),_(t,i),s=!0,a||(l=I(t,"click",f),a=!0)},p(a,l){let f=n;n=h(e=a),n===f?u[n].p(e,l):(pe(),ve(u[f],1,1,(()=>{u[f]=null})),me(),r=u[n],r?r.p(e,l):(r=u[n]=c[n](e),r.c()),ge(r,1),r.m(t,i)),(!s||6152&l[0]&&o!==(o=m(e[15]([e[39].class,e[11]]))+" svelte-uczycn"))&&P(t,"class",o)},i(e){s||(ge(r),s=!0)},o(e){ve(r),s=!1},d(e){e&&C(t),u[n].d(),a=!1,l()}}}function ha(e){let t,n;const r=e[26].row,i=h(r,e,e[25],Gs),o=i||function(e){let t,n,r,i,o,s=e[3],a=[];for(let t=0;t<s.length;t+=1)a[t]=ua(Hs(e,s,t));const l=e=>ve(a[e],1,1,(()=>{a[e]=null}));function c(...t){return e[31](e[36],...t)}return{c(){t=S("tr");for(let e=0;e<a.length;e+=1)a[e].c();P(t,"class",n=m(e[15](e[10]))+" svelte-uczycn")},m(e,n){x(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);r=!0,i||(o=I(t,"click",c),i=!0)},p(i,o){if(e=i,305160&o[0]){let n;for(s=e[3],n=0;n<s.length;n+=1){const r=Hs(e,s,n);a[n]?(a[n].p(r,o),ge(a[n],1)):(a[n]=ua(r),a[n].c(),ge(a[n],1),a[n].m(t,null))}for(pe(),n=s.length;n<a.length;n+=1)l(n);me()}(!r||1024&o[0]&&n!==(n=m(e[15](e[10]))+" svelte-uczycn"))&&P(t,"class",n)},i(e){if(!r){for(let e=0;e<s.length;e+=1)ge(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ve(a[e]);r=!1},d(e){e&&C(t),j(a,e),i=!1,o()}}}(e),s=e[26]["after-row"],a=h(s,e,e[25],Vs);return{c(){o&&o.c(),t=A(),a&&a.c()},m(e,r){o&&o.m(e,r),x(e,t,r),a&&a.m(e,r),n=!0},p(e,t){i?i.p&&(!n||33562624&t[0])&&d(i,r,e,e[25],t,Us,Gs):o&&o.p&&11272&t[0]&&o.p(e,t),a&&a.p&&(!n||33562624&t[0])&&d(a,s,e,e[25],t,qs,Vs)},i(e){n||(ge(o,e),ge(a,e),n=!0)},o(e){ve(o,e),ve(a,e),n=!1},d(e){o&&o.d(e),e&&C(t),a&&a.d(e)}}}function fa(e){let t,n,r,i,o,s,a,l,c,u=e[14]&&function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=na(Js(e,n,t));return{c(){t=S("tr");for(let e=0;e<r.length;e+=1)r[e].c();P(t,"class","row-filter-header svelte-uczycn")},m(e,n){x(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(37388&i[0]){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=Js(e,n,o);r[o]?r[o].p(s,i):(r[o]=na(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&C(t),j(r,e)}}}(e);const f=e[26].header,p=h(f,e,e[25],Ys),g=p||function(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=aa(Ws(e,n,t));return{c(){t=S("tr");for(let e=0;e<r.length;e+=1)r[e].c();P(t,"class","row-title-header")},m(e,n){x(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,i){if(98363&i[0]){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=Ws(e,n,o);r[o]?r[o].p(s,i):(r[o]=aa(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&C(t),j(r,e)}}}(e);let v=e[13],y=[];for(let t=0;t<v.length;t+=1)y[t]=ha(zs(e,v,t));const b=e=>ve(y[e],1,1,(()=>{y[e]=null}));return{c(){t=S("table"),n=S("thead"),u&&u.c(),r=A(),g&&g.c(),o=A(),s=S("tbody");for(let e=0;e<y.length;e+=1)y[e].c();P(n,"class",i=m(e[15](e[7]))+" svelte-uczycn"),P(s,"class",a=m(e[15](e[8]))+" svelte-uczycn"),P(t,"class",l=m(e[15](e[6]))+" svelte-uczycn")},m(e,i){x(e,t,i),_(t,n),u&&u.m(n,null),_(n,r),g&&g.m(n,null),_(t,o),_(t,s);for(let e=0;e<y.length;e+=1)y[e].m(s,null);c=!0},p(e,r){if(e[14]&&u.p(e,r),p?p.p&&(!c||33554435&r[0])&&d(p,f,e,e[25],r,Xs,Ys):g&&g.p&&59&r[0]&&g.p(e,r),(!c||128&r[0]&&i!==(i=m(e[15](e[7]))+" svelte-uczycn"))&&P(n,"class",i),33991688&r[0]){let t;for(v=e[13],t=0;t<v.length;t+=1){const n=zs(e,v,t);y[t]?(y[t].p(n,r),ge(y[t],1)):(y[t]=ha(n),y[t].c(),ge(y[t],1),y[t].m(s,null))}for(pe(),t=v.length;t<y.length;t+=1)b(t);me()}(!c||256&r[0]&&a!==(a=m(e[15](e[8]))+" svelte-uczycn"))&&P(s,"class",a),(!c||64&r[0]&&l!==(l=m(e[15](e[6]))+" svelte-uczycn"))&&P(t,"class",l)},i(e){if(!c){ge(g,e);for(let e=0;e<v.length;e+=1)ge(y[e]);c=!0}},o(e){ve(g,e),y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)ve(y[e]);c=!1},d(e){e&&C(t),u&&u.d(),g&&g.d(e),j(y,e)}}}function da(e,t,n){let r,{$$slots:i={},$$scope:o}=t;const s=J();let{columns:a}=t,{rows:l}=t,{sortBy:c=""}=t,{sortOrder:u=1}=t,{iconAsc:h="▲"}=t,{iconDesc:f="▼"}=t,{classNameTable:d=""}=t,{classNameThead:p=""}=t,{classNameTbody:m=""}=t,{classNameSelect:g=""}=t,{classNameRow:v=""}=t,{classNameCell:y=""}=t,{filterSelections:b={}}=t,{sliceBegin:k=null}=t,{sliceEnd:w=null}=t,{disableFilterHeader:$=!1}=t,_=()=>"",x=!$&&a.some((e=>void 0!==e.filterOptions||void 0!==e.searchValue)),C={},j={};a.forEach((e=>{n(24,j[e.key]=e,j)}));const S=(e,t)=>{var r;r=t.key,n(1,u=r===c&&1===u?-1:1),n(0,c=t.key),s("clickCol",{event:e,col:t,key:t.key})},O=(e,t)=>{s("clickRow",{event:e,row:t})},E=(e,t,n)=>{s("clickCell",{event:e,row:t,key:n})};return e.$$set=e=>{"columns"in e&&n(3,a=e.columns),"rows"in e&&n(19,l=e.rows),"sortBy"in e&&n(0,c=e.sortBy),"sortOrder"in e&&n(1,u=e.sortOrder),"iconAsc"in e&&n(4,h=e.iconAsc),"iconDesc"in e&&n(5,f=e.iconDesc),"classNameTable"in e&&n(6,d=e.classNameTable),"classNameThead"in e&&n(7,p=e.classNameThead),"classNameTbody"in e&&n(8,m=e.classNameTbody),"classNameSelect"in e&&n(9,g=e.classNameSelect),"classNameRow"in e&&n(10,v=e.classNameRow),"classNameCell"in e&&n(11,y=e.classNameCell),"filterSelections"in e&&n(2,b=e.filterSelections),"sliceBegin"in e&&n(20,k=e.sliceBegin),"sliceEnd"in e&&n(21,w=e.sliceEnd),"disableFilterHeader"in e&&n(22,$=e.disableFilterHeader),"$$scope"in e&&n(25,o=e.$$scope)},e.$$.update=()=>{if(16777217&e.$$.dirty[0]){let e=j[c];void 0!==e&&!0===e.sortable&&"function"==typeof e.value&&n(23,_=t=>e.value(t))}28835846&e.$$.dirty[0]&&n(13,r=l.filter((e=>Object.keys(b).every((t=>""===b[t]||j[t].searchValue&&(j[t].searchValue(e)+"").toLocaleLowerCase().indexOf((b[t]+"").toLocaleLowerCase())>=0||void 0===b[t]||b[t]===("function"==typeof j[t].filterValue?j[t].filterValue(e):j[t].value(e)))))).map((e=>Object.assign({},e,{$sortOn:_(e)}))).sort(((e,t)=>e.$sortOn>t.$sortOn?u:e.$sortOn<t.$sortOn?-u:0)).slice(k||0,w||void 0)),524296&e.$$.dirty[0]&&x&&a&&l&&(n(12,C={}),a.forEach((e=>{"function"==typeof e.filterOptions?n(12,C[e.key]=e.filterOptions(l),C):Array.isArray(e.filterOptions)&&n(12,C[e.key]=e.filterOptions.map((e=>({name:e,value:e}))),C)})))},[c,u,b,a,h,f,d,p,m,g,v,y,C,r,x,e=>[].concat(e).filter((e=>"string"==typeof e&&""!==e)).join(" "),S,O,E,l,k,w,$,_,j,o,i,function(e){b[e.key]=this.value,n(2,b),n(3,a),n(12,C)},function(e){b[e.key]=M(this),n(2,b),n(3,a),n(12,C)},(e,t)=>S(t,e),(e,t,n)=>{E(n,e,t.key)},(e,t)=>{O(t,e)}]}class pa extends Oe{constructor(e){super(),Se(this,e,da,fa,l,{columns:3,rows:19,sortBy:0,sortOrder:1,iconAsc:4,iconDesc:5,classNameTable:6,classNameThead:7,classNameTbody:8,classNameSelect:9,classNameRow:10,classNameCell:11,filterSelections:2,sliceBegin:20,sliceEnd:21,disableFilterHeader:22},[-1,-1])}}const ma=[{name:"アイテム使用強化",hiragana:"あいてむしようきょうか",englishCharacters:"aitemusiyoukyouka"},{name:"泡沫の舞",hiragana:"うたかたのまい",englishCharacters:"utakatanomai"},{name:"炎鱗の恩恵",hiragana:"えんりんのおんけい",englishCharacters:"enrinnoonkei"},{name:"鬼火纏",hiragana:"おにびまとい",englishCharacters:"onibimatoi"},{name:"ガード強化",hiragana:"がーどきょうか",englishCharacters:"ga-dokyouka"},{name:"ガード性能",hiragana:"がーどせいのう",englishCharacters:"ga-doseinou"},{name:"会心撃【属性】",hiragana:"かいしんげきぞくせい",englishCharacters:"kaisingekizokusei"},{name:"回避距離UP",hiragana:"かいひきょりあっぷ",englishcharacters:"kaihikyoriappu"},{name:"回避性能",hiragana:"かいひせいのう",englishCharacters:"kaihiseinou"},{name:"回復速度",hiragana:"かいふくそくど",englishCharacters:"kaihukusokudo"},{name:"翔蟲使い",hiragana:"かけりむしつかい",englishCharacters:"kakerimusitukai"},{name:"火事場力",hiragana:"かじばりょく",englishCharacters:"kajibaryoku"},{name:"滑走強化",hiragana:"かっそうきょうか",englishCharacters:"kassoukyouka"},{name:"霞皮の恩恵",hiragana:"かすみがわのおんけい",englishCharacters:"kasumigawanoonkei"},{name:"雷属性攻撃強化",hiragana:"かみなりぞくせいこうげききょうか",englishCharacters:"kaminarizokuseikougekikyouka"},{name:"雷耐性",hiragana:"かみなりたいせい",englishCharacters:"kaminaritaisei"},{name:"貫通弾・貫通矢強化",hiragana:"かんつうだんかんつうやきょうか",englishCharacters:"kantuudankantuuyakyouka"},{name:"気絶耐性",hiragana:"きぜつたいせい",englishCharacters:"kizetutaisei"},{name:"キノコ大好き",hiragana:"きのこだいすき",englishCharacters:"kinokodaisuki"},{name:"逆襲",hiragana:"ぎゃくしゅう",englishCharacters:"gyakusyuu"},{name:"強化持続",hiragana:"きょうかじぞく",englishCharacters:"kyoukajizoku"},{name:"KO術",hiragana:"けーおーじゅつ",englishcharacters:"ke-o-jutu"},{name:"広域化",hiragana:"こういきか",englishCharacters:"kouikika"},{name:"幸運",hiragana:"こううん",englishCharacters:"kouun"},{name:"鋼殻の恩恵",hiragana:"こうかくのおんけい",englishCharacters:"koukakunoonkei"},{name:"攻撃",hiragana:"こうげき",englishCharacters:"kougeki"},{name:"剛刃研磨",hiragana:"ごうじんけんま",englishCharacters:"goujinkenma"},{name:"高速変形",hiragana:"こうそくへんけい",englishCharacters:"kousokuhenkei"},{name:"氷属性攻撃強化",hiragana:"こおりぞくせいきょうか",englishCharacters:"koorizokuseikyouka"},{name:"氷耐性",hiragana:"こおりたいせい",englishCharacters:"kooritaisei"},{name:"渾身",hiragana:"こんしん",englishCharacters:"konsin"},{name:"逆恨み",hiragana:"さかうらみ",englishCharacters:"sakaurami"},{name:"散弾・拡散矢強化",hiragana:"さんだんかんつうやきょうか",englishCharacters:"sandankantuuyakyouka"},{name:"死中に活",hiragana:"しちゅうにかつ",englishCharacters:"sityuunikatu"},{name:"弱点特効",hiragana:"じゃくてんとっこう",englishCharacters:"jakutentokkou"},{name:"ジャンプ鉄人",hiragana:"じゃんぷてつじん",englishCharacters:"janputetujin"},{name:"集中",hiragana:"しゅうちゅう",englishCharacters:"syuutyuu"},{name:"植生学",hiragana:"しょくせいがく",englishCharacters:"syokuseigaku"},{name:"心眼",hiragana:"しんがん",englishCharacters:"singan"},{name:"睡眠属性強化",hiragana:"すいみんぞくせいきょうか",englishCharacters:"suiminzokuseikyouka"},{name:"睡眠耐性",hiragana:"すいみんたいせい",englishCharacters:"suimintaisei"},{name:"スタミナ急速回復",hiragana:"すたみなきゅうそくかいふく",englishCharacters:"sutaminakyuusokukaihuku"},{name:"スタミナ奪取",hiragana:"すたみなだっしゅ",englishCharacters:"sutaminadassyu"},{name:"精霊の加護",hiragana:"せいれいのかご",englishCharacters:"seireinokago"},{name:"攻めの守勢",hiragana:"せめのしゅせい",englishCharacters:"semenosyusei"},{name:"装填拡張",hiragana:"そうてんかくちょう",englishCharacters:"soutenkakutyou"},{name:"装填速度",hiragana:"そうてんそくど",englishCharacters:"soutensokudo"},{name:"速射強化",hiragana:"そくしゃきょうか",englishCharacters:"sokusyakyouka"},{name:"属性やられ耐性",hiragana:"ぞくせいやられたいせい",englishCharacters:"zokuseiyararetaisei"},{name:"体術",hiragana:"たいじゅつ",englishCharacters:"taijutu"},{name:"耐震",hiragana:"たいしん",englishCharacters:"taisin"},{name:"体力回復量UP",hiragana:"たいりょくかいふくりょうあっぷ",englishcharacters:"tairyokukaihukuryouappu"},{name:"匠",hiragana:"たくみ",englishCharacters:"takumi"},{name:"達人芸",hiragana:"たつじんげい",englishCharacters:"tatujingei"},{name:"弾丸節約",hiragana:"だんがんせつやく",englishCharacters:"dangansetuyaku"},{name:"弾導強化",hiragana:"だんどうきょうか",englishCharacters:"dandoukyouka"},{name:"力の解放",hiragana:"ちからのかいほう",englishCharacters:"tikaranokaihou"},{name:"地質学",hiragana:"ちしつがく",englishCharacters:"tisitugaku"},{name:"超会心",hiragana:"ちょうかいしん",englishCharacters:"tyoukaisin"},{name:"挑戦者",hiragana:"ちょうせんしゃ",englishCharacters:"tyousensya"},{name:"通常弾・連射矢強化",hiragana:"つうじょうだんそくしゃやきょうか",englishCharacters:"tuujoudansokusyayakyouka"},{name:"泥雪耐性",hiragana:"でいせつたいせい",englishCharacters:"deisetutaisei"},{name:"砥石使用高速化",hiragana:"といししようこうそくか",englishCharacters:"toisisiyoukousokuka"},{name:"特殊射撃強化",hiragana:"とくしゅしゃげききょうか",englishCharacters:"tokusyusyagekikyouka"},{name:"毒属性強化",hiragana:"どくぞくせいきょうか",englishCharacters:"dokuzokuseikyouka"},{name:"毒耐性",hiragana:"どくたいせい",englishCharacters:"dokutaisei"},{name:"飛び込み",hiragana:"とびこみ",englishCharacters:"tobikomi"},{name:"鈍器使い",hiragana:"どんきつかい",englishCharacters:"donkitukai"},{name:"納刀術",hiragana:"のうとうじゅつ",englishCharacters:"noutoujutu"},{name:"乗り名人",hiragana:"のりめいじん",englishCharacters:"norimeijin"},{name:"破壊王",hiragana:"はかいおう",englishCharacters:"hakaiou"},{name:"剥ぎ取り鉄人",hiragana:"はぎとりてつじん",englishCharacters:"hagitoritetujin"},{name:"剥ぎ取り名人",hiragana:"はぎとりめいじん",englishCharacters:"hagitorimeijin"},{name:"爆破属性強化",hiragana:"ばくはぞくせいきょうか",englishCharacters:"bakuhazokuseikyouka"},{name:"爆破やられ耐性",hiragana:"ばくはやられたいせい",englishCharacters:"bakuhayararetaisei"},{name:"抜刀術【力】",hiragana:"ばっとうじゅつちから",englishCharacters:"battoujututikara"},{name:"抜刀術【技】",hiragana:"ばっとうじゅつわざ",englishCharacters:"battoujutuwaza"},{name:"早食い",hiragana:"はやぐい",englishCharacters:"hayagui"},{name:"腹減り耐性",hiragana:"はらへりたいせい",englishCharacters:"haraheritaisei"},{name:"反動軽減",hiragana:"はんどうけいげん",englishCharacters:"handoukeigen"},{name:"火属性攻撃強化",hiragana:"ひぞくせいこうげききょうか",englishCharacters:"hizokuseikougekikyouka"},{name:"火耐性",hiragana:"ひたいせい",englishCharacters:"hitaisei"},{name:"ひるみ軽減",hiragana:"ひるみけいげん",englishCharacters:"hirumikeigen"},{name:"風圧耐性",hiragana:"ふうあつたいせい",englishCharacters:"huuatutaisei"},{name:"風紋の一致",hiragana:"ふうもんのいっち",englishCharacters:"huumonnoitti"},{name:"笛吹き名人",hiragana:"ふえふきめいじん",englishCharacters:"huehukimeijin"},{name:"不屈",hiragana:"ふくつ",englishCharacters:"hukutu"},{name:"フルチャージ",hiragana:"ふるちゃーじ",englishCharacters:"hurutya-ji"},{name:"ブレ抑制",hiragana:"ぶれよくせい",englishCharacters:"bureyokusei"},{name:"壁面移動",hiragana:"へきめんいどう",englishCharacters:"hekimenidou"},{name:"防御",hiragana:"ぼうぎょ",englishCharacters:"bougyo"},{name:"砲術",hiragana:"ほうじゅつ",englishCharacters:"houjutu"},{name:"砲弾装填",hiragana:"ほうだんそうてん",englishCharacters:"houdansouten"},{name:"捕獲名人",hiragana:"ほかくめいじん",englishCharacters:"hokakumeijin"},{name:"ボマー",hiragana:"ぼまー",englishCharacters:"boma-"},{name:"麻痺属性強化",hiragana:"まひぞくせいきょうか",englishCharacters:"mahizokuseikyouka"},{name:"麻痺耐性",hiragana:"まひたいせい",englishCharacters:"mahitaisei"},{name:"満足感",hiragana:"まんぞくかん",englishCharacters:"manzokukan"},{name:"見切り",hiragana:"みきり",englishCharacters:"mikiri"},{name:"水属性攻撃強化",hiragana:"みずぞくせいこうげききょうか",englishCharacters:"mizuzokuseikougekikyouka"},{name:"水耐性",hiragana:"みずたいせい",englishCharacters:"mizutaisei"},{name:"耳栓",hiragana:"みみせん",englishCharacters:"mimisen"},{name:"弓溜め段階解放",hiragana:"ゆみためだんかいかいほう",englishCharacters:"yumitamedankaikaihou"},{name:"陽動",hiragana:"ようどう",englishCharacters:"youdou"},{name:"雷紋の一致",hiragana:"らいもんのいっち",englishCharacters:"raimonnoitti"},{name:"ランナー",hiragana:"らんなー",englishCharacters:"ranna-"},{name:"龍属性攻撃強化",hiragana:"りゅうぞくせいこうげききょうか",englishCharacters:"ryuuzokuseikougekikyouka"},{name:"龍耐性",hiragana:"りゅうたいせい",englishCharacters:"ryuutaisei"},{name:"業物",hiragana:"わざもの",englishCharacters:"wazamono"}];function ga(e,t,n){const r=e.slice();return r[25]=t[n],r}function va(e,t,n){const r=e.slice();return r[21]=t[n],r}function ya(t){let n,r,i=(t[25].renderValue?t[25].renderValue(t[20]):t[25].value(t[20]))+"";return{c(){r=N(),n=new z(r)},m(e,t){n.m(i,e,t),x(e,r,t)},p(e,t){1048576&t&&i!==(i=(e[25].renderValue?e[25].renderValue(e[20]):e[25].value(e[20]))+"")&&n.p(i)},i:e,o:e,d(e){e&&C(r),e&&n.d()}}}function ba(e){let t,r,i;const o=[e[25].renderComponent.props||{},{row:e[20]},{col:e[25]}];var s=e[25].renderComponent.component||e[25].renderComponent;function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&_e(t.$$.fragment),r=N()},m(e,n){t&&xe(t,e,n),x(e,r,n),i=!0},p(e,n){const i=1048704&n?ke(o,[128&n&&we(e[25].renderComponent.props||{}),1048576&n&&{row:e[20]},128&n&&{col:e[25]}]):{};if(s!==(s=e[25].renderComponent.component||e[25].renderComponent)){if(t){pe();const e=t;ve(e.$$.fragment,1,0,(()=>{Ce(e,1)})),me()}s?(t=new s(a()),_e(t.$$.fragment),ge(t.$$.fragment,1),xe(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&ge(t.$$.fragment,e),i=!0)},o(e){t&&ve(t.$$.fragment,e),i=!1},d(e){e&&C(r),t&&Ce(t,e)}}}function ka(e){let t,n,r,i,o,s,a;const l=[ba,ya],c=[];function u(...t){return e[13](e[25],e[20],e[24],...t)}return n=function(e,t){return e[25].renderComponent?0:1}(e),r=c[n]=l[n](e),{c(){t=S("td"),r.c(),i=A(),P(t,"class",m([e[25].class].join(" "))+" svelte-1bydddo")},m(e,r){x(e,t,r),c[n].m(t,null),_(t,i),o=!0,s||(a=I(t,"click",u),s=!0)},p(t,n){e=t,r.p(e,n)},i(e){o||(ge(r),o=!0)},o(e){ve(r),o=!1},d(e){e&&C(t),c[n].d(),s=!1,a()}}}function wa(e){let t,n,r,i,o=e[7],s=[];for(let t=0;t<o.length;t+=1)s[t]=ka(ga(e,o,t));const a=e=>ve(s[e],1,1,(()=>{s[e]=null}));function l(){return e[14](e[20])}return{c(){t=S("tr");for(let e=0;e<s.length;e+=1)s[e].c();P(t,"slot","row")},m(e,o){x(e,t,o);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0,r||(i=I(t,"click",l),r=!0)},p(n,r){if(e=n,1048704&r){let n;for(o=e[7],n=0;n<o.length;n+=1){const i=ga(e,o,n);s[n]?(s[n].p(i,r),ge(s[n],1)):(s[n]=ka(i),s[n].c(),ge(s[n],1),s[n].m(t,null))}for(pe(),n=o.length;n<s.length;n+=1)a(n);me()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)ge(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ve(s[e]);n=!1},d(e){e&&C(t),j(s,e),r=!1,i()}}}function $a(e){let t,n,r,i;const o=[Ca,xa,_a],s=[];function a(e,t){return null==e[20].substitutableCharms?0:0===e[20].substitutableCharms.length?1:2}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=N()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(pe(),ve(s[l],1,1,(()=>{s[l]=null})),me(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function _a(e){let t,n,r,i=e[20].substitutableCharms,o=[];for(let t=0;t<i.length;t+=1)o[t]=ja(va(e,i,t));return{c(){t=S("div");for(let e=0;e<o.length;e+=1)o[e].c();P(t,"class","row-substitutes")},m(e,n){x(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null);r=!0},p(e,n){if(1048576&n){let r;for(i=e[20].substitutableCharms,r=0;r<i.length;r+=1){const s=va(e,i,r);o[r]?o[r].p(s,n):(o[r]=ja(s),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},i(e){r||(ie((()=>{n||(n=be(t,Ai,{duration:150},!0)),n.run(1)})),r=!0)},o(e){n||(n=be(t,Ai,{duration:150},!1)),n.run(0),r=!1},d(e){e&&C(t),j(o,e),e&&n&&n.end()}}}function xa(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ca(t){let n;return{c(){n=S("div"),n.textContent="searching...",R(n,"width","100%"),R(n,"border-bottom","solid 1px #ddd")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function ja(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g=e[21].rowid+"",v=e[21].skill1+"",y=e[21].skill1Level+"",b=e[21].skill2+"",k=e[21].skill2Level+"",w=e[21].slot1+"",$=e[21].slot2+"",j=e[21].slot3+"";return{c(){t=S("div"),n=E(g),r=E(": "),i=E(v),o=E(y),s=E(", "),a=E(b),l=E(k),c=E(", "),u=E(w),h=E("-"),f=E($),d=E("-"),p=E(j),m=A(),R(t,"width","100%"),R(t,"text-align","left"),R(t,"padding","0.3rem 2rem")},m(e,g){x(e,t,g),_(t,n),_(t,r),_(t,i),_(t,o),_(t,s),_(t,a),_(t,l),_(t,c),_(t,u),_(t,h),_(t,f),_(t,d),_(t,p),_(t,m)},p(e,t){1048576&t&&g!==(g=e[21].rowid+"")&&F(n,g),1048576&t&&v!==(v=e[21].skill1+"")&&F(i,v),1048576&t&&y!==(y=e[21].skill1Level+"")&&F(o,y),1048576&t&&b!==(b=e[21].skill2+"")&&F(a,b),1048576&t&&k!==(k=e[21].skill2Level+"")&&F(l,k),1048576&t&&w!==(w=e[21].slot1+"")&&F(u,w),1048576&t&&$!==($=e[21].slot2+"")&&F(f,$),1048576&t&&j!==(j=e[21].slot3+"")&&F(p,j)},d(e){e&&C(t)}}}function Sa(e){let t,n,r,i,o;return{c(){t=S("div"),n=S("canvas"),P(n,"id",r="charm-table-row-"+e[20].rowid+"-screenshot"),R(n,"width","100%"),R(t,"width","100%"),R(t,"border-bottom","solid 1px #ddd")},m(e,r){x(e,t,r),_(t,n),o=!0},p(e,t){(!o||1048576&t&&r!==(r="charm-table-row-"+e[20].rowid+"-screenshot"))&&P(n,"id",r)},i(e){o||(ie((()=>{i||(i=be(t,Ai,{duration:100},!0)),i.run(1)})),o=!0)},o(e){i||(i=be(t,Ai,{duration:100},!1)),i.run(0),o=!1},d(e){e&&C(t),e&&i&&i.end()}}}function Oa(e){let t,n,r,i,o=e[5][e[20].rowid]&&$a(e),s=e[4][e[20].rowid]&&Sa(e);return{c(){t=S("div"),o&&o.c(),n=A(),s&&s.c(),P(t,"slot","after-row"),P(t,"id",r="charm-table-row-"+e[20].rowid),R(t,"width","100%")},m(e,r){x(e,t,r),o&&o.m(t,null),_(t,n),s&&s.m(t,null),i=!0},p(e,a){e[5][e[20].rowid]?o?(o.p(e,a),1048608&a&&ge(o,1)):(o=$a(e),o.c(),ge(o,1),o.m(t,n)):o&&(pe(),ve(o,1,1,(()=>{o=null})),me()),e[4][e[20].rowid]?s?(s.p(e,a),1048592&a&&ge(s,1)):(s=Sa(e),s.c(),ge(s,1),s.m(t,null)):s&&(pe(),ve(s,1,1,(()=>{s=null})),me()),(!i||1048576&a&&r!==(r="charm-table-row-"+e[20].rowid))&&P(t,"id",r)},i(e){i||(ge(o),ge(s),i=!0)},o(e){ve(o),ve(s),i=!1},d(e){e&&C(t),o&&o.d(),s&&s.d()}}}function Ea(e){let t,n,r,i,o;function s(t){e[15](t)}function a(t){e[16](t)}let l={columns:e[7],rows:e[3],classNameTable:["table table-striped table-hover table-responsible"],classNameThead:["table-dark hide-first-child.disabled"],disableFilterHeader:e[2],$$slots:{"after-row":[Oa,({row:e})=>({20:e}),({row:e})=>e?1048576:0],row:[wa,({n:e,row:t})=>({24:e,20:t}),({n:e,row:t})=>(e?16777216:0)|(t?1048576:0)]},$$scope:{ctx:e}};return void 0!==e[0]&&(l.sliceBegin=e[0]),void 0!==e[1]&&(l.sliceEnd=e[1]),n=new pa({props:l}),Z.push((()=>$e(n,"sliceBegin",s))),Z.push((()=>$e(n,"sliceEnd",a))),n.$on("clickCol",e[8]),{c(){t=S("div"),_e(n.$$.fragment),P(t,"class","charm-table svelte-1bydddo"),P(t,"style",e[6])},m(e,r){x(e,t,r),xe(n,t,null),o=!0},p(e,[s]){const a={};8&s&&(a.rows=e[3]),4&s&&(a.disableFilterHeader=e[2]),269484080&s&&(a.$$scope={dirty:s,ctx:e}),!r&&1&s&&(r=!0,a.sliceBegin=e[0],oe((()=>r=!1))),!i&&2&s&&(i=!0,a.sliceEnd=e[1],oe((()=>i=!1))),n.$set(a),(!o||64&s)&&P(t,"style",e[6])},i(e){o||(ge(n.$$.fragment,e),o=!0)},o(e){ve(n.$$.fragment,e),o=!1},d(e){e&&C(t),Ce(n)}}}function Aa(e,t,n){let r,i;u(e,vs,(e=>n(17,i=e)));let{headerColor:o="mediumseagreen"}=t,{disableFilterHeader:s=!1}=t,{showImageColumn:a=!0}=t,{showSubstitutesColumn:l=!0}=t,{charms:c}=t,{sliceBegin:h}=t,{sliceEnd:f}=t;const d=ma.map((e=>e.name)),p=[{key:"id",title:"ID",value:e=>e.rowid,sortable:!0,filterOptions:e=>{let t={};return e.forEach((e=>{let n=Math.floor(e.rowid/50);void 0===t[n]&&(t[n]={name:`${50*n+1} 〜 ${50*(n+1)}`,value:n})})),t=Object.entries(t).sort().reduce(((e,[t,n])=>(e[t]=n,e)),{}),Object.values(t)},filterValue:e=>Math.floor((e.rowid-1)/50)},{key:"skill1",title:"スキル1",value:e=>e.skill1,filterOptions:d,sortable:!0},{key:"skill1Level",title:"スキル1 Lv",value:e=>e.skill1Level,filterOptions:[0,1,2,3,4,5,6,7],sortable:!0},{key:"skill2",title:"スキル2",value:e=>e.skill2,filterOptions:d,sortable:!0},{key:"skill2Level",title:"スキル2 Lv",value:e=>e.skill2Level,filterOptions:[0,1,2,3,4,5,6,7],sortable:!0},...Array.from({length:3},((e,t)=>t+1)).map((e=>({key:`slot${e}`,title:`スロット${e}`,value:t=>t[`slot${e}`],renderValue:t=>t[`slot${e}`]||"-",sortable:!0,filterOptions:[0,1,2,3]}))),{key:"evaluation",title:"合計Lv",value:e=>e.evaluation||"-",filterOptions:[...Array(21).keys()],sortable:!0},{key:"image",title:"画像",value:e=>e.imagename?"有り":"無し",renderValue:e=>e.imagename?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16"> <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/> <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/> </svg>':"",sortable:!0,filterOptions:["有り","無し"],onClick:async function({e:e,row:t}){e.stopPropagation();const r=t.rowid,o=!m[r];if(n(4,m[r]=o,m),o){const e=await i.getScreenshot(t.imagename);cv.imshow(`charm-table-row-${r}-screenshot`,e)}}},{key:"substitutableCharms",title:"代替",value:e=>e.substitutableCharms?.length?"有り":"無し",renderValue:e=>null==e.substitutableCharms?'<span style="color: gray"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-square-fill" viewBox="0 0 16 16"> <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.496 6.033a.237.237 0 0 1-.24-.247C5.35 4.091 6.737 3.5 8.005 3.5c1.396 0 2.672.73 2.672 2.24 0 1.08-.635 1.594-1.244 2.057-.737.559-1.01.768-1.01 1.486v.105a.25.25 0 0 1-.25.25h-.81a.25.25 0 0 1-.25-.246l-.004-.217c-.038-.927.495-1.498 1.168-1.987.59-.444.965-.736.965-1.371 0-.825-.628-1.168-1.314-1.168-.803 0-1.253.478-1.342 1.134-.018.137-.128.25-.266.25h-.825zm2.325 6.443c-.584 0-1.009-.394-1.009-.927 0-.552.425-.94 1.01-.94.609 0 1.028.388 1.028.94 0 .533-.42.927-1.029.927z"/> </svg> </span>':e.substitutableCharms.length?'<span style="color: mediumseagreen"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-square-fill" viewBox="0 0 16 16"> <path d="M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z"/> </svg> </span>':"",sortable:!0,filterOptions:["有り","無し"]}].filter((e=>{switch(e.key){case"image":return a;case"substitutableCharms":return l;default:return!0}}));let m=[],g=[];function v({row:e}){const t=e.rowid;n(5,g[t]=!g[t],g)}return e.$$set=e=>{"headerColor"in e&&n(10,o=e.headerColor),"disableFilterHeader"in e&&n(2,s=e.disableFilterHeader),"showImageColumn"in e&&n(11,a=e.showImageColumn),"showSubstitutesColumn"in e&&n(12,l=e.showSubstitutesColumn),"charms"in e&&n(3,c=e.charms),"sliceBegin"in e&&n(0,h=e.sliceBegin),"sliceEnd"in e&&n(1,f=e.sliceEnd)},e.$$.update=()=>{7168&e.$$.dirty&&n(6,r=Object.entries({"header-background-color":o,"table-width":61+(a?3:0)+(l?3:0)+"rem"}).map((([e,t])=>`--${e}:${t}`)).join(";"))},[h,f,s,c,m,g,r,p,function(){n(4,m=[]),n(5,g=[])},v,o,a,l,(e,t,n,r)=>{e.onClick&&e.onClick({e:r,row:t,col:e,index:n})},e=>v({row:e}),function(e){h=e,n(0,h)},function(e){f=e,n(1,f)}]}class Na extends Oe{constructor(e){super(),Se(this,e,Aa,Ea,l,{headerColor:10,disableFilterHeader:2,showImageColumn:11,showSubstitutesColumn:12,charms:3,sliceBegin:0,sliceEnd:1})}}function Ia(e,t,n){const r=e.slice();return r[23]=t[n],r}function Pa(e,t,n){const r=e.slice();return r[23]=t[n],r[26]=t,r[27]=n,r}function Ta(e,t,n){const r=e.slice();return r[23]=t[n],r[28]=t,r[29]=n,r}function Fa(e){let t,n,r,i,o,s,a,l;function c(t){e[13](t,e[23])}let u={items:ma,inputId:"input-skill-"+e[23],labelFieldName:"name",valueFieldName:"name",keywordsFunction:Ua,placeholder:"スキル"+(e[23]+1),showClear:!0,hideArrow:!0,className:"autocomplete-skill"};function h(t){e[14](t,e[23])}void 0!==e[0][e[23]]&&(u.selectedItem=e[0][e[23]]),n=new Ks({props:u}),Z.push((()=>$e(n,"selectedItem",c)));let f={items:e[11],inputId:"input-skill-level-"+e[23],placeholder:"Lv",hideArrow:!0,className:"autocomplete-skill-level"};return void 0!==e[1][e[23]]&&(f.selectedItem=e[1][e[23]]),o=new Ks({props:f}),Z.push((()=>$e(o,"selectedItem",h))),{c(){t=S("div"),_e(n.$$.fragment),i=A(),_e(o.$$.fragment),a=A()},m(e,r){x(e,t,r),xe(n,t,null),_(t,i),xe(o,t,null),_(t,a),l=!0},p(t,i){e=t;const a={};1&i&&(a.inputId="input-skill-"+e[23]),1&i&&(a.placeholder="スキル"+(e[23]+1)),!r&&1&i&&(r=!0,a.selectedItem=e[0][e[23]],oe((()=>r=!1))),n.$set(a);const l={};1&i&&(l.inputId="input-skill-level-"+e[23]),!s&&3&i&&(s=!0,l.selectedItem=e[1][e[23]],oe((()=>s=!1))),o.$set(l)},i(e){l||(ge(n.$$.fragment,e),ge(o.$$.fragment,e),l=!0)},o(e){ve(n.$$.fragment,e),ve(o.$$.fragment,e),l=!1},d(e){e&&C(t),Ce(n),Ce(o)}}}function La(e){let t,n,r,i;function o(t){e[15](t,e[23])}let s={items:[...Array(3).keys()].map(Ga),placeholder:"スロット"+(e[23]+1),inputId:"input-slot-"+e[23],showClear:!0,hideArrow:!0,className:"autocomplete-slot-level"};return void 0!==e[2][e[23]]&&(s.selectedItem=e[2][e[23]]),t=new Ks({props:s}),Z.push((()=>$e(t,"selectedItem",o))),{c(){_e(t.$$.fragment),r=E(" ")},m(e,n){xe(t,e,n),x(e,r,n),i=!0},p(r,i){e=r;const o={};!n&&4&i&&(n=!0,o.selectedItem=e[2][e[23]],oe((()=>n=!1))),t.$set(o)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){ve(t.$$.fragment,e),i=!1},d(e){Ce(t,e),e&&C(r)}}}function Ra(e){let t,n,r,i,o,a,l,c,u,h,f,d,p,m,g,v,y,b,k,w,$,O,N,T,F;function L(t){e[17](t)}function R(t){e[18](t)}function M(t){e[19](t)}let B={disableFilterHeader:!0,headerColor:"dodgerblue"};void 0!==e[8]&&(B.charms=e[8]),void 0!==e[9]&&(B.sliceBegin=e[9]),void 0!==e[10]&&(B.sliceEnd=e[10]),c=new Na({props:B}),Z.push((()=>$e(c,"charms",L))),Z.push((()=>$e(c,"sliceBegin",R))),Z.push((()=>$e(c,"sliceEnd",M)));let K=[...Array(e[6]).keys()],z=[];for(let t=0;t<K.length;t+=1)z[t]=Ka(Ia(e,K,t));return{c(){t=E("show\n        "),n=S("select"),r=S("option"),r.textContent="10",i=S("option"),i.textContent="25",o=S("option"),o.textContent="50",a=S("option"),a.textContent="100",l=E("\n        charms\n        "),_e(c.$$.fragment),d=A(),p=S("div"),m=S("ul"),g=S("li"),v=S("span"),v.innerHTML='<span aria-hidden="true">«</span>',b=A();for(let e=0;e<z.length;e+=1)z[e].c();k=A(),w=S("li"),$=S("span"),$.innerHTML='<span aria-hidden="true">»</span>',r.__value="10",r.value=r.__value,i.__value="25",i.value=i.__value,o.__value="50",o.value=o.__value,a.__value="100",a.value=a.__value,void 0===e[5]&&ie((()=>e[16].call(n))),P(v,"class","page-link"),P(g,"class",y="page-item "+(0===e[4]?"disabled":"")),P(g,"aria-label","Previous"),P($,"class","page-link"),P(w,"class",O="page-item "+(e[4]===e[6]-1?"disabled":"")),P(w,"aria-label","Next"),P(m,"class","pagination svelte-5c44pb"),P(p,"id","charm-search-result-pager"),P(p,"class","svelte-5c44pb")},m(s,u){x(s,t,u),x(s,n,u),_(n,r),_(n,i),_(n,o),_(n,a),D(n,e[5]),x(s,l,u),xe(c,s,u),x(s,d,u),x(s,p,u),_(p,m),_(m,g),_(g,v),_(m,b);for(let e=0;e<z.length;e+=1)z[e].m(m,null);_(m,k),_(m,w),_(w,$),N=!0,T||(F=[I(n,"change",e[16]),I(v,"click",e[20]),I($,"click",e[22])],T=!0)},p(e,t){32&t&&D(n,e[5]);const r={};if(!u&&256&t&&(u=!0,r.charms=e[8],oe((()=>u=!1))),!h&&512&t&&(h=!0,r.sliceBegin=e[9],oe((()=>h=!1))),!f&&1024&t&&(f=!0,r.sliceEnd=e[10],oe((()=>f=!1))),c.$set(r),(!N||16&t&&y!==(y="page-item "+(0===e[4]?"disabled":"")))&&P(g,"class",y),80&t){let n;for(K=[...Array(e[6]).keys()],n=0;n<K.length;n+=1){const r=Ia(e,K,n);z[n]?z[n].p(r,t):(z[n]=Ka(r),z[n].c(),z[n].m(m,k))}for(;n<z.length;n+=1)z[n].d(1);z.length=K.length}(!N||80&t&&O!==(O="page-item "+(e[4]===e[6]-1?"disabled":"")))&&P(w,"class",O)},i(e){N||(ge(c.$$.fragment,e),N=!0)},o(e){ve(c.$$.fragment,e),N=!1},d(e){e&&C(t),e&&C(n),e&&C(l),Ce(c,e),e&&C(d),e&&C(p),j(z,e),T=!1,s(F)}}}function Da(t){let n;return{c(){n=S("div"),n.textContent="not found",R(n,"text-align","center")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function Ma(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ba(t){let n;return{c(){n=S("div"),P(n,"class","spinner-border text-info"),P(n,"role","status")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function Ka(e){let t,n,r,i,o,s,a=e[23]+1+"";function l(){return e[21](e[23])}return{c(){t=S("li"),n=S("span"),r=E(a),P(n,"class","page-link"),P(t,"class",i="page-item "+(e[23]===e[4]?"active":""))},m(e,i){x(e,t,i),_(t,n),_(n,r),o||(s=I(n,"click",l),o=!0)},p(n,o){e=n,64&o&&a!==(a=e[23]+1+"")&&F(r,a),80&o&&i!==(i="page-item "+(e[23]===e[4]?"active":""))&&P(t,"class",i)},d(e){e&&C(t),o=!1,s()}}}function za(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,b,k=[...Array(e[0].filter(Ha).length+1).keys()],w=[];for(let t=0;t<k.length;t+=1)w[t]=Fa(Ta(e,k,t));const $=e=>ve(w[e],1,1,(()=>{w[e]=null}));let O=[...Array(qa).keys()],N=[];for(let t=0;t<O.length;t+=1)N[t]=La(Pa(e,O,t));const T=e=>ve(N[e],1,1,(()=>{N[e]=null})),F=[Ba,Ma,Da,Ra],L=[];function R(e,t){return e[7]?0:null==e[3]?1:0===e[3].length?2:3}return m=R(e),g=L[m]=F[m](e),{c(){t=S("div"),n=S("div"),r=S("div"),i=S("div"),o=E("スキル:\n        ");for(let e=0;e<w.length;e+=1)w[e].c();s=A(),a=S("div"),l=E("スロット:"),c=S("br"),u=A();for(let e=0;e<N.length;e+=1)N[e].c();h=A(),f=S("hr"),d=A(),p=S("div"),g.c(),P(i,"id","skills"),P(i,"class","svelte-5c44pb"),P(a,"id","slots"),P(a,"class","svelte-5c44pb"),P(r,"id","charm-search-form"),P(r,"class","svelte-5c44pb"),P(f,"class","svelte-5c44pb"),P(p,"id","charm-search-result"),P(p,"class","svelte-5c44pb"),P(n,"id","charm-searcher"),P(n,"class","svelte-5c44pb"),P(t,"class","tab-content svelte-5c44pb")},m(e,g){x(e,t,g),_(t,n),_(n,r),_(r,i),_(i,o);for(let e=0;e<w.length;e+=1)w[e].m(i,null);_(r,s),_(r,a),_(a,l),_(a,c),_(a,u);for(let e=0;e<N.length;e+=1)N[e].m(a,null);_(n,h),_(n,f),_(n,d),_(n,p),L[m].m(p,null),v=!0,y||(b=I(window,"keydown",Va),y=!0)},p(e,[t]){if(2051&t){let n;for(k=[...Array(e[0].filter(Ha).length+1).keys()],n=0;n<k.length;n+=1){const r=Ta(e,k,n);w[n]?(w[n].p(r,t),ge(w[n],1)):(w[n]=Fa(r),w[n].c(),ge(w[n],1),w[n].m(i,null))}for(pe(),n=k.length;n<w.length;n+=1)$(n);me()}if(4&t){let n;for(O=[...Array(qa).keys()],n=0;n<O.length;n+=1){const r=Pa(e,O,n);N[n]?(N[n].p(r,t),ge(N[n],1)):(N[n]=La(r),N[n].c(),ge(N[n],1),N[n].m(a,null))}for(pe(),n=O.length;n<N.length;n+=1)T(n);me()}let n=m;m=R(e),m===n?L[m].p(e,t):(pe(),ve(L[n],1,1,(()=>{L[n]=null})),me(),g=L[m],g?g.p(e,t):(g=L[m]=F[m](e),g.c()),ge(g,1),g.m(p,null))},i(e){if(!v){for(let e=0;e<k.length;e+=1)ge(w[e]);for(let e=0;e<O.length;e+=1)ge(N[e]);ge(g),v=!0}},o(e){w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)ve(w[e]);N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)ve(N[e]);ve(g),v=!1},d(e){e&&C(t),j(w,e),j(N,e),L[m].d(),y=!1,b()}}}const qa=3;function Va(e){if(27===e.keyCode)return void document.body.click();if(!(e.ctrlKey&&e.metaKey||e.ctrlKey&&e.altKey))return;let t;if("k"===e.key)t="input-skill-";else if("l"===e.key)t="input-skill-level-";else{if("t"!==e.key)return;t="input-slot-"}const n=document.activeElement.id;if(n.startsWith(t)){const e=parseInt(n.replace(t,"")),r=document.getElementById(`${t}${e+1}`)||document.getElementById(`${t}0`);document.body.click(),r.focus()}else{const e=document.getElementById(`${t}0`);document.body.click(),e.focus()}}const Ha=e=>e,Ua=e=>`${e.name} ${e.hiragana} ${e.englishCharacters}`,Ga=e=>e+1;function Wa(e,t,n){let r,i,o,s,a;u(e,vs,(e=>n(12,a=e)));const l=[...Array(7).keys()].map((e=>e+1));let c=[],h=[],f=[],d=!1,p=null,m=0,g=10;return e.$$.update=()=>{if(3&e.$$.dirty)for(const e in c)c[e]&&null==h[e]&&n(1,h[e]=1,h),null==c[e]&&(c.splice(e,1),h.splice(e,1));if(4103&e.$$.dirty){n(7,d=!0),n(2,f=f.filter((e=>e)));const e=JSON.stringify({skills:c.map((e=>e.name)),skillLevels:h,slots:f}),t=()=>{if(!c.length&&!h.length&&!f.length)return void n(3,p=null);if("function"!=typeof Module.getSubstitutesAll)return void setTimeout(t,100);const r=Module.getSubstitutes(JSON.stringify(a.charms.map((e=>{const{substitutableCharms:t,imagename:n,evaluation:r,...i}=e;return i}))),e);n(3,p=JSON.parse(r).map((e=>a.charms.find((t=>t.rowid===e)))))};t(),n(7,d=!1)}40&e.$$.dirty&&n(6,r=Math.ceil((p||[]).length/g)),72&e.$$.dirty&&p&&r&&n(4,m=0),8&e.$$.dirty&&n(8,i=p),48&e.$$.dirty&&n(9,o=g*m),48&e.$$.dirty&&n(10,s=g*(m+1)),4&e.$$.dirty&&n(2,f=f.sort(((e,t)=>t-e)))},[c,h,f,p,m,g,r,d,i,o,s,l,a,function(t,r){e.$$.not_equal(c[r],t)&&(c[r]=t,n(0,c))},function(t,r){e.$$.not_equal(h[r],t)&&(h[r]=t,n(1,h),n(0,c))},function(t,r){e.$$.not_equal(f[r],t)&&(f[r]=t,n(2,f),n(0,c),n(1,h),n(12,a))},function(){g=M(this),n(5,g)},function(e){i=e,n(8,i),n(3,p),n(2,f),n(0,c),n(1,h),n(12,a)},function(e){o=e,n(9,o),n(5,g),n(4,m),n(3,p),n(6,r),n(2,f),n(0,c),n(1,h),n(12,a)},function(e){s=e,n(10,s),n(5,g),n(4,m),n(3,p),n(6,r),n(2,f),n(0,c),n(1,h),n(12,a)},()=>n(4,m--,m),e=>n(4,m=e),()=>n(4,m++,m)]}function Xa(e){let t,n,r;function i(t){e[1](t)}let o={};return void 0!==e[0]&&(o.charms=e[0]),t=new Na({props:o}),Z.push((()=>$e(t,"charms",i))),{c(){_e(t.$$.fragment)},m(e,n){xe(t,e,n),r=!0},p(e,r){const i={};!n&&1&r&&(n=!0,i.charms=e[0],oe((()=>n=!1))),t.$set(i)},i(e){r||(ge(t.$$.fragment,e),r=!0)},o(e){ve(t.$$.fragment,e),r=!1},d(e){Ce(t,e)}}}function Ya(t){let n;return{c(){n=S("div"),P(n,"class","spinner-border text-info svelte-2qpa7f"),P(n,"role","status")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function Ja(e){let t,n,r,i,o;const s=[Ya,Xa],a=[];function l(e,t){return null==e[0]?0:1}return r=l(e),i=a[r]=s[r](e),{c(){t=S("div"),n=S("div"),i.c(),P(n,"id","charm-list"),P(n,"class","svelte-2qpa7f"),P(t,"class","tab-content svelte-2qpa7f")},m(e,i){x(e,t,i),_(t,n),a[r].m(n,null),o=!0},p(e,[t]){let o=r;r=l(e),r===o?a[r].p(e,t):(pe(),ve(a[o],1,1,(()=>{a[o]=null})),me(),i=a[r],i?i.p(e,t):(i=a[r]=s[r](e),i.c()),ge(i,1),i.m(n,null))},i(e){o||(ge(i),o=!0)},o(e){ve(i),o=!1},d(e){e&&C(t),a[r].d()}}}function Qa(e,t,n){let r,i;return u(e,vs,(e=>n(2,r=e))),setInterval((()=>{i!==r?.charms&&n(0,i=r?.charms)}),1e3),[i,function(e){i=e,n(0,i)}]}function Za(t){let n,r,i,o,s,a,l,c,u,h,f,d,p,m,g=Math.floor(100*t[4])+"";return{c(){n=S("div"),r=S("video"),i=S("track"),c=A(),u=S("div"),h=S("progress"),f=A(),d=S("span"),p=E(g),m=E("%"),P(i,"kind","captions"),P(r,"id",o="video"+t[0]),P(r,"class","video-preview svelte-syjktf"),r.src!==(s=t[1])&&P(r,"src",s),P(r,"width",el),P(r,"height",tl),P(r,"alt",a="preview"+t[0]),P(r,"style",l=t[2]?"":"display: none"),h.value=t[4],P(h,"class","svelte-syjktf"),P(d,"class","progress-text svelte-syjktf"),P(n,"class","video-reader svelte-syjktf")},m(e,o){x(e,n,o),_(n,r),_(r,i),t[9](r),_(n,c),_(n,u),_(u,h),_(u,f),_(u,d),_(d,p),_(d,m)},p(e,[t]){1&t&&o!==(o="video"+e[0])&&P(r,"id",o),2&t&&r.src!==(s=e[1])&&P(r,"src",s),1&t&&a!==(a="preview"+e[0])&&P(r,"alt",a),4&t&&l!==(l=e[2]?"":"display: none")&&P(r,"style",l),16&t&&(h.value=e[4]),16&t&&g!==(g=Math.floor(100*e[4])+"")&&F(p,g)},i:e,o:e,d(e){e&&C(n),t[9](null)}}}const el=1280,tl=720;function nl(e,t,n){let r,i,o,s,{nSplits:a}=t,{index:l}=t,{videoName:c}=t,{videoData:u}=t,{isVideoVisible:h=!1}=t,{charmScanner:f}=t,{onFinish:d}=t,p=new cv.Mat(tl,el,cv.CV_8UC4),m=0;(async()=>{await new Promise((e=>requestAnimationFrame(e))),await new Promise((e=>n(3,o.oncanplay=e,o))),s=new cv.VideoCapture(o),r=l*o.duration/a,i=(l+1)*o.duration/a,o.addEventListener("seeked",g),o.currentTime!=r?n(3,o.currentTime=r,o):g()})();const g=async()=>{if(i-o.currentTime<1/29.97)return n(4,m=1),void d();s.read(p),f.scan(p,c),v(1,29.97),n(4,m=(o.currentTime-r)/(i-r))},v=(e,t)=>{const r=1e-5+(o.currentTime*t+e)/t;n(3,o.currentTime=Math.min(i,r),o)};return e.$$set=e=>{"nSplits"in e&&n(5,a=e.nSplits),"index"in e&&n(0,l=e.index),"videoName"in e&&n(6,c=e.videoName),"videoData"in e&&n(1,u=e.videoData),"isVideoVisible"in e&&n(2,h=e.isVideoVisible),"charmScanner"in e&&n(7,f=e.charmScanner),"onFinish"in e&&n(8,d=e.onFinish)},[l,u,h,o,m,a,c,f,d,function(e){Z[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class rl extends Oe{constructor(e){super(),Se(this,e,nl,Za,l,{nSplits:5,index:0,videoName:6,videoData:1,isVideoVisible:2,charmScanner:7,onFinish:8})}}function il(e,t,n){const r=e.slice();return r[21]=t[n],r}function ol(e){let t,r;const i=[e[21]];let o={};for(let e=0;e<i.length;e+=1)o=n(o,i[e]);return t=new rl({props:o}),{c(){_e(t.$$.fragment)},m(e,n){xe(t,e,n),r=!0},p(e,n){const r=256&n?ke(i,[we(e[21])]):{};t.$set(r)},i(e){r||(ge(t.$$.fragment,e),r=!0)},o(e){ve(t.$$.fragment,e),r=!1},d(e){Ce(t,e)}}}function sl(e){let t,n,r,i,o,s=1+Number(e[4])+"",a=e[2].length+"";return{c(){t=E("Processing "),n=E(s),r=E("/"),i=E(a),o=E(" file. Please wait...")},m(e,s){x(e,t,s),x(e,n,s),x(e,r,s),x(e,i,s),x(e,o,s)},p(e,t){16&t&&s!==(s=1+Number(e[4])+"")&&F(n,s),4&t&&a!==(a=e[2].length+"")&&F(i,a)},d(e){e&&C(t),e&&C(n),e&&C(r),e&&C(i),e&&C(o)}}}function al(t){let n;return{c(){n=E("Completed!")},m(e,t){x(e,n,t)},p:e,d(e){e&&C(n)}}}function ll(t){let n;return{c(){n=E("Loading Files...")},m(e,t){x(e,n,t)},p:e,d(e){e&&C(n)}}}function cl(t){let n,r,i,o,a,l,c,u;return{c(){n=S("input"),r=A(),i=S("img"),a=A(),l=S("div"),l.textContent="Click to Select Movie",R(n,"display","none"),P(n,"type","file"),P(n,"accept",".mp4"),n.multiple=!0,P(n,"class","svelte-18sy7xy"),i.src!==(o="https://static.thenounproject.com/png/625182-200.png")&&P(i,"src","https://static.thenounproject.com/png/625182-200.png"),P(i,"alt",""),P(i,"class","svelte-18sy7xy"),P(l,"class","svelte-18sy7xy")},m(e,o){x(e,n,o),t[12](n),x(e,r,o),x(e,i,o),x(e,a,o),x(e,l,o),c||(u=[I(n,"change",t[9]),I(n,"change",t[11]),I(i,"click",t[13]),I(l,"click",t[14])],c=!0)},p:e,d(e){e&&C(n),t[12](null),e&&C(r),e&&C(i),e&&C(a),e&&C(l),c=!1,s(u)}}}function ul(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g=e[8],v=[];for(let t=0;t<g.length;t+=1)v[t]=ol(il(e,g,t));const y=e=>ve(v[e],1,1,(()=>{v[e]=null}));function b(e,t){return e[5]?al:e[2].length>0?sl:void 0}let k=b(e),w=k&&k(e);function $(e,t){return e[0]?cl:ll}let O=$(e),N=O(e);return{c(){t=S("div"),n=S("div"),r=S("div");for(let e=0;e<v.length;e+=1)v[e].c();i=A(),w&&w.c(),o=A(),s=S("div"),a=S("div"),l=E("Found "),c=E(e[6]),u=E(" charms."),h=A(),f=S("textarea"),d=A(),p=S("div"),N.c(),P(r,"id","status"),P(r,"class","svelte-18sy7xy"),P(a,"class","svelte-18sy7xy"),P(f,"placeholder","納刀術,2,ひるみ軽減,1,1,0,0"),f.value=e[7],P(f,"class","svelte-18sy7xy"),P(s,"id","result"),P(s,"class","svelte-18sy7xy"),P(p,"id","upload"),P(p,"class","svelte-18sy7xy"),P(n,"id","scanner"),P(n,"class","svelte-18sy7xy"),P(t,"class","tab-content svelte-18sy7xy")},m(e,g){x(e,t,g),_(t,n),_(n,r);for(let e=0;e<v.length;e+=1)v[e].m(r,null);_(r,i),w&&w.m(r,null),_(n,o),_(n,s),_(s,a),_(a,l),_(a,c),_(a,u),_(s,h),_(s,f),_(n,d),_(n,p),N.m(p,null),m=!0},p(e,[t]){if(256&t){let n;for(g=e[8],n=0;n<g.length;n+=1){const o=il(e,g,n);v[n]?(v[n].p(o,t),ge(v[n],1)):(v[n]=ol(o),v[n].c(),ge(v[n],1),v[n].m(r,i))}for(pe(),n=g.length;n<v.length;n+=1)y(n);me()}k===(k=b(e))&&w?w.p(e,t):(w&&w.d(1),w=k&&k(e),w&&(w.c(),w.m(r,null))),(!m||64&t)&&F(c,e[6]),(!m||128&t)&&(f.value=e[7]),O===(O=$(e))&&N?N.p(e,t):(N.d(1),N=O(e),N&&(N.c(),N.m(p,null)))},i(e){if(!m){for(let e=0;e<g.length;e+=1)ge(v[e]);m=!0}},o(e){v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)ve(v[e]);m=!1},d(e){e&&C(t),j(v,e),w&&w.d(),N.d()}}}function hl(t,n,r){let i,o,s=e,a=()=>(s(),s=c(y,(e=>r(8,i=e))),y);u(t,vs,(e=>r(17,o=e))),t.$$.on_destroy.push((()=>s()));const l=(navigator.hardwareConcurrency||8)/2;let h,f,d,{charmScanner:p}=n,{isInitialized:m}=n,v=[],y=Ji([]);a();let b=-1,k=!1,w=0,$="";function _(){++f===l&&(d=!0)}return t.$$set=e=>{"charmScanner"in e&&r(10,p=e.charmScanner),"isInitialized"in e&&r(0,m=e.isInitialized)},[m,h,v,y,b,k,w,$,i,async function(e){const t=e.target.files;if(null==t)return;r(5,k=!1);for(let e=0;e<t.length;e++){r(4,b=e);const n=t[e];console.log(n.name,Date()),a(r(3,y=Ji([]))),f=0,d=!1;const s=new FileReader;s.readAsDataURL(n),await new Promise((e=>{s.onload=e}));for(let e=0;e<l;e++){const e=i.length;g(y,i[e]={index:e,videoName:n.name,videoData:s.result,charmScanner:p,nSplits:l,onFinish:_},i)}await new Promise((e=>requestAnimationFrame(e))),await new Promise((e=>{setInterval((()=>{r(6,w=p.countCharms()),r(7,$=p.exportAsText()),d&&e()}),1e3)}));const c=p.getCharms();await o.registerCharms(c)}const n=p.getCharms();console.log(JSON.stringify(n)),r(5,k=!0)},p,function(){v=this.files,r(2,v)},function(e){Z[e?"unshift":"push"]((()=>{h=e,r(1,h)}))},()=>{h.click()},()=>{h.click}]}const fl=[{tabTitle:"護石スキャン",component:class extends Oe{constructor(e){super(),Se(this,e,hl,ul,l,{charmScanner:10,isInitialized:0})}},iconData:["M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"]},{tabTitle:"護石管理",component:class extends Oe{constructor(e){super(),Se(this,e,Qa,Ja,l,{})}},iconData:["M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"]},{tabTitle:"護石スペック検索",component:class extends Oe{constructor(e){super(),Se(this,e,Wa,za,l,{})}},iconData:["M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"]},{tabTitle:"護石エクスポート",component:class extends Oe{constructor(e){super(),Se(this,e,_s,$s,l,{})}},iconData:["M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"]},{tabTitle:"ヘルプ",component:class extends Oe{constructor(e){super(),Se(this,e,null,ko,l,{})}},iconData:["M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z","m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"]}];function dl(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function pl(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function ml(e,t,n){const r=e.slice();return r[10]=t[n],r}function gl(t){let n;return{c(){n=O("path"),P(n,"d",t[10])},m(e,t){x(e,n,t)},p:e,d(e){e&&C(n)}}}function vl(e){let t,n,r,i,o,s,a,l,c,u=e[6].tabTitle+"",h=e[6].iconData||[],f=[];for(let t=0;t<h.length;t+=1)f[t]=gl(ml(e,h,t));return{c(){t=S("li"),n=S("button"),r=O("svg");for(let e=0;e<f.length;e+=1)f[e].c();i=A(),o=S("span"),s=E(u),P(r,"xmlns","http://www.w3.org/2000/svg"),P(r,"width","16"),P(r,"height","19"),P(r,"fill","currentColor"),R(o,"display",e[0]?"inline":"none"),P(o,"class","svelte-nk63sn"),P(n,"id",e[8]),P(n,"class",a=m(e[3]==e[8]?"active navigation-link":"navigation-link")+" svelte-nk63sn"),P(n,"role","tab"),P(t,"class","navigation-item svelte-nk63sn")},m(a,u){x(a,t,u),_(t,n),_(n,r);for(let e=0;e<f.length;e+=1)f[e].m(r,null);_(n,i),_(n,o),_(o,s),l||(c=I(n,"click",e[5]),l=!0)},p(e,t){if(0&t){let n;for(h=e[6].iconData||[],n=0;n<h.length;n+=1){const i=ml(e,h,n);f[n]?f[n].p(i,t):(f[n]=gl(i),f[n].c(),f[n].m(r,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=h.length}1&t&&R(o,"display",e[0]?"inline":"none"),8&t&&a!==(a=m(e[3]==e[8]?"active navigation-link":"navigation-link")+" svelte-nk63sn")&&P(n,"class",a)},d(e){e&&C(t),j(f,e),l=!1,c()}}}function yl(e){let t,r,i,o,s;const a=[{isInitialized:e[1],charmScanner:e[2]},{onActivate:e[4][e[8]]}];var l=e[6].component;function c(e){let t={};for(let e=0;e<a.length;e+=1)t=n(t,a[e]);return{props:t}}return l&&(r=new l(c())),{c(){t=S("div"),r&&_e(r.$$.fragment),i=A(),P(t,"class",o="h-100 "+(e[3]==e[8]?"d-block":"d-none"))},m(e,n){x(e,t,n),r&&xe(r,t,null),_(t,i),s=!0},p(e,n){const u=22&n?ke(a,[6&n&&{isInitialized:e[1],charmScanner:e[2]},16&n&&{onActivate:e[4][e[8]]}]):{};if(l!==(l=e[6].component)){if(r){pe();const e=r;ve(e.$$.fragment,1,0,(()=>{Ce(e,1)})),me()}l?(r=new l(c()),_e(r.$$.fragment),ge(r.$$.fragment,1),xe(r,t,i)):r=null}else l&&r.$set(u);(!s||8&n&&o!==(o="h-100 "+(e[3]==e[8]?"d-block":"d-none")))&&P(t,"class",o)},i(e){s||(r&&ge(r.$$.fragment,e),s=!0)},o(e){r&&ve(r.$$.fragment,e),s=!1},d(e){e&&C(t),r&&Ce(r)}}}function bl(e){let t,n,r,i,o,s,a,l=fl,c=[];for(let t=0;t<l.length;t+=1)c[t]=vl(pl(e,l,t));let u=fl,h=[];for(let t=0;t<u.length;t+=1)h[t]=yl(dl(e,u,t));const f=e=>ve(h[e],1,1,(()=>{h[e]=null}));return{c(){t=S("div"),n=S("ul");for(let e=0;e<c.length;e+=1)c[e].c();r=A(),i=S("div"),i.innerHTML='<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="" data-url="https://mhrise-charm-scanner.yuzu-k.com" data-hashtags="MHRise,護石,ツール" data-show-count="false">Tweet</a> \n      <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>',o=A(),s=S("div");for(let e=0;e<h.length;e+=1)h[e].c();R(i,"position","fixed"),R(i,"bottom","0"),R(i,"left","5px"),P(n,"class","navigation svelte-nk63sn"),R(n,"width",e[0]?"14rem":"3.2rem"),P(s,"class","navigation-content svelte-nk63sn"),P(t,"id","container"),P(t,"class","svelte-nk63sn")},m(e,l){x(e,t,l),_(t,n);for(let e=0;e<c.length;e+=1)c[e].m(n,null);_(n,r),_(n,i),_(t,o),_(t,s);for(let e=0;e<h.length;e+=1)h[e].m(s,null);a=!0},p(e,[t]){if(41&t){let i;for(l=fl,i=0;i<l.length;i+=1){const o=pl(e,l,i);c[i]?c[i].p(o,t):(c[i]=vl(o),c[i].c(),c[i].m(n,r))}for(;i<c.length;i+=1)c[i].d(1);c.length=l.length}if((!a||1&t)&&R(n,"width",e[0]?"14rem":"3.2rem"),30&t){let n;for(u=fl,n=0;n<u.length;n+=1){const r=dl(e,u,n);h[n]?(h[n].p(r,t),ge(h[n],1)):(h[n]=yl(r),h[n].c(),ge(h[n],1),h[n].m(s,null))}for(pe(),n=u.length;n<h.length;n+=1)f(n);me()}},i(e){if(!a){for(let e=0;e<u.length;e+=1)ge(h[e]);a=!0}},o(e){h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)ve(h[e]);a=!1},d(e){e&&C(t),j(c,e),j(h,e)}}}function kl(e,t,n){let{isNavigationOpen:r}=t,{isInitialized:i}=t,{charmScanner:o}=t,s=4,a={};return e.$$set=e=>{"isNavigationOpen"in e&&n(0,r=e.isNavigationOpen),"isInitialized"in e&&n(1,i=e.isInitialized),"charmScanner"in e&&n(2,o=e.charmScanner)},[r,i,o,s,a,function(e){n(3,s=e.srcElement.closest("button").id),a[s]&&a[s]()}]}class wl extends Oe{constructor(e){super(),Se(this,e,kl,bl,l,{isNavigationOpen:0,isInitialized:1,charmScanner:2})}}function $l(e){let t,r,i,o,s,a,l,c,u,h,f,d;function p(t){e[3](t)}let m={};void 0!==e[0]&&(m.isOpen=e[0]),i=new _i({props:m}),Z.push((()=>$e(i,"isOpen",p)));const g=[{isNavigationOpen:e[0],isInitialized:e[1],charmScanner:e[2]}];let v={};for(let e=0;e<g.length;e+=1)v=n(v,g[e]);return u=new wl({props:v}),{c(){t=S("main"),r=S("header"),_e(i.$$.fragment),s=A(),a=S("h1"),a.textContent=`${_l}`,l=A(),c=S("div"),_e(u.$$.fragment),h=A(),f=S("div"),f.textContent=`v${xl}`,P(a,"class","svelte-1kyfeff"),P(r,"class","svelte-1kyfeff"),P(c,"id","nav-wrapper"),P(c,"class","svelte-1kyfeff"),P(f,"id","version"),P(f,"class","svelte-1kyfeff"),P(t,"class","svelte-1kyfeff")},m(e,n){x(e,t,n),_(t,r),xe(i,r,null),_(r,s),_(r,a),_(t,l),_(t,c),xe(u,c,null),_(t,h),_(t,f),d=!0},p(e,[t]){const n={};!o&&1&t&&(o=!0,n.isOpen=e[0],oe((()=>o=!1))),i.$set(n);const r=7&t?ke(g,[{isNavigationOpen:e[0],isInitialized:e[1],charmScanner:e[2]}]):{};u.$set(r)},i(e){d||(ge(i.$$.fragment,e),ge(u.$$.fragment,e),d=!0)},o(e){ve(i.$$.fragment,e),ve(u.$$.fragment,e),d=!1},d(e){e&&C(t),Ce(i),Ce(u)}}}const _l="MHRise Charm Scanner",xl="0.5.6";function Cl(e,t,n){let r;u(e,vs,(e=>n(4,r=e)));let i,o=!0,s=!1;return window.addEventListener("load",(async()=>{n(2,i=new ki),g(vs,r=new mi,r),await i.init(),n(1,s=!0)})),[o,s,i,function(e){o=e,n(0,o)}]}return new class extends Oe{constructor(e){super(),Se(this,e,Cl,$l,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
