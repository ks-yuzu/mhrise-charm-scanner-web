{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/dexie/dist/dexie.mjs","../../src/mhrise-charm-decorations.js","../../src/mhrise-charm-manager.js","../../src/util.js","../../src/mhrise-charm-scanner.js","../../src/Hamburger.svelte","../../node_modules/svelte-lightbox/src/LightboxThumbnail.svelte","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte-lightbox/src/Modal/LightboxHeader.svelte","../../node_modules/svelte-lightbox/src/Modal/LightboxBody.svelte","../../node_modules/svelte-lightbox/src/Modal/LightboxFooter.svelte","../../node_modules/svelte-lightbox/src/Modal/Index.svelte","../../node_modules/svelte-lightbox/src/Gallery/InternalGallery.svelte","../../node_modules/svelte/store/index.mjs","../../node_modules/svelte-lightbox/src/Lightbox.svelte","../../node_modules/mdbsvelte/src/utils.js","../../node_modules/mdbsvelte/src/MDBBtn.svelte","../../node_modules/mdbsvelte/src/MDBBtnGroup.svelte","../../node_modules/mdbsvelte/src/MDBModal.svelte","../../node_modules/mdbsvelte/src/MDBModalBody.svelte","../../node_modules/mdbsvelte/src/MDBModalHeader.svelte","../../node_modules/mdbsvelte/src/MDBModalFooter.svelte","../../src/ConfirmModal.svelte","../../src/stores.js","../../src/string-util.ts","../../src/CharmIxporter.svelte","../../node_modules/simple-svelte-autocomplete/src/SimpleAutocomplete.svelte","../../src/SvelteTable.svelte","../../src/mhrise-skills.js","../../src/CharmTable.svelte","../../src/CharmSearcher.svelte","../../src/CharmList.svelte","../../src/VideoReader.svelte","../../src/CharmScanner.svelte","../../src/NavOptions.svelte","../../src/Nav.svelte","../../src/App.svelte","../../src/main.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.38.2' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_await_block_branch, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.0.3, Wed Nov 18 2020\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nvar __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\n\n\n\n\n\n\nfunction __spreadArrays() {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n}\n\nvar keys = Object.keys;\nvar isArray = Array.isArray;\nvar _global = typeof self !== 'undefined' ? self :\n    typeof window !== 'undefined' ? window :\n        global;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    keys(extension).forEach(function (key) {\n        setProp(proto, key, extension[key]);\n    });\n}\nvar defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    var pd = getOwnPropertyDescriptor(obj, prop);\n    var proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nvar _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\n\nfunction arrayToObject(array, extractor) {\n    return array.reduce(function (result, item, i) {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\n\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj)\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nvar concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nvar intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\nvar intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\nvar intrinsicTypeNameSet = arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\nfunction deepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    var rv;\n    if (isArray(any)) {\n        rv = [];\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(deepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        rv = any.constructor ? Object.create(any.constructor.prototype) : {};\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = deepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nvar toString = {}.toString;\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nvar getValueOf = function (val, type) {\n    return type === \"Array\" ? '' + val.map(function (v) { return getValueOf(v, toStringTag(v)); }) :\n        type === \"ArrayBuffer\" ? '' + new Uint8Array(val) :\n            type === \"Date\" ? val.getTime() :\n                ArrayBuffer.isView(val) ? '' + new Uint8Array(val.buffer) :\n                    val;\n};\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach(function (prop) {\n        if (!hasOwn(b, prop))\n            rv[prfx + prop] = undefined;\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                var apTypeName = toStringTag(ap);\n                var bpTypeName = toStringTag(bp);\n                if (apTypeName === bpTypeName) {\n                    if (intrinsicTypeNameSet[apTypeName]) {\n                        if (getValueOf(ap, apTypeName) !== getValueOf(bp, bpTypeName)) {\n                            rv[prfx + prop] = b[prop];\n                        }\n                    }\n                    else {\n                        getObjectDiff(ap, bp, rv, prfx + prop + \".\");\n                    }\n                }\n                else {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach(function (prop) {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\nvar iteratorSymbol = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar getIteratorOf = iteratorSymbol ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nvar NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while (x = it.next(), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nvar isAsyncFunction = typeof Symbol !== 'undefined'\n    ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n    : function () { return false; };\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = function () { return true; };\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(function (frame) { return \"\\n\" + frame; })\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(function (key) { return failures[key].toString(); })\n        .filter(function (v, i, s) { return s.indexOf(v) === i; })\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\nvar BaseException = DexieError;\nvar exceptions = errorList.reduce(function (obj, name) {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = msgOrInner.name + \" \" + msgOrInner.message;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\n\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nvar LONG_STACKS_CLIP_LIMIT = 100;\nvar MAX_LONG_STACKS = 20;\nvar ZONE_ECHO_LIMIT = 100;\nvar _a = typeof Promise === 'undefined' ?\n    [] :\n    (function () {\n        var globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, globalP.__proto__, globalP];\n        var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            nativeP.__proto__,\n            globalP\n        ];\n    })();\nvar resolvedNativePromise = _a[0];\nvar nativePromiseProto = _a[1];\nvar resolvedGlobalPromise = _a[2];\nvar nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nvar NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nvar patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    function () { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                function () {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(function () {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                function () { setTimeout(physicalTick, 0); };\nvar asap$1 = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true;\nvar needsNewPhysicalTick = true;\nvar unhandledErrors = [];\nvar rejectingErrors = [];\nvar currentFulfiller = null;\nvar rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(function (uh) {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nvar thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var _this = this;\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            var cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise(function (resolve, reject) {\n                propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, function (err) {\n            return err instanceof type ? handler(err) : PromiseReject(err);\n        })\n            : this.then(null, function (err) {\n                return err && err.name === type ? handler(err) : PromiseReject(err);\n            });\n    },\n    finally: function (onFinally) {\n        return this.then(function (value) {\n            onFinally();\n            return value;\n        }, function (err) {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        var _this = this;\n        return ms < Infinity ?\n            new DexiePromise(function (resolve, reject) {\n                var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject); });\n        });\n    },\n    resolve: function (value) {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise(function (resolve, reject) {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n        });\n    },\n    PSD: {\n        get: function () { return PSD; },\n        set: function (value) { return PSD = value; }\n    },\n    totalEchoes: { get: function () { return totalEchoes; } },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: function () { return asap$1; },\n        set: function (value) { asap$1 = value; }\n    },\n    rejectionMapper: {\n        get: function () { return rejectionMapper; },\n        set: function (value) { rejectionMapper = value; }\n    },\n    follow: function (fn, zoneProps) {\n        return new DexiePromise(function (resolve, reject) {\n            return newScope(function (resolve, reject) {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    var _this = this;\n                    run_at_end_of_this_or_next_physical_tick(function () {\n                        _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve) {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                var remaining = possiblePromises.length;\n                var results = new Array(remaining);\n                possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                    .then(function () { return --remaining || resolve(results); }); });\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                var remaining = possiblePromises.length;\n                var failures = new Array(remaining);\n                possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }); });\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(function (value) {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, function (resolve, reject) {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: function () {\n                return stack_being_generated ?\n                    origProp && (origProp.get ?\n                        origProp.get.apply(reason) :\n                        origProp.value) :\n                    promise.stack;\n            }\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap$1(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap$1(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(function (p) {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap$1(function () {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nvar task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props$$1, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props$$1)\n        extend(psd, props$$1);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(function (x) {\n            decrementExpectedAwaits();\n            return x;\n        }, function (e) {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise_1 = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise_1.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise_1.all = targetEnv.all;\n            GlobalPromise_1.race = targetEnv.race;\n            GlobalPromise_1.resolve = targetEnv.resolve;\n            GlobalPromise_1.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise_1.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise_1.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(\"Unhandled rejection: \" + (err.stack || err));\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db._state.openComplete && (!PSD.letThrough)) {\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n        }\n        catch (ex) {\n            return rejection(ex);\n        }\n        return trans._promise(mode, function (resolve, reject) {\n            return newScope(function () {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(function (result) {\n            return trans._completion.then(function () { return result; });\n        });\n    }\n}\n\nvar DEXIE_VERSION = '3.0.3';\nvar maxString = String.fromCharCode(65535);\nvar minKey = -Infinity;\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\nvar dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\nvar DBNAMES_DB = '__dbnames';\nvar READONLY = 'readonly';\nvar READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nvar AnyRange = {\n    type: 3          ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return function (obj) {\n        if (getByKeyPath(obj, keyPath) === undefined) {\n            obj = deepClone(obj);\n            delByKeyPath(obj, keyPath);\n        }\n        return obj;\n    };\n}\n\nvar Table =               (function () {\n    function Table() {\n    }\n    Table.prototype._trans = function (mode, fn, writeLocked) {\n        var trans = this._tx || PSD.trans;\n        var tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        var wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n    Table.prototype.get = function (keyOrCrit, cb) {\n        var _this = this;\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', function (trans) {\n            return _this.core.get({ trans: trans, key: keyOrCrit })\n                .then(function (res) { return _this.hook.reading.fire(res); });\n        }).then(cb);\n    };\n    Table.prototype.where = function (indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n        var keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n            return ix.compound &&\n                keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n        })[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n        if (!compoundIndex && debug)\n            console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                (\"compound index [\" + keyPaths.join('+') + \"]\"));\n        var idxByName = this.schema.idxByName;\n        var idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        var _a = keyPaths.reduce(function (_a, keyPath) {\n            var prevIndex = _a[0], prevFilterFn = _a[1];\n            var index = idxByName[keyPath];\n            var value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        function (x) {\n                            var prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                        } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                    : prevFilterFn\n            ];\n        }, [null, null]), idx = _a[0], filterFunction = _a[1];\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    };\n    Table.prototype.filter = function (filterFunction) {\n        return this.toCollection().and(filterFunction);\n    };\n    Table.prototype.count = function (thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    };\n    Table.prototype.offset = function (offset) {\n        return this.toCollection().offset(offset);\n    };\n    Table.prototype.limit = function (numRows) {\n        return this.toCollection().limit(numRows);\n    };\n    Table.prototype.each = function (callback) {\n        return this.toCollection().each(callback);\n    };\n    Table.prototype.toArray = function (thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    };\n    Table.prototype.toCollection = function () {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    };\n    Table.prototype.orderBy = function (index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            \"[\" + index.join('+') + \"]\" :\n            index));\n    };\n    Table.prototype.reverse = function () {\n        return this.toCollection().reverse();\n    };\n    Table.prototype.mapToClass = function (constructor) {\n        this.schema.mappedClass = constructor;\n        var readHook = function (obj) {\n            if (!obj)\n                return obj;\n            var res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    };\n    Table.prototype.defineClass = function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        \n        return this.mapToClass(Class);\n    };\n    Table.prototype.add = function (obj, key) {\n        var _this = this;\n        var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n        var objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.update = function (keyOrObject, modifications) {\n        if (typeof modifications !== 'object' || isArray(modifications))\n            throw new exceptions.InvalidArgument(\"Modifications must be an object.\");\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            keys(modifications).forEach(function (keyPath) {\n                setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n            });\n            var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    };\n    Table.prototype.put = function (obj, key) {\n        var _this = this;\n        var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n        var objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.delete = function (key) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.clear = function () {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.bulkGet = function (keys$$1) {\n        var _this = this;\n        return this._trans('readonly', function (trans) {\n            return _this.core.getMany({\n                keys: keys$$1,\n                trans: trans\n            }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n        });\n    };\n    Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n        var _this = this;\n        var keys$$1 = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys$$1 ? undefined : keysOrOptions);\n        var wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', function (trans) {\n            var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            if (keyPath && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            var numObjects = objects.length;\n            var objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return _this.core.mutate({ trans: trans, type: 'add', keys: keys$$1, values: objectsToAdd, wantResults: wantResults })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                var result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n        var _this = this;\n        var keys$$1 = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys$$1 ? undefined : keysOrOptions);\n        var wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', function (trans) {\n            var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            if (keyPath && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            var numObjects = objects.length;\n            var objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return _this.core.mutate({ trans: trans, type: 'put', keys: keys$$1, values: objectsToPut, wantResults: wantResults })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                var result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkDelete = function (keys$$1) {\n        var _this = this;\n        var numKeys = keys$$1.length;\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'delete', keys: keys$$1 });\n        }).then(function (_a) {\n            var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n        });\n    };\n    return Table;\n}());\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype: prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table$$1(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    var index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    var index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans: trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index: index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        var set_1 = {};\n        var union = function (item, cursor, advance) {\n            if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set_1, key)) {\n                    set_1[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(function (cursor) {\n        if (cursor) {\n            return cursor.start(function () {\n                var c = function () { return cursor.continue(); };\n                if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                c();\n            });\n        }\n    });\n}\n\nvar Collection =               (function () {\n    function Collection() {\n    }\n    Collection.prototype._read = function (fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    };\n    Collection.prototype._write = function (fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    };\n    Collection.prototype._addAlgorithm = function (fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    };\n    Collection.prototype._iterate = function (fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    };\n    Collection.prototype.clone = function (props$$1) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props$$1)\n            extend(ctx, props$$1);\n        rv._ctx = ctx;\n        return rv;\n    };\n    Collection.prototype.raw = function () {\n        this._ctx.valueMapper = null;\n        return this;\n    };\n    Collection.prototype.each = function (fn) {\n        var ctx = this._ctx;\n        return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n    };\n    Collection.prototype.count = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            var coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans: trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(function (count) { return Math.min(count, ctx.limit); });\n            }\n            else {\n                var count = 0;\n                return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                    .then(function () { return count; });\n            }\n        }).then(cb);\n    };\n    Collection.prototype.sortBy = function (keyPath, cb) {\n        var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    };\n    Collection.prototype.toArray = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                var valueMapper_1 = ctx.valueMapper;\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return valueMapper_1 ? result.map(valueMapper_1) : result;\n                });\n            }\n            else {\n                var a_1 = [];\n                return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n            }\n        }, cb);\n    };\n    Collection.prototype.offset = function (offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function (cursor, advance) {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(function () {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function () { return (--offsetLeft < 0); };\n            });\n        }\n        return this;\n    };\n    Collection.prototype.limit = function (numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, function () {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    };\n    Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    };\n    Collection.prototype.first = function (cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.last = function (cb) {\n        return this.reverse().first(cb);\n    };\n    Collection.prototype.filter = function (filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    };\n    Collection.prototype.and = function (filter) {\n        return this.filter(filter);\n    };\n    Collection.prototype.or = function (indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    };\n    Collection.prototype.reverse = function () {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    };\n    Collection.prototype.desc = function () {\n        return this.reverse();\n    };\n    Collection.prototype.eachKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    };\n    Collection.prototype.eachUniqueKey = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    };\n    Collection.prototype.eachPrimaryKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    };\n    Collection.prototype.keys = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.primaryKeys = function (cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(function (trans) {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                });\n            }).then(function (_a) {\n                var result = _a.result;\n                return result;\n            }).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.uniqueKeys = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    };\n    Collection.prototype.firstKey = function (cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.lastKey = function (cb) {\n        return this.reverse().firstKey(cb);\n    };\n    Collection.prototype.distinct = function () {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    };\n    Collection.prototype.modify = function (changes) {\n        var _this = this;\n        var ctx = this._ctx;\n        return this._write(function (trans) {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            var coreTable = ctx.table.core;\n            var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n            var limit = 'testmode' in Dexie ? 1 : 2000;\n            var cmp = _this.db.core.cmp;\n            var totalFailures = [];\n            var successCount = 0;\n            var failedKeys = [];\n            var applyMutateResult = function (expectedCount, res) {\n                var failures = res.failures, numFailures = res.numFailures;\n                successCount += expectedCount - numFailures;\n                for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                    var pos = _a[_i];\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return _this.clone().primaryKeys().then(function (keys$$1) {\n                var nextChunk = function (offset) {\n                    var count = Math.min(limit, keys$$1.length - offset);\n                    return coreTable.getMany({ trans: trans, keys: keys$$1.slice(offset, offset + count) }).then(function (values) {\n                        var addValues = [];\n                        var putValues = [];\n                        var putKeys = outbound ? [] : null;\n                        var deleteKeys = [];\n                        for (var i = 0; i < count; ++i) {\n                            var origValue = values[i];\n                            var ctx_1 = {\n                                value: deepClone(origValue),\n                                primKey: keys$$1[offset + i]\n                            };\n                            if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                if (ctx_1.value == null) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                    addValues.push(ctx_1.value);\n                                }\n                                else {\n                                    putValues.push(ctx_1.value);\n                                    if (outbound)\n                                        putKeys.push(keys$$1[offset + i]);\n                                }\n                            }\n                        }\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                .then(function (res) {\n                                for (var pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(function (res) { return putValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'put', keys: putKeys, values: putValues })\n                                .then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return deleteKeys.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'delete', keys: deleteKeys })\n                                .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                            return keys$$1.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(function () {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys$$1.length;\n                });\n            });\n        });\n    };\n    Collection.prototype.delete = function () {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3          ))\n         {\n            return this._write(function (trans) {\n                var primaryKey = ctx.table.core.schema.primaryKey;\n                var coreRange = range;\n                return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                    return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                        .then(function (_a) {\n                        var failures = _a.failures, lastResult = _a.lastResult, results = _a.results, numFailures = _a.numFailures;\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(function (value, ctx) { return ctx.value = null; });\n    };\n    return Collection;\n}());\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection$$1(whereClause, keyRangeGenerator) {\n        this.db = db;\n        var keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        var whereCtx = whereClause._ctx;\n        var table = whereCtx.table;\n        var readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toUpperCase(); } :\n        function (s) { return s.toLowerCase(); };\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toLowerCase(); } :\n        function (s) { return s.toUpperCase(); };\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(function (s) { return typeof s === 'string'; })) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2            ,\n        lower: lower,\n        upper: upper,\n        lowerOpen: lowerOpen,\n        upperOpen: upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1            ,\n        lower: value,\n        upper: value\n    };\n}\n\nvar WhereClause =               (function () {\n    function WhereClause() {\n    }\n    Object.defineProperty(WhereClause.prototype, \"Collection\", {\n        get: function () {\n            return this._ctx.table.db.Collection;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    };\n    WhereClause.prototype.equals = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return rangeEqual(value); });\n    };\n    WhereClause.prototype.above = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, true); });\n    };\n    WhereClause.prototype.aboveOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, false); });\n    };\n    WhereClause.prototype.below = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n    };\n    WhereClause.prototype.belowOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value); });\n    };\n    WhereClause.prototype.startsWith = function (str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    };\n    WhereClause.prototype.startsWithIgnoreCase = function (str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n    };\n    WhereClause.prototype.equalsIgnoreCase = function (str) {\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n    };\n    WhereClause.prototype.anyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n    };\n    WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n    };\n    WhereClause.prototype.anyOf = function () {\n        var _this = this;\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        var compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n        c._ondirectionchange = function (direction) {\n            compare = (direction === \"next\" ?\n                _this._ascending :\n                _this._descending);\n            set.sort(compare);\n        };\n        var i = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(function () { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.notEqual = function (value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.noneOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var ranges = set.reduce(function (res, val) { return res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]]; }, null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.inAnyRange = function (ranges, options) {\n        var _this = this;\n        var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(function (range) {\n            return range[0] !== undefined &&\n                range[1] !== undefined &&\n                ascending(range[0], range[1]) <= 0;\n        })) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        var includeLowers = !options || options.includeLowers !== false;\n        var includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            var i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                var range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        var sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        var set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var rangePos = 0;\n        var keyIsBeyondCurrentEntry = includeUppers ?\n            function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n            function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n        var keyIsBeforeCurrentEntry = includeLowers ?\n            function (key) { return descending(key, set[rangePos][0]) > 0; } :\n            function (key) { return descending(key, set[rangePos][0]) >= 0; };\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        var checkKey = keyIsBeyondCurrentEntry;\n        var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n        c._ondirectionchange = function (direction) {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(function () {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.startsWithAnyOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(function (s) { return typeof s === 'string'; })) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n    };\n    return WhereClause;\n}());\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause$$1(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        var indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI(\"indexedDB API missing\");\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n        this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n        this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\n\nfunction getMaxKey(IdbKeyRange) {\n    try {\n        IdbKeyRange.only([[]]);\n        return [[]];\n    }\n    catch (e) {\n        return maxString;\n    }\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\n\n\n\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nvar Transaction =               (function () {\n    function Transaction() {\n    }\n    Transaction.prototype._lock = function () {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    };\n    Transaction.prototype._unlock = function () {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    };\n    Transaction.prototype._locked = function () {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    };\n    Transaction.prototype.create = function (idbtrans) {\n        var _this = this;\n        if (!this.mode)\n            return this;\n        var idbdb = this.db.idbdb;\n        var dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans || idbdb.transaction(safariMultiStoreFix(this.storeNames), this.mode);\n        idbtrans.onerror = wrap(function (ev) {\n            preventDefault(ev);\n            _this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(function (ev) {\n            preventDefault(ev);\n            _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n            _this.active = false;\n            _this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(function () {\n            _this.active = false;\n            _this._resolve();\n        });\n        return this;\n    };\n    Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n        var _this = this;\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise(function (resolve, reject) {\n                _this._blockedFuncs.push([function () {\n                        _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(function () {\n                var p = new DexiePromise(function (resolve, reject) {\n                    _this._lock();\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(function () { return _this._unlock(); });\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise(function (resolve, reject) {\n                var rv = fn(resolve, reject, _this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    };\n    Transaction.prototype._root = function () {\n        return this.parent ? this.parent._root() : this;\n    };\n    Transaction.prototype.waitFor = function (promiseLike) {\n        var root = this._root();\n        var promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(function () { return promise; });\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise(function (resolve, reject) {\n            promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    };\n    Transaction.prototype.abort = function () {\n        this.active && this._reject(new exceptions.Abort());\n        this.active = false;\n    };\n    Transaction.prototype.table = function (tableName) {\n        var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        var tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    };\n    return Transaction;\n}());\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction$$1(mode, storeNames, dbschema, parent) {\n        var _this = this;\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n        this._completion.then(function () {\n            _this.active = false;\n            _this.on.complete.fire();\n        }, function (e) {\n            var wasActive = _this.active;\n            _this.active = false;\n            _this.on.error.fire(e);\n            _this.parent ?\n                _this.parent._reject(e) :\n                wasActive && _this.idbtrans && _this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name: name,\n        keyPath: keyPath,\n        unique: unique,\n        multi: multi,\n        auto: auto,\n        compound: compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name: name,\n        primKey: primKey,\n        indexes: indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n    };\n}\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return function () { return undefined; };\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    var split = keyPath.split('.');\n    if (split.length === 1) {\n        return function (obj) { return obj[keyPath]; };\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === 'add' ? Promise.resolve(new Array(req.values.length)) :\n        table.getMany({ trans: req.trans, keys: effectiveKeys });\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\n\nvar _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            \"[\" + keyPath.join('+') + \"]\";\n}\nfunction createDBCore(db, indexedDB, IdbKeyRange, tmpTrans) {\n    var cmp = indexedDB.cmp.bind(indexedDB);\n    function extractSchema(db, trans) {\n        var tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                    var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                    var compound = isArray(keyPath);\n                    var outbound = keyPath == null;\n                    var indexByKeyPath = {};\n                    var result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound: outbound,\n                            compound: compound,\n                            keyPath: keyPath,\n                            autoIncrement: autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                            .map(function (index) {\n                            var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                            var compound = isArray(keyPath);\n                            var result = {\n                                name: name,\n                                compound: compound,\n                                keyPath: keyPath,\n                                unique: unique,\n                                multiEntry: multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3          )\n            return null;\n        if (range.type === 4            )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n        var idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        var tableName = tableSchema.name;\n        function mutate(_a) {\n            var trans = _a.trans, type = _a.type, keys$$1 = _a.keys, values = _a.values, range = _a.range, wantResults = _a.wantResults;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var store = trans.objectStore(tableName);\n                var outbound = store.keyPath == null;\n                var isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                var length = (keys$$1 || values || { length: 1 }).length;\n                if (keys$$1 && values && keys$$1.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                var results = wantResults && __spreadArrays((keys$$1 ?\n                    keys$$1 :\n                    getEffectiveKeys(tableSchema.primaryKey, { type: type, keys: keys$$1, values: values })));\n                var req;\n                var failures = [];\n                var numFailures = 0;\n                var errorHandler = function (event) {\n                    ++numFailures;\n                    preventDefault(event);\n                    if (results)\n                        results[event.target._reqno] = undefined;\n                    failures[event.target._reqno] = event.target.error;\n                };\n                var setResult = function (_a) {\n                    var target = _a.target;\n                    results[target._reqno] = target.result;\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4            )\n                        return resolve({ numFailures: numFailures, failures: failures, results: results, lastResult: undefined });\n                    if (range.type === 3          )\n                        req = store.clear();\n                    else\n                        req = store.delete(makeIDBKeyRange(range));\n                }\n                else {\n                    var _a = isAddOrPut ?\n                        outbound ?\n                            [values, keys$$1] :\n                            [values, null] :\n                        [keys$$1, null], args1 = _a[0], args2 = _a[1];\n                    if (isAddOrPut) {\n                        for (var i = 0; i < length; ++i) {\n                            req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i]));\n                            req._reqno = i;\n                            if (results && results[i] === undefined) {\n                                req.onsuccess = setResult;\n                            }\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (var i = 0; i < length; ++i) {\n                            req = store[type](args1[i]);\n                            req._reqno = i;\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                var done = function (event) {\n                    var lastResult = event.target.result;\n                    if (results)\n                        results[length - 1] = lastResult;\n                    resolve({\n                        numFailures: numFailures,\n                        failures: failures,\n                        results: results,\n                        lastResult: lastResult\n                    });\n                };\n                req.onerror = function (event) {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor(_a) {\n            var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var index = query.index, range = query.range;\n                var store = trans.objectStore(tableName);\n                var source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                var direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                var req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(function (ev) {\n                    var cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    var _cursorContinue = cursor.continue.bind(cursor);\n                    var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    var _cursorAdvance = cursor.advance.bind(cursor);\n                    var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                    var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        var _this = this;\n                        var gotOne = 1;\n                        return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                    };\n                    cursor.start = function (callback) {\n                        var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = function (value) {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        var guardedCallback = function () {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(function (ev) {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return function (request) {\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                    var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        var req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        var count_1 = 0;\n                        var req_1 = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        var result_1 = [];\n                        req_1.onsuccess = function (event) {\n                            var cursor = req_1.result;\n                            if (!cursor)\n                                return resolve({ result: result_1 });\n                            result_1.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count_1 === limit)\n                                return resolve({ result: result_1 });\n                            cursor.continue();\n                        };\n                        req_1.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate: mutate,\n            getMany: function (_a) {\n                var trans = _a.trans, keys$$1 = _a.keys;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var length = keys$$1.length;\n                    var result = new Array(length);\n                    var keyCount = 0;\n                    var callbackCount = 0;\n                    var valueCount = 0;\n                    var req;\n                    var successHandler = function (event) {\n                        var req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ++valueCount;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    var errorHandler = eventRejectHandler(reject);\n                    for (var i = 0; i < length; ++i) {\n                        var key = keys$$1[i];\n                        if (key != null) {\n                            req = store.get(keys$$1[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get: function (_a) {\n                var trans = _a.trans, key = _a.key;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var req = store.get(key);\n                    req.onsuccess = function (event) { return resolve(event.target.result); };\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor: openCursor,\n            count: function (_a) {\n                var query = _a.query, trans = _a.trans;\n                var index = query.index, range = query.range;\n                return new Promise(function (resolve, reject) {\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n    var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n    var tableMap = {};\n    tables.forEach(function (table) { return tableMap[table.name] = table; });\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table: function (name) {\n            var result = tableMap[name];\n            if (!result)\n                throw new Error(\"Table '\" + name + \"' not found\");\n            return tableMap[name];\n        },\n        cmp: cmp,\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema: schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce(function (down, _a) {\n        var create = _a.create;\n        return (__assign(__assign({}, down), create(down)));\n    }, stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n    var IDBKeyRange = _a.IDBKeyRange, indexedDB = _a.indexedDB;\n    var dbcore = createMiddlewareStack(createDBCore(idbdb, indexedDB, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore: dbcore\n    };\n}\nfunction generateMiddlewareStacks(db, tmpTrans) {\n    var idbdb = tmpTrans.db;\n    var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(function (table) {\n        var tableName = table.name;\n        if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace(db, objs, tableNames, dbschema) {\n    tableNames.forEach(function (tableName) {\n        var schema = dbschema[tableName];\n        objs.forEach(function (obj) {\n            var propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get: function () { return this.table(tableName); },\n                        set: function (value) {\n                            defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi(db, objs) {\n    objs.forEach(function (obj) {\n        for (var key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    var globalSchema = db._dbSchema;\n    var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    var rejectTransaction = trans._reject.bind(trans);\n    var transless = PSD.transless || PSD;\n    newScope(function () {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(function (tableName) {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n    var queue = [];\n    var versions = db._versions;\n    var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    var anyContentUpgraderHasRun = false;\n    var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n    versToRun.forEach(function (version) {\n        queue.push(function () {\n            var oldSchema = globalSchema;\n            var newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            var diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(function (tuple) {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(function (change) {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    var store_1 = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                    change.change.forEach(function (idx) {\n                        store_1.deleteIndex(idx.name);\n                        addIndex(store_1, idx);\n                    });\n                    change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                }\n            });\n            var contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                var upgradeSchema_1 = shallowClone(newSchema);\n                diff.del.forEach(function (table) {\n                    upgradeSchema_1[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                trans.schema = upgradeSchema_1;\n                var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync_1) {\n                    incrementExpectedAwaits();\n                }\n                var returnValue_1;\n                var promiseFollowed = DexiePromise.follow(function () {\n                    returnValue_1 = contentUpgrade(trans);\n                    if (returnValue_1) {\n                        if (contentUpgradeIsAsync_1) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue_1.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                    DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n            }\n        });\n        queue.push(function (idbtrans) {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(function () {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    var diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    var table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        var oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            var change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                var oldIndexes = oldDef.idxByName;\n                var newIndexes = newDef.idxByName;\n                var idxName = void 0;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(function (idx) { return addIndex(store, idx); });\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(function (tableName) {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    for (var i = 0; i < idbtrans.db.objectStoreNames.length; ++i) {\n        var storeName = idbtrans.db.objectStoreNames[i];\n        if (newSchema[storeName] == null) {\n            idbtrans.db.deleteObjectStore(storeName);\n        }\n    }\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    var globalSchema = {};\n    var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(function (storeName) {\n        var store = tmpTrans.objectStore(storeName);\n        var keyPath = store.keyPath;\n        var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        var indexes = [];\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema(db, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    var diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n}\nfunction adjustToExistingIndexNames(db, schema, idbtrans) {\n    var storeNames = idbtrans.db.objectStoreNames;\n    for (var i = 0; i < storeNames.length; ++i) {\n        var storeName = storeNames[i];\n        var store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var indexName = store.indexNames[j];\n            var keyPath = store.index(indexName).keyPath;\n            var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                var indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n        index = index.trim();\n        var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nvar Version =               (function () {\n    function Version() {\n    }\n    Version.prototype._parseStoresSpec = function (stores, outSchema) {\n        keys(stores).forEach(function (tableName) {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(function (idx) {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    };\n    Version.prototype.stores = function (stores) {\n        var db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        var versions = db._versions;\n        var storesSpec = {};\n        var dbschema = {};\n        versions.forEach(function (version) {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    };\n    Version.prototype.upgrade = function (upgradeFunction) {\n        this._cfg.contentUpgrade = upgradeFunction;\n        return this;\n    };\n    return Version;\n}());\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version$$1(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nvar databaseEnumerator;\nfunction DatabaseEnumerator(indexedDB) {\n    var hasDatabasesNative = indexedDB && typeof indexedDB.databases === 'function';\n    var dbNamesTable;\n    if (!hasDatabasesNative) {\n        var db = new Dexie(DBNAMES_DB, { addons: [] });\n        db.version(1).stores({ dbnames: 'name' });\n        dbNamesTable = db.table('dbnames');\n    }\n    return {\n        getDatabaseNames: function () {\n            return hasDatabasesNative\n                ?\n                    DexiePromise.resolve(indexedDB.databases()).then(function (infos) { return infos\n                        .map(function (info) { return info.name; })\n                        .filter(function (name) { return name !== DBNAMES_DB; }); })\n                :\n                    dbNamesTable.toCollection().primaryKeys();\n        },\n        add: function (name) {\n            return !hasDatabasesNative && name !== DBNAMES_DB && dbNamesTable.put({ name: name }).catch(nop);\n        },\n        remove: function (name) {\n            return !hasDatabasesNative && name !== DBNAMES_DB && dbNamesTable.delete(name).catch(nop);\n        }\n    };\n}\nfunction initDatabaseEnumerator(indexedDB) {\n    try {\n        databaseEnumerator = DatabaseEnumerator(indexedDB);\n    }\n    catch (e) { }\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction dexieOpen(db) {\n    var state = db._state;\n    var indexedDB = db._deps.indexedDB;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db; });\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    var resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null;\n    return DexiePromise.race([state.openCanceller, new DexiePromise(function (resolve, reject) {\n            if (!indexedDB)\n                throw new exceptions.MissingAPI(\"indexedDB API not found. If using IE10+, make sure to run your code on a server URL \" +\n                    \"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.\");\n            var dbName = db.name;\n            var req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI(\"IndexedDB API not available\");\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    db.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                databaseEnumerator.add(dbName);\n                resolve();\n            }, reject);\n        })]).then(function () {\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(db.on.ready.fire)).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                var remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(remainders)).then(fireRemainders);\n            }\n        });\n    }).finally(function () {\n        state.onReadyBeingFired = null;\n    }).then(function () {\n        state.isBeingOpened = false;\n        return db;\n    }).catch(function (err) {\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (e) { }\n        state.isBeingOpened = false;\n        db.close();\n        state.dbOpenError = err;\n        return rejection(state.dbOpenError);\n    }).finally(function () {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return function (val) {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(function () {\n        var transless = PSD.transless || PSD;\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        var zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            trans.create();\n        }\n        var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        var returnValue;\n        var promiseFollowed = DexiePromise.follow(function () {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n            : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(function () { return x; });\n        }).catch(function (e) {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    var result = isArray(a) ? a.slice() : [a];\n    for (var i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return __assign(__assign({}, down), { table: function (tableName) {\n            var table = down.table(tableName);\n            var schema = table.schema;\n            var indexLookup = {};\n            var allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                var keyPathAlias = getKeyPathAlias(keyPath);\n                var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                var isVirtual = keyTail > 0;\n                var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, isPrimaryKey: !isVirtual && lowLevelIndex.isPrimaryKey, keyTail: keyTail,\n                    keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    var virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                return virtualIndex;\n            }\n            var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                var index = _a[_i];\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                var result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1             ?\n                        2             :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                var index = req.query.index;\n                return index.isVirtual ? __assign(__assign({}, req), { query: {\n                        index: index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    } }) : req;\n            }\n            var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                    return table.count(translateRequest(req));\n                },\n                query: function (req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor: function (req) {\n                    var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(pad(cursor.key, req.reverse ? down.MIN_KEY : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        var virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value: function (key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            key: {\n                                get: function () {\n                                    var key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get: function () {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                } });\n            return result;\n        } });\n}\nvar virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nvar hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n            var downTable = downCore.table(tableName);\n            var primaryKey = downTable.schema.primaryKey;\n            var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                    var dxTrans = PSD.trans;\n                    var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        var dxTrans = PSD.trans;\n                        var keys$$1 = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys$$1)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys$$1, wantResults: true }) :\n                         __assign({}, req);\n                        if (req.type !== 'delete')\n                            req.values = __spreadArrays(req.values);\n                        if (req.keys)\n                            req.keys = __spreadArrays(req.keys);\n                        return getExistingValues(downTable, req, keys$$1).then(function (existingValues) {\n                            var contexts = keys$$1.map(function (key, i) {\n                                var existingValue = existingValues[i];\n                                var ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges_1) {\n                                        var requestedValue_1 = req.values[i];\n                                        Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                            if (hasOwn(requestedValue_1, keyPath)) {\n                                                requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(function (_a) {\n                                var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                for (var i = 0; i < keys$$1.length; ++i) {\n                                    var primKey = results ? results[i] : keys$$1[i];\n                                    var ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                            }).catch(function (error) {\n                                contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                            .then(function (_a) {\n                            var result = _a.result;\n                            return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                }\n                            });\n                        });\n                    }\n                } });\n            return tableMiddleware;\n        } })); }\n};\n\nvar Dexie =               (function () {\n    function Dexie(name, options) {\n        var _this = this;\n        this._middlewares = {};\n        this.verno = 0;\n        var deps = Dexie.dependencies;\n        this._options = options = __assign({\n            addons: Dexie.addons, autoOpen: true,\n            indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        var addons = options.addons;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        var state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true\n        };\n        state.dbReadyPromise = new DexiePromise(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n            return function (subscriber, bSticky) {\n                Dexie.vip(function () {\n                    var state = _this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        var db_1 = _this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db_1.on.ready.unsubscribe(subscriber);\n                                db_1.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", function (ev) {\n            if (ev.newVersion > 0)\n                console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n            else\n                console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n            _this.close();\n        });\n        this.on(\"blocked\", function (ev) {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n            else\n                console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, parentTransaction); };\n        this._fireOnBlocked = function (ev) {\n            _this.on(\"blocked\").fire(ev);\n            connections\n                .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        addons.forEach(function (addon) { return addon(_this); });\n    }\n    Dexie.prototype.version = function (versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(\"Given version is not a positive number\");\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        var versions = this._versions;\n        var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    };\n    Dexie.prototype._whenReady = function (fn) {\n        var _this = this;\n        return this._state.openComplete || PSD.letThrough ? fn() : new DexiePromise(function (resolve, reject) {\n            if (!_this._state.isBeingOpened) {\n                if (!_this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                _this.open().catch(nop);\n            }\n            _this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    };\n    Dexie.prototype.use = function (_a) {\n        var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n        if (name)\n            this.unuse({ stack: stack, name: name });\n        var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n        middlewares.sort(function (a, b) { return a.level - b.level; });\n        return this;\n    };\n    Dexie.prototype.unuse = function (_a) {\n        var stack = _a.stack, name = _a.name, create = _a.create;\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                return create ? mw.create !== create :\n                    name ? mw.name !== name :\n                        false;\n            });\n        }\n        return this;\n    };\n    Dexie.prototype.open = function () {\n        return dexieOpen(this);\n    };\n    Dexie.prototype.close = function () {\n        var idx = connections.indexOf(this), state = this._state;\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this.idbdb = null;\n        }\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n        state.dbReadyPromise = new DexiePromise(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n    };\n    Dexie.prototype.delete = function () {\n        var _this = this;\n        var hasArguments = arguments.length > 0;\n        var state = this._state;\n        return new DexiePromise(function (resolve, reject) {\n            var doDelete = function () {\n                _this.close();\n                var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                req.onsuccess = wrap(function () {\n                    databaseEnumerator.remove(_this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = _this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    };\n    Dexie.prototype.backendDB = function () {\n        return this.idbdb;\n    };\n    Dexie.prototype.isOpen = function () {\n        return this.idbdb !== null;\n    };\n    Dexie.prototype.hasBeenClosed = function () {\n        var dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    };\n    Dexie.prototype.hasFailed = function () {\n        return this._state.dbOpenError !== null;\n    };\n    Dexie.prototype.dynamicallyOpened = function () {\n        return this._state.autoSchema;\n    };\n    Object.defineProperty(Dexie.prototype, \"tables\", {\n        get: function () {\n            var _this = this;\n            return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Dexie.prototype.transaction = function () {\n        var args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    };\n    Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n        var _this = this;\n        var parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        var onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        var idbMode, storeNames;\n        try {\n            storeNames = tables.map(function (table) {\n                var storeName = table instanceof _this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(function (storeName) {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                rejection(e);\n        }\n        var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                this._whenReady(enterTransaction));\n    };\n    Dexie.prototype.table = function (tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n        }\n        return this._allTables[tableName];\n    };\n    return Dexie;\n}());\n\nvar Dexie$1 = Dexie;\nprops(Dexie$1, __assign(__assign({}, fullNameExceptions), {\n    delete: function (databaseName) {\n        var db = new Dexie$1(databaseName);\n        return db.delete();\n    },\n    exists: function (name) {\n        return new Dexie$1(name, { addons: [] }).open().then(function (db) {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', function () { return false; });\n    },\n    getDatabaseNames: function (cb) {\n        return databaseEnumerator ?\n            databaseEnumerator.getDatabaseNames().then(cb) :\n            DexiePromise.resolve([]);\n    },\n    defineClass: function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction: function (scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip: vip, async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    }, spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: function () { return PSD.trans || null; }\n    }, waitFor: function (promiseOrFunction, optionalTimeout) {\n        var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie$1.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: function () { return debug; },\n        set: function (value) {\n            setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n        }\n    },\n    derive: derive, extend: extend, props: props, override: override,\n    Events: Events,\n    getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, asap: asap,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: (function () {\n        try {\n            return {\n                indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n                IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n            };\n        }\n        catch (e) {\n            return { indexedDB: null, IDBKeyRange: null };\n        }\n    })(),\n    semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n        .map(function (n) { return parseInt(n); })\n        .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }),\n    default: Dexie$1,\n    Dexie: Dexie$1 }));\nDexie$1.maxKey = getMaxKey(Dexie$1.dependencies.IDBKeyRange);\n\ninitDatabaseEnumerator(Dexie.dependencies.indexedDB);\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport default Dexie;\nexport { Dexie };\n//# sourceMappingURL=dexie.mjs.map\n","export const skillToSlotLevel = {\n  '無し':               0,\n\n  '龍耐性':             1,\n  '氷耐性':             1,\n  '雷耐性':             1,\n  '水耐性':             1,\n  '火耐性':             1,\n  '毒耐性':             1,\n  '麻痺耐性':           1,\n  '睡眠耐性':           1,\n  '爆破やられ耐性':     1,\n  '植生学':             1,\n  '地質学':             1,\n  '飛び込み':           1,\n  '陽動':               1,\n  '泥雪耐性':           1,\n  '満足感':             1,\n  '腹減り耐性':         1,\n  '剥ぎ取り鉄人':       1,\n  '防御':               1,\n  '龍属性攻撃強化':     1,\n  '氷属性攻撃強化':     1,\n  '雷属性攻撃強化':     1,\n  '水属性攻撃強化':     1,\n  '火属性攻撃強化':     1,\n  'ボマー':             1,\n  '滑走強化':           1,\n  '毒属性強化':         1,\n  'スタミナ奪取':       1,\n  '笛吹き名人':         1,\n  '回復速度':           1,\n  '砥石使用高速化':     1,\n  '風圧耐性':           1,\n  'ひるみ軽減':         1,\n  'ブレ抑制':           1,\n  '気絶耐性':           1,\n  '装填速度':           1,\n  '反動軽減':           1,\n\n  '不屈':               2,\n  '乗り名人':           2,\n  '体術':               2,\n  '体力回復量UP':       2,\n  'アイテム使用強化':   2,\n  '翔蟲使い':           2,\n  '壁面移動':           2,\n  '精霊の加護':         2,\n  '早食い':             2,\n  '属性やられ耐性':     2,\n  '破壊王':             2,\n  '広域化':             2,\n  'KO術':               2,\n  '納刀術':             2,\n  '回避性能':           2,\n  '回避距離UP':         2,\n  '抜刀術【力】':       2,\n  '泡沫の舞':           2,\n  '逆襲':               2,\n  '耐震':               2,\n  '鈍器使い':           2,\n  '高速変形':           2,\n  '見切り':             2,\n  '攻撃':               2,\n  '渾身':               2,\n  '強化持続':           2,\n  'スタミナ急速回復':   2,\n  'ガード性能':         2,\n  'ガード強化':         2,\n  '砲弾装填':           2,\n  '特殊射撃強化':       2,\n  '火事場力':           2,\n  '心眼':               2,\n  '集中':               2,\n  'ランナー':           2,\n  '砲術':               2,\n  '会心撃【属性】':     2,\n  '弾導強化':           2,\n  '超会心':             2,\n  '弱点特効':           2,\n  '挑戦者':             2,\n  'フルチャージ':       2,\n  '逆恨み':             2,\n  '死中に活':           2,\n  '力の解放':           2,\n  '麻痺属性強化':       2,\n  '睡眠属性強化':       2,\n  '爆破属性強化':       2,\n  '剛刃研磨':           2,\n  '業物':               2,\n  '弾丸節約':           2,\n  '達人芸':             2,\n\n  '耳栓':               3,\n  '抜刀術【技】':       3,\n  'キノコ大好き':       3,\n  '攻めの守勢':         3,\n  '装填拡張':           3,\n  '通常弾・連射矢強化': 3,\n  '貫通弾・貫通矢強化': 3,\n  '散弾・拡散矢強化':   3,\n  '速射強化':           3,\n  'ジャンプ鉄人':       3,\n  '鬼火纏':             3,\n  '幸運':               3,\n  '匠':                 3,\n}\n","import Dexie from \"dexie\";\n// import {importDB, exportDB} from \"dexie-export-import\";\nimport {skillToSlotLevel} from './mhrise-charm-decorations.js'\n\nexport default class MHRiseCharmManager {\n  MAX_SKILLS = 2\n  MAX_SLOTS  = 3\n\n  db        = null              // WebSQL\n  indexeddb = null              // IndexedDB\n  charms    = null\n\n  charmTableName = 'charms'\n\n\n  constructor(params = {}) {\n    const {isDemoMode} = params\n\n    if ( isDemoMode ) {\n      this.charmTableName = 'demoCharms'\n    }\n\n    this._init()\n  }\n\n\n  sql(query, placeholderValues) {\n    return new Promise((resolve, reject) => {\n      this.db.transaction(\n        tx => tx.executeSql(\n          query,\n          placeholderValues,\n          (tx, result) => resolve({tx, result}),\n          (...args) => reject(args)\n        )\n      )\n    })\n  }\n\n\n  async _init() {\n    this.db = openDatabase('mhrise-charm-manager', '', 'MHRise charm manager', 5000)\n    await this._createTable()\n    await this.sql(`alter table ${this.charmTableName} add column imagename varchar(128)`).catch(() => {}) // for old schema\n\n    this.indexeddb = new Dexie(this.charmTableName)\n    this.indexeddb.version(1).stores({images: 'name'})\n\n    this.updateCharmArray()\n  }\n\n\n  async reset() {\n    await this.sql(`drop table if exists ${this.charmTableName}`)\n    await this._createTable()\n  }\n\n\n  async registerCharms(charms) {\n    const values = charms\n          .map(c => {\n            const slots = Array.isArray(c.slots)      ? c.slots.join(', ')\n                        : typeof c.slots === 'string' ? c.slots.replace(/-/g, ', ')\n                        :                               c.slots\n\n            const image = c.imageName ? `\"${c.imageName}\"` : 'NULL'\n\n            return '(' + [\n              `\"${c.skills[0]}\"`,\n              c.skillLevels[0],\n              `\"${c.skills[1]}\"`,\n              c.skillLevels[1],\n              slots,\n              image,\n            ].join(', ') + ')'\n          })\n          .join(',\\n')\n\n    console.log(values)\n    await this.sql(`insert or ignore into ${this.charmTableName} values ${values}`)\n\n    this.updateCharmArray()\n  }\n\n\n  async searchCharms(query) {\n    const {tx, result} = await this.sql(query)\n    return result.rows\n  }\n\n\n  async _createTable() {\n    await this.sql(`create table if not exists ${this.charmTableName}(\n               skill1      varchar(20),\n               skill1Level int,\n               skill2      varchar(20),\n               skill2Level int,\n               slot1       int,\n               slot2       int,\n               slot3       int,\n               imagename   varchar(128),\n               unique (skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3))`)\n\n    await this.sql(`create index if not exists '${this.charmTableName}.skill1' on ${this.charmTableName}(skill1, skill1Level)`)\n    await this.sql(`create index if not exists '${this.charmTableName}.skill2' on ${this.charmTableName}(skill2, skill2Level)`)\n    await this.sql(`create index if not exists '${this.charmTableName}.slots'  on ${this.charmTableName}(slot1, slot2, slot3)`)\n  }\n\n\n  async getScreenshot(name) {\n    const result = await this.indexeddb.images.get(name)\n    const img = cv.matFromArray(result.rows, result.cols, result.type, result.data)\n\n    return img\n  }\n\n\n  async findSubstitutableCharms(charm) {\n    // interface Charm {\n    //   skills:      string[]\n    //   skillLevels: number[]\n    //   slots:       number[]\n    // }\n    const sl = []\n    const substitutableCharms = []\n\n    for (sl[0] = charm.skillLevels[0]; sl[0] >= 0; sl[0]--) {\n      for (sl[1] = charm.skillLevels[1]; sl[1] >= 0; sl[1]--) {\n        // console.log(sl[0], sl[1])\n        // 装飾品で実現するスキルレベル\n        const skillLevelsRequiredInDecorations = [...Array(this.MAX_SKILLS).keys()].map(i => charm.skillLevels[i] - sl[i])\n\n        // スキル用の要求スロット数\n        const slotRequirementForSkill = skillLevelsRequiredInDecorations.reduce(((a, b) => a + b), 0)\n\n        // 装飾品の要求スロット数 + charm のスロット数 > 3 なら実現不可能\n        if ( slotRequirementForSkill + charm.slots.filter(i => i).length > this.MAX_SLOTS ) {\n          // それ以上 sl (=スキル要求) を減らして探索しても意味がない\n          break\n        }\n\n        const requiredSlots = [\n          ...charm.slots,\n          ...Array.from( {length: skillLevelsRequiredInDecorations[0]}, () => skillToSlotLevel[charm.skills[0]] ),\n          ...Array.from( {length: skillLevelsRequiredInDecorations[1]}, () => skillToSlotLevel[charm.skills[1]] ),\n        ].filter(i => i).sort().reverse()\n\n        // conbination にしないといけない\n        const skill1Constraints = sl[0] ? `(skill1 = '${charm.skills[0]}' and skill1Level >= ${sl[0]})` : ''\n        const skill2Constraints = sl[1] ? `(skill2 = '${charm.skills[1]}' and skill2Level >= ${sl[1]})` : ''\n        const skillConstraints = [skill1Constraints, skill2Constraints].filter(i => i).join(' and ')\n\n        const skill1ConstraintsRev = sl[1] ? `(skill1 = '${charm.skills[1]}' and skill1Level >= ${sl[1]})` : ''\n        const skill2ConstraintsRev = sl[0] ? `(skill2 = '${charm.skills[0]}' and skill2Level >= ${sl[0]})` : ''\n        const skillConstraintsRev  = [skill1ConstraintsRev, skill2ConstraintsRev].filter(i => i).join(' and ')\n\n        const sc = skillConstraints.length\n              ? '(' + [`(${skillConstraints})`, `(${skillConstraintsRev})`].filter(i => i).join(' or ') + ') and '\n              : ''\n\n        const query =`select rowid,* from ${this.charmTableName} where ${sc} slot1 >= ${requiredSlots[0] || 0} and slot2 >= ${requiredSlots[1] || 0} and slot3 >= ${requiredSlots[2] || 0}`\n        // console.log(query)\n        const {result} = await this.sql(query)\n        // console.log(result.rows)\n\n        substitutableCharms.push(\n          ...[...result.rows].filter(i => !this._isSameCharm(this._row2obj(i), charm))\n        )\n        // TODO: 合計スキルレベルの条件 (WebSQL 用) は必要？\n      }\n    }\n\n    return substitutableCharms.sort((a, b) => (a.rowid < b.rowid) ? -1 : (a.rowid > b.rowid) ? 1 : 0)\n  }\n\n\n  async updateCharmArray() {\n    this.charms = [\n      ...(await this.searchCharms(`select rowid,* from ${this.charmTableName}`))\n    ].map(row => {\n      row.evaluation = skillToSlotLevel[row.skill1] * row.skill1Level\n                     + skillToSlotLevel[row.skill2] * row.skill2Level\n                     + row.slot1\n                     + row.slot2\n                     + row.slot3\n      return row\n    })\n\n    this.searchSubstitutableCharms()\n  }\n\n\n  async searchSubstitutableCharms() {\n    while ( typeof Module.getSubstitutesAll !== 'function' ) {\n      await new Promise(r => setTimeout(r, 100))\n    }\n\n    const res = Module.getSubstitutesAll( JSON.stringify(this.charms) ) // use wasm module\n    const substitutes = JSON.parse(res)\n\n    for (const i in this.charms) {\n      const [baseId, upperIds] = substitutes[0] || [Number.MAX_SAFE_INTEGER, []]\n\n      if ( this.charms[i].rowid > baseId ) {\n        console.log('internal error')\n      }\n      else if ( this.charms[i].rowid < baseId ) {\n        this.charms[i].substitutableCharms = []\n      }\n      else {\n        this.charms[i].substitutableCharms = upperIds.map(u => this.charms[u - 1])\n        substitutes.shift()\n      }\n    }\n\n    // for (const [baseId, upperIds] of substitutes) {\n    //   charms[baseId - 1].substitutableCharms = upperIds.map(i => charms[i - 1])\n    // }\n  }\n\n  // async exportIdx() {\n  //   const blob = await exportDB(this.indexeddb, {\n  //     filter: (table) => table === 'images'\n  //   })\n  // }\n\n  // async importIdx() {\n  // }\n\n\n  // TODO: charm class 作ってコンストラクタでやる\n  _row2obj(row) {\n    return {\n      skills:      [row.skill1, row.skill2],\n      skillLevels: [row.skill1Level, row.skill2Level],\n      slots:       [row.slot1, row.slot2, row.slot3],\n    }\n  }\n\n  _isSameCharm(a, b) {\n    return JSON.stringify(a) === JSON.stringify(b)\n  }\n}\n","export function fetchImage(path) {\n  return new Promise((resolve) => {\n    const img = new Image()\n    img.src = path\n\n    img.onload = () => {\n      // console.log(`fetched ${path}`)\n      const imgmat = cv.imread(img)\n\t    resolve(imgmat)\n    }\n  })\n}\n\n\nexport function countImageDiffAtPoint(image, templateImage, point, maskBinaryThreshold, diffBinaryThreshold) {\n  const size = new cv.Size(templateImage.cols, templateImage.rows)\n  const rect = new cv.Rect(point, size)\n  const trimmed = image.roi(rect)\n\n  const templateMask = new cv.Mat()\n  cv.threshold(templateImage, templateMask, maskBinaryThreshold, 255, cv.THRESH_BINARY)\n\n  const masked = new cv.Mat()\n  trimmed.copyTo(masked, templateMask)\n\n  const diff = new cv.Mat()\n  cv.absdiff(templateImage, masked, diff)\n  cv.cvtColor(diff, diff, cv.COLOR_BGR2GRAY)\n\n  const result = new cv.Mat()\n  cv.threshold(diff, result, diffBinaryThreshold, 255, cv.THRESH_BINARY)\n  // // cv::imwrite(\"./tmp/debug.png\", diff); // for debug\n\n  diff.delete()\n  masked.delete()\n  templateMask.delete()\n  trimmed.delete()\n\n  return result;\n}\n\n\nexport function getMostMatchedImage(image, templates, point, maskBinaryThreshold = 63, diffBinaryThreshold = 63, debug = ()=>{}) {\n  let minDiffCount = Number.MAX_SAFE_INTEGER\n  let candidate = null\n\n  // console.log(templates)\n  for (const [name, template] of Object.entries(templates)) {\n    const diff = countImageDiffAtPoint(image, template, point, maskBinaryThreshold, diffBinaryThreshold)\n    debug(diff, name)\n    const diffCount = cv.countNonZero(diff)\n\n    if ( minDiffCount > diffCount ) {\n      minDiffCount = diffCount;\n      candidate = name;\n    }\n\n    diff.delete()\n  }\n\n  return candidate;\n}\n\n\n\nexport function promiseAllRecursive(value) {\n  if (value instanceof Promise) {\n    return value\n  }\n\n  if (Array.isArray(value)) {\n    return Promise.all(value.map(promiseAllRecursive))\n  }\n\n  if (typeof value === 'object') {\n    return resolveObject(value)\n  }\n\n  return Promise.resolve(value)\n}\n\nfunction resolveObject(object) {\n  const promises = Object.keys(object).map(key => {\n    return promiseAllRecursive(object[key]).then(value => ({ key, value }))\n  });\n\n  return Promise.all(promises).then(results => {\n    return results.reduce((obj, pair) => {\n      obj[pair.key] = pair.value\n      return obj\n    }, {})\n  })\n}\n","import Dexie from \"dexie\";\nimport {fetchImage, countImageDiffAtPoint, getMostMatchedImage, promiseAllRecursive} from './util.js'\n\nexport default class MHRiseCharmScanner {\n  MAX_PAGE = 34\n  COLUMNS_PER_PAGE = 10\n  ROWS_PER_PAGE    = 5\n\n  POINT_RARITY       = new cv.Point(1190, 176)\n  POINT_SLOTS        = new cv.Point(1160, 200)\n  POINT_SKILL1       = new cv.Point(1033, 266)\n  POINT_SKILL2       = new cv.Point(1033, 317)\n  POINT_SKILL_LEVEL1 = new cv.Point(1190, 290)\n  POINT_SKILL_LEVEL2 = new cv.Point(1190, 340)\n  POINT_PAGE         = new cv.Point(787, 582)\n\n  POINT_CHARM_AREA_LEFT_TOP = new cv.Point(634, 359)\n  SIZE_CHARM_AREA           = new cv.Size(357, 199)\n\n  indexeddb = null\n  nCharms = 0\n  charms = {}\n  templates = null\n\n  // page = -1\n  // col = -1\n  // row = -1\n\n  async init() {\n    this.templates = {\n      frame: fetchImage('img/templates/frame.png'),\n      rare: {\n        7:                    fetchImage('img/templates/rare/7.jpg'),\n        6:                    fetchImage('img/templates/rare/6.jpg'),\n        5:                    fetchImage('img/templates/rare/5.jpg'),\n        4:                    fetchImage('img/templates/rare/4.jpg'),\n      },\n      lvl: {\n        0:                    fetchImage('img/templates/lvl/0.jpg'),\n        1:                    fetchImage('img/templates/lvl/1.jpg'),\n        2:                    fetchImage('img/templates/lvl/2.jpg'),\n        3:                    fetchImage('img/templates/lvl/3.jpg'),\n        4:                    fetchImage('img/templates/lvl/4.jpg'),\n        5:                    fetchImage('img/templates/lvl/5.jpg'),\n      },\n      slot: {\n        '0-0-0':              fetchImage('img/templates/slot/0.jpg'),\n        '1-0-0':              fetchImage('img/templates/slot/1.jpg'),\n        '1-1-0':              fetchImage('img/templates/slot/11.jpg'),\n        '1-1-1':              fetchImage('img/templates/slot/111.jpg'),\n        '2-0-0':              fetchImage('img/templates/slot/2.jpg'),\n        '2-1-0':              fetchImage('img/templates/slot/21.jpg'),\n        '2-1-1':              fetchImage('img/templates/slot/211.jpg'),\n        '2-2-0':              fetchImage('img/templates/slot/22.jpg'),\n        '2-2-1':              fetchImage('img/templates/slot/221.jpg'),\n        '3-0-0':              fetchImage('img/templates/slot/3.jpg'),\n        '3-1-0':              fetchImage('img/templates/slot/31.jpg'),\n        '3-1-1':              fetchImage('img/templates/slot/311.jpg'),\n        '3-2-0':              fetchImage('img/templates/slot/32.jpg'),\n        '3-2-1':              fetchImage('img/templates/slot/321.jpg'),\n      },\n      skill: {\n        'KO術':               fetchImage('img/templates/skill/KO術.jpg'),\n        '匠':                 fetchImage('img/templates/skill/匠.jpg'),\n        '不屈':               fetchImage('img/templates/skill/不屈.jpg'),\n        '体術':               fetchImage('img/templates/skill/体術.jpg'),\n        '幸運':               fetchImage('img/templates/skill/幸運.jpg'),\n        '心眼':               fetchImage('img/templates/skill/心眼.jpg'),\n        '攻撃':               fetchImage('img/templates/skill/攻撃.jpg'),\n        '業物':               fetchImage('img/templates/skill/業物.jpg'),\n        '渾身':               fetchImage('img/templates/skill/渾身.jpg'),\n        '無し':               fetchImage('img/templates/skill/無し.jpg'),\n        '砲術':               fetchImage('img/templates/skill/砲術.jpg'),\n        '耐震':               fetchImage('img/templates/skill/耐震.jpg'),\n        '耳栓':               fetchImage('img/templates/skill/耳栓.jpg'),\n        '逆襲':               fetchImage('img/templates/skill/逆襲.jpg'),\n        '防御':               fetchImage('img/templates/skill/防御.jpg'),\n        '陽動':               fetchImage('img/templates/skill/陽動.jpg'),\n        '集中':               fetchImage('img/templates/skill/集中.jpg'),\n        'ボマー':             fetchImage('img/templates/skill/ボマー.jpg'),\n        '地質学':             fetchImage('img/templates/skill/地質学.jpg'),\n        '広域化':             fetchImage('img/templates/skill/広域化.jpg'),\n        '挑戦者':             fetchImage('img/templates/skill/挑戦者.jpg'),\n        '早食い':             fetchImage('img/templates/skill/早食い.jpg'),\n        '植生学':             fetchImage('img/templates/skill/植生学.jpg'),\n        '毒耐性':             fetchImage('img/templates/skill/毒耐性.jpg'),\n        '水耐性':             fetchImage('img/templates/skill/水耐性.jpg'),\n        '氷耐性':             fetchImage('img/templates/skill/氷耐性.jpg'),\n        '満足感':             fetchImage('img/templates/skill/満足感.jpg'),\n        '火耐性':             fetchImage('img/templates/skill/火耐性.jpg'),\n        '破壊王':             fetchImage('img/templates/skill/破壊王.jpg'),\n        '納刀術':             fetchImage('img/templates/skill/納刀術.jpg'),\n        '見切り':             fetchImage('img/templates/skill/見切り.jpg'),\n        '超会心':             fetchImage('img/templates/skill/超会心.jpg'),\n        '逆恨み':             fetchImage('img/templates/skill/逆恨み.jpg'),\n        '達人芸':             fetchImage('img/templates/skill/達人芸.jpg'),\n        '雷耐性':             fetchImage('img/templates/skill/雷耐性.jpg'),\n        '鬼火纏':             fetchImage('img/templates/skill/鬼火纏.jpg'),\n        '龍耐性':             fetchImage('img/templates/skill/龍耐性.jpg'),\n        'ブレ抑制':           fetchImage('img/templates/skill/ブレ抑制.jpg'),\n        'ランナー':           fetchImage('img/templates/skill/ランナー.jpg'),\n        '乗り名人':           fetchImage('img/templates/skill/乗り名人.jpg'),\n        '剛刃研磨':           fetchImage('img/templates/skill/剛刃研磨.jpg'),\n        '力の解放':           fetchImage('img/templates/skill/力の解放.jpg'),\n        '反動軽減':           fetchImage('img/templates/skill/反動軽減.jpg'),\n        '回復速度':           fetchImage('img/templates/skill/回復速度.jpg'),\n        '回避性能':           fetchImage('img/templates/skill/回避性能.jpg'),\n        '壁面移動':           fetchImage('img/templates/skill/壁面移動.jpg'),\n        '弱点特効':           fetchImage('img/templates/skill/弱点特効.jpg'),\n        '強化持続':           fetchImage('img/templates/skill/強化持続.jpg'),\n        '弾丸節約':           fetchImage('img/templates/skill/弾丸節約.jpg'),\n        '弾導強化':           fetchImage('img/templates/skill/弾導強化.jpg'),\n        '死中に活':           fetchImage('img/templates/skill/死中に活.jpg'),\n        '気絶耐性':           fetchImage('img/templates/skill/気絶耐性.jpg'),\n        '泡沫の舞':           fetchImage('img/templates/skill/泡沫の舞.jpg'),\n        '泥雪耐性':           fetchImage('img/templates/skill/泥雪耐性.jpg'),\n        '滑走強化':           fetchImage('img/templates/skill/滑走強化.jpg'),\n        '火事場力':           fetchImage('img/templates/skill/火事場力.jpg'),\n        '睡眠耐性':           fetchImage('img/templates/skill/睡眠耐性.jpg'),\n        '砲弾装填':           fetchImage('img/templates/skill/砲弾装填.jpg'),\n        '翔蟲使い':           fetchImage('img/templates/skill/翔蟲使い.jpg'),\n        '装填拡張':           fetchImage('img/templates/skill/装填拡張.jpg'),\n        '装填速度':           fetchImage('img/templates/skill/装填速度.jpg'),\n        '速射強化':           fetchImage('img/templates/skill/速射強化.jpg'),\n        '鈍器使い':           fetchImage('img/templates/skill/鈍器使い.jpg'),\n        '風圧耐性':           fetchImage('img/templates/skill/風圧耐性.jpg'),\n        '飛び込み':           fetchImage('img/templates/skill/飛び込み.jpg'),\n        '高速変形':           fetchImage('img/templates/skill/高速変形.jpg'),\n        '麻痺耐性':           fetchImage('img/templates/skill/麻痺耐性.jpg'),\n        '回避距離UP':         fetchImage('img/templates/skill/回避距離UP.jpg'),\n        'ひるみ軽減':         fetchImage('img/templates/skill/ひるみ軽減.jpg'),\n        'ガード強化':         fetchImage('img/templates/skill/ガード強化.jpg'),\n        'ガード性能':         fetchImage('img/templates/skill/ガード性能.jpg'),\n        '攻めの守勢':         fetchImage('img/templates/skill/攻めの守勢.jpg'),\n        '毒属性強化':         fetchImage('img/templates/skill/毒属性強化.jpg'),\n        '笛吹き名人':         fetchImage('img/templates/skill/笛吹き名人.jpg'),\n        '精霊の加護':         fetchImage('img/templates/skill/精霊の加護.jpg'),\n        '腹減り耐性':         fetchImage('img/templates/skill/腹減り耐性.jpg'),\n        '体力回復量UP':       fetchImage('img/templates/skill/体力回復量UP.jpg'),\n        'キノコ大好き':       fetchImage('img/templates/skill/キノコ大好き.jpg'),\n        'ジャンプ鉄人':       fetchImage('img/templates/skill/ジャンプ鉄人.jpg'),\n        'スタミナ奪取':       fetchImage('img/templates/skill/スタミナ奪取.jpg'),\n        'フルチャージ':       fetchImage('img/templates/skill/フルチャージ.jpg'),\n        '剥ぎ取り鉄人':       fetchImage('img/templates/skill/剥ぎ取り鉄人.jpg'),\n        '抜刀術【力】':       fetchImage('img/templates/skill/抜刀術【力】.jpg'),\n        '抜刀術【技】':       fetchImage('img/templates/skill/抜刀術【技】.jpg'),\n        '爆破属性強化':       fetchImage('img/templates/skill/爆破属性強化.jpg'),\n        '特殊射撃強化':       fetchImage('img/templates/skill/特殊射撃強化.jpg'),\n        '睡眠属性強化':       fetchImage('img/templates/skill/睡眠属性強化.jpg'),\n        '麻痺属性強化':       fetchImage('img/templates/skill/麻痺属性強化.jpg'),\n        '会心撃【属性】':     fetchImage('img/templates/skill/会心撃【属性】.jpg'),\n        '属性やられ耐性':     fetchImage('img/templates/skill/属性やられ耐性.jpg'),\n        '水属性攻撃強化':     fetchImage('img/templates/skill/水属性攻撃強化.jpg'),\n        '氷属性攻撃強化':     fetchImage('img/templates/skill/氷属性攻撃強化.jpg'),\n        '火属性攻撃強化':     fetchImage('img/templates/skill/火属性攻撃強化.jpg'),\n        '爆破やられ耐性':     fetchImage('img/templates/skill/爆破やられ耐性.jpg'),\n        '砥石使用高速化':     fetchImage('img/templates/skill/砥石使用高速化.jpg'),\n        '雷属性攻撃強化':     fetchImage('img/templates/skill/雷属性攻撃強化.jpg'),\n        '龍属性攻撃強化':     fetchImage('img/templates/skill/龍属性攻撃強化.jpg'),\n        'アイテム使用強化':   fetchImage('img/templates/skill/アイテム使用強化.jpg'),\n        'スタミナ急速回復':   fetchImage('img/templates/skill/スタミナ急速回復.jpg'),\n        '散弾・拡散矢強化':   fetchImage('img/templates/skill/散弾・拡散矢強化.jpg'),\n        '貫通弾・貫通矢強化': fetchImage('img/templates/skill/貫通弾・貫通矢強化.jpg'),\n        '通常弾・連射矢強化': fetchImage('img/templates/skill/通常弾・連射矢強化.jpg'),\n      },\n    }\n\n    this.templates.page = {}\n    for (let i = 1; i <= this.MAX_PAGE; i++) {\n      this.templates.page[i] = fetchImage(`img/templates/page/${i}.png`)\n    }\n\n    this.templates = await promiseAllRecursive(this.templates)\n    this.reset()\n\n    this.indexeddb = new Dexie('charms')\n    this.indexeddb.version(1).stores({images: 'name'})\n  }\n\n  reset() {\n    this.nCharms = 0\n    this.charms = {}\n    for (let p = 1; p <= this.MAX_PAGE; p++) {\n      this.charms[p] = {}\n      for (let r = 1; r <= this.ROWS_PER_PAGE; r++) {\n        this.charms[p][r] = {}\n      }\n    }\n  }\n\n  isScaned(page, row, col) {\n    return this.charms[page][row][col] != null\n  }\n\n  store(charmData, metadata) {\n    const {page, row, col} = charmData\n    const {screenshot, movieName} = metadata\n\n    const name = `${movieName}_${page}-${row}-${col}`\n    // console.log({movieName, row, col})\n\n    this.indexeddb.images.put({\n      name,\n      rows: screenshot.rows,\n      cols: screenshot.cols,\n      type: screenshot.type(),\n      data: screenshot.data.slice(0),\n    })\n    this.charms[page][row][col] = {...charmData, imageName: name}\n    this.nCharms++\n  }\n\n  scan(screenshot, movieName) {\n    const page          = this._getCurrentPage(screenshot)\n    const [pos, match]  = this._getCurrentCharmPos(screenshot)\n\n    if ( match < 0.35 ) {\n      // 放置すると blink するので一致度が低い時はスキップ\n      // console.log(`low match degress ${match} for charm position searching. skip`)\n      return null\n    }\n\n    const [col, row]    = pos\n    // this.page = page; this.col = col; this.row = row\n    if (this.isScaned(page, row, col)) {\n      // console.log(`this charm is already scanned. skip: p${page} (${row}, ${col})`);\n      return null\n    }\n\n    const rarity        = this._getRarity(screenshot)\n    const slots         = this._getSlots(screenshot)\n    const skills        = this._getSkills(screenshot)\n    const skillLevels   = this._getSkillLevels(screenshot)\n\n    // console.log(`scaned ${row} ${col}`)\n\n    // console.log({col, row, match, page, rarity, slots, skills, skillLevels})\n    this.store({page, row, col, rarity, slots, skills, skillLevels}, {screenshot, movieName})\n  }\n\n  countCharms() {\n    return this.nCharms\n  }\n\n  generateInsertScript() {\n    const buf = []\n\n    for (let p = 1; p <= this.MAX_PAGE; p++) {\n      for (let r = 1; r <= this.ROWS_PER_PAGE; r++) {\n        for (let c = 1; c <= this.COLUMNS_PER_PAGE; c++) {\n          const charm = this.charms[p][r][c]\n          if ( charm == null ) { continue }\n\n          // console.log(`${charm.slots} ${charm.skills[0]} ${charm.skillLevels[0]} ${charm.skills[1]} ${charm.skillLevels[1]}`)\n          buf.push({\n            \"第一スキル\":         charm.skills[0],\n            \"第一スキルポイント\": charm.skillLevels[0],\n            \"第二スキル\":         charm.skills[1],\n            \"第二スキルポイント\": charm.skillLevels[1],\n            \"スロット\":           charm.slots,\n          })\n        }\n      }\n    }\n\n    return `const inputs = ${JSON.stringify(buf)}\n\neval( await (await fetch('https://code.jquery.com/jquery-3.6.0.slim.min.js')).text() )\n\nfor (const input of inputs) {\n  Object.entries(input).forEach(([key, value]) => {\n    \\$(\\`select[aria-label=\"\\${key}\"]\\`).val(value)\n    \\$(\\`select[aria-label=\"\\${key}\"]\\`)[0].dispatchEvent(new Event('change', { bubbles: true }))\n  })\n\n  \\$('button:contains(\"追加\")').click()\n}`\n  }\n\n  exportAsText() {\n    const buf = []\n\n    for (let p = 1; p <= this.MAX_PAGE; p++) {\n      for (let r = 1; r <= this.ROWS_PER_PAGE; r++) {\n        for (let c = 1; c <= this.COLUMNS_PER_PAGE; c++) {\n          const charm = this.charms[p][r][c]\n          if ( charm == null ) { continue }\n\n          buf.push(`${charm.skills[0]},${charm.skillLevels[0]},${charm.skills[1]},${charm.skillLevels[1]},${charm.slots.replace(/-/g, ',')}`)\n        }\n      }\n    }\n\n    return buf.join('\\n')\n  }\n\n  getCharms() {\n    const buf = []\n\n    for (let p = 1; p <= this.MAX_PAGE; p++) {\n      for (let r = 1; r <= this.ROWS_PER_PAGE; r++) {\n        for (let c = 1; c <= this.COLUMNS_PER_PAGE; c++) {\n          const charm = this.charms[p][r][c]\n          if ( charm == null ) { continue }\n\n          buf.push(charm)\n        }\n      }\n    }\n\n    return buf\n  }\n\n  _getRarity(screenshot) {\n    return getMostMatchedImage(screenshot, this.templates.rare, this.POINT_RARITY, 63, 63)\n  }\n\n  _getSlots(screenshot) {\n    return getMostMatchedImage(screenshot, this.templates.slot, this.POINT_SLOTS, 0, 63)\n  }\n\n  _getSkills(screenshot) {\n    return [\n      getMostMatchedImage(screenshot, this.templates.skill, this.POINT_SKILL1, 0, 63),\n      getMostMatchedImage(screenshot, this.templates.skill, this.POINT_SKILL2, 0, 63),\n    ]\n  }\n\n  _getSkillLevels(screenshot) {\n    // const debug = (this.page === \"1\" && this.row === 1 && this.col === 7)\n    //       ? ((diff, name) => { console.log(`debug${name}`); cv.imshow(document.getElementById(`debug${name}`), diff) })\n    //       : (() => {})\n\n    return [\n      getMostMatchedImage(screenshot, this.templates.lvl, this.POINT_SKILL_LEVEL1, 0, 127),\n      getMostMatchedImage(screenshot, this.templates.lvl, this.POINT_SKILL_LEVEL2, 0, 127),\n    ]\n  }\n\n  _getCurrentPage(screenshot) {\n    return getMostMatchedImage(screenshot, this.templates.page, this.POINT_PAGE, 31, 63)\n  }\n\n\n  _getCurrentCharmPos(screenshot) {\n    const rect = new cv.Rect(this.POINT_CHARM_AREA_LEFT_TOP, this.SIZE_CHARM_AREA)\n    const trimmed = screenshot.roi(rect)\n\n    const result = new cv.Mat()\n    cv.matchTemplate(trimmed, this.templates.frame, result, cv.TM_CCOEFF_NORMED)\n\n    const {maxLoc, maxVal} = cv.minMaxLoc(result)\n    // console.log({maxVal, maxLoc})\n\n    result.delete()\n    trimmed.delete()\n\n    return [\n      [\n        1 + Math.floor(0.5 + maxLoc.x / 36.0),\n        1 + Math.floor(0.5 + maxLoc.y / 41.0),\n      ],\n      maxVal,\n    ]\n  }\n}\n","<script>\n  export let isOpen = false;\n</script>\n\n\n<div class=\"menu toggle-back\">\n  <label>\n    <input type=\"checkbox\" bind:checked={isOpen}>\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"50\" cy=\"50\" r=\"30\" />\n      <path class=\"line--1\" d=\"M0 55l14-10c4.7-3.3 9-5 13-5h72\" />\n      <path class=\"line--2\" d=\"M0 50h99\" />\n      <path class=\"line--3\" d=\"M0 45l14 10c4.7 3.3 9 5 13 5h72\" />\n    </svg>\n  </label>\n</div>\n\n\n<style>\n.menu label {\n  width:  3rem;\n  height: 3rem;\n}\n\n.menu label input {\n  display: none;\n}\n\n.menu label svg circle {\n  fill: #fff3;\n  opacity: 0;\n}\n\n.menu label:hover circle {\n  opacity: 1;\n}\n\n.menu label svg path {\n  fill: none;\n  stroke: #ffffff;\n  stroke-width: 3;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  --length: 24;\n  --offset: -38;\n  stroke-dasharray: var(--length) var(--total-length);\n  stroke-dashoffset: var(--offset);\n  transition: all .2s cubic-bezier(.645, .045, .355, 1);\n}\n\n.menu.toggle-back label input:checked+svg .line--1,\n.menu.toggle-back label input:checked+svg .line--3 {\n  --length: 8.602325267;\n}\n\n.menu svg .line--1,\n.menu svg .line--3 {\n  --total-length: 103.35061645507812;\n  --offset:       -42.35061645507812;\n}\n.menu svg .line--2 {\n  --total-length: 99;\n}\n\n.menu input:checked+svg path {\n  transform: translateX(31px);\n}\n.menu input:checked+svg .line--1,\n.menu input:checked+svg .line--3 {\n  --offset: -8.602325267;\n}\n.menu input:checked+svg .line--2 {\n  --offset: -7;\n}\n</style>\n","<script>\n    import { createEventDispatcher } from 'svelte';\n    const dispatch = createEventDispatcher();\n\n    export let thumbnailClasses = '';\n    export let thumbnailStyle = '';\n    export let protect = false;\n</script>\n\n<div class=\"clickable\" on:click={ () => dispatch('click') }>\n    <div class={thumbnailClasses} style={thumbnailStyle} class:svelte-lightbox-unselectable={protect}>\n        <slot/>\n    </div>\n</div>\n\n<style>\n    div.clickable {\n        position: static;\n        cursor: zoom-in;\n    }\n    div.svelte-lightbox-unselectable {\n        user-select: none;\n        pointer-events: none;\n    }\n</style>","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut } = {}) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script>\n    import { createEventDispatcher } from 'svelte';\n    const dispatch = createEventDispatcher();\n\n    export let size = 'xs';\n    export let style = '';\n    export let headerClasses = '';\n    export let buttonClasses = '';\n</script>\n\n<div class={\"svelte-lightbox-header \" + headerClasses}>\n    <button on:click={ () => dispatch('close')} {size} {style} class={buttonClasses}>\n        ×\n    </button>\n</div>\n\n<style>\n    div.svelte-lightbox-header {\n        width: auto;\n        height: 3rem;\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n    }\n    button {\n        background: transparent;\n        font-size: 3rem;\n        border: none;\n        color: white;\n    }\n    button:hover {\n        color: lightgray;\n        cursor: pointer;\n    }\n</style>\n","<script>\n    export let image = {};\n    export let protect = false;\n    export let portrait = false;\n</script>\n\n<div class=\"svelte-lightbox-body\" class:svelte-lightbox-unselectable={protect}>\n    {#if image.src}\n        <img src={image.src} alt={image.alt} style={image.style} class={image.class}>\n    {:else}\n        <div class:svelte-lightbox-image-portrait={portrait}>\n            <slot />\n        </div>\n    {/if}\n</div>\n\n<style>\n    div.svelte-lightbox-body {\n        background-color: transparent;\n        width: auto;\n        height: auto;\n        max-height: 80vh;\n    }\n    div.svelte-lightbox-unselectable {\n        user-select: none;\n        pointer-events: none;\n    }\n    div.svelte-lightbox-image-portrait{\n        max-width: 90vh;\n    }\n</style>","<script>\n    export let title = '';\n    export let description = '';\n    export let galleryLength;\n    export let activeImage;\n\n    export let classes = '';\n    export let style = '';\n</script>\n\n<div class={\"svelte-lightbox-footer \" + classes} {style}>\n    <h2>\n        {@html title}\n    </h2>\n    <h5>\n        {@html description}\n    </h5>\n    {#if galleryLength}\n        <p>\n            Image {activeImage+1} of {galleryLength}\n        </p>\n    {/if}\n</div>\n\n<style>\n    div.svelte-lightbox-footer {\n        background-color: transparent;\n        color: white;\n        text-align: left;\n        width: inherit;\n        height: auto;\n    }\n</style>","<script>\n    import {fade} from 'svelte/transition';\n    import { createEventDispatcher } from 'svelte';\n    const dispatch = createEventDispatcher();\n\n    import Header from './LightboxHeader.svelte';\n    import Body from './LightboxBody.svelte';\n    import Footer from './LightboxFooter.svelte';\n\n    export let modalClasses = '';\n    export let modalStyle = '';\n    export let transitionDuration = 500;\n    export let image = {};\n    export let protect = false;\n    export let portrait = false;\n    export let title = '';\n    export let description = '';\n    export let gallery;\n    export let activeImage;\n    let actualTitle;\n    let actualDescription;\n\n    //let allModalClasses = modalClasses;\n    $: allModalClasses = `${modalClasses} svelte-lightbox-overlay clearfix`;\n    $: actualTitle = title;\n    $: actualDescription = description;\n\n    $: if (gallery && !title && !description) {\n            actualTitle = gallery[activeImage].title;\n            actualDescription = gallery[activeImage].description;\n    }\n\n</script>\n\n<div class=\"cover clearfix\">\n\n    <div class={allModalClasses} style={modalStyle} transition:fade={{duration:transitionDuration}} on:click={ () => dispatch('topModalClick') }>\n\n        <div class=\"svelte-lightbox\" on:click={ () => dispatch('modalClick') }>\n\n            <Header on:close={ () => dispatch('close') }/>\n\n            <Body bind:image={image} bind:protect={protect} bind:portrait={portrait}>\n                <slot/>\n            </Body>\n\n\n            <Footer bind:title={actualTitle} bind:description={actualDescription} bind:galleryLength={gallery.length}\n                    bind:activeImage={activeImage}/>\n\n        </div>\n\n    </div>\n\n</div>\n\n\n<style>\n    .cover {\n        position: fixed;\n        z-index: 1000000!important;\n        background-color: rgba(43, 39, 45, 0.87);\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n    }\n    .svelte-lightbox-overlay {\n        position: relative;\n        z-index: 1000001;\n        height: 100%;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 1rem;\n    }\n    .cover:before {\n         content: '';\n         position: absolute;\n         top: 0; bottom: 0; left: 0; right: 0;\n         opacity: 0;\n         z-index: -1;\n     }\n    .svelte-lightbox {\n        position: absolute;\n        background-color: transparent;\n        width: auto;\n        height: auto;\n        max-width: 90%;\n        max-height: 90%;\n        z-index: 1000002;\n    }\n    .clearfix::after {\n        content: \"\";\n        clear: both;\n        display: table;\n    }\n\n    /* I need help with styling this */\n</style>\n","<script>\n    export let activeImage = 0;\n    let slotContent;\n    let images;\n\n    $: images = slotContent?.children\n    $: {\n        console.log(typeof images)\n        if (images && activeImage < images.length) {\n            Object.values(images).forEach(img=>{\n                img.hidden = true;\n                return img\n            })\n            images[activeImage].hidden = false;\n        } else if (images && activeImage >= images.length) {\n            console.error(\"LightboxGallery: Selected image doesn't exist, invalid activeImage\")\n        }\n    }\n\n    const previousImage = () => {\n        activeImage--\n    }\n\n    const nextImage = () => {\n        activeImage++\n    }\n\n</script>\n\n<div class=\"wrapper\">\n    <button on:click={previousImage} disabled={activeImage === 0} class=\"previous-button\">\n        <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path class=\"arrow\" d=\"M8.7,7.22,4.59,11.33a1,1,0,0,0,0,1.41l4,4\"/>\n            </g>\n        </svg>\n    </button>\n\n    <div bind:this={slotContent} class=\"slot\">\n        <slot>\n        </slot>\n    </div>\n\n    <button on:click={nextImage} disabled={activeImage === images?.length-1} class=\"next-button\">\n        <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path class=\"arrow\" d=\"M15.3,16.78l4.11-4.11a1,1,0,0,0,0-1.41l-4-4\"/>\n            </g>\n        </svg>\n    </button>\n</div>\n\n\n<style>\n    .arrow{\n        fill:none;\n        stroke: black;\n        stroke-linecap:round;\n        stroke-linejoin:bevel;\n        stroke-width:1.5px;\n        margin: 10px;\n    }\n    button {\n        background: transparent;\n        color: black;\n        border: none;\n        font-size: 1rem;\n        width: 50%;\n        height: 100%;\n    }\n    button:active {\n        background: transparent;\n    }\n    button:disabled {\n        color: gray;\n    }\n    .wrapper {\n        position: relative;\n        display: flex;\n        width: auto;\n        height: auto;\n    }\n    .previous-button {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 50%;\n        z-index: 4;\n        text-align: left;\n    }\n    .slot {\n        order: 1;\n    }\n    .next-button {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 4;\n        text-align: right;\n    }\n    svg {\n        height: 5rem;\n    }\n</style>","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","<script>\n    import Thumbnail from './LightboxThumbnail.svelte';\n    import Modal from './Modal/Index.svelte';\n    import InternalGallery from './Gallery/InternalGallery.svelte';\n    import {onMount} from 'svelte';\n    import {writable} from \"svelte/store\";\n    import ExternalGallery from \"./Gallery/ExternalGallery.svelte\";\n\n    //exporting classes, for passing classes into thumbnail\n    export let thumbnailClasses = '';\n    export let thumbnailStyle = '';\n    //exporting classes, for passing classes into wrapper\n    export let modalClasses = '';\n    export let modalStyle = '';\n    //number that hold which image is active\n    export let activeImage = 0;\n    //array with image descriptions\n    export let gallery = false;\n    export let title = '';\n    export let description = '';\n    //exporting duration of fade transition\n    export let transitionDuration = 500;\n    //bool that enables drag n drop protection\n    export let protect = false;\n    //enables other image than in slot\n    export let image = {};\n    //enables portrait mode\n    export let portrait = false;\n    //disables scrolling <body>\n    export let noScroll = true;\n    export let thumbnail = false;\n\n    let visible = false;\n\n    const toggle = () => {\n        visible = !visible;\n        if (noScroll) {\n            mountedT()\n        }\n    };\n    let mountedT = () => {\n    };\n\n    onMount(() => {\n        let defaultOverflow = document.body.style.overflow;\n        mountedT = () => {\n            if (visible) {\n                document.body.style.overflow = 'hidden';\n            } else {\n                document.body.style.overflow = defaultOverflow;\n            }\n        };\n    })\n\n  const handleKeyDown = (e) => {\n    if (e.code === 'Escape') { visible = false }\n  }\n</script>\n\n<svelte:window on:keydown={handleKeyDown}/>\n\n<Thumbnail bind:thumbnailClasses bind:thumbnailStyle bind:protect on:click={toggle}>\n    {#if thumbnail || gallery}\n        <slot name=\"thumbnail\"/>\n    {:else}\n        <slot/>\n    {/if}\n</Thumbnail>\n\n{#if visible}\n    <Modal bind:modalClasses bind:modalStyle bind:transitionDuration bind:image bind:protect\n           bind:portrait bind:title bind:description bind:gallery bind:activeImage\n           on:close={toggle} on:topModalClick={toggle} on:modalClick={toggle}>\n        {#if thumbnail}\n            <slot name=\"image\"/>\n        {:else if gallery}\n            <InternalGallery bind:activeImage>\n                <slot name=\"thumbnail\"/>\n                <slot>\n                </slot>\n            </InternalGallery>\n        {:else}\n            <slot/>\n        {/if}\n    </Modal>\n{/if}\n","export function clean($$props, extra_keys) {\n  let keys = [\"children\", \"$$scope\", \"$$slots\"].concat(extra_keys)\n  const rest = {};\n  for (const key of Object.keys($$props)) {\n    if (!(keys.includes(key))) {\n      rest[key] = $$props[key];\n    }\n  }\n  return rest;\n}\n\nexport function getOriginalBodyPadding() {\n  const style = window ? window.getComputedStyle(document.body, null) : {};\n\n  return parseInt((style && style.getPropertyValue('padding-right')) || 0, 10);\n}\n\nexport function getScrollbarWidth() {\n  let scrollDiv = document.createElement('div');\n  // .modal-scrollbar-measure styles // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.4/scss/_modal.scss#L106-L113\n  scrollDiv.style.position = 'absolute';\n  scrollDiv.style.top = '-9999px';\n  scrollDiv.style.width = '50px';\n  scrollDiv.style.height = '50px';\n  scrollDiv.style.overflow = 'scroll';\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return scrollbarWidth;\n}\n\nexport function setScrollbarWidth(padding) {\n  document.body.style.paddingRight = padding > 0 ? `${padding}px` : null;\n}\n\nexport function isBodyOverflowing() {\n  return window ? document.body.clientWidth < window.innerWidth : false;\n}\n\nexport function isObject(value) {\n  const type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport function conditionallyUpdateScrollbar() {\n  const scrollbarWidth = getScrollbarWidth();\n  // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.6/js/src/modal.js#L433\n  const fixedContent = document.querySelectorAll(\n    '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\n  )[0];\n  const bodyPadding = fixedContent\n    ? parseInt(fixedContent.style.paddingRight || 0, 10)\n    : 0;\n\n  if (isBodyOverflowing()) {\n    setScrollbarWidth(bodyPadding + scrollbarWidth);\n  }\n}\n\nexport function getColumnSizeClass(isXs, colWidth, colSize) {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : `col-${colWidth}`;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : `col-${colWidth}-auto`;\n  }\n\n  return isXs ? `col-${colSize}` : `col-${colWidth}-${colSize}`;\n}\n\nexport function browserEvent(target, ...args) {\n  target.addEventListener(...args);\n\n  return () => target.removeEventListener(...args);\n}\n\nexport function getNewCarouselActiveIndex(direction, items, activeIndex) {\n  if (direction === 'prev') {\n    return activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n  } else if (direction === 'next') {\n    return activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n  }\n}\n\nfunction toVal(mix) {\n  var k, y, str = '';\n  if (mix) {\n    if (typeof mix === 'object') {\n      if (Array.isArray(mix)) {\n        for (k = 0; k < mix.length; k++) {\n          if (mix[k] && (y = toVal(mix[k]))) {\n            str && (str += ' ');\n            str += y;\n          }\n        }\n      } else {\n        for (k in mix) {\n          if (mix[k] && (y = toVal(k))) {\n            str && (str += ' ');\n            str += y;\n          }\n        }\n      }\n    } else if (typeof mix !== 'boolean' && !mix.call) {\n      str && (str += ' ');\n      str += mix;\n    }\n  }\n  return str;\n}\n\nexport function clsx() {\n  let i = 0, x, str = '';\n  while (i < arguments.length) {\n    if (x = toVal(arguments[i++])) {\n      str && (str += ' ');\n      str += x\n    }\n  }\n  return str;\n}\n\nexport function fragment(node) {\n  node.parentElement.appendChild(document.adoptNode(node).content);\n}\n\nimport {bubble, listen} from 'svelte/internal';\n\nexport function forwardEventsBuilder(component, additionalEvents = []) {\n  const events = [\n    'focus', 'blur', 'change', 'input', 'update','submit',\n    'fullscreenchange', 'fullscreenerror', 'scroll',\n    'cut', 'copy', 'paste',\n    'keydown', 'keypress', 'keyup',\n    'auxclick', 'click', 'contextmenu', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseover', 'mouseout', 'mouseup', 'pointerlockchange', 'pointerlockerror', 'select', 'wheel',\n    'drag', 'dragend', 'dragenter', 'dragstart', 'dragleave', 'dragover', 'drop',\n    'touchcancel', 'touchend', 'touchmove', 'touchstart',\n    'pointerover', 'pointerenter', 'pointerdown', 'pointermove', 'pointerup', 'pointercancel', 'pointerout', 'pointerleave', 'gotpointercapture', 'lostpointercapture',\n    ...additionalEvents\n  ];\n\n  function forward(e) {\n    bubble(component, e);\n  }\n\n  return node => {\n    const destructors = [];\n\n    for (let i = 0; i < events.length; i++) {\n      destructors.push(listen(node, events[i], forward));\n    }\n\n    return {\n      destroy: () => {\n        for (let i = 0; i < destructors.length; i++) {\n          destructors[i]();\n        }\n      }\n    }\n  };\n}\n\nexport const getColorClass = color => {\n  const colorArray = color.split(' ');\n  const specialColors = [\n    'danger',\n    'warning',\n    'success',\n    'info',\n    'default',\n    'primary',\n    'secondary',\n    'elegant',\n    'stylish',\n    'unique',\n    'special'\n  ];\n  let colorClasses = '';\n\n  colorArray.forEach(color => {\n    if (specialColors.includes(color)) {\n      if (color.includes('dark')) {\n        color.replace('-', '-color-');\n        colorClasses += `${color} `;\n      } else {\n        colorClasses += `${color}-color`;\n      }\n    } else {\n      colorClasses += `${color} `;\n    }\n  });\n\n  return colorClasses;\n};\n","<script>\n\n  import {clean, clsx ,forwardEventsBuilder} from './utils';\n  import {current_component} from 'svelte/internal';\n  const forwardEvents = forwardEventsBuilder(current_component);\nlet className = '';\n  export {className as class};\n  export let active = false;\n  export let block = false;\n  export let children = undefined;\n  export let close = false;\n  export let color;\n  export let disabled = false;\n  export let type = \"button\";\n  export let href = '';\n  export let outline = false;\n  export let size = '';\n  export let style = '';\n  export let value = '';\n  export let gradient;\n  let domElement;\n  export let rounded;\n\n  if(rounded){\n    style=\"border-radius: 10em\"+style\n  }\n\n  if (!color) {\n    href ? color = \"primary\" : color = 'default';\n  }\n\n  const props = clean($$props, [\"color\", \"gradient\", \"value\", \"style\", \"size\"]);\n\n\n  $: ariaLabel = $$props['aria-label'];\n\n  $: classes = clsx(\n    className,\n    {close},\n    close || 'btn waves-effect waves-light',\n    gradient ? `${gradient}-gradient` : close || `btn${outline ? '-outline' : ''}-${color}`,\n    size ? `btn-${size}` : false,\n    block ? 'btn-block' : false,\n    {active},\n  );\n\n  $: defaultAriaLabel = close ? 'Close' : null;\n</script>\n\n{#if href}\n  <a\n    use:forwardEvents {...props}\n    class={classes}\n    {disabled}\n    {href}\n    aria-label={ariaLabel || defaultAriaLabel}\n    {style}>\n    {#if children}\n      {children}\n    {:else}\n      <slot/>\n    {/if}\n  </a>\n{:else}\n  <button\n    use:forwardEvents {...props}\n    type={type}\n    class={classes}\n    {disabled}\n    {value}\n    aria-label={ariaLabel || defaultAriaLabel}\n    {style}\n    bind:this={domElement}\n  >\n    <slot>\n      {#if close}\n        <span aria-hidden=\"true\">×</span>\n      {:else if children}\n        {children}\n      {:else}\n        <slot/>\n      {/if}\n    </slot>\n  </button>\n{/if}\n","<script>\n  import {clean, clsx ,forwardEventsBuilder} from './utils';\n  import {current_component} from 'svelte/internal';\n  const forwardEvents = forwardEventsBuilder(current_component);\nlet className = '';\n  const props = clean($$props, []);\n  export let size;\n  export let vertical;\n\n  let elementClasses = [vertical ? \"btn-group-vertical\" : \"btn-group\"];\n\n  if (className) {\n    elementClasses.push(className)\n  }\n\n  if (size) {\n    elementClasses.push(`btn-group-${size}`)\n  }\n\n</script>\n\n<div use:forwardEvents {...props} role=\"group\" class={elementClasses.join(' ')}>\n  <slot/>\n</div>\n","<script context=\"module\">\n  let openCount = 0;\n</script>\n<script>\n  import {onDestroy, onMount, afterUpdate} from 'svelte';\n  import {fade as fadeTransition, fly as flyTransition} from 'svelte/transition';\n\n  import {\n    conditionallyUpdateScrollbar,\n    getOriginalBodyPadding,\n    setScrollbarWidth,\n    clean, browserEvent, clsx, forwardEventsBuilder\n  } from './utils';\n\n  import {current_component} from 'svelte/internal';\n\n  const forwardEvents = forwardEventsBuilder(current_component);\n\n  let className = '';\n  export {className as class};\n  export let isOpen;\n  export let autoFocus = true;\n  export let centered = false;\n  export let duration = 500;\n  export let backdropDuration = duration;\n  export let scrollable = false;\n  export let size = '';\n  export let toggle = undefined;\n  export let labelledBy = '';\n  export let backdrop = true;\n  export let onEnter = undefined;\n  export let onExit = undefined;\n  export let onOpened = () => {\n  };\n  export let onClosed = () => {\n  };\n  export let wrapClassName = '';\n  export let modalClassName = '';\n  export let backdropClassName = '';\n  export let contentClassName = '';\n  export let fade = true;\n  export let zIndex = 1050;\n  export let unmountOnClose = true;\n  export let returnFocusAfterClose = true;\n  export let displacementX = 0;\n  export let displacementY = -300;\n  export let side;\n  export let position = '';\n  export let fullHeight;\n  export let frame;\n  const props = clean($$props, [\"isOpen\", \"autoFocus\", \"centered\", \"duration\", \"backdropDuration\", \"scrollable\",\n    \"size\", \"toggle\", \"labelledBy\", \"toggle\", \"onEnter\", \"onExit\", \"onOpened\", \"onClosed\", \"wrapClassName\",\n    \"modalClassName\", \"backdropClassName\", \"contentClassName\", \"fade\", \"zIndex\", \"unmountOnClose\",\n    \"returnFocusAfterClose\", \"side\", \"position\", \"frame\", \"backdrop\"]);\n\n  let hasOpened = false;\n  let _isMounted = false;\n  let _triggeringElement;\n  let _originalBodyPadding;\n  let _lastIsOpen = isOpen;\n  let _lastHasOpened = hasOpened;\n  let _dialog;\n  let _mouseDownElement;\n  let _removeEscListener;\n  let modalClasses;\n\n  onMount(() => {\n    if (isOpen) {\n      init();\n      hasOpened = true;\n    }\n\n    if (typeof onEnter === 'function') {\n      onEnter();\n    }\n\n    if (hasOpened && autoFocus) {\n      setFocus();\n    }\n  });\n\n  onDestroy(() => {\n    if (typeof onExit === 'function') {\n      onExit();\n    }\n\n    destroy();\n    if (hasOpened) {\n      close();\n    }\n  });\n\n  afterUpdate(() => {\n    if (isOpen && !_lastIsOpen) {\n      init();\n      hasOpened = true;\n    }\n\n    if (autoFocus && hasOpened && !_lastHasOpened) {\n      setFocus();\n    }\n\n    _lastIsOpen = isOpen;\n    _lastHasOpened = hasOpened;\n  });\n\n  function setFocus() {\n    if (\n      _dialog &&\n      _dialog.parentNode &&\n      typeof _dialog.parentNode.focus === 'function'\n    ) {\n      _dialog.parentNode.focus();\n    }\n  }\n\n  function init() {\n    try {\n      _triggeringElement = document.activeElement;\n    } catch (err) {\n      _triggeringElement = null;\n    }\n\n    _originalBodyPadding = getOriginalBodyPadding();\n    conditionallyUpdateScrollbar();\n    if (openCount === 0) {\n      document.body.className = clsx(document.body.className, 'modal-open');\n    }\n\n    ++openCount;\n    _isMounted = true;\n  }\n\n  function manageFocusAfterClose() {\n    if (_triggeringElement) {\n      if (\n        typeof _triggeringElement.focus === 'function' &&\n        returnFocusAfterClose\n      ) {\n        _triggeringElement.focus();\n      }\n\n      _triggeringElement = null;\n    }\n  }\n\n  function destroy() {\n    manageFocusAfterClose();\n  }\n\n  function close() {\n    if (openCount <= 1) {\n      const modalOpenClassName = 'modal-open';\n      const modalOpenClassNameRegex = new RegExp(\n        `(^| )${modalOpenClassName}( |$)`\n      );\n      document.body.className = document.body.className\n        .replace(modalOpenClassNameRegex, ' ')\n        .trim();\n    }\n\n    manageFocusAfterClose();\n    openCount = Math.max(0, openCount - 1);\n\n    setScrollbarWidth(_originalBodyPadding);\n  }\n\n  function handleBackdropClick(e) {\n    if (e.target === _mouseDownElement) {\n      e.stopPropagation();\n      if (!isOpen || !backdrop) {\n        return;\n      }\n\n      const backdropElem = _dialog ? _dialog.parentNode : null;\n      if (backdropElem && e.target === backdropElem && toggle) {\n        toggle(e);\n      }\n    }\n  }\n\n  function onModalOpened() {\n    _removeEscListener = browserEvent(document, 'keydown', event => {\n      if (event.key && event.key === 'Escape') {\n        toggle(event);\n      }\n    });\n\n    onOpened();\n  }\n\n  function onModalClosed() {\n    onClosed();\n\n    if (_removeEscListener) {\n      _removeEscListener();\n    }\n\n    if (unmountOnClose) {\n      destroy();\n    }\n    close();\n    if (_isMounted) {\n      hasOpened = false;\n    }\n    _isMounted = false;\n  }\n\n  function handleBackdropMouseDown(e) {\n    _mouseDownElement = e.target;\n  }\n\n  const dialogBaseClass = 'modal-dialog';\n\n  $: classes = clsx(dialogBaseClass, className,\n    {\n      [`modal-${size}`]: size,\n      [`${dialogBaseClass}-centered`]: centered,\n      [`${dialogBaseClass}-scrollable`]: scrollable,\n      'modal-side': side,\n      'modal-full-height': fullHeight,\n      'modal-frame': frame,\n      [`modal-${position}`]: position\n    });\n\n  if (position.indexOf(\"right\") !== -1) {\n    displacementX = 300;\n    if (fullHeight) displacementY = 0\n  }\n\n  if (position.indexOf(\"left\") !== -1) {\n    displacementX = -300;\n    if (fullHeight) displacementY = 0\n  }\n\n\n  if (position.indexOf(\"top\") !== -1) {\n    displacementY = -300;\n    if (fullHeight) displacementX = 0\n  }\n\n  if (position.indexOf(\"bottom\") !== -1) {\n    displacementY = 300;\n    if (fullHeight) displacementX = 0\n  }\n\n  modalClasses = clsx('modal', 'show', modalClassName);\n\n</script>\n\n{#if _isMounted && isOpen}\n  <div\n    transition:flyTransition={{ x: displacementX,y:displacementY, duration: fade && duration }}\n    ariaLabelledby={labelledBy}\n    class={modalClasses}\n    role=\"dialog\"\n    style=\"display: block;\"\n    on:introend={onModalOpened}\n    on:outroend={onModalClosed}\n    on:click={handleBackdropClick}\n    on:mousedown={handleBackdropMouseDown}>\n    <div class={classes} role=\"document\" bind:this={_dialog}>\n      <div class={clsx('modal-content', contentClassName)}>\n        <slot name=\"external\"/>\n        <slot/>\n      </div>\n    </div>\n  </div>\n  <div\n    transition:fadeTransition={{ duration: fade && backdropDuration }}\n    class={clsx({'modal-backdrop': backdrop}, 'show', backdropClassName)}/>\n{/if}\n","<script>\n  import { clean,clsx,forwardEventsBuilder } from './utils';\n  import {current_component} from 'svelte/internal';\n  const forwardEvents = forwardEventsBuilder(current_component);\n\n  let className = '';\n  export { className as class };\n\n  const props = clean($$props);\n\n  $: classes = clsx(className, 'modal-body');\n</script>\n\n<div use:forwardEvents {...props} class={classes}>\n  <slot />\n</div>\n","<script>\n  import {clean, clsx, forwardEventsBuilder} from './utils';\n  import {current_component} from 'svelte/internal';\n\n  const forwardEvents = forwardEventsBuilder(current_component);\n\n  let className = '';\n  export {className as class};\n  export let toggle = undefined;\n  export let closeAriaLabel = 'Close';\n  export let charCode = 215;\n  export let children = undefined;\n\n  const props = clean($$props);\n\n  $: closeIcon =\n    typeof charCode === 'number' ? String.fromCharCode(charCode) : charCode;\n\n  $: classes = clsx(className, 'modal-header');\n</script>\n\n<div use:forwardEvents {...props} class={classes}>\n  <h5 class=\"modal-title\">\n    {#if children}\n      {children}\n    {:else}\n      <slot/>\n    {/if}\n  </h5>\n  <slot name=\"close\">\n    {#if typeof toggle === 'function'}\n      <button\n        type=\"button\"\n        on:click={toggle}\n        class=\"close\"\n        aria-label={closeAriaLabel}>\n        <span aria-hidden=\"true\">{closeIcon}</span>\n      </button>\n    {/if}\n  </slot>\n</div>\n","<script>\n  import {clean, clsx, forwardEventsBuilder} from './utils';\n  import {current_component} from 'svelte/internal';\n  const forwardEvents = forwardEventsBuilder(current_component);\n\n  let className = '';\n  export {className as class};\n\n  const props = clean($$props);\n\n  $: classes = clsx(className, 'modal-footer');\n</script>\n\n<div use:forwardEvents {...props} class={classes}>\n  <slot/>\n</div>\n","<script lang=\"ts\">\n  interface ConfirmParams {\n    message?:         string\n    colorOkayButton?: string\n    labelOkayButton?: string\n    onOkay?:          (label: string) => void\n    onCancel?:        () => void\n  }\n\n  import MDBBtn         from 'mdbsvelte/src/MDBBtn.svelte'\n  import MDBModal       from 'mdbsvelte/src/MDBModal.svelte'\n  import MDBModalBody   from 'mdbsvelte/src/MDBModalBody.svelte'\n  import MDBModalHeader from 'mdbsvelte/src/MDBModalHeader.svelte'\n  import MDBModalFooter from 'mdbsvelte/src/MDBModalFooter.svelte'\n\n  let message\n  let onOkay\n  let onCancel\n  let colorOkayButton = 'primary'\n  let labelOkayButton = 'OK'\n\n  let isOpen = false;\n\n  export const confirm = (params: ConfirmParams) => {\n    return new Promise((resolve, reject) => {\n      message         = params.message         || ''\n      colorOkayButton = params.colorOkayButton || 'primary'\n      labelOkayButton = params.labelOkayButton || 'OK'\n\n      onOkay   = (label: string) => {\n        (params.onOkay   || ((label: string) => {}))(label)\n        resolve(true)\n      }\n      onCancel = () => {\n        (params.onCancel || (() => {}))()\n        reject('cancel')\n      }\n\n      isOpen = true\n    })\n  }\n\n  function toggle() {\n    isOpen = !isOpen\n  }\n\n  function _onCancel() {\n    isOpen = false\n    onCancel()\n  }\n\n  function _onOkay(param) {\n    isOpen = false\n    onOkay(param)\n  }\n</script>\n\n<MDBModal isOpen={isOpen} toggle={toggle}>\n  <MDBModalHeader toggle={toggle}>確認</MDBModalHeader>\n  <MDBModalBody>\n    {message}\n  </MDBModalBody>\n  <MDBModalFooter>\n    <MDBBtn color={colorOkayButton} on:click={_onOkay}>{labelOkayButton}</MDBBtn>\n    <MDBBtn color=\"primary\" outline on:click={_onCancel}>Cancel</MDBBtn>\n  </MDBModalFooter>\n</MDBModal>\n","import {writable} from 'svelte/store'\n\nexport const charmManager = writable(null)\n","export const zenkaku2hankaku = (str) => str.replace(/[Ａ-Ｚａ-ｚ０-９]/g, s => String.fromCharCode(s.charCodeAt(0) - 0xFEE0));\nexport const hankaku2zenkaku = (str) => str.replace(/[A-Za-z0-9]/g, s => String.fromCharCode(s.charCodeAt(0) + 0xFEE0));\n","<script lang=\"ts\">\n  import MDBBtn         from 'mdbsvelte/src/MDBBtn.svelte'\n  import MDBBtnGroup    from 'mdbsvelte/src/MDBBtnGroup.svelte'\n  import ConfirmModal   from './ConfirmModal.svelte'\n  import {charmManager} from './stores.js'\n  import type {Charm} from './mhrise-charm'\n  import {zenkaku2hankaku, hankaku2zenkaku} from './string-util'\n\n\n  // TYPES\n  const IMPORT_MODE = {\n    APPEND:    'append',\n    OVERWRITE: 'overwrite',\n  } as const\n  type IMPORT_MODE = typeof IMPORT_MODE[keyof typeof IMPORT_MODE]\n\n  // VARIABLES\n  let textareaValue: string = ''\n  let confirm: (params: any) => Promise<any>\n\n  // FUNCTIONS\n  async function importCharms({mode}) {\n    if ( textareaValue.trim().length <= 0 ) {\n      console.log('blank!!')\n      return\n    }\n\n    if ( mode !== IMPORT_MODE.APPEND && mode !== IMPORT_MODE.OVERWRITE ) {\n      console.log('internal error')\n      return\n    }\n\n    const result = await confirm({\n      message:         mode === IMPORT_MODE.OVERWRITE ? '護石を上書きインポートします。\\n既存の護石は削除され、元に戻すことはできません。よろしいですか？' : '護石を追加インポートします。',\n      colorOkayButton: 'danger',\n      // labelOkayButton: 'Import',\n\t    onOkay:          () => {},\n      onCancel:        () => {},\n    })\n    console.log(result)\n\n    if ( mode === IMPORT_MODE.OVERWRITE ) {\n      await $charmManager.reset()\n    }\n\n    console.log($charmManager.charms)\n\n    const charms: Charm[] = textareaValue.trim().split('\\n').map(line => {\n      const [s1, sl1, s2, sl2, slot1, slot2, slot3, ...rest] = line.split(/,\\s*/)\n      console.log({s1, sl1, s2, sl2, slot1, slot2, slot3})\n\n      return {\n        skills:      [s1, s2].map(i => i === '' ? '無し' : zenkaku2hankaku(i)),\n        skillLevels: [sl1, sl2].map(i => parseInt(i)),\n        slots:       [slot1, slot2, slot3].map(i => parseInt(i)),\n      } as Charm\n    })\n    console.log(charms)\n\n    $charmManager.registerCharms(charms)\n  }\n\n  async function exportCharms() {\n    // console.log($charmManager.charmTableName)\n\n    textareaValue = $charmManager.charms.map((row: FlatCharm) => {\n      const {skill1, skill1Level, skill2, skill2Level, slot1, slot2, slot3} = row\n      return [\n        hankaku2zenkaku(skill1 === '無し' ? '' : skill1), skill1Level,\n        hankaku2zenkaku(skill2 === '無し' ? '' : skill2), skill2Level,\n        slot1, slot2, slot3,\n      ].join(',')\n    }).join('\\n')\n\n    // $charmManager.exportIdx()\n  }\n\n</script>\n\n\n<div class=\"tab-content\">\n  <div id=\"charm-ixporter\">\n    <textarea id=\"input\" bind:value={textareaValue}></textarea>\n\n    <MDBBtnGroup class=\"shadow-0\">\n      {#each [\n        {label: 'エクスポート',     isDisabled: () => $charmManager == null, onClick: exportCharms},\n        {label: '追加インポート',   isDisabled: () => $charmManager == null || textareaValue.trim().length === 0, onClick: () => importCharms({mode: IMPORT_MODE.APPEND})},\n        {label: '上書きインポート', isDisabled: () => $charmManager == null || textareaValue.trim().length === 0, onClick: () => importCharms({mode: IMPORT_MODE.OVERWRITE})} ] as p}\n      <MDBBtn color=\"primary\"\n              class=\"shadow-0 mx-1 px-0\"\n              style=\"width: 8rem;\"\n              disabled={p.isDisabled()}\n              on:click={p.onClick}>\n        {p.label}\n      </MDBBtn>\n      {/each}\n    </MDBBtnGroup>\n\n    <!-- <MDBModal isOpen={isConfirmModalOpen} toggle={toggleConfirmModal}> -->\n    <!--   <MDBModalHeader toggle={toggleConfirmModal}>確認</MDBModalHeader> -->\n    <!--   <MDBModalBody> -->\n    <!--     {#if importMode === IMPORT_MODE.OVERWRITE} -->\n    <!--       上書きインポートを実行すると既存の護石は削除されます。<br> -->\n    <!--       <span class=\"font-weight-bold\"> 一度上書きすると元には戻せません。</span><br> -->\n    <!--     {:else if importMode === IMPORT_MODE.APPEND} -->\n    <!--       追加インポートでは既存の護石は保持されます。<br> -->\n    <!--     {/if} -->\n    <!--     <br> -->\n    <!--     インポートを実行しますか？<br> -->\n    <!--   </MDBModalBody> -->\n    <!--   <MDBModalFooter> -->\n    <!--     <MDBBtn color=\"danger\" on:click={toggleConfirmModal}>Import</MDBBtn> -->\n    <!--     <MDBBtn color=\"primary\" outline on:click={toggleConfirmModal}>Cancel</MDBBtn> -->\n    <!--   </MDBModalFooter> -->\n    <!-- </MDBModal> -->\n\n    <ConfirmModal bind:confirm>\n    </ConfirmModal>\n  </div>\n</div>\n\n\n<style>\n  .tab-content {\n    margin:     0;\n    padding:    0;\n    height:     100%;\n    overflow:   auto; /* width 100% でスクロールさせる用 */\n  }\n\n  .tab-content > #charm-ixporter {\n    margin:     1rem auto;\n    padding:    0;\n\n    width:      95%;\n  }\n\n  /* .tab-content > #charm-ixporter > h2 { */\n  /*   margin-top:  1rem; */\n\n  /*   font-size:   1rem; */\n  /*   font-weight: bold; */\n  /*   text-align:  left; */\n  /* } */\n\n  .tab-content > #charm-ixporter > textarea {\n    margin:      0 auto;\n    width:       100%;\n\n    height:      20rem;\n    font-size:   small;\n    font-family: monospace;\n\n    border:      solid 1px #ddd;\n    overflow:    auto;\n  }\n</style>\n","<script>\n  // the list of items  the user can select from\n  export let items = [];\n\n  // function to use to get all items (alternative to providing items)\n  export let searchFunction = false;\n\n  // field of each item that's used for the labels in the list\n  export let labelFieldName = undefined;\n  export let keywordsFieldName = labelFieldName;\n  export let valueFieldName = undefined;\n\n  export let labelFunction = function(item) {\n    if (item === undefined || item === null) {\n      return \"\";\n    }\n    return labelFieldName ? item[labelFieldName] : item;\n  };\n\n  export let keywordsFunction = function(item) {\n    if (item === undefined || item === null) {\n      return \"\";\n    }\n    return keywordsFieldName ? item[keywordsFieldName] : labelFunction(item);\n  };\n\n  export let valueFunction = function(item) {\n    if (item === undefined || item === null) {\n      return item;\n    }\n    return valueFieldName ? item[valueFieldName] : item;\n  };\n\n  export let keywordsCleanFunction = function(keywords) {\n    return keywords;\n  };\n\n  export let textCleanFunction = function(userEnteredText) {\n    return userEnteredText;\n  };\n\n  export let beforeChange = function(oldSelectedItem, newSelectedItem) {\n    return true;\n  };\n  export let onChange = function(newSelectedItem) {};\n\n  // Behaviour properties\n  export let selectFirstIfEmpty = false;\n  export let minCharactersToSearch = 1;\n  export let maxItemsToShowInList = 0;\n\n  // delay to wait after a keypress to search for new items\n  export let delay = 0;\n\n  // true to perform local filtering of items, even if searchFunction is provided\n  export let localFiltering = true;\n\n  // UI properties\n  // text displayed when no items match the input text\n  export let noResultsText = \"No results found\";\n\n  // the text displayed when no option is selected\n  export let placeholder = undefined;\n\n  // apply a className to the control\n  export let className = undefined;\n\n  // HTML input UI properties\n  // apply a className to the input control\n  export let inputClassName = undefined;\n  // apply a id to the input control\n  export let inputId = undefined;\n  // generate an HTML input with this name, containing the current value\n  export let name = undefined;\n  // add the title to the HTML input\n  export let title = undefined;\n  // enable the html5 autocompletion to the HTML input\n  export let html5autocomplete = undefined;\n\n  // apply a className to the dropdown div\n  export let dropdownClassName = undefined;\n\n  // option to hide the dropdown arrow\n  export let hideArrow = false;\n\n  // option to show clear selection button\n  export let showClear = false;\n\n  // adds the disabled tag to the HTML input\n  export let disabled = false;\n\n  export let debug = false;\n\n  // --- Public State ----\n\n  // selected item state\n  export let selectedItem = undefined;\n  export let value = undefined;\n\n  // --- Internal State ----\n  const uniqueId = \"sautocomplete-\" + Math.floor(Math.random() * 1000);\n\n  // HTML elements\n  let input;\n  let list;\n\n  // UI state\n  let opened = false;\n  let highlightIndex = -1;\n  let text;\n  let filteredTextLength = 0;\n\n  // view model\n  let filteredListItems;\n  let listItems = [];\n\n  // other state\n  let inputDelayTimeout;\n\n  // -- Reactivity --\n  function onSelectedItemChanged() {\n    value = valueFunction(selectedItem);\n    text = safeLabelFunction(selectedItem);\n    onChange(selectedItem);\n  }\n\n  $: selectedItem, onSelectedItemChanged();\n\n  $: showList =\n    opened && ((items && items.length > 0) || filteredTextLength > 0);\n\n  // --- Functions ---\n  function safeStringFunction(theFunction, argument) {\n    if (typeof theFunction !== \"function\") {\n      console.error(\n        \"Not a function: \" + theFunction + \", argument: \" + argument\n      );\n    }\n    let originalResult;\n    try {\n      originalResult = theFunction(argument);\n    } catch (error) {\n      console.warn(\n        \"Error executing Autocomplete function on value: \" +\n          argument +\n          \" function: \" +\n          theFunction\n      );\n    }\n    let result = originalResult;\n    if (result === undefined || result === null) {\n      result = \"\";\n    }\n    if (typeof result !== \"string\") {\n      result = result.toString();\n    }\n    return result;\n  }\n\n  function safeLabelFunction(item) {\n    // console.log(\"labelFunction: \" + labelFunction);\n    // console.log(\"safeLabelFunction, item: \" + item);\n    return safeStringFunction(labelFunction, item);\n  }\n\n  function safeKeywordsFunction(item) {\n    // console.log(\"safeKeywordsFunction\");\n    const keywords = safeStringFunction(keywordsFunction, item);\n    let result = safeStringFunction(keywordsCleanFunction, keywords);\n    result = result.toLowerCase().trim();\n    if (debug) {\n      console.log(\n        \"Extracted keywords: '\" +\n          result +\n          \"' from item: \" +\n          JSON.stringify(item)\n      );\n    }\n    return result;\n  }\n\n  function prepareListItems() {\n    let tStart;\n    if (debug) {\n      tStart = performance.now();\n      console.log(\"prepare items to search\");\n      console.log(\"items: \" + JSON.stringify(items));\n    }\n\n    if (!Array.isArray(items)) {\n      console.warn(\n        \"Autocomplete items / search function did not return array but\",\n        items\n      );\n      items = [];\n    }\n\n    const length = items ? items.length : 0;\n    listItems = new Array(length);\n\n    if (length > 0) {\n      items.forEach((item, i) => {\n        const listItem = getListItem(item);\n        if (listItem == undefined) {\n          console.log(\"Undefined item for: \", item);\n        }\n        listItems[i] = listItem;\n      });\n    }\n\n    if (debug) {\n      const tEnd = performance.now();\n      console.log(\n        listItems.length +\n          \" items to search prepared in \" +\n          (tEnd - tStart) +\n          \" milliseconds\"\n      );\n    }\n  }\n\n  function getListItem(item) {\n    return {\n      // keywords representation of the item\n      keywords: safeKeywordsFunction(item),\n      // item label\n      label: safeLabelFunction(item),\n      // store reference to the origial item\n      item: item\n    };\n  }\n\n  $: items, prepareListItems();\n\n  function prepareUserEnteredText(userEnteredText) {\n    if (userEnteredText === undefined || userEnteredText === null) {\n      return \"\";\n    }\n\n    const textFiltered = userEnteredText\n      .replace(/[&/\\\\#,+()$~%.'\":*?<>{}]/g, \" \")\n      .trim();\n\n    filteredTextLength = textFiltered.length;\n\n    if (minCharactersToSearch > 1) {\n      if (filteredTextLength < minCharactersToSearch) {\n        return \"\";\n      }\n    }\n\n    const cleanUserEnteredText = textCleanFunction(textFiltered);\n    const textFilteredLowerCase = cleanUserEnteredText.toLowerCase().trim();\n\n    if (debug) {\n      console.log(\n        \"Change user entered text '\" +\n          userEnteredText +\n          \"' into '\" +\n          textFilteredLowerCase +\n          \"'\"\n      );\n    }\n    return textFilteredLowerCase;\n  }\n\n  async function search() {\n    let tStart;\n    if (debug) {\n      tStart = performance.now();\n      console.log(\"Searching user entered text: '\" + text + \"'\");\n    }\n\n    const textFiltered = prepareUserEnteredText(text);\n\n    if (textFiltered === \"\") {\n      filteredListItems = listItems;\n      closeIfMinCharsToSearchReached();\n      if (debug) {\n        console.log(\n          \"User entered text is empty set the list of items to all items\"\n        );\n      }\n      return;\n    }\n\n    // external search which provides items\n    if (searchFunction) {\n      items = await searchFunction(textFiltered);\n      prepareListItems();\n    }\n\n    // local search\n    let tempfilteredListItems;\n    if (localFiltering) {\n      const searchWords = textFiltered.split(\" \");\n\n      tempfilteredListItems = listItems.filter(listItem => {\n        if (!listItem) {\n          return false;\n        }\n        const itemKeywords = listItem.keywords;\n\n        let matches = 0;\n        searchWords.forEach(searchWord => {\n          if (itemKeywords.includes(searchWord)) {\n            matches++;\n          }\n        });\n\n        return matches >= searchWords.length;\n      });\n    } else {\n      tempfilteredListItems = listItems;\n    }\n\n    const hlfilter = highlightFilter(textFiltered, [\"label\"]);\n    const filteredListItemsHighlighted = tempfilteredListItems.map(hlfilter);\n\n    filteredListItems = filteredListItemsHighlighted;\n    closeIfMinCharsToSearchReached();\n    if (debug) {\n      const tEnd = performance.now();\n      console.log(\n        \"Search took \" +\n          (tEnd - tStart) +\n          \" milliseconds, found \" +\n          filteredListItems.length +\n          \" items\"\n      );\n    }\n  }\n\n  // $: text, search();\n\n  function selectListItem(listItem) {\n    if (debug) {\n      console.log(\"selectListItem\");\n    }\n    if (\"undefined\" === typeof listItem) {\n      if (debug) {\n        console.log(`listItem ${i} is undefined. Can not select.`);\n      }\n      return false;\n    }\n    const newSelectedItem = listItem.item;\n    if (beforeChange(selectedItem, newSelectedItem)) {\n      selectedItem = newSelectedItem;\n    }\n    return true;\n  }\n\n  function selectItem() {\n    if (debug) {\n      console.log(\"selectItem\");\n    }\n    const listItem = filteredListItems[highlightIndex];\n    if (selectListItem(listItem)) {\n      close();\n    }\n  }\n\n  function up() {\n    if (debug) {\n      console.log(\"up\");\n    }\n\n    open();\n    if (highlightIndex > 0) highlightIndex--;\n    highlight();\n  }\n\n  function down() {\n    if (debug) {\n      console.log(\"down\");\n    }\n\n    open();\n    if (highlightIndex < filteredListItems.length - 1) highlightIndex++;\n    highlight();\n  }\n\n  function highlight() {\n    if (debug) {\n      console.log(\"highlight\");\n    }\n\n    const query = \".selected\";\n    if (debug) {\n      console.log(\"Seaching DOM element: \" + query + \" in \" + list);\n    }\n    const el = list && list.querySelector(query);\n    if (el) {\n      if (typeof el.scrollIntoViewIfNeeded === \"function\") {\n        if (debug) {\n          console.log(\"Scrolling selected item into view\");\n        }\n        el.scrollIntoViewIfNeeded();\n      } else {\n        if (debug) {\n          console.warn(\n            \"Could not scroll selected item into view, scrollIntoViewIfNeeded not supported\"\n          );\n        }\n      }\n    } else {\n      if (debug) {\n        console.warn(\"Selected item not found to scroll into view\");\n      }\n    }\n  }\n\n  function onListItemClick(listItem) {\n    if (debug) {\n      console.log(\"onListItemClick\");\n    }\n\n    if (selectListItem(listItem)) {\n      close();\n    }\n  }\n\n  function onDocumentClick(e) {\n    if (debug) {\n      console.log(\"onDocumentClick: \" + JSON.stringify(e.target));\n    }\n    if (e.target.closest(\".\" + uniqueId)) {\n      if (debug) {\n        console.log(\"onDocumentClick inside\");\n      }\n      // resetListToAllItemsAndOpen();\n      highlight();\n    } else {\n      if (debug) {\n        console.log(\"onDocumentClick outside\");\n      }\n      close();\n    }\n  }\n\n  function onKeyDown(e) {\n    if (debug) {\n      console.log(\"onKeyDown\");\n    }\n\n    let key = e.key;\n    if (key === \"Tab\" && e.shiftKey) key = \"ShiftTab\";\n    const fnmap = {\n      Tab: opened ? down.bind(this) : null,\n      ShiftTab: opened ? up.bind(this) : null,\n      ArrowDown: down.bind(this),\n      ArrowUp: up.bind(this),\n      Escape: onEsc.bind(this)\n    };\n    const fn = fnmap[key];\n    if (typeof fn === \"function\") {\n      e.preventDefault();\n      fn(e);\n    }\n  }\n\n  function onKeyPress(e) {\n    if (debug) {\n      console.log(\"onKeyPress\");\n    }\n\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      selectItem();\n    }\n  }\n\n  function onInput(e) {\n    if (debug) {\n      console.log(\"onInput\");\n    }\n\n    text = e.target.value;\n    if (inputDelayTimeout) {\n      clearTimeout(inputDelayTimeout);\n    }\n\n    if (delay) {\n      inputDelayTimeout = setTimeout(processInput, delay);\n    } else {\n      processInput();\n    }\n  }\n\n  function processInput() {\n    search();\n    highlightIndex = 0;\n    open();\n  }\n\n  function onInputClick() {\n    if (debug) {\n      console.log(\"onInputClick\");\n    }\n    resetListToAllItemsAndOpen();\n  }\n\n  function onEsc(e) {\n    if (debug) {\n      console.log(\"onEsc\");\n    }\n\n    //if (text) return clear();\n    e.stopPropagation();\n    if (opened) {\n      input.focus();\n      close();\n    }\n  }\n\n  function onFocus() {\n    if (debug) {\n      console.log(\"onFocus\");\n    }\n\n    resetListToAllItemsAndOpen();\n  }\n\n  function resetListToAllItemsAndOpen() {\n    if (debug) {\n      console.log(\"resetListToAllItemsAndOpen\");\n    }\n\n    filteredListItems = listItems;\n\n    open();\n\n    // find selected item\n    if (selectedItem) {\n      if (debug) {\n        console.log(\n          \"Searching currently selected item: \" + JSON.stringify(selectedItem)\n        );\n      }\n      for (let i = 0; i < listItems.length; i++) {\n        const listItem = listItems[i];\n        if (\"undefined\" === typeof listItem) {\n          if (debug) {\n            console.log(`listItem ${i} is undefined. Skipping.`);\n          }\n          continue;\n        }\n        if (debug) {\n          console.log(\"Item \" + i + \": \" + JSON.stringify(listItem));\n        }\n        if (selectedItem == listItem.item) {\n          highlightIndex = i;\n          if (debug) {\n            console.log(\n              \"Found selected item: \" + i + \": \" + JSON.stringify(listItem)\n            );\n          }\n          highlight();\n          break;\n        }\n      }\n    }\n  }\n\n  function open() {\n    if (debug) {\n      console.log(\"open\");\n    }\n\n    // check if the search text has more than the min chars required\n    if (isMinCharsToSearchReached()) {\n      return;\n    }\n\n    opened = true;\n  }\n\n  function close() {\n    if (debug) {\n      console.log(\"close\");\n    }\n    opened = false;\n\n    if (!text && selectFirstIfEmpty) {\n      highlightFilter = 0;\n      selectItem();\n    }\n  }\n\n  function isMinCharsToSearchReached() {\n    return (\n      minCharactersToSearch > 1 && filteredTextLength < minCharactersToSearch\n    );\n  }\n\n  function closeIfMinCharsToSearchReached() {\n    if (isMinCharsToSearchReached()) {\n      close();\n    }\n  }\n\n  function clear() {\n    if (debug) {\n      console.log(\"clear\");\n    }\n\n    text = \"\";\n    selectedItem = undefined;\n\n    setTimeout(() => {\n      input.focus();\n      close();\n    });\n  }\n\n  function onBlur() {\n    if (debug) {\n      console.log(\"onBlur\");\n    }\n    close();\n  }\n  // 'item number one'.replace(/(it)(.*)(nu)(.*)(one)/ig, '<b>$1</b>$2 <b>$3</b>$4 <b>$5</b>')\n  function highlightFilter(q, fields) {\n    const qs = \"(\" + q.trim().replace(/\\s/g, \")(.*)(\") + \")\";\n    const reg = new RegExp(qs, \"ig\");\n    let n = 1;\n    const len = qs.split(\")(\").length + 1;\n    let repl = \"\";\n    for (; n < len; n++) repl += n % 2 ? `<b>$${n}</b>` : `$${n}`;\n\n    return i => {\n      const newI = Object.assign({ highlighted: {} }, i);\n      if (fields) {\n        fields.forEach(f => {\n          if (!newI[f]) return;\n          newI.highlighted[f] = newI[f].replace(reg, repl);\n        });\n      }\n      return newI;\n    };\n  }\n</script>\n\n<style>\n  .autocomplete {\n    min-width: 200px;\n    display: inline-block;\n    max-width: 100%;\n    position: relative;\n    vertical-align: top;\n    height: 2.25em;\n  }\n\n  .autocomplete:not(.hide-arrow)::after {\n    border: 3px solid transparent;\n    border-radius: 2px;\n    border-right: 0;\n    border-top: 0;\n    content: \" \";\n    display: block;\n    height: 0.625em;\n    margin-top: -0.4375em;\n    pointer-events: none;\n    position: absolute;\n    top: 50%;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n    -webkit-transform-origin: center;\n    transform-origin: center;\n    width: 0.625em;\n    border-color: #3273dc;\n    right: 1.125em;\n    z-index: 4;\n  }\n\n  .autocomplete.show-clear:not(.hide-arrow)::after {\n    right: 2.3em;\n  }\n\n  .autocomplete * {\n    box-sizing: border-box;\n  }\n  .autocomplete-input {\n    font: inherit;\n    width: 100%;\n    height: 100%;\n    padding: 5px 11px;\n  }\n\n  .autocomplete:not(.hide-arrow) .autocomplete-input {\n    padding-right: 2em;\n  }\n  .autocomplete.show-clear:not(.hide-arrow) .autocomplete-input {\n    padding-right: 3.2em;\n  }\n  .autocomplete.hide-arrow.show-clear .autocomplete-input {\n    padding-right: 2em;\n  }\n\n  .autocomplete-list {\n    background: #fff;\n    position: relative;\n    width: 100%;\n    overflow-y: auto;\n    z-index: 99;\n    padding: 10px 0;\n    top: 0px;\n    border: 1px solid #999;\n    max-height: calc(15 * (1rem + 10px) + 15px);\n    user-select: none;\n  }\n  .autocomplete-list:empty {\n    padding: 0;\n  }\n  .autocomplete-list-item {\n    padding: 5px 15px;\n    color: #333;\n    cursor: pointer;\n    line-height: 1;\n  }\n\n  .autocomplete-list-item.selected {\n    background-color: #2e69e2;\n    color: #fff;\n  }\n  .autocomplete-list-item-no-results {\n    padding: 5px 15px;\n    color: #999;\n    line-height: 1;\n  }\n\n  .autocomplete-list.hidden {\n    display: none;\n  }\n\n  .autocomplete.show-clear .autocomplete-clear-button {\n    cursor: pointer;\n    display: block;\n    text-align: center;\n    position: absolute;\n    right: 0.1em;\n    padding: 0.3em 0.6em;\n    top: 50%;\n    -webkit-transform: translateY(-50%);\n    -ms-transform: translateY(-50%);\n    transform: translateY(-50%);\n    z-index: 4;\n  }\n\n  .autocomplete:not(.show-clear) .autocomplete-clear-button {\n    display: none;\n  }\n</style>\n\n<div\n  class=\"{className ? className : ''}\n  {hideArrow ? 'hide-arrow is-multiple' : ''}\n  {showClear ? 'show-clear' : ''} autocomplete select is-fullwidth {uniqueId}\">\n  <input\n    type=\"text\"\n    class=\"{inputClassName ? inputClassName : ''} input autocomplete-input\"\n    id={inputId ? inputId : ''}\n    autocomplete={html5autocomplete ? 'on' : 'off'}\n    {placeholder}\n    {name}\n    {disabled}\n    {title}\n    bind:this={input}\n    bind:value={text}\n    on:input={onInput}\n    on:focus={onFocus}\n    on:keydown={onKeyDown}\n    on:click={onInputClick}\n    on:keypress={onKeyPress} />\n  {#if showClear}\n    <span on:click={clear} class=\"autocomplete-clear-button\">&#10006;</span>\n  {/if}\n  <div\n    class=\"{dropdownClassName ? dropdownClassName : ''} autocomplete-list {showList ? '' : 'hidden'}\n    is-fullwidth\"\n    bind:this={list}>\n    {#if filteredListItems && filteredListItems.length > 0}\n      {#each filteredListItems as listItem, i}\n        {#if listItem && (maxItemsToShowInList <= 0 || i < maxItemsToShowInList)}\n          {#if listItem}\n            <div\n              class=\"autocomplete-list-item {i === highlightIndex ? 'selected' : ''}\"\n              on:click={() => onListItemClick(listItem)}\n              on:pointerenter={() => {\n                highlightIndex = i;\n              }}>\n              <slot\n                name=\"item\"\n                item={listItem.item}\n                label={listItem.highlighted ? listItem.highlighted.label : listItem.label}>\n                {#if listItem.highlighted}\n                  {@html listItem.highlighted.label}\n                {:else}\n                  {@html listItem.label}\n                {/if}\n              </slot>\n            </div>\n          {/if}\n        {/if}\n      {/each}\n\n      {#if maxItemsToShowInList > 0 && filteredListItems.length > maxItemsToShowInList}\n        <div class=\"autocomplete-list-item-no-results\">\n          ...{filteredListItems.length - maxItemsToShowInList} results not shown\n        </div>\n      {/if}\n    {:else if noResultsText}\n      <div class=\"autocomplete-list-item-no-results\">\n        <slot name=\"no-results\" {noResultsText}>{noResultsText}</slot>\n      </div>\n    {/if}\n  </div>\n</div>\n\n<svelte:window on:click={onDocumentClick} />\n","<script>\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n  export let columns;\n  export let rows;\n  export let sortBy = \"\";\n  export let sortOrder = 1;\n  export let iconAsc = '▲';\n  export let iconDesc = '▼';\n  export let classNameTable = '';\n  export let classNameThead = '';\n  export let classNameTbody = '';\n  export let classNameSelect = '';\n  export let classNameRow = '';\n  export let classNameCell = '';\n  export let filterSelections = {};\n\n  export let sliceBegin = null\n  export let sliceEnd   = null\n  export let disableFilterHeader = false\n\n  let sortFunction = () => \"\";\n  let showFilterHeader = !disableFilterHeader && columns.some(c => {\n    // check if there are any filter or search headers\n    return c.filterOptions !== undefined || c.searchValue !== undefined\n  });\n  let filterValues = {};\n  let searchValues = {};\n  let columnByKey = {};\n  columns.forEach(col => {\n    columnByKey[col.key] = col;\n  });\n  $: c_rows = rows\n    .filter(r => {\n      // get search and filter results/matches\n      return Object.keys(filterSelections).every(f => {\n          // check search (text input) matches\n          let resSearch =\n            filterSelections[f] === \"\" ||\n            (columnByKey[f].searchValue &&\n              (columnByKey[f].searchValue(r) + \"\")\n                .toLocaleLowerCase()\n                .indexOf((filterSelections[f] + \"\").toLocaleLowerCase()) >= 0);\n\n          // check filter (dropdown) matches\n          let resFilter =\n            resSearch ||\n            filterSelections[f] === undefined ||\n            // default to value() if filterValue() not provided in col\n            filterSelections[f] ===\n              (typeof columnByKey[f].filterValue === \"function\"\n                ? columnByKey[f].filterValue(r)\n                : columnByKey[f].value(r));\n          return resFilter;\n        })\n      }\n    )\n    .map(r => (Object.assign({}, r, {$sortOn: sortFunction(r)} ) ) )\n    .sort((a, b) => {\n      if (a.$sortOn > b.$sortOn) return sortOrder;\n      else if (a.$sortOn < b.$sortOn) return -sortOrder;\n      return 0;\n    })\n    .slice(sliceBegin || 0, sliceEnd || undefined);\n  const asStringArray = (v) => [].concat(v).filter(v => typeof v === 'string' && v !== \"\").join(' ');\n  const calculateFilterValues = () => {\n    filterValues = {};\n    columns.forEach(c => {\n      if (typeof c.filterOptions === \"function\") {\n        filterValues[c.key] = c.filterOptions(rows);\n      } else if (Array.isArray(c.filterOptions)) {\n        // if array of strings is provided, use it for name and value\n        filterValues[c.key] = c.filterOptions.map(val => ({name:val, value:val}));\n      }\n    });\n  };\n  $: {\n    let col = columnByKey[sortBy];\n    if (col !== undefined && col.sortable === true && typeof col.value === \"function\") {\n      sortFunction = r => col.value(r);\n    }\n  };\n  $: {\n    // if filters are enabled, watch rows and columns\n    if (showFilterHeader && columns && rows) {\n      calculateFilterValues();\n    }\n  };\n  const updateSortOrder = (colKey) => {\n    if (colKey === sortBy) {\n      sortOrder = sortOrder === 1 ? -1 : 1\n    } else {\n      sortOrder = 1;\n    }\n  }\n  const handleClickCol = (event, col) => {\n    updateSortOrder(col.key)\n    sortBy = col.key;\n    dispatch('clickCol', {event, col, key:col.key} );\n  }\n  const handleClickRow = (event, row) => {\n    dispatch('clickRow', {event, row} );\n  }\n  const handleClickCell = (event, row, key) => {\n    dispatch('clickCell', {event, row, key} );\n  }\n</script>\n\n<style>\n  table {\n    width: 100%;\n  }\n  .isSortable {\n    cursor: pointer;\n  }\n  tr th select {\n    width: 100%;\n  }\n</style>\n\n<table class={asStringArray(classNameTable)}>\n  <thead class={asStringArray(classNameThead)}>\n    {#if showFilterHeader}\n      <tr class=\"row-filter-header\">\n        {#each columns as col}\n          <th>\n            {#if col.searchValue !== undefined}\n              <input bind:value={filterSelections[col.key]}>\n            {:else if filterValues[col.key] !== undefined}\n              <select bind:value={filterSelections[col.key]} class={asStringArray(classNameSelect)}>\n                <option value={undefined}></option>\n                {#each filterValues[col.key] as option}\n                  <option value={option.value}>{option.name}</option>\n                {/each}\n              </select>\n            {/if}\n          </th>\n        {/each}\n      </tr>\n    {/if}\n    <slot name=\"header\" sortOrder={sortOrder} sortBy={sortBy}>\n      <tr class=\"row-title-header\">\n        {#each columns as col}\n          {#if col.sortable}\n            <th\n              on:click={(e) => handleClickCol(e, col)}\n              class={asStringArray(['isSortable', col.headerClass])}\n            >\n              {col.title}\n              {#if sortBy === col.key}\n                { sortOrder === 1 ? iconAsc : iconDesc}\n              {/if}\n            </th>\n          {:else}\n            <th\n              class={col.headerClass}\n            >\n              {col.title}\n              {#if sortBy === col.key}\n                { sortOrder === 1 ? iconAsc : iconDesc}\n              {/if}\n            </th>\n          {/if}\n        {/each}\n      </tr>\n    </slot>\n  </thead>\n  <tbody class={asStringArray(classNameTbody)}>\n    {#each c_rows as row, n}\n      <slot name=\"row\" row={row} n={n} >\n        <tr on:click={(e)=>{handleClickRow(e, row)}} class={asStringArray(classNameRow)}>\n          {#each columns as col}\n            <td\n              on:click={(e)=>{handleClickCell(e, row, col.key)}}\n              class={asStringArray([col.class, classNameCell])}\n            >\n              {#if col.renderComponent}\n                <svelte:component\n                  this={col.renderComponent.component || col.renderComponent} {...(col.renderComponent.props || {})}\n                  row={row}\n                  col={col}\n                />\n              {:else}\n                {@html col.renderValue ? col.renderValue(row) : col.value(row)}\n              {/if}\n            </td>\n          {/each}\n        </tr>\n      </slot>\n      <slot name=\"after-row\" row={row} n={n}>\n      </slot>\n    {/each}\n  </tbody>\n</table>\n","// export const allSkills = [\n//   // 'あ行のスキル',\n//   'アイテム使用強化',\n//   '泡沫の舞',\n//   '炎鱗の恩恵',\n//   '鬼火纏',\n//   // 'か行のスキル',\n//   'ガード強化',\n//   'ガード性能',\n//   '会心撃【属性】',\n//   '回避距離UP',\n//   '回避性能',\n//   '回復速度',\n//   '翔蟲使い',\n//   '火事場力',\n//   '滑走強化',\n//   '霞皮の恩恵',\n//   '雷属性攻撃強化',\n//   '雷耐性',\n//   '貫通弾・貫通矢強化',\n//   '気絶耐性',\n//   'キノコ大好き',\n//   '逆襲',\n//   '強化持続',\n//   'KO術',\n//   '広域化',\n//   '幸運',\n//   '鋼殻の恩恵',\n//   '攻撃',\n//   '剛刃研磨',\n//   '高速変形',\n//   '氷属性攻撃強化',\n//   '氷耐性',\n//   '渾身',\n//   // 'さ行のスキル',\n//   '逆恨み',\n//   '散弾・拡散矢強化',\n//   '死中に活',\n//   '弱点特効',\n//   'ジャンプ鉄人',\n//   '集中',\n//   '植生学',\n//   '心眼',\n//   '睡眠属性強化',\n//   '睡眠耐性',\n//   'スタミナ急速回復',\n//   'スタミナ奪取',\n//   '精霊の加護',\n//   '攻めの守勢',\n//   '装填拡張',\n//   '装填速度',\n//   '速射強化',\n//   '属性やられ耐性',\n//   // 'た行のスキル',\n//   '体術',\n//   '耐震',\n//   '体力回復量UP',\n//   '匠',\n//   '達人芸',\n//   '弾丸節約',\n//   '弾導強化',\n//   '力の解放',\n//   '地質学',\n//   '超会心',\n//   '挑戦者',\n//   '通常弾・連射矢強化',\n//   '泥雪耐性',\n//   '砥石使用高速化',\n//   '特殊射撃強化',\n//   '毒属性強化',\n//   '毒耐性',\n//   '飛び込み',\n//   '鈍器使い',\n//   // 'な行のスキル',\n//   '納刀術',\n//   '乗り名人',\n//   // 'は行のスキル',\n//   '破壊王',\n//   '剥ぎ取り鉄人',\n//   '剥ぎ取り名人',\n//   '爆破属性強化',\n//   '爆破やられ耐性',\n//   '抜刀術【力】',\n//   '抜刀術【技】',\n//   '早食い',\n//   '腹減り耐性',\n//   '反動軽減',\n//   '火属性攻撃強化',\n//   '火耐性',\n//   'ひるみ軽減',\n//   '風圧耐性',\n//   '風紋の一致',\n//   '笛吹き名人',\n//   '不屈',\n//   'フルチャージ',\n//   'ブレ抑制',\n//   '壁面移動',\n//   '防御',\n//   '砲術',\n//   '砲弾装填',\n//   '捕獲名人',\n//   'ボマー',\n//   // 'ま行のスキル',\n//   '麻痺属性強化',\n//   '麻痺耐性',\n//   '満足感',\n//   '見切り',\n//   '水属性攻撃強化',\n//   '水耐性',\n//   '耳栓',\n//   // 'や行のスキル',\n//   '弓溜め段階解放',\n//   '陽動',\n//   // 'ら行のスキル',\n//   '雷紋の一致',\n//   'ランナー',\n//   '龍属性攻撃強化',\n//   '龍耐性',\n//   // 'わ行のスキル',\n//   '業物',\n// ]\n\n\nexport const allSkillDetails = [\n  // 'あ行のスキル',\n  { name: 'アイテム使用強化',   hiragana: 'あいてむしようきょうか',           englishCharacters: 'aitemusiyoukyouka'            },\n  { name: '泡沫の舞',           hiragana: 'うたかたのまい',                   englishCharacters: 'utakatanomai'                 },\n  { name: '炎鱗の恩恵',         hiragana: 'えんりんのおんけい',               englishCharacters: 'enrinnoonkei'                 },\n  { name: '鬼火纏',             hiragana: 'おにびまとい',                     englishCharacters: 'onibimatoi'                   },\n  // 'か行のスキル',\n  { name: 'ガード強化',         hiragana: 'がーどきょうか',                   englishCharacters: 'ga-dokyouka'                  },\n  { name: 'ガード性能',         hiragana: 'がーどせいのう',                   englishCharacters: 'ga-doseinou'                  },\n  { name: '会心撃【属性】',     hiragana: 'かいしんげきぞくせい',             englishCharacters: 'kaisingekizokusei'            },\n  { name: '回避距離UP',         hiragana: 'かいひきょりあっぷ',               englishcharacters: 'kaihikyoriappu'               },\n  { name: '回避性能',           hiragana: 'かいひせいのう',                   englishCharacters: 'kaihiseinou'                  },\n  { name: '回復速度',           hiragana: 'かいふくそくど',                   englishCharacters: 'kaihukusokudo'                },\n  { name: '翔蟲使い',           hiragana: 'かけりむしつかい',                 englishCharacters: 'kakerimusitukai'              },\n  { name: '火事場力',           hiragana: 'かじばりょく',                     englishCharacters: 'kajibaryoku'                  },\n  { name: '滑走強化',           hiragana: 'かっそうきょうか',                 englishCharacters: 'kassoukyouka'                 },\n  { name: '霞皮の恩恵',         hiragana: 'かすみがわのおんけい',             englishCharacters: 'kasumigawanoonkei'            },\n  { name: '雷属性攻撃強化',     hiragana: 'かみなりぞくせいこうげききょうか', englishCharacters: 'kaminarizokuseikougekikyouka' },\n  { name: '雷耐性',             hiragana: 'かみなりたいせい',                 englishCharacters: 'kaminaritaisei'               },\n  { name: '貫通弾・貫通矢強化', hiragana: 'かんつうだんかんつうやきょうか',   englishCharacters: 'kantuudankantuuyakyouka'      },\n  { name: '気絶耐性',           hiragana: 'きぜつたいせい',                   englishCharacters: 'kizetutaisei'                 },\n  { name: 'キノコ大好き',       hiragana: 'きのこだいすき',                   englishCharacters: 'kinokodaisuki'                },\n  { name: '逆襲',               hiragana: 'ぎゃくしゅう',                     englishCharacters: 'gyakusyuu'                    },\n  { name: '強化持続',           hiragana: 'きょうかじぞく',                   englishCharacters: 'kyoukajizoku'                 },\n  { name: 'KO術',               hiragana: 'けーおーじゅつ',                   englishcharacters: 'ke-o-jutu'                    },\n  { name: '広域化',             hiragana: 'こういきか',                       englishCharacters: 'kouikika'                     },\n  { name: '幸運',               hiragana: 'こううん',                         englishCharacters: 'kouun'                        },\n  { name: '鋼殻の恩恵',         hiragana: 'こうかくのおんけい',               englishCharacters: 'koukakunoonkei'               },\n  { name: '攻撃',               hiragana: 'こうげき',                         englishCharacters: 'kougeki'                      },\n  { name: '剛刃研磨',           hiragana: 'ごうじんけんま',                   englishCharacters: 'goujinkenma'                  },\n  { name: '高速変形',           hiragana: 'こうそくへんけい',                 englishCharacters: 'kousokuhenkei'                },\n  { name: '氷属性攻撃強化',     hiragana: 'こおりぞくせいきょうか',           englishCharacters: 'koorizokuseikyouka'           },\n  { name: '氷耐性',             hiragana: 'こおりたいせい',                   englishCharacters: 'kooritaisei'                  },\n  { name: '渾身',               hiragana: 'こんしん',                         englishCharacters: 'konsin'                       },\n  // 'さ行のスキル',\n  { name: '逆恨み',             hiragana: 'さかうらみ',                       englishCharacters: 'sakaurami'                    },\n  { name: '散弾・拡散矢強化',   hiragana: 'さんだんかんつうやきょうか',       englishCharacters: 'sandankantuuyakyouka'         },\n  { name: '死中に活',           hiragana: 'しちゅうにかつ',                   englishCharacters: 'sityuunikatu'                 },\n  { name: '弱点特効',           hiragana: 'じゃくてんとっこう',               englishCharacters: 'jakutentokkou'                },\n  { name: 'ジャンプ鉄人',       hiragana: 'じゃんぷてつじん',                 englishCharacters: 'janputetujin'                 },\n  { name: '集中',               hiragana: 'しゅうちゅう',                     englishCharacters: 'syuutyuu'                     },\n  { name: '植生学',             hiragana: 'しょくせいがく',                   englishCharacters: 'syokuseigaku'                 },\n  { name: '心眼',               hiragana: 'しんがん',                         englishCharacters: 'singan'                       },\n  { name: '睡眠属性強化',       hiragana: 'すいみんぞくせいきょうか',         englishCharacters: 'suiminzokuseikyouka'          },\n  { name: '睡眠耐性',           hiragana: 'すいみんたいせい',                 englishCharacters: 'suimintaisei'                 },\n  { name: 'スタミナ急速回復',   hiragana: 'すたみなきゅうそくかいふく',       englishCharacters: 'sutaminakyuusokukaihuku'      },\n  { name: 'スタミナ奪取',       hiragana: 'すたみなだっしゅ',                 englishCharacters: 'sutaminadassyu'               },\n  { name: '精霊の加護',         hiragana: 'せいれいのかご',                   englishCharacters: 'seireinokago'                 },\n  { name: '攻めの守勢',         hiragana: 'せめのしゅせい',                   englishCharacters: 'semenosyusei'                 },\n  { name: '装填拡張',           hiragana: 'そうてんかくちょう',               englishCharacters: 'soutenkakutyou'               },\n  { name: '装填速度',           hiragana: 'そうてんそくど',                   englishCharacters: 'soutensokudo'                 },\n  { name: '速射強化',           hiragana: 'そくしゃきょうか',                 englishCharacters: 'sokusyakyouka'                },\n  { name: '属性やられ耐性',     hiragana: 'ぞくせいやられたいせい',           englishCharacters: 'zokuseiyararetaisei'          },\n  // 'た行のスキル',\n  { name: '体術',               hiragana: 'たいじゅつ',                       englishCharacters: 'taijutu'                      },\n  { name: '耐震',               hiragana: 'たいしん',                         englishCharacters: 'taisin'                       },\n  { name: '体力回復量UP',       hiragana: 'たいりょくかいふくりょうあっぷ',   englishcharacters: 'tairyokukaihukuryouappu'      },\n  { name: '匠',                 hiragana: 'たくみ',                           englishCharacters: 'takumi'                       },\n  { name: '達人芸',             hiragana: 'たつじんげい',                     englishCharacters: 'tatujingei'                   },\n  { name: '弾丸節約',           hiragana: 'だんがんせつやく',                 englishCharacters: 'dangansetuyaku'               },\n  { name: '弾導強化',           hiragana: 'だんどうきょうか',                 englishCharacters: 'dandoukyouka'                 },\n  { name: '力の解放',           hiragana: 'ちからのかいほう',                 englishCharacters: 'tikaranokaihou'               },\n  { name: '地質学',             hiragana: 'ちしつがく',                       englishCharacters: 'tisitugaku'                   },\n  { name: '超会心',             hiragana: 'ちょうかいしん',                   englishCharacters: 'tyoukaisin'                   },\n  { name: '挑戦者',             hiragana: 'ちょうせんしゃ',                   englishCharacters: 'tyousensya'                   },\n  { name: '通常弾・連射矢強化', hiragana: 'つうじょうだんそくしゃやきょうか', englishCharacters: 'tuujoudansokusyayakyouka'     },\n  { name: '泥雪耐性',           hiragana: 'でいせつたいせい',                 englishCharacters: 'deisetutaisei'                },\n  { name: '砥石使用高速化',     hiragana: 'といししようこうそくか',           englishCharacters: 'toisisiyoukousokuka'          },\n  { name: '特殊射撃強化',       hiragana: 'とくしゅしゃげききょうか',         englishCharacters: 'tokusyusyagekikyouka'         },\n  { name: '毒属性強化',         hiragana: 'どくぞくせいきょうか',             englishCharacters: 'dokuzokuseikyouka'            },\n  { name: '毒耐性',             hiragana: 'どくたいせい',                     englishCharacters: 'dokutaisei'                   },\n  { name: '飛び込み',           hiragana: 'とびこみ',                         englishCharacters: 'tobikomi'                     },\n  { name: '鈍器使い',           hiragana: 'どんきつかい',                     englishCharacters: 'donkitukai'                   },\n  // 'な行のスキル',\n  { name: '納刀術',             hiragana: 'のうとうじゅつ',                   englishCharacters: 'noutoujutu'                   },\n  { name: '乗り名人',           hiragana: 'のりめいじん',                     englishCharacters: 'norimeijin'                   },\n  // 'は行のスキル',\n  { name: '破壊王',             hiragana: 'はかいおう',                       englishCharacters: 'hakaiou'                      },\n  { name: '剥ぎ取り鉄人',       hiragana: 'はぎとりてつじん',                 englishCharacters: 'hagitoritetujin'              },\n  { name: '剥ぎ取り名人',       hiragana: 'はぎとりめいじん',                 englishCharacters: 'hagitorimeijin'               },\n  { name: '爆破属性強化',       hiragana: 'ばくはぞくせいきょうか',           englishCharacters: 'bakuhazokuseikyouka'          },\n  { name: '爆破やられ耐性',     hiragana: 'ばくはやられたいせい',             englishCharacters: 'bakuhayararetaisei'           },\n  { name: '抜刀術【力】',       hiragana: 'ばっとうじゅつちから',             englishCharacters: 'battoujututikara'             },\n  { name: '抜刀術【技】',       hiragana: 'ばっとうじゅつわざ',               englishCharacters: 'battoujutuwaza'               },\n  { name: '早食い',             hiragana: 'はやぐい',                         englishCharacters: 'hayagui'                      },\n  { name: '腹減り耐性',         hiragana: 'はらへりたいせい',                 englishCharacters: 'haraheritaisei'               },\n  { name: '反動軽減',           hiragana: 'はんどうけいげん',                 englishCharacters: 'handoukeigen'                 },\n  { name: '火属性攻撃強化',     hiragana: 'ひぞくせいこうげききょうか',       englishCharacters: 'hizokuseikougekikyouka'       },\n  { name: '火耐性',             hiragana: 'ひたいせい',                       englishCharacters: 'hitaisei'                     },\n  { name: 'ひるみ軽減',         hiragana: 'ひるみけいげん',                   englishCharacters: 'hirumikeigen'                 },\n  { name: '風圧耐性',           hiragana: 'ふうあつたいせい',                 englishCharacters: 'huuatutaisei'                 },\n  { name: '風紋の一致',         hiragana: 'ふうもんのいっち',                 englishCharacters: 'huumonnoitti'                 },\n  { name: '笛吹き名人',         hiragana: 'ふえふきめいじん',                 englishCharacters: 'huehukimeijin'                },\n  { name: '不屈',               hiragana: 'ふくつ',                           englishCharacters: 'hukutu'                       },\n  { name: 'フルチャージ',       hiragana: 'ふるちゃーじ',                     englishCharacters: 'hurutya-ji'                   },\n  { name: 'ブレ抑制',           hiragana: 'ぶれよくせい',                     englishCharacters: 'bureyokusei'                  },\n  { name: '壁面移動',           hiragana: 'へきめんいどう',                   englishCharacters: 'hekimenidou'                  },\n  { name: '防御',               hiragana: 'ぼうぎょ',                         englishCharacters: 'bougyo'                       },\n  { name: '砲術',               hiragana: 'ほうじゅつ',                       englishCharacters: 'houjutu'                      },\n  { name: '砲弾装填',           hiragana: 'ほうだんそうてん',                 englishCharacters: 'houdansouten'                 },\n  { name: '捕獲名人',           hiragana: 'ほかくめいじん',                   englishCharacters: 'hokakumeijin'                 },\n  { name: 'ボマー',             hiragana: 'ぼまー',                           englishCharacters: 'boma-'                        },\n  // 'ま行のスキル',\n  { name: '麻痺属性強化',       hiragana: 'まひぞくせいきょうか',             englishCharacters: 'mahizokuseikyouka'            },\n  { name: '麻痺耐性',           hiragana: 'まひたいせい',                     englishCharacters: 'mahitaisei'                   },\n  { name: '満足感',             hiragana: 'まんぞくかん',                     englishCharacters: 'manzokukan'                   },\n  { name: '見切り',             hiragana: 'みきり',                           englishCharacters: 'mikiri'                       },\n  { name: '水属性攻撃強化',     hiragana: 'みずぞくせいこうげききょうか',     englishCharacters: 'mizuzokuseikougekikyouka'     },\n  { name: '水耐性',             hiragana: 'みずたいせい',                     englishCharacters: 'mizutaisei'                   },\n  { name: '耳栓',               hiragana: 'みみせん',                         englishCharacters: 'mimisen'                      },\n  // 'や行のスキル',\n  { name: '弓溜め段階解放',     hiragana: 'ゆみためだんかいかいほう',         englishCharacters: 'yumitamedankaikaihou'         },\n  { name: '陽動',               hiragana: 'ようどう',                         englishCharacters: 'youdou'                       },\n  // 'ら行のスキル',\n  { name: '雷紋の一致',         hiragana: 'らいもんのいっち',                 englishCharacters: 'raimonnoitti'                 },\n  { name: 'ランナー',           hiragana: 'らんなー',                         englishCharacters: 'ranna-'                       },\n  { name: '龍属性攻撃強化',     hiragana: 'りゅうぞくせいこうげききょうか',   englishCharacters: 'ryuuzokuseikougekikyouka'     },\n  { name: '龍耐性',             hiragana: 'りゅうたいせい',                   englishCharacters: 'ryuutaisei'                   },\n  // 'わ行のスキル',\n  { name: '業物',               hiragana: 'わざもの',                         englishCharacters: 'wazamono'                     },\n]\n\n\n\nexport const getAllSkillNames = () => allSkillDetails.map(i => i.name)\n","<script>\n  import {slide} from \"svelte/transition\"\n  import SvelteTable from \"./SvelteTable.svelte\"\n  import {getAllSkillNames} from './mhrise-skills.js'\n  import {charmManager} from './stores.js'\n\n  export let headerColor           = 'mediumseagreen'\n  export let disableFilterHeader   = false\n  export let showImageColumn       = true\n  export let showSubstitutesColumn = true\n  export let charms\n\n  export let sliceBegin\n  export let sliceEnd\n\n\n  // constants\n  const N_CHARM_SLOT_MAX = 3\n\n  const allSkills = getAllSkillNames()\n  const columns = [\n    {\n      key: \"id\",\n      title: \"ID\",\n      value: v => v.rowid,\n      sortable: true,\n      filterOptions: rows => {\n        const UNIT = 50\n        // generate groupings of 1-50, 51-100, etc...\n        let nums = {}\n        rows.forEach(row => {\n          let num = Math.floor(row.rowid / UNIT)\n          if (nums[num] === undefined)\n            nums[num] = { name: `${num * UNIT + 1} 〜 ${(num + 1) * UNIT}`, value: num }\n        })\n        // fix order\n        nums = Object.entries(nums)\n          .sort()\n          .reduce((o, [k, v]) => ((o[k] = v), o), {})\n        return Object.values(nums)\n      },\n      filterValue: v => Math.floor((v.rowid - 1) / 50),\n    },\n    {\n      key:           'skill1',\n      title:         'スキル1',\n      value:         v => v.skill1,\n      filterOptions: allSkills,\n      sortable:      true,\n    },\n    {\n      key:           'skill1Level',\n      title:         'スキル1 Lv',\n      value:         v => v.skill1Level,\n      filterOptions: [0,1,2,3,4,5,6,7],\n      sortable:      true,\n    },\n    {\n      key:           'skill2',\n      title:         'スキル2',\n      value:         v => v.skill2,\n      filterOptions: allSkills,\n      sortable:      true,\n    },\n    {\n      key:           'skill2Level',\n      title:         'スキル2 Lv',\n      value:         v => v.skill2Level,\n      filterOptions: [0,1,2,3,4,5,6,7],\n      sortable:      true,\n    },\n    ...Array.from({length: N_CHARM_SLOT_MAX}, (_, i) => i + 1).map(i => ({\n      key:           `slot${i}`,\n      title:         `スロット${i}`,\n      value:         v => v[`slot${i}`],\n      renderValue:   v => v[`slot${i}`] || '-',\n      sortable:      true,\n      filterOptions: [0,1,2,3],\n    })),\n    {\n      key:           'evaluation',\n      title:         '合計Lv',\n      value:         v => v.evaluation || '-',\n      // filterOptions: rows => [...new Set(rows.map(i => i.evaluation))],\n      filterOptions: [...Array(21).keys()],\n      sortable:      true,\n    },\n    {\n      key:           \"image\",\n      title:         \"画像\",\n      value:         v => v.imagename ? '有り' : '無し',\n      renderValue:   v => v.imagename ? '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-camera-fill\" viewBox=\"0 0 16 16\"> <path d=\"M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z\"/> <path d=\"M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z\"/> </svg>' : '',\n      sortable:      true,\n      filterOptions: [\"有り\", \"無し\"],\n      onClick:       toggleScreenshot,\n    },\n    {\n      key:           \"substitutableCharms\",\n      title:         \"代替\",\n      value:         v => v.substitutableCharms?.length ? '有り' : '無し',\n      renderValue:   v => {\n        const question = '<span style=\"color: gray\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-question-square-fill\" viewBox=\"0 0 16 16\"> <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.496 6.033a.237.237 0 0 1-.24-.247C5.35 4.091 6.737 3.5 8.005 3.5c1.396 0 2.672.73 2.672 2.24 0 1.08-.635 1.594-1.244 2.057-.737.559-1.01.768-1.01 1.486v.105a.25.25 0 0 1-.25.25h-.81a.25.25 0 0 1-.25-.246l-.004-.217c-.038-.927.495-1.498 1.168-1.987.59-.444.965-.736.965-1.371 0-.825-.628-1.168-1.314-1.168-.803 0-1.253.478-1.342 1.134-.018.137-.128.25-.266.25h-.825zm2.325 6.443c-.584 0-1.009-.394-1.009-.927 0-.552.425-.94 1.01-.94.609 0 1.028.388 1.028.94 0 .533-.42.927-1.029.927z\"/> </svg> </span>'\n        const up = '<span style=\"color: mediumseagreen\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-arrow-up-square-fill\" viewBox=\"0 0 16 16\"> <path d=\"M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z\"/> </svg> </span>'\n        return v.substitutableCharms == null ? question\n             : v.substitutableCharms.length  ? up\n             :                                 ''\n      },\n      sortable:      true,\n      filterOptions: [\"有り\", \"無し\"],\n    },\n  ].filter(i => {\n    switch (i.key) {\n      case 'image':               return showImageColumn\n      case 'substitutableCharms': return showSubstitutesColumn\n      default:                    return true\n    }\n  })\n\n\n  // fields\n  let isScreenshotShown = []\n  let isSubstitutableCharmsShown = []\n\n\n  // handlers\n  function onSort() {\n    // close all accordion\n    isScreenshotShown = []\n    isSubstitutableCharmsShown = []\n  }\n\n  function onClickRow({row}) {\n    const index = row.rowid\n    isSubstitutableCharmsShown[index] = !isSubstitutableCharmsShown[index]\n  }\n\n  async function toggleScreenshot({e, row}) {\n    e.stopPropagation()\n\n    const index = row.rowid\n    const toShow = ! isScreenshotShown[index]\n    isScreenshotShown[index] = toShow\n\n    if ( toShow ) {\n      // console.log(charms[index].imagename)\n      const screenshot = await $charmManager.getScreenshot(row.imagename)\n\n      // await new Promise((resolve) => requestAnimationFrame(resolve))\n      cv.imshow(`charm-table-row-${index}-screenshot`, screenshot)\n    }\n  }\n\n\n  $: styleVars = Object.entries({\n    'header-background-color': headerColor,\n    'table-width': `${61 + (showImageColumn ? 3 : 0) + (showSubstitutesColumn ? 3 : 0)}rem`,\n  }).map(([k, v]) => `--${k}:${v}`)\n    .join(';')\n</script>\n\n<div class=\"charm-table\" style=\"{styleVars}\">\n  <SvelteTable columns=\"{columns}\"\n               rows=\"{charms}\"\n               classNameTable={['table table-striped table-hover table-responsible']}\n               classNameThead={['table-dark hide-first-child.disabled']}\n               disableFilterHeader={disableFilterHeader}\n               bind:sliceBegin\n               bind:sliceEnd\n               on:clickCol={onSort}\n               >\n    <tr slot=\"row\" let:row let:n on:click={() => onClickRow({row})}>\n      {#each columns as col}\n        <td on:click={(e) => { if (col.onClick) {col.onClick({e, row, col, index: n})} }}\n            class={[col.class].join(' ')}\n            >\n          {#if col.renderComponent}\n            <svelte:component\n              this={col.renderComponent.component || col.renderComponent} {...(col.renderComponent.props || {})}\n              row={row}\n              col={col}\n              />\n          {:else}\n            {@html col.renderValue ? col.renderValue(row) : col.value(row)}\n          {/if}\n        </td>\n      {/each}\n    </tr>\n    <div slot=\"after-row\" let:row id=\"charm-table-row-{row.rowid}\" style=\"width: 100%\">\n      {#if isSubstitutableCharmsShown[row.rowid]}\n        {#if row.substitutableCharms == null}\n          <div style=\"width: 100%; border-bottom: solid 1px #ddd\">searching...</div>\n        {:else if row.substitutableCharms.length === 0}\n          <!-- none -->\n        {:else}\n          <div class=\"row-substitutes\" transition:slide={{duration: 150}}>\n          {#each row.substitutableCharms as c}\n            <div style=\"width: 100%; text-align: left; padding: 0.3rem 2rem\">\n              {c.rowid}: {c.skill1}{c.skill1Level}, {c.skill2}{c.skill2Level}, {c.slot1}-{c.slot2}-{c.slot3}\n            </div>\n          {/each}\n          </div>\n        {/if}\n      {/if}\n\n      {#if isScreenshotShown[row.rowid]}\n        <div style=\"width: 100%; border-bottom: solid 1px #ddd\" transition:slide={{duration: 100}}>\n          <canvas id=\"charm-table-row-{row.rowid}-screenshot\" style=\"width: 100%\"></canvas>\n        </div>\n      {/if}\n    </div>\n  </SvelteTable>\n</div>\n\n\n<style>\n  .charm-table {\n    height: 100%;\n    font-family: monospace;\n  }\n\n  :global(.charm-table > table) {\n    display: block;\n    height:  100%;\n  }\n\n  :global(\n    .charm-table > table thead,\n    .charm-table > table tbody,\n    .charm-table > table tr\n  ) {\n    display: flex;\n    flex-shrink: 0;\n  }\n\n  :global(\n    .charm-table > table thead,\n    .charm-table > table tbody\n  ) {\n    flex-direction: row;\n    flex-wrap: wrap;\n  }\n\n  :global(.charm-table > table thead) {\n    background: none;\n  }\n\n  :global(.charm-table > table > thead > .row-filter-header) {\n    border: none;\n  }\n\n  :global(.charm-table > table > thead > .row-title-header) {\n    background: var(--header-background-color);\n  }\n\n  :global(.charm-table > table > :not(caption) > * > *) {\n    padding-left:  0;\n    padding-right: 0;\n    border:        none;\n  }\n\n  :global(.charm-table > table > thead > .row-filter-header > th) {\n    padding-left:  0.5rem;\n    padding-right: 0.5rem;\n  }\n\n  :global(.charm-table > table > thead > .row-title-header > th) {\n    padding-top:    0.5rem;\n    padding-bottom: 0.5rem;\n  }\n\n  :global(.charm-table > table > thead th) {\n    background: inherit;\n  }\n\n  :global(.charm-table > table > tbody) {\n    height:     calc(100% - 7rem);\n    overflow-x: auto;\n    overflow-y: scroll;\n\n    align-content: flex-start;\n  }\n\n  :global(.charm-table > table tr) {\n    width:  100%;\n  }\n\n  :global(.charm-table > table tbody > tr) {\n    height: 1.9rem;\n  }\n\n  :global(.charm-table > table tbody > div) {\n    margin:  0;\n    padding: 0;\n  }\n\n  :global(.charm-table > table tbody > div > div.row-substitutes) {\n    margin:  0;\n    padding: 0.5rem 2rem;\n\n    max-height: 20rem;\n    overflow:   auto;\n  }\n\n  :global(\n    .charm-table > table th,\n    .charm-table > table td\n  ) {\n    text-align: center;\n    display:    inline-block;\n  }\n\n  :global(.charm-table > table td) {\n    padding: 0.3rem;\n  }\n\n\n  /* width */\n  :global(.charm-table > table) {\n    width: var(--table-width) !important;\n  }\n\n  :global(.charm-table > table > * > tr > *:nth-child(1)) {\n    width: 4rem;\n    padding-right: 1rem;\n    text-align: right;\n  }\n  :global(\n    .charm-table > table > * > tr > *:nth-child(2),\n    .charm-table > table > * > tr > *:nth-child(4)\n  ) {\n    /* width: calc((100% - 52rem - 6rem) / 2); */\n    width: 10rem;\n    padding-left: 1rem;\n    text-align: left;\n  }\n  :global(\n    .charm-table > table > * > tr > *:nth-child(3),\n    .charm-table > table > * > tr > *:nth-child(5),\n    .charm-table > table > * > tr > *:nth-child(6),\n    .charm-table > table > * > tr > *:nth-child(7),\n    .charm-table > table > * > tr > *:nth-child(8),\n    .charm-table > table > * > tr > *:nth-child(9)\n  ) {\n    width: 6rem;\n  }\n  :global(\n    .charm-table > table > * > tr > *:nth-child(10),\n    .charm-table > table > * > tr > *:nth-child(11)\n  ) {\n    width: 3rem;\n  }\n</style>\n","<script>\n  import AutoComplete from 'simple-svelte-autocomplete'\n  import CharmTable from './CharmTable.svelte'\n  import {allSkillDetails} from './mhrise-skills.js'\n  import {charmManager} from './stores.js'\n\n  const MAX_SKILL_LEVEL  = 7\n  const SKILL_LEVEL_LIST = [...Array(MAX_SKILL_LEVEL).keys()].map(i => i + 1)\n  const MAX_SLOTS        = 3\n\n  let skillFilters      = []\n  let skillLevelFilters = []\n  let slots             = []\n\n  let isSpinnerShown    = false\n  let searchResults     = null\n\n  // table pagination\n  let currentPage         = 0,\n      itemsPerPage        = 10\n  $: nPages = Math.ceil((searchResults||[]).length / itemsPerPage)\n  $: {\n    if ( searchResults && nPages ) {\n      currentPage = 0\n    }\n  }\n  $: searchResultsToShow = searchResults //?.slice(itemsPerPage * currentPage, itemsPerPage * (currentPage+1))\n  $: sliceBegin = itemsPerPage * currentPage\n  $: sliceEnd   = itemsPerPage * (currentPage+1)\n\n  // form update (skill)\n  $: {\n    for (const i in skillFilters) {\n      if ( skillFilters[i] && skillLevelFilters[i] == null ) {\n        skillLevelFilters[i] = 1\n      }\n      if ( skillFilters[i] == null ) {\n        skillFilters.splice(i, 1)\n        skillLevelFilters.splice(i, 1)\n      }\n    }\n  }\n\n  // form update (slot)\n  $: slots = slots.sort((a, b) => b - a)\n\n  $: {\n    isSpinnerShown = true\n    slots = slots.filter(i => i)\n\n    const base = JSON.stringify({\n      skills: skillFilters.map(i => i.name),\n      skillLevels: skillLevelFilters,\n      slots,\n    })\n\n    const search = () => {\n      if ( !skillFilters.length && !skillLevelFilters.length && !slots.length) {\n        searchResults = null\n        return\n      }\n\n      if ( typeof Module.getSubstitutesAll !== 'function' ) {\n        setTimeout(search, 100)\n        return\n      }\n\n      const matchIds = Module.getSubstitutes(\n        JSON.stringify($charmManager.charms.map(i => {\n          const {substitutableCharms, imagename, evaluation, ...rest} = i\n          return rest\n        })),\n        base\n      )\n\n      searchResults = JSON.parse(matchIds).map(id => $charmManager.charms.find(i => i.rowid === id))\n    }\n\n    search()\n    isSpinnerShown = false\n  }\n\n\n  function handleKeydown(event) {\n    if ( event.keyCode === 27 ) { // escape\n      document.body.click()\n      return\n    }\n\n    if ( !( (event.ctrlKey && event.metaKey) || (event.ctrlKey && event.altKey) )) {\n      return\n    }\n\n    let prefix\n    if      ( event.key === 'k' ) { prefix = 'input-skill-' }\n    else if ( event.key === 'l' ) { prefix = 'input-skill-level-' }\n    else if ( event.key === 't' ) { prefix = 'input-slot-' }\n    else {\n      return\n    }\n\n    const focusedId = document.activeElement.id\n    if ( focusedId.startsWith(prefix) ) {\n      const currentSuffix = parseInt(focusedId.replace(prefix, ''))\n      const nextFocus = document.getElementById(`${prefix}${currentSuffix + 1}`)\n                     || document.getElementById(`${prefix}0`)\n      document.body.click()\n      nextFocus.focus()\n    }\n    else {\n      const nextFocus = document.getElementById(`${prefix}0`)\n      document.body.click()\n      nextFocus.focus()\n    }\n\t}\n</script>\n\n<svelte:window on:keydown={handleKeydown}/>\n\n<div class=\"tab-content\">\n  <div id=\"charm-searcher\">\n    <!-- <h2>検索条件</h2> -->\n    <div id=\"charm-search-form\">\n      <div id=\"skills\">\n        スキル:\n        {#each [...Array(skillFilters.filter(i => i).length + 1).keys()] as i}\n          <div>\n            <AutoComplete items={allSkillDetails}\n                          inputId=\"input-skill-{i}\"\n                          bind:selectedItem={skillFilters[i]}\n                          labelFieldName=\"name\"\n                          valueFieldName=\"name\"\n                          keywordsFunction={s => `${s.name} ${s.hiragana} ${s.englishCharacters}`}\n                          placeholder=\"スキル{i+1}\"\n                          showClear\n                          hideArrow\n                          className=\"autocomplete-skill\"\n                          />\n            <AutoComplete items={SKILL_LEVEL_LIST}\n                          inputId=\"input-skill-level-{i}\"\n                          bind:selectedItem={skillLevelFilters[i]}\n                          placeholder=\"Lv\"\n                          hideArrow\n                          className=\"autocomplete-skill-level\"\n                          />\n          </div>\n        {/each}\n      </div>\n      <div id=\"slots\">\n        スロット:<br>\n        {#each [...Array(MAX_SLOTS).keys()] as i}\n          <AutoComplete items={[...Array(3).keys()].map(i => i + 1)}\n                        placeholder=\"スロット{i+1}\"\n                        inputId=\"input-slot-{i}\"\n                        bind:selectedItem={slots[i]}\n                        showClear\n                        hideArrow\n                        className=\"autocomplete-slot-level\"\n                        />&nbsp;\n        {/each}\n      </div>\n      <!-- <div> -->\n      <!--   現在の検索条件: -->\n      <!--   <ul> -->\n      <!--     {#each skillFilters.map((e, idx) => `${e.name} Lv${skillLevelFilters[idx]}`) as skill} -->\n      <!--       <li>{skill}</li> -->\n      <!--     {/each} -->\n      <!--     {#if slots.length > 0} -->\n      <!--       <li>空きスロット {slots.join('-')}</li> -->\n      <!--     {/if} -->\n      <!--   </ul> -->\n      <!-- </div> -->\n\n      <!-- <input type=\"checkbox\" checked disabled> 装飾品を使うパターンを含める -->\n    </div>\n\n    <hr>\n\n    <div id=\"charm-search-result\">\n      {#if isSpinnerShown}\n        <div class=\"spinner-border text-info\" role=\"status\"></div>\n      {:else if searchResults == null}\n        <!-- blank -->\n      {:else if searchResults.length === 0}\n        <div style=\"text-align: center\">not found</div>\n      {:else}\n        show\n        <select bind:value={itemsPerPage}>\n          <option>10</option>\n          <option>25</option>\n          <option>50</option>\n          <option>100</option>\n        </select>\n        charms\n        <CharmTable bind:charms={searchResultsToShow}\n                    bind:sliceBegin\n                    bind:sliceEnd\n                    disableFilterHeader={true}\n                    headerColor='dodgerblue'\n                    />\n        <div id=\"charm-search-result-pager\">\n          <ul class=\"pagination\">\n            <li class=\"page-item {currentPage === 0 ? 'disabled' : ''}\" aria-label=\"Previous\">\n              <span class=\"page-link\" on:click={() => currentPage--}>\n                <span aria-hidden=\"true\">&laquo;</span>\n              </span>\n            </li>\n            {#each [...Array(nPages).keys()] as i}\n              <li class=\"page-item {i === currentPage ? 'active' : ''}\">\n                <span class=\"page-link\" on:click={() => currentPage = i}>{i + 1}</span>\n              </li>\n            {/each}\n            <li class=\"page-item {currentPage === (nPages - 1) ? 'disabled' : ''}\" aria-label=\"Next\">\n              <span class=\"page-link\" on:click={() => currentPage++}>\n                <span aria-hidden=\"true\">&raquo;</span>\n              </span>\n            </li>\n          </ul>\n        </div>\n      {/if}\n    </div>\n  </div>\n</div>\n\n\n<style>\n  .tab-content {\n    margin:     0;\n    padding:    0;\n    height:     100%;\n    overflow:   auto; /* width 100% でスクロールさせる用 */\n  }\n\n  .tab-content > #charm-searcher {\n    margin:     0;\n    padding:    0;\n\n    width:      100%;\n  }\n\n  .tab-content > #charm-searcher hr {\n    color: #ccc;\n  }\n\n  .tab-content > #charm-searcher #charm-search-form,\n  .tab-content > #charm-searcher #charm-search-result {\n    width:      calc(100% - 2rem);\n    margin:     1rem auto 1.4rem;\n  }\n\n  .tab-content > #charm-searcher #charm-search-form #skills,\n  .tab-content > #charm-searcher #charm-search-form #slots {\n    margin:     1rem 0;\n  }\n\n  #charm-search-result-pager ul.pagination {\n    width:           67rem;\n\n    justify-content: center;\n    flex-wrap:       wrap;\n  }\n\n  :global(.tab-content > #charm-searcher .autocomplete-skill-level) {\n    width:     6rem;\n    min-width: 6rem; /* overwrite */\n  }\n\n  :global(.tab-content > #charm-searcher .autocomplete-slot-level) {\n    width:     8rem;\n    min-width: 8rem; /* overwrite */\n  }\n</style>\n","<script>\n  import CharmTable from './CharmTable.svelte'\n  import {charmManager} from './stores.js'\n\n  let charms\n\n  setInterval(() => { // WORKAROUND: charms does not follow charManager.charms...\n    if ( charms !== $charmManager?.charms ) {\n      charms = $charmManager?.charms\n    }\n  }, 1000)\n</script>\n\n\n<div class=\"tab-content\">\n  <div id=\"charm-list\">\n    {#if charms == null}\n      <div class=\"spinner-border text-info\" role=\"status\">\n        <!-- <span class=\"visually-hidden\">Loading...</span> -->\n      </div>\n    {:else}\n      <CharmTable bind:charms\n                  />\n    {/if}\n  </div>\n</div>\n\n\n<style>\n  .tab-content {\n    margin:     0;\n    padding:    0;\n    height:     100%;\n    overflow:   hidden;\n  }\n\n  #charm-list{\n    padding:     8px;\n\n    margin-top: 2px;\n    width:      100%;\n    height:     100%;\n\n    overflow-x: auto;\n    overflow-y: hidden;\n  }\n\n  #charm-list .spinner-border {\n    margin: 30% calc(50% - 1rem);\n  }\n</style>\n","<script lang:ts>\n  // import {writable} from 'svelte/store'\n\n  const FRAME_RATE = 29.97\n  const videoWidth = 1280\n  const videoHeight = 720\n\n  export let nSplits\n  export let index\n  export let videoName\n  export let videoData\n  export let isVideoVisible = false\n  export let charmScanner\n  export let onFinish\n\n  let beginTime, endTime\n\n  let domVideo\n\n  let capture\n  let frame = new cv.Mat(videoHeight, videoWidth, cv.CV_8UC4)\n  let progress = 0\n\n  ;(async () => {\n    await new Promise(r => requestAnimationFrame(r))\n    await new Promise(r => domVideo.oncanplay = r)\n    capture = new cv.VideoCapture(domVideo)\n\n    beginTime = index * domVideo.duration / nSplits\n    endTime   = (index + 1) * domVideo.duration / nSplits\n\n    domVideo.addEventListener('seeked', processCurrentFrame)\n    // console.log( domVideo.currentTime, domVideo.duration, index, nSplits, beginTime, endTime )\n    if ( domVideo.currentTime != beginTime ) {\n      domVideo.currentTime = beginTime\n    }\n    else {\n      processCurrentFrame()\n    }\n  })()\n\n  const processCurrentFrame = async () => {\n    // console.log( {currentTime: domVideo.currentTime, endTime} )\n\n    if ( endTime - domVideo.currentTime < 1 / FRAME_RATE ) {\n      // const nScanedCharms = charmScanner.countCharms()\n      // console.log(nScanedCharms)\n      // insertScript = charmScanner.generateInsertScript()\n\n      progress = (1)\n      // console.log(charmScanner.charms)\n\n      onFinish()\n\n      return\n    }\n\n    capture.read(frame)\n    charmScanner.scan(frame, videoName) // TODO: コールバックにして汎用クラスにする\n\n    seekFrames(1, FRAME_RATE)\n    progress = ((domVideo.currentTime - beginTime) / (endTime - beginTime))\n  }\n\n\n  const seekFrames = (nFrames, fps) => {\n\t  const currentFrame = domVideo.currentTime * fps\n\t  const newPosition = 0.00001 + (currentFrame + nFrames) / fps\n\t  // plus 0.00001 is workaround for safari\n\n    domVideo.currentTime = Math.min(endTime, newPosition)\n  }\n\n</script>\n\n\n<div class=\"video-reader\">\n  <video id=\"video{index}\"\n         class=\"video-preview\"\n         src=\"{videoData}\"\n         width=\"{videoWidth}\"\n         height=\"{videoHeight}\"\n         alt=\"preview{index}\"\n         style=\"{isVideoVisible ? '' : 'display: none'}\"\n         bind:this={domVideo}>\n    <track kind=\"captions\">\n  </video>\n\n  <div>\n    <progress value={progress}></progress>\n    <span class=\"progress-text\">{Math.floor(progress * 100)}%</span>\n  </div>\n</div>\n\n\n<style>\n  .video-reader {\n    width: 100%;\n    height: 100%;\n  }\n\n  .video-reader video {\n    border: solid 1px gray;\n\n    height: 540px;\n\t\twidth:  960px;\n  }\n\n  .video-reader progress {\n\t\t/* display: block; */\n\t\twidth:   calc(100% - 5rem);\n\t}\n\n  .video-reader .progress-text {\n    width:      4rem;\n    display:    inline-block;\n  }\n</style>\n","<script>\n  import {writable} from 'svelte/store'\n  import VideoReader from './VideoReader.svelte'\n  import {charmManager} from './stores.js'\n\n\n  // const VIDEO_WIDTH      = 1280 // switch のキャプチャ解像度\n  // const VIDEO_HEIGHT     = 720\n  // const VIDEO_FRAME_RATE = 29.97\n  const N_VIDEO_SPLITS = (navigator.hardwareConcurrency || 8) / 2\n\n  export let charmScanner\n  export let isInitialized\n\n  let domInput    // input 要素\n  let files = []  // 選択されたローカルファイル\n\n  // video reader\n  let videoReaderProps = writable([])\n  let countFinishVideoRead\n  let isVideoReadFinished\n\n  // progress\n  let currentFileIndex = -1\n  let isScanFinished = false\n\n  // result\n  let nScanedCharms = 0\n  let exportData = ''\n\n\n  function initVideoReaders() {\n    videoReaderProps = writable([])\n    countFinishVideoRead = 0\n    isVideoReadFinished = false\n  }\n\n\n  async function onFileSelected(e) {\n    const files = e.target.files\n    if ( files == null ) { return }\n\n    isScanFinished = false\n\n    // console.log(files)\n    for (let i = 0; i < files.length; i++) {\n      currentFileIndex = i\n      const file = files[i]\n\n      console.log(file.name, Date())\n\n      initVideoReaders()\n\n      const reader = new FileReader()\n      reader.readAsDataURL(file);\n      await new Promise((resolve) => { reader.onload = resolve })\n\n      for (let i = 0; i < N_VIDEO_SPLITS; i++) {\n        const index = $videoReaderProps.length\n\n        $videoReaderProps[index] = {\n          index: index,\n          videoName: file.name,\n          videoData: reader.result,\n          charmScanner: charmScanner,\n          nSplits: N_VIDEO_SPLITS,\n          onFinish: onFinishVideoRead,\n        }\n      }\n      // console.log($videoReaderProps)\n\n      await new Promise((resolve) => requestAnimationFrame(resolve))\n\n      await new Promise((resolve) => {\n        setInterval(() => {\n          nScanedCharms = charmScanner.countCharms()\n          exportData = charmScanner.exportAsText()\n\n          if ( isVideoReadFinished ) { resolve() }\n        }, 1000)\n      })\n\n      const charms = charmScanner.getCharms()\n      await $charmManager.registerCharms(charms)\n    }\n\n    const charms = charmScanner.getCharms()\n    console.log(JSON.stringify(charms))\n\n    isScanFinished = true\n  }\n\n\n  function onFinishVideoRead() {\n    if ( ++countFinishVideoRead !== N_VIDEO_SPLITS ) { return }\n    isVideoReadFinished = true\n  }\n</script>\n\n\n<div class=\"tab-content\">\n  <div id=\"scanner\">\n    <div id=\"status\">\n      {#each $videoReaderProps as props}\n        <VideoReader {...props} />\n      {/each}\n\n      {#if isScanFinished}\n        Completed!\n      {:else if files.length > 0}\n        Processing {1 + Number(currentFileIndex)}/{files.length} file. Please wait...\n      {/if}\n    </div>\n\n\n    <div id=\"result\">\n      <div>Found {nScanedCharms} charms.</div>\n      <textarea placeholder=\"納刀術,2,ひるみ軽減,1,1,0,0\">{exportData}</textarea>\n    </div>\n\n    <div id=\"upload\">\n      {#if isInitialized}\n        <input style=\"display:none\"\n               type=\"file\"\n               accept=\".mp4\"\n               multiple\n               on:change={onFileSelected}\n               bind:files\n               bind:this={domInput}>\n        <img src=\"https://static.thenounproject.com/png/625182-200.png\" alt=\"\" on:click={()=>{domInput.click()}} />\n        <div on:click={()=>{domInput.click}}>Click to Select Movie</div>\n      {:else}\n        Loading Files...\n      {/if}\n    </div>\n  </div>\n</div>\n\n\n<style>\n  .tab-content {\n    margin:     0;\n    padding:    0;\n    height:     100%;\n    overflow:   auto; /* width 100% でスクロールさせる用 */\n  }\n\n  #scanner #status {\n\t\twidth:     96%;\n    max-width: 960px;\n    margin:    2rem auto;\n\n    text-align: center;\n  }\n\n  #scanner #result {\n    width:  95%;\n    margin: auto;\n  }\n\n  #scanner #result textarea {\n    width:       100%;\n    height:      20rem;\n    font-size:   small;\n    font-family: monospace;\n  }\n\n  #scanner #upload,\n  #scanner #upload * {\n    z-index: 1;\n\t\tcursor:  pointer;\n\n    display: block;\n    margin:  auto;\n    text-align: center;\n\t}\n\n  #scanner #upload {\n    width:  11rem;\n    margin: auto;\n  }\n\n  #scanner #upload img {\n\t\twidth:   60px;\n    height:  60px;\n  }\n\n  #scanner #upload div {\n    font-weight: bold;\n  }\n</style>\n","<script context=\"module\">\n  import CharmScanner  from './CharmScanner.svelte'\n  import CharmList     from './CharmList.svelte'\n  import CharmSearcher from './CharmSearcher.svelte'\n  import CharmIxporter from './CharmIxporter.svelte'\n  import Description   from './Description.svelte'\n\n  export const navOptions = [\n    // { tabTitle: 'Usage',   component: Usage },\n\t\t{ tabTitle: '護石スキャン',\n      component: CharmScanner,\n      iconData: [\n        \"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z\",\n      ],\n    },\n    { tabTitle: '護石管理',\n      component: CharmList,\n      iconData: [\n        \"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z\",\n      ],\n    },\n    { tabTitle: '護石スペック検索',\n      component: CharmSearcher,\n      iconData: [\n        \"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\",\n      ],\n    },\n    { tabTitle: '護石エクスポート',\n      component: CharmIxporter,\n      iconData: [\n        \"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z\",\n      ],\n    },\n    { tabTitle: 'ヘルプ',\n      component: Description,\n      iconData: [\n        \"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\",\n        \"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\",\n      ],\n    },\n  ]\n</script>\n","<script>\n  import {navOptions} from './NavOptions.svelte'\n\n  export let isNavigationOpen\n  export let isInitialized\n  export let charmScanner\n\n  let currentNavOptionId = 4\n\n  let onActivate = {}\n\n  function switchComponent(e) {\n    currentNavOptionId = e.srcElement.closest('button').id\n\n    if ( onActivate[currentNavOptionId] ) {\n      onActivate[currentNavOptionId]()\n    }\n  }\n</script>\n\n\n<div id=\"container\">\n  <ul class=\"navigation\" style=\"width: {isNavigationOpen ? '14rem' : '3.2rem'}\">\n    {#each navOptions as option, i}\n      <li class=\"navigation-item\">\n        <button id={i}\n                class={currentNavOptionId == i ? \"active navigation-link\" : \"navigation-link\"}\n                role=\"tab\"\n                on:click={switchComponent}\n                >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"19\" fill=\"currentColor\">\n            {#each (option.iconData || []) as iconData}\n              <path d={iconData}/>\n            {/each}\n          </svg>\n          <span style=\"display: {isNavigationOpen ? 'inline' : 'none'}\">{option.tabTitle}</span>\n        </button>\n      </li>\n    {/each}\n    <div style=\"position: fixed; bottom: 0; left: 5px;\">\n      <a href=\"https://twitter.com/share?ref_src=twsrc%5Etfw\"\n         class=\"twitter-share-button\"\n         data-text=\"\"\n         data-url=\"https://mhrise-charm-scanner.yuzu-k.com\"\n         data-hashtags=\"MHRise,護石,ツール\"\n         data-show-count=\"false\">\n        Tweet\n      </a>\n      <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n    </div>\n  </ul>\n\n  <div class=\"navigation-content\">\n    {#each navOptions as option, i}\n      <div class=\"h-100 {currentNavOptionId == i ? 'd-block' : 'd-none'}\">\n        <svelte:component this={option.component}\n                          {...{isInitialized, charmScanner}}\n                          onActivate={onActivate[i]}\n                          />\n      </div>\n    {/each}\n  </div>\n</div>\n\n\n<style>\n  #container {\n    width:  100%;\n    height: 100%;\n\n    display: flex;\n    flex-wrap: nowrap;\n  }\n\n  ul.navigation {\n    /* width:   14rem; */\n    height:  100%;\n    margin:  0;\n    padding: 0;\n\n    list-style: none;\n\n    /* border: 2px solid #1266f140; */\n    border: none;\n    border-right: solid 1px #8884;\n\n    flex-grow:   0;\n    flex-shrink: 0;\n\n    transition: left 0.3s ease-in-out;\n  }\n\n  ul.navigation li.navigation-item {\n    width:  100%;\n    height: 3rem;\n    margin: 0;\n  }\n\n  ul.navigation li.navigation-item > button {\n    width: 100%;\n    height: 100%;\n    margin:  0;\n    padding: 0 1rem;\n\n    background: inherit;\n    border:     none;\n\n    text-align: left;\n\n    line-height: 3rem;\n  }\n\n  /* ul.navigation li.navigation-item > button > svg { */\n  /*   position: absolute; */\n\n  /* /\\*   margin:  0; *\\/ */\n  /* /\\*   padding: 0 0 0 1rem; *\\/ */\n  /* } */\n\n  ul.navigation li.navigation-item > button > span {\n  /*   margin:  0; */\n    padding: 0 0 0 0.8rem;\n  }\n\n  ul.navigation li.navigation-item > button.active {\n    background: #1266f110;\n  }\n\n  ul.navigation li.navigation-item > button:hover {\n    background: #8881;\n  }\n\n  div.navigation-content {\n    width:    100%;\n    height:   100%;\n    overflow: hidden;\n  }\n</style>\n","<script lang:ts>\n  import MHRiseCharmManager from './mhrise-charm-manager.js'\n  import MHRiseCharmScanner from './mhrise-charm-scanner.js'\n  import Hamburger from './Hamburger.svelte'\n  import Nav from './Nav.svelte'\n  import {charmManager} from './stores.js'\n\n  const TITLE   = 'MHRise Charm Scanner'\n  const VERSION = '0.5.7'\n\n  // let isDemoMode       = false\n  let isNavigationOpen = true\n  let isInitialized     = false\n  let charmScanner\n\n  window.addEventListener('load', async () => {\n    charmScanner = new MHRiseCharmScanner()\n    $charmManager = new MHRiseCharmManager()\n    await charmScanner.init()\n    isInitialized = true\n  })\n\n/*\n  function onChangeDemoMode() {\n    if ( isDemoMode ) {\n      $charmManager = new MHRiseCharmManager({isDemoMode: true})\n      console.log(charmScanner.charmTableName)\n    }\n    else {\n      $charmManager = new MHRiseCharmManager()\n      console.log(charmScanner.charmTableName)\n    }\n  }\n*/\n</script>\n\n<main>\n  <header>\n    <Hamburger bind:isOpen={isNavigationOpen}/>\n\t  <h1>{TITLE}</h1>\n\n    <!-- <div style=\"position: absolute; right: 0; width: 7rem; margin-top: 0.8rem; display: flex;\"> -->\n    <!--   <span style=\"color: white\">DEMO</span> -->\n    <!--   <div class=\"material-switch\"> -->\n    <!--     <input id=\"switch-demo\" type=\"checkbox\" bind:checked={isDemoMode} on:change={onChangeDemoMode}> -->\n    <!--     <label for=\"switch-demo\"></label> -->\n    <!--   </div> -->\n    <!-- </div> -->\n  </header>\n  <div id=\"nav-wrapper\">\n    <Nav {...{isNavigationOpen, isInitialized, charmScanner}} />\n  </div>\n  <div id=\"version\">v{VERSION}</div>\n</main>\n\n\n<style>\n/*\n  .material-switch > input[type=\"checkbox\"] {\n      display: none;\n  }\n\n  .material-switch > label {\n      cursor: pointer;\n      height: 0px;\n      position: relative;\n      width: 40px;\n      top: 12px;\n      left: 10px;\n  }\n\n  .material-switch > label::before {\n      background: rgb(10, 10, 100);\n      box-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\n      border-radius: 8px;\n      content: '';\n      height: 16px;\n      margin-top: -8px;\n      position:absolute;\n      opacity: 0.3;\n      transition: all 0.4s ease-in-out;\n      width: 40px;\n  }\n  .material-switch > label::after {\n      background: rgb(255, 255, 255);\n      border-radius: 16px;\n      box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\n      content: '';\n      height: 24px;\n      left: -4px;\n      margin-top: -8px;\n      position: absolute;\n      top: -4px;\n      transition: all 0.3s ease-in-out;\n      width: 24px;\n  }\n  .material-switch > input[type=\"checkbox\"]:checked + label::before {\n      background: orange;\n      opacity: 0.5;\n  }\n  .material-switch > input[type=\"checkbox\"]:checked + label::after {\n      background: orange;\n      left: 20px;\n  }\n*/\n\tmain {\n    width:   100%;\n    height:  100%;\n\n    margin:  0;\n    padding: 0;\n\n\t\ttext-align: left;\n\t}\n\n  header {\n    display: flex;\n    background: #222;\n\n    height: 3rem;\n  }\n\n\theader h1 {\n    margin:  0;\n    padding: 0;\n\t\t/* color: #ff3e00; */\n    color: white;\n\n\t\tfont-weight: 400;\n\t\tfont-size: 1.5em;\n    line-height: 3rem;\n    height: 3rem;\n\n    border: none;\n\t}\n\n  #nav-wrapper {\n    height: calc(100% - 3rem);\n  }\n\n  #version {\n    position:      fixed;\n    bottom:        0;\n    right:         0;\n    padding-right: 0.5rem;\n\n    font-size: small;\n  }\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n    props: {\n    // name: 'world'\n    }\n});\nexport default app;\n"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","exclude_internal_props","props","result","null_to_empty","value","set_store_value","ret","set","action_destroyer","action_result","destroy","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","set_data","wholeText","set_input_value","input","set_style","important","setProperty","select_option","select","option","__value","selected","select_value","selected_option","querySelector","toggle_class","toggle","classList","custom_event","type","detail","e","createEvent","initCustomEvent","HtmlTag","[object Object]","this","n","html","nodeName","t","h","innerHTML","Array","from","childNodes","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","ownerDocument","add","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","onMount","on_mount","createEventDispatcher","call","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","after_update","promise","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","tick","css","fulfill","loop","then","get_spread_update","levels","updates","to_null_out","accounted_for","get_spread_object","spread_props","bind","index","bound","create_component","mount_component","customElement","m","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","parent_component","on_disconnect","context","Map","skip_bound","ready","rest","hydrate","nodes","children","l","SvelteComponent","$destroy","splice","$$props","obj","$$set","keys","__assign","s","arguments","prototype","hasOwnProperty","apply","__spreadArrays","il","j","jl","isArray","_global","self","global","extend","extension","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","proto","setProp","defineProperty","functionOrGetSet","get","configurable","writable","derive","Child","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","args","override","origFunc","overridedFactory","assert","asap","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","item","nameAndValue","getByKeyPath","keyPath","rv","val","period","innerObj","substr","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","delByKeyPath","kp","shallowClone","concat","flatten","intrinsicTypeNames","num","intrinsicTypes","intrinsicTypeNameSet","deepClone","any","constructor","toString","toStringTag","getValueOf","v","Uint8Array","getTime","ArrayBuffer","isView","buffer","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","iteratorSymbol","Symbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","done","isAsyncFunction","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","prettyStack","exception","numIgnoredFrames","message","frame","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","_a","globalP","crypto","subtle","nativeP","digest","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","asap$1","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","tryCatch","origProp","some","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","callListener","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","err","finally","onFinally","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","AggregateError","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","props$$1","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","initEvent","CustomEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","console","warn","tempTransaction","db","mode","storeNames","openComplete","letThrough","trans","_createTransaction","_dbSchema","_completion","isBeingOpened","_options","autoOpen","open","dbReadyPromise","DEXIE_VERSION","maxString","String","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","JSON","stringify","idxByName","idb","_deps","indexedDB","cmp","prevIndex","prevFilterFn","multi","idx","filterFunction","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","defineClass","content","auto","objToAdd","mutate","numFailures","lastResult","keyOrObject","InvalidArgument","modify","put","range","bulkGet","keys$$1","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","pos","bulkPut","objectsToPut","bulkDelete","numKeys","Events","evs","eventName","subscriber","addEventType","chainFunction","defaultFunction","addConfiguredEvents","subscribers","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","continue","advancer","_read","_ctx","error","table","_write","_addAlgorithm","clone","raw","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","Dexie","totalFailures","applyMutateResult","expectedCount","_i","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","nextKeySuffix","needlesLen","initDirection","toUpperCase","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","enumerable","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","eventRejectHandler","preventDefault","stopPropagation","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","idbdb","dbOpenError","MissingAPI","OpenFailed","transaction","ev","_reject","onabort","on","oncomplete","_resolve","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","nameFromKeyPath","createTableSchema","getKeyExtractor","getSinglePathKeyExtractor","getEffectiveKeys","req","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","extractSchema","isAddOrPut","errorHandler","_reqno","setResult","args1","args2","keyCount","callbackCount","successHandler","_pos","request","nonInfinitLimit","source","idbKeyRange","getAll","getAllKeys","count_1","req_1","openKeyCursor","result_1","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStacks","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","generateMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","removeTablesApi","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","tuple","change","recreate","Upgrade","store_1","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","returnValue_1","contentUpgradeIsAsync_1","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","contains","updateTablesAndIndexes","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","createIndex","idbindex","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","databaseEnumerator","Version","_parseStoresSpec","stores","outSchema","indexNum","trim","replace","storesSource","storesSpec","_allTables","upgrade","upgradeFunction","vip","dexieOpen","state","openCanceller","resolveDbReady","dbReadyResolve","upgradeTransaction","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onReadyBeingFired","fireRemainders","remainders","awaitIterator","callNext","onSuccess","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","returnValue","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","createVirtualCursor","hooksMiddleware","downCore","downTable","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deps","dependencies","addons","cancelOpen","bSticky","db_1","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","remove","backendDB","isOpen","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","Dexie$1","databaseName","exists","getDatabaseNames","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","semVer","default","maxKey","dbNamesTable","hasDatabasesNative","databases","dbnames","infos","info","DatabaseEnumerator","initDatabaseEnumerator","domError","skillToSlotLevel","無し","龍耐性","氷耐性","雷耐性","水耐性","火耐性","毒耐性","麻痺耐性","睡眠耐性","爆破やられ耐性","植生学","地質学","飛び込み","陽動","泥雪耐性","満足感","腹減り耐性","剥ぎ取り鉄人","防御","龍属性攻撃強化","氷属性攻撃強化","雷属性攻撃強化","水属性攻撃強化","火属性攻撃強化","ボマー","滑走強化","毒属性強化","スタミナ奪取","笛吹き名人","回復速度","砥石使用高速化","風圧耐性","ひるみ軽減","ブレ抑制","気絶耐性","装填速度","反動軽減","不屈","乗り名人","体術","体力回復量UP","アイテム使用強化","翔蟲使い","壁面移動","精霊の加護","早食い","属性やられ耐性","破壊王","広域化","KO術","納刀術","回避性能","回避距離UP","抜刀術【力】","泡沫の舞","逆襲","耐震","鈍器使い","高速変形","見切り","攻撃","渾身","強化持続","スタミナ急速回復","ガード性能","ガード強化","砲弾装填","特殊射撃強化","火事場力","心眼","集中","ランナー","砲術","会心撃【属性】","弾導強化","超会心","弱点特効","挑戦者","フルチャージ","逆恨み","死中に活","力の解放","麻痺属性強化","睡眠属性強化","爆破属性強化","剛刃研磨","業物","弾丸節約","達人芸","耳栓","抜刀術【技】","キノコ大好き","攻めの守勢","装填拡張","通常弾・連射矢強化","貫通弾・貫通矢強化","散弾・拡散矢強化","速射強化","ジャンプ鉄人","鬼火纏","幸運","匠","MHRiseCharmManager","isDemoMode","charmTableName","_init","placeholderValues","tx","executeSql","openDatabase","_createTable","sql","indexeddb","images","updateCharmArray","charms","slots","image","imageName","skills","skillLevels","log","rows","cv","matFromArray","cols","charm","sl","substitutableCharms","skillLevelsRequiredInDecorations","MAX_SKILLS","MAX_SLOTS","requiredSlots","skillConstraints","skillConstraintsRev","sc","_isSameCharm","_row2obj","rowid","searchCharms","row","evaluation","skill1","skill1Level","skill2","skill2Level","slot1","slot2","slot3","searchSubstitutableCharms","Module","getSubstitutesAll","substitutes","parse","baseId","upperIds","Number","MAX_SAFE_INTEGER","u","fetchImage","path","img","Image","onload","imgmat","imread","countImageDiffAtPoint","templateImage","point","maskBinaryThreshold","diffBinaryThreshold","Size","rect","Rect","trimmed","roi","templateMask","Mat","threshold","THRESH_BINARY","masked","copyTo","absdiff","cvtColor","COLOR_BGR2GRAY","getMostMatchedImage","templates","minDiffCount","candidate","template","entries","diffCount","countNonZero","promiseAllRecursive","object","promises","pair","resolveObject","MHRiseCharmScanner","Point","rare","7","6","5","4","lvl","0","1","2","3","0-0-0","1-0-0","1-1-0","1-1-1","2-0-0","2-1-0","2-1-1","2-2-0","2-2-1","3-0-0","3-1-0","3-1-1","3-2-0","3-2-1","skill","page","MAX_PAGE","reset","nCharms","ROWS_PER_PAGE","col","charmData","metadata","screenshot","movieName","_getCurrentPage","_getCurrentCharmPos","isScaned","rarity","_getRarity","_getSlots","_getSkills","_getSkillLevels","buf","COLUMNS_PER_PAGE","第一スキル","第一スキルポイント","第二スキル","第二スキルポイント","スロット","POINT_RARITY","POINT_SLOTS","POINT_SKILL1","POINT_SKILL2","POINT_SKILL_LEVEL1","POINT_SKILL_LEVEL2","POINT_PAGE","POINT_CHARM_AREA_LEFT_TOP","SIZE_CHARM_AREA","matchTemplate","TM_CCOEFF_NORMED","maxLoc","maxVal","minMaxLoc","floor","y","thumbnailClasses","thumbnailStyle","protect","cubicOut","fade","linear","getComputedStyle","opacity","fly","target_opacity","transform","od","slide","height","parseFloat","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","headerClasses","buttonClasses","alt","class","portrait","title","description","galleryLength","activeImage","classes","actualTitle","actualDescription","modalClasses","modalStyle","transitionDuration","gallery","allModalClasses","slotContent","hidden","subscriber_queue","new_value","run_queue","invalidate","noScroll","thumbnail","visible","mountedT","defaultOverflow","body","overflow","code","clean","extra_keys","includes","setScrollbarWidth","padding","paddingRight","conditionallyUpdateScrollbar","scrollbarWidth","scrollDiv","position","top","width","offsetWidth","clientWidth","getScrollbarWidth","fixedContent","querySelectorAll","bodyPadding","innerWidth","toVal","mix","clsx","forwardEventsBuilder","additionalEvents","events","forward","bubble","destructors","forwardEvents","domElement","className","color","disabled","outline","gradient","rounded","ariaLabel","defaultAriaLabel","vertical","elementClasses","modal-backdrop","openCount","dialogBaseClass","autoFocus","centered","backdropDuration","scrollable","labelledBy","backdrop","onEnter","onExit","onOpened","onClosed","wrapClassName","modalClassName","backdropClassName","contentClassName","zIndex","unmountOnClose","returnFocusAfterClose","displacementX","displacementY","side","fullHeight","_triggeringElement","_originalBodyPadding","_dialog","_mouseDownElement","_removeEscListener","hasOpened","_isMounted","_lastIsOpen","_lastHasOpened","setFocus","focus","activeElement","getPropertyValue","getOriginalBodyPadding","manageFocusAfterClose","modalOpenClassNameRegex","RegExp","afterUpdate","modal-side","modal-full-height","modal-frame","backdropElem","browserEvent","closeAriaLabel","charCode","closeIcon","onOkay","onCancel","colorOkayButton","labelOkayButton","param","label","charmManager","hankaku2zenkaku","isDisabled","onClick","__awaiter","thisArg","_arguments","P","generator","IMPORT_MODE","APPEND","OVERWRITE","confirm","textareaValue","importCharms","$charmManager","line","s1","sl1","s2","sl2","registerCharms","highlighted","safeStringFunction","theFunction","argument","originalResult","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","keywords","textCleanFunction","userEnteredText","beforeChange","oldSelectedItem","newSelectedItem","onChange","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","localFiltering","noResultsText","placeholder","inputClassName","inputId","html5autocomplete","dropdownClassName","hideArrow","showClear","selectedItem","uniqueId","random","list","filteredListItems","inputDelayTimeout","opened","highlightIndex","filteredTextLength","listItems","safeLabelFunction","safeKeywordsFunction","prepareListItems","tStart","listItem","getListItem","tEnd","search","textFiltered","textFilteredLowerCase","prepareUserEnteredText","closeIfMinCharsToSearchReached","tempfilteredListItems","searchWords","itemKeywords","matches","searchWord","hlfilter","highlightFilter","filteredListItemsHighlighted","selectListItem","selectItem","up","highlight","el","scrollIntoViewIfNeeded","onListItemClick","processInput","onEsc","resetListToAllItemsAndOpen","isMinCharsToSearchReached","q","fields","qs","reg","repl","newI","showList","closest","shiftKey","Tab","ShiftTab","ArrowDown","ArrowUp","Escape","searchValue","headerClass","sortable","renderValue","renderComponent","columns","sortOrder","iconAsc","iconDesc","classNameTable","classNameThead","classNameTbody","classNameSelect","classNameRow","classNameCell","filterSelections","sliceBegin","sliceEnd","disableFilterHeader","sortFunction","showFilterHeader","filterOptions","filterValues","columnByKey","handleClickCol","colKey","handleClickRow","handleClickCell","c_rows","toLocaleLowerCase","filterValue","$sortOn","allSkillDetails","hiragana","englishCharacters","englishcharacters","headerColor","showImageColumn","showSubstitutesColumn","allSkills","nums","imagename","toShow","isScreenshotShown","getScreenshot","imshow","isSubstitutableCharmsShown","onClickRow","styleVars","header-background-color","table-width","handleKeydown","keyCode","click","ctrlKey","metaKey","altKey","prefix","focusedId","currentSuffix","nextFocus","getElementById","SKILL_LEVEL_LIST","skillFilters","skillLevelFilters","isSpinnerShown","searchResults","currentPage","itemsPerPage","base","matchIds","getSubstitutes","find","nPages","ceil","searchResultsToShow","setInterval","videoWidth","videoHeight","beginTime","endTime","domVideo","capture","nSplits","videoName","videoData","isVideoVisible","charmScanner","onFinish","CV_8UC4","progress","oncanplay","VideoCapture","processCurrentFrame","currentTime","read","scan","seekFrames","nFrames","fps","newPosition","N_VIDEO_SPLITS","hardwareConcurrency","domInput","countFinishVideoRead","isVideoReadFinished","isInitialized","files","videoReaderProps","currentFileIndex","isScanFinished","nScanedCharms","exportData","onFinishVideoRead","file","reader","FileReader","readAsDataURL","$videoReaderProps","countCharms","exportAsText","getCharms","navOptions","tabTitle","iconData","isNavigationOpen","currentNavOptionId","onActivate","srcElement","TITLE","VERSION"],"mappings":"gCAAA,SAASA,KACT,MAAMC,EAAWC,GAAKA,EACtB,SAASC,EAAOC,EAAKC,GAEjB,IAAK,MAAMC,KAAKD,EACZD,EAAIE,GAAKD,EAAIC,GACjB,OAAOF,EAUX,SAASG,EAAIC,GACT,OAAOA,IAEX,SAASC,IACL,OAAOC,OAAOC,OAAO,MAEzB,SAASC,EAAQC,GACbA,EAAIC,QAAQP,GAEhB,SAASQ,EAAYC,GACjB,MAAwB,mBAAVA,EAElB,SAASC,EAAeC,EAAGC,GACvB,OAAOD,GAAKA,EAAIC,GAAKA,EAAID,IAAMC,GAAOD,GAAkB,iBAANA,GAAgC,mBAANA,EAahF,SAASE,EAAUC,KAAUC,GACzB,GAAa,MAATD,EACA,OAAOrB,EAEX,MAAMuB,EAAQF,EAAMD,aAAaE,GACjC,OAAOC,EAAMC,YAAc,IAAMD,EAAMC,cAAgBD,EAO3D,SAASE,EAAoBC,EAAWL,EAAOM,GAC3CD,EAAUE,GAAGC,WAAWC,KAAKV,EAAUC,EAAOM,IAElD,SAASI,EAAYC,EAAYC,EAAKC,EAAS1B,GAC3C,GAAIwB,EAAY,CACZ,MAAMG,EAAWC,EAAiBJ,EAAYC,EAAKC,EAAS1B,GAC5D,OAAOwB,EAAW,GAAGG,IAG7B,SAASC,EAAiBJ,EAAYC,EAAKC,EAAS1B,GAChD,OAAOwB,EAAW,IAAMxB,EAClBL,EAAO+B,EAAQD,IAAII,QAASL,EAAW,GAAGxB,EAAGyB,KAC7CC,EAAQD,IAoBlB,SAASK,EAAYC,EAAMC,EAAiBP,EAAKC,EAASO,EAAOC,EAAqBC,GAClF,MAAMC,EAnBV,SAA0BZ,EAAYE,EAASO,EAAOjC,GAClD,GAAIwB,EAAW,IAAMxB,EAAI,CACrB,MAAMqC,EAAOb,EAAW,GAAGxB,EAAGiC,IAC9B,QAAsBK,IAAlBZ,EAAQO,MACR,OAAOI,EAEX,GAAoB,iBAATA,EAAmB,CAC1B,MAAME,EAAS,GACTC,EAAMC,KAAKC,IAAIhB,EAAQO,MAAMU,OAAQN,EAAKM,QAChD,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAKI,GAAK,EAC1BL,EAAOK,GAAKlB,EAAQO,MAAMW,GAAKP,EAAKO,GAExC,OAAOL,EAEX,OAAOb,EAAQO,MAAQI,EAE3B,OAAOX,EAAQO,MAGMY,CAAiBb,EAAiBN,EAASO,EAAOC,GACvE,GAAIE,EAAc,CACd,MAAMU,EAAelB,EAAiBI,EAAiBP,EAAKC,EAASS,GACrEJ,EAAKgB,EAAED,EAAcV,IAU7B,SAASY,EAAuBC,GAC5B,MAAMC,EAAS,GACf,IAAK,MAAMpD,KAAKmD,EACC,MAATnD,EAAE,KACFoD,EAAOpD,GAAKmD,EAAMnD,IAC1B,OAAOoD,EA0BX,SAASC,EAAcC,GACnB,OAAgB,MAATA,EAAgB,GAAKA,EAEhC,SAASC,EAAgBxC,EAAOyC,EAAKF,EAAQE,GAEzC,OADAzC,EAAM0C,IAAIH,GACHE,EAGX,SAASE,EAAiBC,GACtB,OAAOA,GAAiBlD,EAAYkD,EAAcC,SAAWD,EAAcC,QAAUlE,EAGzF,MAAMmE,EAA8B,oBAAXC,OACzB,IAAIC,EAAMF,EACJ,IAAMC,OAAOE,YAAYD,MACzB,IAAME,KAAKF,MACbG,EAAML,EAAYM,GAAMC,sBAAsBD,GAAMzE,EASxD,MAAM2E,EAAQ,IAAIC,IAClB,SAASC,EAAUR,GACfM,EAAM7D,SAAQgE,IACLA,EAAKC,EAAEV,KACRM,EAAMK,OAAOF,GACbA,EAAKG,QAGM,IAAfN,EAAMO,MACNV,EAAIK,GA0BZ,SAASM,EAAOC,EAAQC,GACpBD,EAAOE,YAAYD,GAEvB,SAASE,EAAOH,EAAQC,EAAMG,GAC1BJ,EAAOK,aAAaJ,EAAMG,GAAU,MAExC,SAASE,EAAOL,GACZA,EAAKM,WAAWC,YAAYP,GAEhC,SAASQ,EAAaC,EAAYC,GAC9B,IAAK,IAAI3C,EAAI,EAAGA,EAAI0C,EAAW3C,OAAQC,GAAK,EACpC0C,EAAW1C,IACX0C,EAAW1C,GAAG4C,EAAED,GAG5B,SAASE,EAAQC,GACb,OAAOC,SAASC,cAAcF,GAiBlC,SAASG,EAAYH,GACjB,OAAOC,SAASG,gBAAgB,6BAA8BJ,GAElE,SAASK,EAAKC,GACV,OAAOL,SAASM,eAAeD,GAEnC,SAASE,IACL,OAAOH,EAAK,KAEhB,SAASI,IACL,OAAOJ,EAAK,IAEhB,SAASK,EAAOvB,EAAMwB,EAAOC,EAASC,GAElC,OADA1B,EAAK2B,iBAAiBH,EAAOC,EAASC,GAC/B,IAAM1B,EAAK4B,oBAAoBJ,EAAOC,EAASC,GAuB1D,SAASG,EAAK7B,EAAM8B,EAAWvD,GACd,MAATA,EACAyB,EAAK+B,gBAAgBD,GAChB9B,EAAKgC,aAAaF,KAAevD,GACtCyB,EAAKiC,aAAaH,EAAWvD,GAErC,SAAS2D,EAAelC,EAAMmC,GAE1B,MAAMC,EAAc/G,OAAOgH,0BAA0BrC,EAAKsC,WAC1D,IAAK,MAAMC,KAAOJ,EACS,MAAnBA,EAAWI,GACXvC,EAAK+B,gBAAgBQ,GAER,UAARA,EACLvC,EAAKwC,MAAMC,QAAUN,EAAWI,GAEnB,YAARA,EACLvC,EAAKzB,MAAQyB,EAAKuC,GAAOJ,EAAWI,GAE/BH,EAAYG,IAAQH,EAAYG,GAAK7D,IAC1CsB,EAAKuC,GAAOJ,EAAWI,GAGvBV,EAAK7B,EAAMuC,EAAKJ,EAAWI,IA6EvC,SAASG,EAASxB,EAAMC,GACpBA,EAAO,GAAKA,EACRD,EAAKyB,YAAcxB,IACnBD,EAAKC,KAAOA,GAEpB,SAASyB,EAAgBC,EAAOtE,GAC5BsE,EAAMtE,MAAiB,MAATA,EAAgB,GAAKA,EAUvC,SAASuE,EAAU9C,EAAMuC,EAAKhE,EAAOwE,GACjC/C,EAAKwC,MAAMQ,YAAYT,EAAKhE,EAAOwE,EAAY,YAAc,IAEjE,SAASE,EAAcC,EAAQ3E,GAC3B,IAAK,IAAIR,EAAI,EAAGA,EAAImF,EAAOxB,QAAQ5D,OAAQC,GAAK,EAAG,CAC/C,MAAMoF,EAASD,EAAOxB,QAAQ3D,GAC9B,GAAIoF,EAAOC,UAAY7E,EAEnB,YADA4E,EAAOE,UAAW,IAW9B,SAASC,EAAaJ,GAClB,MAAMK,EAAkBL,EAAOM,cAAc,aAAeN,EAAOxB,QAAQ,GAC3E,OAAO6B,GAAmBA,EAAgBH,QA0D9C,SAASK,EAAa7C,EAASC,EAAM6C,GACjC9C,EAAQ+C,UAAUD,EAAS,MAAQ,UAAU7C,GAEjD,SAAS+C,EAAaC,EAAMC,GACxB,MAAMC,EAAIjD,SAASkD,YAAY,eAE/B,OADAD,EAAEE,gBAAgBJ,GAAM,GAAO,EAAOC,GAC/BC,EAKX,MAAMG,EACFC,YAAYhE,EAAS,MACjBiE,KAAKvI,EAAIsE,EACTiE,KAAKL,EAAIK,KAAKC,EAAI,KAEtBF,EAAEG,EAAMvE,EAAQI,EAAS,MAChBiE,KAAKL,IACNK,KAAKL,EAAInD,EAAQb,EAAOwE,UACxBH,KAAKI,EAAIzE,EACTqE,KAAKK,EAAEH,IAEXF,KAAKrG,EAAEoC,GAEXgE,EAAEG,GACEF,KAAKL,EAAEW,UAAYJ,EACnBF,KAAKC,EAAIM,MAAMC,KAAKR,KAAKL,EAAEc,YAE/BV,EAAEhE,GACE,IAAK,IAAIpC,EAAI,EAAGA,EAAIqG,KAAKC,EAAEvG,OAAQC,GAAK,EACpCmC,EAAOkE,KAAKI,EAAGJ,KAAKC,EAAEtG,GAAIoC,GAGlCgE,EAAEG,GACEF,KAAKzD,IACLyD,KAAKK,EAAEH,GACPF,KAAKrG,EAAEqG,KAAKvI,GAEhBsI,IACIC,KAAKC,EAAE5I,QAAQ4E,IAkBvB,MAAMyE,EAAc,IAAIvF,IACxB,IAiIIwF,EAjIAC,EAAS,EASb,SAASC,EAAYjF,EAAMnE,EAAGC,EAAGoJ,EAAUC,EAAOC,EAAMjK,EAAIkK,EAAM,GAC9D,MAAMC,EAAO,OAASJ,EACtB,IAAIK,EAAY,MAChB,IAAK,IAAIrH,EAAI,EAAGA,GAAK,EAAGA,GAAKoH,EAAM,CAC/B,MAAMd,EAAI3I,GAAKC,EAAID,GAAKuJ,EAAKlH,GAC7BqH,GAAiB,IAAJrH,EAAU,KAAK/C,EAAGqJ,EAAG,EAAIA,QAE1C,MAAMgB,EAAOD,EAAY,SAASpK,EAAGW,EAAG,EAAIA,SACtC+E,EAAO,YAfjB,SAAc4E,GACV,IAAIC,EAAO,KACP3H,EAAI0H,EAAI3H,OACZ,KAAOC,KACH2H,GAASA,GAAQ,GAAKA,EAAQD,EAAIE,WAAW5H,GACjD,OAAO2H,IAAS,EAUSA,CAAKF,MAASH,IACjCO,EAAM5F,EAAK6F,cACjBf,EAAYgB,IAAIF,GAChB,MAAMG,EAAaH,EAAII,sBAAwBJ,EAAII,oBAAsBJ,EAAIK,KAAKhG,YAAYW,EAAQ,UAAUsF,OAC1GC,EAAgBP,EAAIQ,iBAAmBR,EAAIQ,eAAiB,IAC7DD,EAActF,KACfsF,EAActF,IAAQ,EACtBkF,EAAWM,WAAW,cAAcxF,KAAQ2E,IAAQO,EAAWO,SAASxI,SAE5E,MAAMyI,EAAYvG,EAAKwC,MAAM+D,WAAa,GAG1C,OAFAvG,EAAKwC,MAAM+D,UAAY,GAAGA,EAAY,GAAGA,MAAgB,KAAK1F,KAAQqE,cAAqBC,aAC3FH,GAAU,EACHnE,EAEX,SAAS2F,EAAYxG,EAAMa,GACvB,MAAM4F,GAAYzG,EAAKwC,MAAM+D,WAAa,IAAIG,MAAM,MAC9CC,EAAOF,EAASG,OAAO/F,EACvBgG,GAAQA,EAAKC,QAAQjG,GAAQ,EAC7BgG,IAAsC,IAA9BA,EAAKC,QAAQ,aAErBC,EAAUN,EAAS3I,OAAS6I,EAAK7I,OACnCiJ,IACA/G,EAAKwC,MAAM+D,UAAYI,EAAKK,KAAK,MACjChC,GAAU+B,EACL/B,GAKT7F,GAAI,KACI6F,IAEJF,EAAYrJ,SAAQmK,IAChB,MAAMG,EAAaH,EAAII,oBACvB,IAAIjI,EAAIgI,EAAWO,SAASxI,OAC5B,KAAOC,KACHgI,EAAWkB,WAAWlJ,GAC1B6H,EAAIQ,eAAiB,MAEzBtB,EAAYoC,aA0EpB,SAASC,EAAsB9K,GAC3B0I,EAAoB1I,EAExB,SAAS+K,IACL,IAAKrC,EACD,MAAM,IAAIsC,MAAM,oDACpB,OAAOtC,EAKX,SAASuC,EAAQnM,GACbiM,IAAwB7K,GAAGgL,SAAS9K,KAAKtB,GAQ7C,SAASqM,IACL,MAAMnL,EAAY+K,IAClB,MAAO,CAACvD,EAAMC,KACV,MAAM7H,EAAYI,EAAUE,GAAGN,UAAU4H,GACzC,GAAI5H,EAAW,CAGX,MAAMuF,EAAQoC,EAAaC,EAAMC,GACjC7H,EAAUe,QAAQvB,SAAQN,IACtBA,EAAGsM,KAAKpL,EAAWmF,QAwBnC,MAAMkG,EAAmB,GAEnBC,EAAoB,GACpBC,GAAmB,GACnBC,GAAkB,GAClBC,GAAmBC,QAAQC,UACjC,IAAIC,IAAmB,EAWvB,SAASC,GAAoB/M,GACzByM,GAAiBnL,KAAKtB,GAE1B,SAASgN,GAAmBhN,GACxB0M,GAAgBpL,KAAKtB,GAEzB,IAAIiN,IAAW,EACf,MAAMC,GAAiB,IAAI9I,IAC3B,SAAS+I,KACL,IAAIF,GAAJ,CAEAA,IAAW,EACX,EAAG,CAGC,IAAK,IAAIrK,EAAI,EAAGA,EAAI2J,EAAiB5J,OAAQC,GAAK,EAAG,CACjD,MAAM1B,EAAYqL,EAAiB3J,GACnCoJ,EAAsB9K,GACtBkM,GAAOlM,EAAUE,IAIrB,IAFA4K,EAAsB,MACtBO,EAAiB5J,OAAS,EACnB6J,EAAkB7J,QACrB6J,EAAkBa,KAAlBb,GAIJ,IAAK,IAAI5J,EAAI,EAAGA,EAAI6J,GAAiB9J,OAAQC,GAAK,EAAG,CACjD,MAAMzB,EAAWsL,GAAiB7J,GAC7BsK,GAAeI,IAAInM,KAEpB+L,GAAevC,IAAIxJ,GACnBA,KAGRsL,GAAiB9J,OAAS,QACrB4J,EAAiB5J,QAC1B,KAAO+J,GAAgB/J,QACnB+J,GAAgBW,KAAhBX,GAEJI,IAAmB,EACnBG,IAAW,EACXC,GAAenB,SAEnB,SAASqB,GAAOhM,GACZ,GAAoB,OAAhBA,EAAGmM,SAAmB,CACtBnM,EAAGgM,SACHhN,EAAQgB,EAAGoM,eACX,MAAMvL,EAAQb,EAAGa,MACjBb,EAAGa,MAAQ,EAAE,GACbb,EAAGmM,UAAYnM,EAAGmM,SAASxK,EAAE3B,EAAGK,IAAKQ,GACrCb,EAAGqM,aAAanN,QAAQyM,KAIhC,IAAIW,GAUJ,SAASC,GAAS9I,EAAM+I,EAAWC,GAC/BhJ,EAAKiJ,cAAcrF,EAAa,GAAGmF,EAAY,QAAU,UAAUC,MAEvE,MAAME,GAAW,IAAI3J,IACrB,IAAI4J,GACJ,SAASC,KACLD,GAAS,CACLE,EAAG,EACH3J,EAAG,GACHxB,EAAGiL,IAGX,SAASG,KACAH,GAAOE,GACR9N,EAAQ4N,GAAOzJ,GAEnByJ,GAASA,GAAOjL,EAEpB,SAASqL,GAAcC,EAAOC,GACtBD,GAASA,EAAMzL,IACfmL,GAASvJ,OAAO6J,GAChBA,EAAMzL,EAAE0L,IAGhB,SAASC,GAAeF,EAAOC,EAAOpJ,EAAQ/D,GAC1C,GAAIkN,GAASA,EAAMG,EAAG,CAClB,GAAIT,GAAST,IAAIe,GACb,OACJN,GAASpD,IAAI0D,GACbL,GAAOzJ,EAAEjD,MAAK,KACVyM,GAASvJ,OAAO6J,GACZlN,IACI+D,GACAmJ,EAAM7I,EAAE,GACZrE,QAGRkN,EAAMG,EAAEF,IAGhB,MAAMG,GAAkB,CAAE1E,SAAU,GAuHpC,SAAS2E,GAAgC7J,EAAM7E,EAAI2O,EAAQC,GACvD,IAAIC,EAAS7O,EAAG6E,EAAM8J,GAClBtF,EAAIuF,EAAQ,EAAI,EAChBE,EAAkB,KAClBC,EAAkB,KAClBC,EAAiB,KACrB,SAASC,IACDD,GACA3D,EAAYxG,EAAMmK,GAE1B,SAASE,EAAKC,EAASpF,GACnB,MAAMvE,EAAI2J,EAAQxO,EAAI0I,EAEtB,OADAU,GAAYtH,KAAK2M,IAAI5J,GACd,CACH9E,EAAG2I,EACH1I,EAAGwO,EAAQxO,EACX6E,EAAAA,EACAuE,SAAAA,EACAsF,MAAOF,EAAQE,MACfC,IAAKH,EAAQE,MAAQtF,EACrBwF,MAAOJ,EAAQI,OAGvB,SAASC,EAAG7O,GACR,MAAMqJ,MAAEA,EAAQ,EAACD,SAAEA,EAAW,IAAG0F,OAAEA,EAAShQ,EAAQiQ,KAAEA,EAAOlQ,EAAImQ,IAAEA,GAAQd,GAAUJ,GAC/EU,EAAU,CACZE,MAAOxL,IAAQmG,EACfrJ,EAAAA,GAECA,IAEDwO,EAAQI,MAAQvB,GAChBA,GAAOE,GAAK,GAEZY,GAAmBC,EACnBA,EAAkBI,GAKdQ,IACAV,IACAD,EAAiBlF,EAAYjF,EAAMwE,EAAG1I,EAAGoJ,EAAUC,EAAOyF,EAAQE,IAElEhP,GACA+O,EAAK,EAAG,GACZZ,EAAkBI,EAAKC,EAASpF,GAChCgD,IAAoB,IAAMY,GAAS9I,EAAMlE,EAAG,WAvyBxD,SAAcQ,GACV,IAAImD,EACe,IAAfH,EAAMO,MACNV,EAAIK,GAEK,IAAIuI,SAAQgD,IACjBzL,EAAMwG,IAAIrG,EAAO,CAAEC,EAAGpD,EAAUsD,EAAGmL,OAkyBnCC,EAAKhM,IAUD,GATIkL,GAAmBlL,EAAMkL,EAAgBM,QACzCP,EAAkBI,EAAKH,EAAiBhF,GACxCgF,EAAkB,KAClBpB,GAAS9I,EAAMiK,EAAgBnO,EAAG,SAC9BgP,IACAV,IACAD,EAAiBlF,EAAYjF,EAAMwE,EAAGyF,EAAgBnO,EAAGmO,EAAgB/E,SAAU,EAAG0F,EAAQZ,EAAOc,OAGzGb,EACA,GAAIjL,GAAOiL,EAAgBQ,IACvBI,EAAKrG,EAAIyF,EAAgBnO,EAAG,EAAI0I,GAChCsE,GAAS9I,EAAMiK,EAAgBnO,EAAG,OAC7BoO,IAEGD,EAAgBnO,EAEhBsO,MAIOH,EAAgBS,MAAMrB,GACzB9N,EAAQ0O,EAAgBS,MAAMhL,IAG1CuK,EAAkB,UAEjB,GAAIjL,GAAOiL,EAAgBO,MAAO,CACnC,MAAMtM,EAAIc,EAAMiL,EAAgBO,MAChChG,EAAIyF,EAAgBpO,EAAIoO,EAAgBtJ,EAAIiK,EAAO1M,EAAI+L,EAAgB/E,UACvE2F,EAAKrG,EAAG,EAAIA,GAGpB,SAAUyF,IAAmBC,OAIzC,MAAO,CACH/F,IAAIrI,GACIJ,EAAYsO,IA/PnBnB,KACDA,GAAUd,QAAQC,UAClBa,GAAQoC,MAAK,KACTpC,GAAU,SAGXA,IA0PYoC,MAAK,KAERjB,EAASA,IACTW,EAAG7O,MAIP6O,EAAG7O,IAGXqI,MACIiG,IACAH,EAAkBC,EAAkB,OAoMhD,SAASgB,GAAkBC,EAAQC,GAC/B,MAAM7C,EAAS,GACT8C,EAAc,GACdC,EAAgB,CAAEzO,QAAS,GACjC,IAAIkB,EAAIoN,EAAOrN,OACf,KAAOC,KAAK,CACR,MAAM4L,EAAIwB,EAAOpN,GACXsG,EAAI+G,EAAQrN,GAClB,GAAIsG,EAAG,CACH,IAAK,MAAM9B,KAAOoH,EACRpH,KAAO8B,IACTgH,EAAY9I,GAAO,GAE3B,IAAK,MAAMA,KAAO8B,EACTiH,EAAc/I,KACfgG,EAAOhG,GAAO8B,EAAE9B,GAChB+I,EAAc/I,GAAO,GAG7B4I,EAAOpN,GAAKsG,OAGZ,IAAK,MAAM9B,KAAOoH,EACd2B,EAAc/I,GAAO,EAIjC,IAAK,MAAMA,KAAO8I,EACR9I,KAAOgG,IACTA,EAAOhG,QAAO9E,GAEtB,OAAO8K,EAEX,SAASgD,GAAkBC,GACvB,MAA+B,iBAAjBA,GAA8C,OAAjBA,EAAwBA,EAAe,GA2ItF,SAASC,GAAKpP,EAAWwE,EAAMvE,GAC3B,MAAMoP,EAAQrP,EAAUE,GAAG6B,MAAMyC,QACnBpD,IAAViO,IACArP,EAAUE,GAAGoP,MAAMD,GAASpP,EAC5BA,EAASD,EAAUE,GAAGK,IAAI8O,KAGlC,SAASE,GAAiBpC,GACtBA,GAASA,EAAM9J,IAKnB,SAASmM,GAAgBxP,EAAW0D,EAAQI,EAAQ2L,GAChD,MAAMpD,SAAEA,EAAQnB,SAAEA,EAAQ/K,WAAEA,EAAUoM,aAAEA,GAAiBvM,EAAUE,GACnEmM,GAAYA,EAASqD,EAAEhM,EAAQI,GAC1B2L,GAED5D,IAAoB,KAChB,MAAM8D,EAAiBzE,EAAS0E,IAAI/Q,GAAK0L,OAAOlL,GAC5Cc,EACAA,EAAWC,QAAQuP,GAKnBzQ,EAAQyQ,GAEZ3P,EAAUE,GAAGgL,SAAW,MAGhCqB,EAAanN,QAAQyM,IAEzB,SAASgE,GAAkB7P,EAAWqE,GAClC,MAAMnE,EAAKF,EAAUE,GACD,OAAhBA,EAAGmM,WACHnN,EAAQgB,EAAGC,YACXD,EAAGmM,UAAYnM,EAAGmM,SAAS/H,EAAED,GAG7BnE,EAAGC,WAAaD,EAAGmM,SAAW,KAC9BnM,EAAGK,IAAM,IAGjB,SAASuP,GAAW9P,EAAW0B,IACI,IAA3B1B,EAAUE,GAAGa,MAAM,KACnBsK,EAAiBjL,KAAKJ,GA7uBrB4L,KACDA,IAAmB,EACnBH,GAAiBmD,KAAK3C,KA6uBtBjM,EAAUE,GAAGa,MAAMgP,KAAK,IAE5B/P,EAAUE,GAAGa,MAAOW,EAAI,GAAM,IAAO,GAAMA,EAAI,GAEnD,SAASsM,GAAKhO,EAAWqF,EAAS2K,EAAUC,EAAiBC,EAAWnO,EAAOhB,EAAQ,EAAE,IACrF,MAAMoP,EAAmBzH,EACzBoC,EAAsB9K,GACtB,MAAME,EAAKF,EAAUE,GAAK,CACtBmM,SAAU,KACV9L,IAAK,KAELwB,MAAAA,EACAmK,OAAQ5N,EACR4R,UAAAA,EACAZ,MAAOvQ,IAEPmM,SAAU,GACV/K,WAAY,GACZiQ,cAAe,GACf9D,cAAe,GACfC,aAAc,GACd8D,QAAS,IAAIC,IAAIH,EAAmBA,EAAiBjQ,GAAGmQ,QAAUhL,EAAQgL,SAAW,IAErFzQ,UAAWb,IACXgC,MAAAA,EACAwP,YAAY,GAEhB,IAAIC,GAAQ,EAkBZ,GAjBAtQ,EAAGK,IAAMyP,EACHA,EAAShQ,EAAWqF,EAAQtD,OAAS,IAAI,CAACL,EAAGU,KAAQqO,KACnD,MAAMvO,EAAQuO,EAAKhP,OAASgP,EAAK,GAAKrO,EAOtC,OANIlC,EAAGK,KAAO2P,EAAUhQ,EAAGK,IAAImB,GAAIxB,EAAGK,IAAImB,GAAKQ,MACtChC,EAAGqQ,YAAcrQ,EAAGoP,MAAM5N,IAC3BxB,EAAGoP,MAAM5N,GAAGQ,GACZsO,GACAV,GAAW9P,EAAW0B,IAEvBU,KAET,GACNlC,EAAGgM,SACHsE,GAAQ,EACRtR,EAAQgB,EAAGoM,eAEXpM,EAAGmM,WAAW4D,GAAkBA,EAAgB/P,EAAGK,KAC/C8E,EAAQ3B,OAAQ,CAChB,GAAI2B,EAAQqL,QAAS,CACjB,MAAMC,EAzpClB,SAAkBpM,GACd,OAAO+D,MAAMC,KAAKhE,EAAQiE,YAwpCJoI,CAASvL,EAAQ3B,QAE/BxD,EAAGmM,UAAYnM,EAAGmM,SAASwE,EAAEF,GAC7BA,EAAMvR,QAAQ4E,QAId9D,EAAGmM,UAAYnM,EAAGmM,SAAShJ,IAE3BgC,EAAQqI,OACRR,GAAclN,EAAUE,GAAGmM,UAC/BmD,GAAgBxP,EAAWqF,EAAQ3B,OAAQ2B,EAAQvB,OAAQuB,EAAQoK,eACnExD,KAEJnB,EAAsBqF,GAkD1B,MAAMW,GACFhJ,WACI+H,GAAkB9H,KAAM,GACxBA,KAAKgJ,SAAWzS,EAEpBwJ,IAAIN,EAAMvH,GACN,MAAML,EAAamI,KAAK7H,GAAGN,UAAU4H,KAAUO,KAAK7H,GAAGN,UAAU4H,GAAQ,IAEzE,OADA5H,EAAUQ,KAAKH,GACR,KACH,MAAMoP,EAAQzP,EAAU6K,QAAQxK,IACjB,IAAXoP,GACAzP,EAAUoR,OAAO3B,EAAO,IAGpCvH,KAAKmJ,GA1gDT,IAAkBC,EA2gDNnJ,KAAKoJ,QA3gDCD,EA2gDkBD,EA1gDG,IAA5BjS,OAAOoS,KAAKF,GAAKzP,UA2gDhBsG,KAAK7H,GAAGqQ,YAAa,EACrBxI,KAAKoJ,MAAMF,GACXlJ,KAAK7H,GAAGqQ,YAAa,ICniDjC,IAAIc,GAAW,WAQX,OAPAA,GAAWrS,OAAOP,QAAU,SAAkB0J,GAC1C,IAAK,IAAImJ,EAAG5P,EAAI,EAAGsG,EAAIuJ,UAAU9P,OAAQC,EAAIsG,EAAGtG,IAE5C,IAAK,IAAIG,KADTyP,EAAIC,UAAU7P,GACO1C,OAAOwS,UAAUC,eAAerG,KAAKkG,EAAGzP,KAAIsG,EAAEtG,GAAKyP,EAAEzP,IAE9E,OAAOsG,IAEKuJ,MAAM3J,KAAMwJ,YAYhC,SAASI,KACL,IAAK,IAAIL,EAAI,EAAG5P,EAAI,EAAGkQ,EAAKL,UAAU9P,OAAQC,EAAIkQ,EAAIlQ,IAAK4P,GAAKC,UAAU7P,GAAGD,OACxE,IAAIuL,EAAI1E,MAAMgJ,GAAI1S,EAAI,EAA3B,IAA8B8C,EAAI,EAAGA,EAAIkQ,EAAIlQ,IACzC,IAAK,IAAIlC,EAAI+R,UAAU7P,GAAImQ,EAAI,EAAGC,EAAKtS,EAAEiC,OAAQoQ,EAAIC,EAAID,IAAKjT,IAC1DoO,EAAEpO,GAAKY,EAAEqS,GACjB,OAAO7E,EAGX,IAAIoE,GAAOpS,OAAOoS,KACdW,GAAUzJ,MAAMyJ,QAChBC,GAA0B,oBAATC,KAAuBA,KACtB,oBAAXvP,OAAyBA,OAC5BwP,OAIR,SAASC,GAAOjB,EAAKkB,GACjB,MAAyB,iBAAdA,GAEXhB,GAAKgB,GAAWhT,SAAQ,SAAU8G,GAC9BgL,EAAIhL,GAAOkM,EAAUlM,MAFdgL,EALQ,oBAAZxF,SAA4BsG,GAAQtG,UAC3CsG,GAAQtG,QAAUA,SAUtB,IAAI2G,GAAWrT,OAAOsT,eAClBC,GAAU,GAAGd,eACjB,SAASe,GAAOtB,EAAKuB,GACjB,OAAOF,GAAQnH,KAAK8F,EAAKuB,GAE7B,SAAS1Q,GAAM2Q,EAAON,GACO,mBAAdA,IACPA,EAAYA,EAAUC,GAASK,KACnCtB,GAAKgB,GAAWhT,SAAQ,SAAU8G,GAC9ByM,GAAQD,EAAOxM,EAAKkM,EAAUlM,OAGtC,IAAI0M,GAAiB5T,OAAO4T,eAC5B,SAASD,GAAQzB,EAAKuB,EAAMI,EAAkBxN,GAC1CuN,GAAe1B,EAAKuB,EAAMN,GAAOU,GAAoBL,GAAOK,EAAkB,QAA0C,mBAAzBA,EAAiBC,IAC5G,CAAEA,IAAKD,EAAiBC,IAAKzQ,IAAKwQ,EAAiBxQ,IAAK0Q,cAAc,GACtE,CAAE7Q,MAAO2Q,EAAkBE,cAAc,EAAMC,UAAU,GAAQ3N,IAEzE,SAAS4N,GAAOC,GACZ,MAAO,CACH3K,KAAM,SAAU4K,GAGZ,OAFAD,EAAM1B,UAAYxS,OAAOC,OAAOkU,EAAO3B,WACvCmB,GAAQO,EAAM1B,UAAW,cAAe0B,GACjC,CACHf,OAAQpQ,GAAMqN,KAAK,KAAM8D,EAAM1B,cAK/C,IAAI4B,GAA2BpU,OAAOoU,yBACtC,SAASC,GAAsBnC,EAAKuB,GAChC,IACIC,EACJ,OAFSU,GAAyBlC,EAAKuB,KAEzBC,EAAQL,GAASnB,KAASmC,GAAsBX,EAAOD,GAEzE,IAAIa,GAAS,GAAG3S,MAChB,SAASA,GAAM4S,EAAMpF,EAAOC,GACxB,OAAOkF,GAAOlI,KAAKmI,EAAMpF,EAAOC,GAEpC,SAASoF,GAASC,EAAUC,GACxB,OAAOA,EAAiBD,GAE5B,SAASE,GAAOlU,GACZ,IAAKA,EACD,MAAM,IAAIuL,MAAM,oBAExB,SAAS4I,GAAK9U,GACNkT,GAAQ6B,aACRA,aAAa/U,GAEbgV,WAAWhV,EAAI,GAGvB,SAASiV,GAAcC,EAAOC,GAC1B,OAAOD,EAAME,QAAO,SAAUlS,EAAQmS,EAAMzS,GACxC,IAAI0S,EAAeH,EAAUE,EAAMzS,GAGnC,OAFI0S,IACApS,EAAOoS,EAAa,IAAMA,EAAa,IACpCpS,IACR,IAWP,SAASqS,GAAanD,EAAKoD,GACvB,GAAI9B,GAAOtB,EAAKoD,GACZ,OAAOpD,EAAIoD,GACf,IAAKA,EACD,OAAOpD,EACX,GAAuB,iBAAZoD,EAAsB,CAE7B,IADA,IAAIC,EAAK,GACA7S,EAAI,EAAGmP,EAAIyD,EAAQ7S,OAAQC,EAAImP,IAAKnP,EAAG,CAC5C,IAAI8S,EAAMH,GAAanD,EAAKoD,EAAQ5S,IACpC6S,EAAGnU,KAAKoU,GAEZ,OAAOD,EAEX,IAAIE,EAASH,EAAQ7J,QAAQ,KAC7B,IAAgB,IAAZgK,EAAe,CACf,IAAIC,EAAWxD,EAAIoD,EAAQK,OAAO,EAAGF,IACrC,YAAoBrT,IAAbsT,OAAyBtT,EAAYiT,GAAaK,EAAUJ,EAAQK,OAAOF,EAAS,KAInG,SAASG,GAAa1D,EAAKoD,EAASpS,GAChC,GAAKgP,QAAmB9P,IAAZkT,MAER,aAActV,UAAUA,OAAO6V,SAAS3D,IAE5C,GAAuB,iBAAZoD,GAAwB,WAAYA,EAAS,CACpDX,GAAwB,iBAAVzR,GAAsB,WAAYA,GAChD,IAAK,IAAIR,EAAI,EAAGmP,EAAIyD,EAAQ7S,OAAQC,EAAImP,IAAKnP,EACzCkT,GAAa1D,EAAKoD,EAAQ5S,GAAIQ,EAAMR,QAGvC,CACD,IAAI+S,EAASH,EAAQ7J,QAAQ,KAC7B,IAAgB,IAAZgK,EAAe,CACf,IAAIK,EAAiBR,EAAQK,OAAO,EAAGF,GACnCM,EAAmBT,EAAQK,OAAOF,EAAS,GAC/C,GAAyB,KAArBM,OACc3T,IAAVc,EACI6P,GAAQb,KAAS8D,MAAMC,SAASH,IAChC5D,EAAIF,OAAO8D,EAAgB,UAEpB5D,EAAI4D,GAGf5D,EAAI4D,GAAkB5S,MACzB,CACD,IAAIwS,EAAWxD,EAAI4D,GACdJ,IACDA,EAAYxD,EAAI4D,GAAkB,IACtCF,GAAaF,EAAUK,EAAkB7S,cAI/Bd,IAAVc,EACI6P,GAAQb,KAAS8D,MAAMC,SAASX,IAChCpD,EAAIF,OAAOsD,EAAS,UAEbpD,EAAIoD,GAGfpD,EAAIoD,GAAWpS,GAI/B,SAASgT,GAAahE,EAAKoD,GACA,iBAAZA,EACPM,GAAa1D,EAAKoD,OAASlT,GACtB,WAAYkT,GACjB,GAAG1E,IAAIxE,KAAKkJ,GAAS,SAAUa,GAC3BP,GAAa1D,EAAKiE,OAAI/T,MAGlC,SAASgU,GAAalE,GAClB,IAAIqD,EAAK,GACT,IAAK,IAAI7E,KAAKwB,EACNsB,GAAOtB,EAAKxB,KACZ6E,EAAG7E,GAAKwB,EAAIxB,IAEpB,OAAO6E,EAEX,IAAIc,GAAS,GAAGA,OAChB,SAASC,GAAQ9V,GACb,OAAO6V,GAAO3D,MAAM,GAAIlS,GAE5B,IAAI+V,GAAqB,yGACpBlL,MAAM,KAAKgL,OAAOC,GAAQ,CAAC,EAAG,GAAI,GAAI,IAAI1F,KAAI,SAAU4F,GAAO,MAAO,CAAC,MAAO,OAAQ,SAAS5F,KAAI,SAAUzH,GAAK,OAAOA,EAAIqN,EAAM,gBAAkBjL,QAAO,SAAUpC,GAAK,OAAO6J,GAAQ7J,MAC3LsN,GAAiBF,GAAmB3F,KAAI,SAAUzH,GAAK,OAAO6J,GAAQ7J,MACtEuN,GAAuB3B,GAAcwB,IAAoB,SAAU/W,GAAK,MAAO,CAACA,GAAG,MACvF,SAASmX,GAAUC,GACf,IAAKA,GAAsB,iBAARA,EACf,OAAOA,EACX,IAAIrB,EACJ,GAAIxC,GAAQ6D,GAAM,CACdrB,EAAK,GACL,IAAK,IAAI7S,EAAI,EAAGmP,EAAI+E,EAAInU,OAAQC,EAAImP,IAAKnP,EACrC6S,EAAGnU,KAAKuV,GAAUC,EAAIlU,UAGzB,GAAI+T,GAAehL,QAAQmL,EAAIC,cAAgB,EAChDtB,EAAKqB,OAIL,IAAK,IAAInD,KADT8B,EAAKqB,EAAIC,YAAc7W,OAAOC,OAAO2W,EAAIC,YAAYrE,WAAa,GACjDoE,EACTpD,GAAOoD,EAAKnD,KACZ8B,EAAG9B,GAAQkD,GAAUC,EAAInD,KAIrC,OAAO8B,EAEX,IAAIuB,GAAW,GAAGA,SAClB,SAASC,GAAYzI,GACjB,OAAOwI,GAAS1K,KAAKkC,GAAG3M,MAAM,GAAI,GAEtC,IAAIqV,GAAa,SAAUxB,EAAKhN,GAC5B,MAAgB,UAATA,EAAmB,GAAKgN,EAAI5E,KAAI,SAAUqG,GAAK,OAAOD,GAAWC,EAAGF,GAAYE,OAC1E,gBAATzO,EAAyB,GAAK,IAAI0O,WAAW1B,GAChC,SAAThN,EAAkBgN,EAAI2B,UAClBC,YAAYC,OAAO7B,GAAO,GAAK,IAAI0B,WAAW1B,EAAI8B,QAC9C9B,GAEpB,SAAS+B,GAAc/W,EAAGC,EAAG8U,EAAIiC,GAkC7B,OAjCAjC,EAAKA,GAAM,GACXiC,EAAOA,GAAQ,GACfpF,GAAK5R,GAAGJ,SAAQ,SAAUqT,GACtB,GAAKD,GAAO/S,EAAGgT,GAEV,CACD,IAAIgE,EAAKjX,EAAEiT,GAAOiE,EAAKjX,EAAEgT,GACzB,GAAkB,iBAAPgE,GAAiC,iBAAPC,GAAmBD,GAAMC,EAAI,CAC9D,IAAIC,EAAaZ,GAAYU,GACzBG,EAAab,GAAYW,GACzBC,IAAeC,EACXlB,GAAqBiB,GACjBX,GAAWS,EAAIE,KAAgBX,GAAWU,EAAIE,KAC9CrC,EAAGiC,EAAO/D,GAAQhT,EAAEgT,IAIxB8D,GAAcE,EAAIC,EAAInC,EAAIiC,EAAO/D,EAAO,KAI5C8B,EAAGiC,EAAO/D,GAAQhT,EAAEgT,QAGnBgE,IAAOC,IACZnC,EAAGiC,EAAO/D,GAAQhT,EAAEgT,SArBxB8B,EAAGiC,EAAO/D,QAAQrR,KAwB1BgQ,GAAK3R,GAAGL,SAAQ,SAAUqT,GACjBD,GAAOhT,EAAGiT,KACX8B,EAAGiC,EAAO/D,GAAQhT,EAAEgT,OAGrB8B,EAEX,IAAIsC,GAAmC,oBAAXC,QAA0BA,OAAOC,SACzDC,GAAgBH,GAAiB,SAAUrY,GAC3C,IAAIkD,EACJ,OAAY,MAALlD,IAAckD,EAAIlD,EAAEqY,MAAoBnV,EAAEgQ,MAAMlT,IACvD,WAAc,OAAO,MACrByY,GAAgB,GACpB,SAASC,GAAWC,GAChB,IAAIzV,EAAGlC,EAAGhB,EAAG4Y,EACb,GAAyB,IAArB7F,UAAU9P,OAAc,CACxB,GAAIsQ,GAAQoF,GACR,OAAOA,EAAUxW,QACrB,GAAIoH,OAASkP,IAAsC,iBAAdE,EACjC,MAAO,CAACA,GACZ,GAAKC,EAAKJ,GAAcG,GAAa,CAEjC,IADA3X,EAAI,KACGhB,EAAI4Y,EAAG9M,QAAW+M,MACrB7X,EAAEY,KAAK5B,EAAE0D,OACb,OAAO1C,EAEX,GAAiB,MAAb2X,EACA,MAAO,CAACA,GAEZ,GAAiB,iBADjBzV,EAAIyV,EAAU1V,QACa,CAEvB,IADAjC,EAAI,IAAI8I,MAAM5G,GACPA,KACHlC,EAAEkC,GAAKyV,EAAUzV,GACrB,OAAOlC,EAEX,MAAO,CAAC2X,GAIZ,IAFAzV,EAAI6P,UAAU9P,OACdjC,EAAI,IAAI8I,MAAM5G,GACPA,KACHlC,EAAEkC,GAAK6P,UAAU7P,GACrB,OAAOlC,EAEX,IAAI8X,GAAoC,oBAAXR,OACvB,SAAUhY,GAAM,MAAkC,kBAA3BA,EAAGgY,OAAOf,cACjC,WAAc,OAAO,GAEvBwB,GAA4B,oBAAbC,UACf,6CAA6CC,KAAKD,SAASE,MAC/D,SAASC,GAASzV,EAAOqI,GACrBgN,GAAQrV,EACR0V,GAAgBrN,EAEpB,IAAIqN,GAAgB,WAAc,OAAO,GACrCC,IAAyB,IAAI7M,MAAM,IAAI8M,MAC3C,SAASC,KACL,GAAIF,GACA,IACI,MAAM,IAAI7M,MAEd,MAAOtD,GACH,OAAOA,EAEf,OAAO,IAAIsD,MAEf,SAASgN,GAAYC,EAAWC,GAC5B,IAAIJ,EAAQG,EAAUH,MACtB,OAAKA,GAELI,EAAoBA,GAAoB,EACF,IAAlCJ,EAAMrN,QAAQwN,EAAUzT,QACxB0T,IAAqBD,EAAUzT,KAAOyT,EAAUE,SAAS9N,MAAM,MAAM5I,QAClEqW,EAAMzN,MAAM,MACd1J,MAAMuX,GACN3N,OAAOqN,IACPhI,KAAI,SAAUwI,GAAS,MAAO,KAAOA,KACrCzN,KAAK,KARC,GAWf,IAkBI0N,GAAmB,CACnB,UACA,aACA,OACA,sBACA,WACA,UACA,WACA,eACA,gBACA,QACA,UACA,gBACA,SACA,aAEAC,GAlCkB,CAClB,SACA,OACA,aACA,gBACA,SACA,UACA,eACA,aACA,iBACA,kBACA,iBACA,cACA,WACA,iBACA,kBACA,gBAkB4BjD,OAAOgD,IACnCE,GAAe,CACfC,eAAgB,wDAChBC,eAAgB,2BAChBC,MAAO,sBACPC,oBAAqB,+CAEzB,SAASC,GAAWpU,EAAMqU,GACtB9Q,KAAK+Q,GAAKf,KACVhQ,KAAKvD,KAAOA,EACZuD,KAAKoQ,QAAUU,EAWnB,SAASE,GAAqBF,EAAKG,GAC/B,OAAOH,EAAM,aAAe7Z,OAAOoS,KAAK4H,GACnCpJ,KAAI,SAAU1J,GAAO,OAAO8S,EAAS9S,GAAK4P,cAC1CvL,QAAO,SAAU0L,EAAGvU,EAAG4P,GAAK,OAAOA,EAAE7G,QAAQwL,KAAOvU,KACpDiJ,KAAK,MAEd,SAASsO,GAAYJ,EAAKG,EAAUE,EAAcC,GAC9CpR,KAAK+Q,GAAKf,KACVhQ,KAAKiR,SAAWA,EAChBjR,KAAKoR,WAAaA,EAClBpR,KAAKmR,aAAeA,EACpBnR,KAAKoQ,QAAUY,GAAqBF,EAAKG,GAG7C,SAASI,GAAUP,EAAKG,GACpBjR,KAAK+Q,GAAKf,KACVhQ,KAAKvD,KAAO,YACZuD,KAAKiR,SAAWA,EAChBjR,KAAKoQ,QAAUY,GAAqBF,EAAKG,GA3B7C/F,GAAO2F,IAAYrQ,KAAKyC,OAAOmH,OAAO,CAClC2F,MAAO,CACHhF,IAAK,WACD,OAAO/K,KAAKsR,SACPtR,KAAKsR,OAAStR,KAAKvD,KAAO,KAAOuD,KAAKoQ,QAAUH,GAAYjQ,KAAK+Q,GAAI,MAGlFhD,SAAU,WAAc,OAAO/N,KAAKvD,KAAO,KAAOuD,KAAKoQ,WAe3DlF,GAAOgG,IAAa1Q,KAAKqQ,IAOzB3F,GAAOmG,IAAW7Q,KAAKqQ,IACvB,IAAIU,GAAWhB,GAAUpE,QAAO,SAAUhD,EAAK1M,GAAQ,OAAQ0M,EAAI1M,GAAQA,EAAO,QAAS0M,IAAS,IAChGqI,GAAgBX,GAChBY,GAAalB,GAAUpE,QAAO,SAAUhD,EAAK1M,GAC7C,IAAIiV,EAAWjV,EAAO,QACtB,SAASoU,EAAWc,EAAYC,GAC5B5R,KAAK+Q,GAAKf,KACVhQ,KAAKvD,KAAOiV,EACPC,EAI0B,iBAAfA,GACZ3R,KAAKoQ,QAAeuB,GAAeC,EAAa,MAAQA,EAAb,IAC3C5R,KAAK4R,MAAQA,GAAS,MAEK,iBAAfD,IACZ3R,KAAKoQ,QAAUuB,EAAWlV,KAAO,IAAMkV,EAAWvB,QAClDpQ,KAAK4R,MAAQD,IATb3R,KAAKoQ,QAAUI,GAAa/T,IAASiV,EACrC1R,KAAK4R,MAAQ,MAarB,OAFA1G,GAAO2F,GAAYrQ,KAAKgR,IACxBrI,EAAI1M,GAAQoU,EACL1H,IACR,IACHsI,GAAWI,OAASC,YACpBL,GAAWM,KAAOC,UAClBP,GAAWQ,MAAQC,WACnB,IAAIC,GAAe7B,GAAiBnE,QAAO,SAAUhD,EAAK1M,GAEtD,OADA0M,EAAI1M,EAAO,SAAWgV,GAAWhV,GAC1B0M,IACR,IAYH,IAAIiJ,GAAqB7B,GAAUpE,QAAO,SAAUhD,EAAK1M,GAGrD,OAFmD,IAA/C,CAAC,SAAU,OAAQ,SAASiG,QAAQjG,KACpC0M,EAAI1M,EAAO,SAAWgV,GAAWhV,IAC9B0M,IACR,IAKH,SAASkJ,MACT,SAASC,GAAO7F,GAAO,OAAOA,EAC9B,SAAS8F,GAAkBC,EAAIC,GAC3B,OAAU,MAAND,GAAcA,IAAOF,GACdG,EACJ,SAAUhG,GACb,OAAOgG,EAAGD,EAAG/F,KAGrB,SAASiG,GAASC,EAAKC,GACnB,OAAO,WACHD,EAAIhJ,MAAM3J,KAAMwJ,WAChBoJ,EAAIjJ,MAAM3J,KAAMwJ,YAGxB,SAASqJ,GAAkBL,EAAIC,GAC3B,OAAID,IAAOH,GACAI,EACJ,WACH,IAAIK,EAAMN,EAAG7I,MAAM3J,KAAMwJ,gBACbnQ,IAARyZ,IACAtJ,UAAU,GAAKsJ,GACnB,IAAIC,EAAY/S,KAAK+S,UACrBC,EAAUhT,KAAKgT,QACfhT,KAAK+S,UAAY,KACjB/S,KAAKgT,QAAU,KACf,IAAIC,EAAOR,EAAG9I,MAAM3J,KAAMwJ,WAK1B,OAJIuJ,IACA/S,KAAK+S,UAAY/S,KAAK+S,UAAYL,GAASK,EAAW/S,KAAK+S,WAAaA,GACxEC,IACAhT,KAAKgT,QAAUhT,KAAKgT,QAAUN,GAASM,EAAShT,KAAKgT,SAAWA,QACpD3Z,IAAT4Z,EAAqBA,EAAOH,GAG3C,SAASI,GAAkBV,EAAIC,GAC3B,OAAID,IAAOH,GACAI,EACJ,WACHD,EAAG7I,MAAM3J,KAAMwJ,WACf,IAAIuJ,EAAY/S,KAAK+S,UACrBC,EAAUhT,KAAKgT,QACfhT,KAAK+S,UAAY/S,KAAKgT,QAAU,KAChCP,EAAG9I,MAAM3J,KAAMwJ,WACXuJ,IACA/S,KAAK+S,UAAY/S,KAAK+S,UAAYL,GAASK,EAAW/S,KAAK+S,WAAaA,GACxEC,IACAhT,KAAKgT,QAAUhT,KAAKgT,QAAUN,GAASM,EAAShT,KAAKgT,SAAWA,IAG5E,SAASG,GAAkBX,EAAIC,GAC3B,OAAID,IAAOH,GACAI,EACJ,SAAUW,GACb,IAAIN,EAAMN,EAAG7I,MAAM3J,KAAMwJ,WACzBY,GAAOgJ,EAAeN,GACtB,IAAIC,EAAY/S,KAAK+S,UACrBC,EAAUhT,KAAKgT,QACfhT,KAAK+S,UAAY,KACjB/S,KAAKgT,QAAU,KACf,IAAIC,EAAOR,EAAG9I,MAAM3J,KAAMwJ,WAK1B,OAJIuJ,IACA/S,KAAK+S,UAAY/S,KAAK+S,UAAYL,GAASK,EAAW/S,KAAK+S,WAAaA,GACxEC,IACAhT,KAAKgT,QAAUhT,KAAKgT,QAAUN,GAASM,EAAShT,KAAKgT,SAAWA,QACrD3Z,IAARyZ,OACOzZ,IAAT4Z,OAAqB5Z,EAAY4Z,EACjC7I,GAAO0I,EAAKG,IAGzB,SAASI,GAA2Bb,EAAIC,GACpC,OAAID,IAAOH,GACAI,EACJ,WACH,OAAkC,IAA9BA,EAAG9I,MAAM3J,KAAMwJ,YAEZgJ,EAAG7I,MAAM3J,KAAMwJ,YAI9B,SAAS8J,GAAgBd,EAAIC,GACzB,OAAID,IAAOH,GACAI,EACJ,WACH,IAAIK,EAAMN,EAAG7I,MAAM3J,KAAMwJ,WACzB,GAAIsJ,GAA2B,mBAAbA,EAAIjM,KAAqB,CAEvC,IADA,IAAI0M,EAAOvT,KAAMrG,EAAI6P,UAAU9P,OAAQ8R,EAAO,IAAIjL,MAAM5G,GACjDA,KACH6R,EAAK7R,GAAK6P,UAAU7P,GACxB,OAAOmZ,EAAIjM,MAAK,WACZ,OAAO4L,EAAG9I,MAAM4J,EAAM/H,MAG9B,OAAOiH,EAAG9I,MAAM3J,KAAMwJ,YAhG9B4I,GAAmBlB,YAAcA,GACjCkB,GAAmBvB,WAAaA,GAChCuB,GAAmBf,UAAYA,GAkG/B,IAAImC,GAAW,GAIXC,GAAwB,oBAAZ9P,QACZ,GACA,WACI,IAAI+P,EAAU/P,QAAQC,UACtB,GAAsB,oBAAX+P,SAA2BA,OAAOC,OACzC,MAAO,CAACF,EAASA,EAAQxV,UAAWwV,GACxC,IAAIG,EAAUF,OAAOC,OAAOE,OAAO,UAAW,IAAI3F,WAAW,CAAC,KAC9D,MAAO,CACH0F,EACAA,EAAQ3V,UACRwV,GARR,GAWAK,GAAwBN,GAAG,GAC3BO,GAAqBP,GAAG,GACxBQ,GAAwBR,GAAG,GAC3BS,GAAoBF,IAAsBA,GAAmBnN,KAC7DsN,GAAgBJ,IAAyBA,GAAsBjG,YAC/DsG,KAAuBH,GACvBI,IAAwB,EACxBC,GAAuBL,GACvB,WAAcA,GAAsBpN,KAAK0N,KAErCtK,GAAQ6B,aACJA,aAAazE,KAAK,KAAMkN,IACxBtK,GAAQuK,iBACJ,WACI,IAAIC,EAAY/X,SAASC,cAAc,OACvC,IAAK6X,kBAAiB,WAClBD,KACAE,EAAY,QACZC,QAAQD,EAAW,CAAE1W,YAAY,IACrC0W,EAAU5W,aAAa,IAAK,MAEhC,WAAckO,WAAWwI,GAAc,IACnDI,GAAS,SAAUzc,EAAUsT,GAC7BoJ,GAAevc,KAAK,CAACH,EAAUsT,IAC3BqJ,KACAP,KACAO,IAAuB,IAG3BC,IAAqB,EACrBD,IAAuB,EACvBE,GAAkB,GAClBC,GAAkB,GAClBC,GAAmB,KACnBC,GAAkB5C,GAClB6C,GAAY,CACZC,GAAI,SACJjL,QAAQ,EACRkL,IAAK,EACLC,WAAY,GACZC,YAAaC,GACbC,KAAK,EACLC,IAAK,GACLC,SAAU,WACN3V,KAAKsV,WAAWje,SAAQ,SAAUue,GAC9B,IACIJ,GAAYI,EAAG,GAAIA,EAAG,IAE1B,MAAOjW,UAIfkW,GAAMV,GACNP,GAAiB,GACjBkB,GAAoB,EACpBC,GAAiB,GACrB,SAASC,GAAajf,GAClB,GAAoB,iBAATiJ,KACP,MAAM,IAAIgS,UAAU,wCACxBhS,KAAKiW,WAAa,GAClBjW,KAAKkW,YAAc7D,GACnBrS,KAAKmW,MAAO,EACZ,IAAIC,EAAOpW,KAAKqW,KAAOR,GAMvB,GALIrG,KACAxP,KAAKsW,aAAetG,KACpBhQ,KAAKuW,MAAQ,KACbvW,KAAKwW,SAAW,GAEF,mBAAPzf,EAAmB,CAC1B,GAAIA,IAAOyc,GACP,MAAM,IAAIxB,UAAU,kBAKxB,OAJAhS,KAAKyW,OAASjN,UAAU,GACxBxJ,KAAK0W,OAASlN,UAAU,SACJ,IAAhBxJ,KAAKyW,QACLE,GAAgB3W,KAAMA,KAAK0W,SAGnC1W,KAAKyW,OAAS,KACdzW,KAAK0W,OAAS,OACZN,EAAIf,IACNuB,GAAmB5W,KAAMjJ,GAE7B,IAAI8f,GAAW,CACX9L,IAAK,WACD,IAAIqL,EAAMP,GAAKiB,EAAcC,GAC7B,SAASlQ,EAAKmQ,EAAaC,GACvB,IAAIC,EAAQlX,KACRmX,GAAiBf,EAAIjM,SAAWiM,IAAQP,IAAOiB,IAAgBC,IAC/DK,EAAUD,IAAkBE,KAC5B7K,EAAK,IAAIwJ,IAAa,SAAUpS,EAAS0T,GACzCC,GAAoBL,EAAO,IAAIM,GAASC,GAA0BT,EAAaZ,EAAKe,EAAeC,GAAUK,GAA0BR,EAAYb,EAAKe,EAAeC,GAAUxT,EAAS0T,EAAQlB,OAGtM,OADA5G,IAASkI,GAAsBlL,EAAIxM,MAC5BwM,EAGX,OADA3F,EAAK4C,UAAY+J,GACV3M,GAEXvM,IAAK,SAAUH,GACXyQ,GAAQ5K,KAAM,OAAQ7F,GAASA,EAAMsP,YAAc+J,GAC/CqD,GACA,CACI9L,IAAK,WACD,OAAO5Q,GAEXG,IAAKuc,GAASvc,QA0D9B,SAASkd,GAASR,EAAaC,EAAYrT,EAAS0T,EAAQK,GACxD3X,KAAKgX,YAAqC,mBAAhBA,EAA6BA,EAAc,KACrEhX,KAAKiX,WAAmC,mBAAfA,EAA4BA,EAAa,KAClEjX,KAAK4D,QAAUA,EACf5D,KAAKsX,OAASA,EACdtX,KAAKoW,IAAMuB,EAgGf,SAASf,GAAmBnS,EAAS1N,GACjC,IACIA,GAAG,SAAUoD,GACT,GAAuB,OAAnBsK,EAAQgS,OAAZ,CAEA,GAAItc,IAAUsK,EACV,MAAM,IAAIuN,UAAU,6CACxB,IAAI4F,EAAoBnT,EAAQ0R,MAAQ0B,KACpC1d,GAA+B,mBAAfA,EAAM0M,KACtB+P,GAAmBnS,GAAS,SAAUb,EAAS0T,GAC3Cnd,aAAiB6b,GACb7b,EAAM2d,MAAMlU,EAAS0T,GACrBnd,EAAM0M,KAAKjD,EAAS0T,OAI5B7S,EAAQgS,QAAS,EACjBhS,EAAQiS,OAASvc,EACjB4d,GAAsBtT,IAEtBmT,GACAI,QACLrB,GAAgBtP,KAAK,KAAM5C,IAElC,MAAOwT,GACHtB,GAAgBlS,EAASwT,IAGjC,SAAStB,GAAgBlS,EAASyT,GAE9B,GADAlD,GAAgB3c,KAAK6f,GACE,OAAnBzT,EAAQgS,OAAZ,CAEA,IAAImB,EAAoBnT,EAAQ0R,MAAQ0B,KACxCK,EAAShD,GAAgBgD,GACzBzT,EAAQgS,QAAS,EACjBhS,EAAQiS,OAASwB,EACjB1I,IAAoB,OAAX0I,GAAqC,iBAAXA,IAAwBA,EAAOC,UA1wBtE,SAAkBphB,EAAIic,EAASxH,GAC3B,IACIzU,EAAG4S,MAAM,KAAM6B,GAEnB,MAAOyM,GACHjF,GAAWA,EAAQiF,IAqwBuDG,EAAS,WACnF,IAAIC,EAAW/M,GAAsB4M,EAAQ,SAC7CA,EAAOC,SAAW1T,EAClBmG,GAAQsN,EAAQ,QAAS,CACrBnN,IAAK,WACD,OAAOsJ,GACHgE,IAAaA,EAAStN,IAClBsN,EAAStN,IAAIpB,MAAMuO,GACnBG,EAASle,OACbsK,EAAQsL,YAiJ5B,SAAmCtL,GAC1BsQ,GAAgBuD,MAAK,SAAUxe,GAAK,OAAOA,EAAE4c,SAAWjS,EAAQiS,WACjE3B,GAAgB1c,KAAKoM,GA/IzB8T,CAA0B9T,GAC1BsT,GAAsBtT,GAClBmT,GACAI,MAER,SAASD,GAAsBtT,GAC3B,IAAI+T,EAAY/T,EAAQwR,WACxBxR,EAAQwR,WAAa,GACrB,IAAK,IAAItc,EAAI,EAAGJ,EAAMif,EAAU9e,OAAQC,EAAIJ,IAAOI,EAC/C4d,GAAoB9S,EAAS+T,EAAU7e,IAE3C,IAAIyc,EAAM3R,EAAQ4R,OAChBD,EAAIf,KAAOe,EAAIT,WACS,IAAtBG,OACEA,GACFnB,IAAO,WACyB,KAAtBmB,IACF2C,OACL,KAGX,SAASlB,GAAoB9S,EAASiU,GAClC,GAAuB,OAAnBjU,EAAQgS,OAAZ,CAIA,IAAIzb,EAAKyJ,EAAQgS,OAASiC,EAAS1B,YAAc0B,EAASzB,WAC1D,GAAW,OAAPjc,EACA,OAAQyJ,EAAQgS,OAASiC,EAAS9U,QAAU8U,EAASpB,QAAQ7S,EAAQiS,UAEvEgC,EAAStC,IAAIf,MACbS,GACFnB,GAAOgE,GAAc,CAAC3d,EAAIyJ,EAASiU,SAT/BjU,EAAQwR,WAAW5d,KAAKqgB,GAWhC,SAASC,GAAa3d,EAAIyJ,EAASiU,GAC/B,IACIzD,GAAmBxQ,EACnB,IAAIpK,EAAKF,EAAQsK,EAAQiS,OACrBjS,EAAQgS,OACRpc,EAAMW,EAAGb,IAGL6a,GAAgBtb,SAChBsb,GAAkB,IACtB3a,EAAMW,EAAGb,IAC+B,IAApC6a,GAAgBtS,QAAQvI,IAoGxC,SAA4BsK,GACxB,IAAI9K,EAAIob,GAAgBrb,OACxB,KAAOC,MACCob,KAAkBpb,GAAG+c,SAAWjS,EAAQiS,OAExC,YADA3B,GAAgB9L,OAAOtP,EAAG,GAvGtBif,CAAmBnU,IAE3BiU,EAAS9U,QAAQvJ,GAErB,MAAOsF,GACH+Y,EAASpB,OAAO3X,WAGhBsV,GAAmB,KACS,KAAtBa,IACF2C,OACFC,EAAStC,IAAIf,KAAOqD,EAAStC,IAAIT,YAG3C,SAASkD,GAASpU,EAASqU,EAAQC,GAC/B,GAAID,EAAOpf,SAAWqf,EAClB,OAAOD,EACX,IAAI/I,EAAQ,GACZ,IAAuB,IAAnBtL,EAAQgS,OAAkB,CAC1B,IAA8BuC,EAAW5I,EAArC6I,EAAUxU,EAAQiS,OACP,MAAXuC,GACAD,EAAYC,EAAQxc,MAAQ,QAC5B2T,EAAU6I,EAAQ7I,SAAW6I,EAC7BlJ,EAAQE,GAAYgJ,EAAS,KAG7BD,EAAYC,EACZ7I,EAAU,IAEd0I,EAAOzgB,KAAK2gB,GAAa5I,EAAU,KAAOA,EAAU,IAAML,GAS9D,OAPIP,MACAO,EAAQE,GAAYxL,EAAQ6R,aAAc,MACF,IAA3BwC,EAAOpW,QAAQqN,IACxB+I,EAAOzgB,KAAK0X,GACZtL,EAAQ8R,OACRsC,GAASpU,EAAQ8R,MAAOuC,EAAQC,IAEjCD,EAEX,SAASpB,GAAsBjT,EAASyU,GACpC,IAAIC,EAAUD,EAAOA,EAAK1C,SAAW,EAAI,EACrC2C,EAjaqB,MAkarB1U,EAAQ8R,MAAQ2C,EAChBzU,EAAQ+R,SAAW2C,GAG3B,SAAS5E,KACLsD,MAAyBG,KAE7B,SAASH,KACL,IAAIuB,EAActE,GAGlB,OAFAA,IAAqB,EACrBD,IAAuB,EAChBuE,EAEX,SAASpB,KACL,IAAIngB,EAAW8B,EAAGmP,EAClB,GACI,KAAO8L,GAAelb,OAAS,GAI3B,IAHA7B,EAAY+c,GACZA,GAAiB,GACjB9L,EAAIjR,EAAU6B,OACTC,EAAI,EAAGA,EAAImP,IAAKnP,EAAG,CACpB,IAAIyS,EAAOvU,EAAU8B,GACrByS,EAAK,GAAGzC,MAAM,KAAMyC,EAAK,WAG5BwI,GAAelb,OAAS,GACjCob,IAAqB,EACrBD,IAAuB,EAE3B,SAAS4D,KACL,IAAIY,EAAgBtE,GACpBA,GAAkB,GAClBsE,EAAchiB,SAAQ,SAAUyC,GAC5BA,EAAEuc,KAAKd,YAAYlS,KAAK,KAAMvJ,EAAE4c,OAAQ5c,MAI5C,IAFA,IAAIwf,EAAavD,GAAend,MAAM,GAClCe,EAAI2f,EAAW5f,OACZC,GACH2f,IAAa3f,KA0BrB,SAAS4f,GAAcrB,GACnB,OAAO,IAAIlC,GAAaxC,IAAU,EAAO0E,GAE7C,SAASsB,GAAKziB,EAAI0iB,GACd,IAAIrD,EAAMP,GACV,OAAO,WACH,IAAIuD,EAAcvB,KAAuB6B,EAAa7D,GACtD,IAEI,OADA8D,GAAavD,GAAK,GACXrf,EAAG4S,MAAM3J,KAAMwJ,WAE1B,MAAO7J,GACH8Z,GAAgBA,EAAa9Z,WAG7Bga,GAAaD,GAAY,GACrBN,GACApB,OAtXhBhe,GAAMgc,GAAavM,UAAW,CAC1B5C,KAAMgQ,GACNiB,MAAO,SAAUd,EAAaC,GAC1BM,GAAoBvX,KAAM,IAAIwX,GAAS,KAAM,KAAMR,EAAaC,EAAYpB,MAEhF+D,MAAO,SAAU3C,GACb,GAAyB,IAArBzN,UAAU9P,OACV,OAAOsG,KAAK6G,KAAK,KAAMoQ,GAC3B,IAAIxX,EAAO+J,UAAU,GAAInM,EAAUmM,UAAU,GAC7C,MAAuB,mBAAT/J,EAAsBO,KAAK6G,KAAK,MAAM,SAAUgT,GAC1D,OAAOA,aAAepa,EAAOpC,EAAQwc,GAAON,GAAcM,MAExD7Z,KAAK6G,KAAK,MAAM,SAAUgT,GACxB,OAAOA,GAAOA,EAAIpd,OAASgD,EAAOpC,EAAQwc,GAAON,GAAcM,OAG3EC,QAAS,SAAUC,GACf,OAAO/Z,KAAK6G,MAAK,SAAU1M,GAEvB,OADA4f,IACO5f,KACR,SAAU0f,GAET,OADAE,IACOR,GAAcM,OAG7B9J,MAAO,CACHhF,IAAK,WACD,GAAI/K,KAAKsR,OACL,OAAOtR,KAAKsR,OAChB,IACI+C,IAAwB,EACxB,IACItE,EADS8I,GAAS7Y,KAAM,GA3JtB,IA4Ja4C,KAAK,qBAGxB,OAFoB,OAAhB5C,KAAKyW,SACLzW,KAAKsR,OAASvB,GACXA,UAGPsE,IAAwB,KAIpC2F,QAAS,SAAUC,EAAInJ,GACnB,IAAIoG,EAAQlX,KACZ,OAAOia,EAAKC,EAAAA,EACR,IAAIlE,IAAa,SAAUpS,EAAS0T,GAChC,IAAI6C,EAASpO,YAAW,WAAc,OAAOuL,EAAO,IAAI7F,GAAW2I,QAAQtJ,MAAUmJ,GACrF/C,EAAMrQ,KAAKjD,EAAS0T,GAAQwC,QAAQO,aAAahT,KAAK,KAAM8S,OAC3Dna,QAGK,oBAAX+O,QAA0BA,OAAOf,aACxCpD,GAAQoL,GAAavM,UAAWsF,OAAOf,YAAa,iBACxDmH,GAAUO,IAAM4E,KAQhBtgB,GAAMgc,GAAc,CAChBuE,IAAK,WACD,IAAIC,EAASrL,GAAWxF,MAAM,KAAMH,WAC/B3B,IAAI4S,IACT,OAAO,IAAIzE,IAAa,SAAUpS,EAAS0T,GACjB,IAAlBkD,EAAO9gB,QACPkK,EAAQ,IACZ,IAAI8W,EAAYF,EAAO9gB,OACvB8gB,EAAOnjB,SAAQ,SAAUI,EAAGkC,GAAK,OAAOqc,GAAapS,QAAQnM,GAAGoP,MAAK,SAAUpQ,GAC3E+jB,EAAO7gB,GAAKlD,IACLikB,GACH9W,EAAQ4W,KACblD,UAGX1T,QAAS,SAAUzJ,GACf,GAAIA,aAAiB6b,GACjB,OAAO7b,EACX,GAAIA,GAA+B,mBAAfA,EAAM0M,KACtB,OAAO,IAAImP,IAAa,SAAUpS,EAAS0T,GACvCnd,EAAM0M,KAAKjD,EAAS0T,MAE5B,IAAI9K,EAAK,IAAIwJ,GAAaxC,IAAU,EAAMrZ,GAE1C,OADAud,GAAsBlL,EAAIyI,IACnBzI,GAEX8K,OAAQiC,GACRoB,KAAM,WACF,IAAIH,EAASrL,GAAWxF,MAAM,KAAMH,WAAW3B,IAAI4S,IACnD,OAAO,IAAIzE,IAAa,SAAUpS,EAAS0T,GACvCkD,EAAO3S,KAAI,SAAU1N,GAAS,OAAO6b,GAAapS,QAAQzJ,GAAO0M,KAAKjD,EAAS0T,UAGvFzB,IAAK,CACD9K,IAAK,WAAc,OAAO8K,IAC1Bvb,IAAK,SAAUH,GAAS,OAAO0b,GAAM1b,IAEzC4c,YAAa,CAAEhM,IAAK,WAAc,OAAOgM,KACzC6D,OAAQC,GACRC,OAAQA,GACRC,UAAW,CACPhQ,IAAK,WAAc,OAAO4J,IAC1Bra,IAAK,SAAUH,GAASwa,GAASxa,IAErC+a,gBAAiB,CACbnK,IAAK,WAAc,OAAOmK,IAC1B5a,IAAK,SAAUH,GAAS+a,GAAkB/a,IAE9C6gB,OAAQ,SAAUjkB,EAAIkkB,GAClB,OAAO,IAAIjF,IAAa,SAAUpS,EAAS0T,GACvC,OAAOuD,IAAS,SAAUjX,EAAS0T,GAC/B,IAAIlB,EAAMP,GACVO,EAAId,WAAa,GACjBc,EAAIb,YAAc+B,EAClBlB,EAAIT,SAAWjD,IAAS,WACpB,IAAIwE,EAAQlX,MAyNhC,SAAkDjJ,GAC9C,SAASmkB,IACLnkB,IACAgf,GAAe9M,OAAO8M,GAAerT,QAAQwY,GAAY,GAE7DnF,GAAe1d,KAAK6iB,KAClBpF,GACFnB,IAAO,WACyB,KAAtBmB,IACF2C,OACL,IAlOa0C,EAAyC,WACT,IAA5BjE,EAAM5B,WAAW5b,OAAekK,IAAY0T,EAAOJ,EAAM5B,WAAW,SAEzEc,EAAIT,UACP5e,MACDkkB,EAAWrX,EAAS0T,SAI/BnD,KACIA,GAAciH,YACdxQ,GAAQoL,GAAc,cAAc,WAChC,IAAIqF,EAAmBlM,GAAWxF,MAAM,KAAMH,WAAW3B,IAAI4S,IAC7D,OAAO,IAAIzE,IAAa,SAAUpS,GACE,IAA5ByX,EAAiB3hB,QACjBkK,EAAQ,IACZ,IAAI8W,EAAYW,EAAiB3hB,OAC7B4hB,EAAU,IAAI/a,MAAMma,GACxBW,EAAiBhkB,SAAQ,SAAUyC,EAAGH,GAAK,OAAOqc,GAAapS,QAAQ9J,GAAG+M,MAAK,SAAU1M,GAAS,OAAOmhB,EAAQ3hB,GAAK,CAAE4hB,OAAQ,YAAaphB,MAAOA,MAAY,SAAU+d,GAAU,OAAOoD,EAAQ3hB,GAAK,CAAE4hB,OAAQ,WAAYrD,OAAQA,MACjOrR,MAAK,WAAc,QAAS6T,GAAa9W,EAAQ0X,eAG9DnH,GAActG,KAAiC,oBAAnB2N,gBAC5B5Q,GAAQoL,GAAc,OAAO,WACzB,IAAIqF,EAAmBlM,GAAWxF,MAAM,KAAMH,WAAW3B,IAAI4S,IAC7D,OAAO,IAAIzE,IAAa,SAAUpS,EAAS0T,GACP,IAA5B+D,EAAiB3hB,QACjB4d,EAAO,IAAIkE,eAAe,KAC9B,IAAId,EAAYW,EAAiB3hB,OAC7BuX,EAAW,IAAI1Q,MAAMma,GACzBW,EAAiBhkB,SAAQ,SAAUyC,EAAGH,GAAK,OAAOqc,GAAapS,QAAQ9J,GAAG+M,MAAK,SAAU1M,GAAS,OAAOyJ,EAAQzJ,MAAW,SAAU8e,GAClIhI,EAAStX,GAAKsf,IACPyB,GACHpD,EAAO,IAAIkE,eAAevK,iBAoOlD,IAAI5V,GAAO,CAAEogB,OAAQ,EAAGC,OAAQ,EAAGtG,GAAI,GACnCuG,GAAc,EACdC,GAAY,GACZC,GAAa,EACb9E,GAAc,EACd+E,GAAkB,EACtB,SAASjB,GAAS9jB,EAAIglB,EAAUC,EAAIC,GAChC,IAAIC,EAASrG,GAAKO,EAAMnf,OAAOC,OAAOglB,GACtC9F,EAAI8F,OAASA,EACb9F,EAAIf,IAAM,EACVe,EAAIjM,QAAS,EACbiM,EAAIhB,KAAO0G,GACX,IAAIK,EAAYhH,GAAUO,IAC1BU,EAAIV,IAAMtB,GAAqB,CAC3BzQ,QAASqS,GACToG,YAAa,CAAEjiB,MAAO6b,GAAchL,cAAc,EAAMC,UAAU,GAClEsP,IAAKvE,GAAauE,IAClBI,KAAM3E,GAAa2E,KACnBS,WAAYpF,GAAaoF,WACzBvN,IAAKmI,GAAanI,IAClBjK,QAASoS,GAAapS,QACtB0T,OAAQtB,GAAasB,OACrB+E,MAAOC,GAAsBH,EAAUE,MAAOjG,GAC9CmG,MAAOD,GAAsBH,EAAUI,MAAOnG,IAC9C,GACA2F,GACA3R,GAAOgM,EAAK2F,KACdG,EAAO7G,IACTe,EAAIT,SAAW,aACT3V,KAAKkc,OAAO7G,KAAOrV,KAAKkc,OAAOvG,YAErC,IAAInJ,EAAKsO,GAAO1E,EAAKrf,EAAIilB,EAAIC,GAG7B,OAFgB,IAAZ7F,EAAIf,KACJe,EAAIT,WACDnJ,EAEX,SAASgQ,KAKL,OAJKnhB,GAAK+Z,KACN/Z,GAAK+Z,KAAOuG,MACdtgB,GAAKogB,OACPpgB,GAAKqgB,QA7hBa,IA8hBXrgB,GAAK+Z,GAEhB,SAASiC,KACL,QAAKhc,GAAKogB,SAEY,KAAhBpgB,GAAKogB,SACPpgB,GAAK+Z,GAAK,GACd/Z,GAAKqgB,OAriBa,IAqiBJrgB,GAAKogB,QACZ,GAKX,SAAShB,GAAyBgC,GAC9B,OAAIphB,GAAKqgB,QAAUe,GAAmBA,EAAgB3O,cAAgBqG,IAClEqI,KACOC,EAAgB5V,MAAK,SAAUpQ,GAElC,OADA4gB,KACO5gB,KACR,SAAUkJ,GAET,OADA0X,KACOqF,GAAU/c,OAGlB8c,EAEX,SAASE,GAAcC,KACjB7F,GACG1b,GAAKqgB,QAA4B,KAAhBrgB,GAAKqgB,SACvBrgB,GAAKqgB,OAASrgB,GAAK+Z,GAAK,GAE5BwG,GAAUvjB,KAAKwd,IACf8D,GAAaiD,GAAY,GAE7B,SAASC,KACL,IAAIlF,EAAOiE,GAAUA,GAAUliB,OAAS,GACxCkiB,GAAUxX,MACVuV,GAAahC,GAAM,GAEvB,SAASgC,GAAaiD,EAAYE,GAC9B,IAAIC,EAAclH,GAIlB,IAHIiH,GAAgBzhB,GAAKqgB,QAAYG,MAAgBe,IAAe/G,IAAOgG,MAAkBA,IAAce,IAAe/G,KACtHmH,GAAuBF,EAAgBH,GAActV,KAAK,KAAMuV,GAAcC,IAE9ED,IAAe/G,KAEnBA,GAAM+G,EACFG,IAAgB5H,KAChBA,GAAUO,IAAM4E,MAChBlG,IAAoB,CACpB,IAAI6I,EAAkB9H,GAAUO,IAAI/R,QAChCuZ,EAAYN,EAAWlH,IAC3B1B,GAAmBnN,KAAOqW,EAAUb,MACpCY,EAAgBxT,UAAU5C,KAAOqW,EAAUX,OACvCQ,EAAY5S,QAAUyS,EAAWzS,UACjClT,OAAO4T,eAAeZ,GAAS,UAAWiT,EAAUd,aACpDa,EAAgB1C,IAAM2C,EAAU3C,IAChC0C,EAAgBtC,KAAOuC,EAAUvC,KACjCsC,EAAgBrZ,QAAUsZ,EAAUtZ,QACpCqZ,EAAgB3F,OAAS4F,EAAU5F,OAC/B4F,EAAU9B,aACV6B,EAAgB7B,WAAa8B,EAAU9B,YACvC8B,EAAUrP,MACVoP,EAAgBpP,IAAMqP,EAAUrP,OAIhD,SAASyM,KACL,IAAI6C,EAAgBlT,GAAQtG,QAC5B,OAAOyQ,GAAqB,CACxBzQ,QAASwZ,EACTf,YAAanlB,OAAOoU,yBAAyBpB,GAAS,WACtDsQ,IAAK4C,EAAc5C,IACnBI,KAAMwC,EAAcxC,KACpBS,WAAY+B,EAAc/B,WAC1BvN,IAAKsP,EAActP,IACnBjK,QAASuZ,EAAcvZ,QACvB0T,OAAQ6F,EAAc7F,OACtB+E,MAAOrI,GAAmBnN,KAC1B0V,MAAOY,EAAc1T,UAAU5C,MAC/B,GAER,SAASiU,GAAO1E,EAAKrf,EAAIilB,EAAIC,EAAImB,GAC7B,IAAI1D,EAAa7D,GACjB,IAEI,OADA8D,GAAavD,GAAK,GACXrf,EAAGilB,EAAIC,EAAImB,WAGlBzD,GAAaD,GAAY,IAGjC,SAASsD,GAAuBK,GAC5BnJ,GAAkB7Q,KAAK0Q,GAAuBsJ,GAElD,SAAS5F,GAA0B1gB,EAAI4gB,EAAMR,EAAeC,GACxD,MAAqB,mBAAPrgB,EAAoBA,EAAK,WACnC,IAAIumB,EAAYzH,GACZsB,GACAqF,KACJ7C,GAAahC,GAAM,GACnB,IACI,OAAO5gB,EAAG4S,MAAM3J,KAAMwJ,mBAGtBmQ,GAAa2D,GAAW,GACpBlG,GACA4F,GAAuB3F,MAIvC,SAASiF,GAAsBiB,EAAU5F,GACrC,OAAO,SAAU6F,EAAYvG,GACzB,OAAOsG,EAASla,KAAKrD,KAAMyX,GAA0B+F,EAAY7F,GAAOF,GAA0BR,EAAYU,MAvG3D,KAAtD,GAAKzD,IAAmBxR,QAAQ,mBACjC8Z,GAA0BnF,GAA0BhF,IAyGxD,IAAIoL,GAAqB,qBACzB,SAASjI,GAAYqE,EAAKpV,GACtB,IAAI+H,EACJ,IACIA,EAAK/H,EAAQyR,YAAY2D,GAE7B,MAAOla,IACP,IAAW,IAAP6M,EACA,IACI,IAAIpP,EAAOsgB,EAAY,CAAEjZ,QAASA,EAASyT,OAAQ2B,GAUnD,GATI5P,GAAQvN,UAAYA,SAASkD,cAC7BxC,EAAQV,SAASkD,YAAY,UACvB+d,UAAUF,IAAoB,GAAM,GAC1CrT,GAAOhN,EAAOsgB,IAETzT,GAAQ2T,aAEbxT,GADAhN,EAAQ,IAAIwgB,YAAYH,GAAoB,CAAE/d,OAAQge,IACxCA,GAEdtgB,GAAS6M,GAAQpF,gBACjBA,cAAczH,IACT6M,GAAQ4T,uBAAyB5T,GAAQ6T,sBAC1C,IACI7T,GAAQ6T,qBAAqB1gB,GAEjC,MAAO2gB,IAEXvO,IAASpS,IAAUA,EAAM4gB,kBACzBC,QAAQC,KAAK,yBAA2BrE,EAAI9J,OAAS8J,IAG7D,MAAOla,KAEf,IAAI+c,GAAY1G,GAAasB,OAE7B,SAAS6G,GAAgBC,EAAIC,EAAMC,EAAYvnB,GAC3C,GAAKqnB,EAAG3H,OAAO8H,cAAkB1I,GAAI2I,WAQhC,CACD,IAAIC,EAAQL,EAAGM,mBAAmBL,EAAMC,EAAYF,EAAGO,WACvD,IACIF,EAAMvnB,SAEV,MAAO+gB,GACH,OAAOyE,GAAUzE,GAErB,OAAOwG,EAAMtG,SAASkG,GAAM,SAAUza,EAAS0T,GAC3C,OAAOuD,IAAS,WAEZ,OADAhF,GAAI4I,MAAQA,EACL1nB,EAAG6M,EAAS0T,EAAQmH,SAEhC5X,MAAK,SAAU5M,GACd,OAAOwkB,EAAMG,YAAY/X,MAAK,WAAc,OAAO5M,QArBvD,IAAKmkB,EAAG3H,OAAOoI,cAAe,CAC1B,IAAKT,EAAGU,SAASC,SACb,OAAOrC,GAAU,IAAIjL,GAAWf,gBACpC0N,EAAGY,OAAOpF,MAAMvH,IAEpB,OAAO+L,EAAG3H,OAAOwI,eAAepY,MAAK,WAAc,OAAOsX,GAAgBC,EAAIC,EAAMC,EAAYvnB,MAqBxG,IAAImoB,GAAgB,QAChBC,GAAYC,OAAOC,aAAa,OAChCC,IAAUpF,EAAAA,EACVqF,GAAuB,oGACvBC,GAAkB,mBAClBC,GAAc,GACdC,GAAkC,oBAAdC,WAA6B,sBAAsBjQ,KAAKiQ,UAAUC,WACtFC,GAA4BH,GAC5BI,GAA6BJ,GAC7BK,GAAwB,SAAU1P,GAAS,OAAQ,6BAA6BX,KAAKW,IACrF2P,GAAa,YACbC,GAAW,WACXC,GAAY,YAEhB,SAASC,GAAQC,EAASC,GACtB,OAAOD,EACHC,EACI,WAAc,OAAOD,EAAQzW,MAAM3J,KAAMwJ,YAAc6W,EAAQ1W,MAAM3J,KAAMwJ,YAC3E4W,EACJC,EAGR,IAAIC,GAAW,CACX7gB,KAAM,EACN8gB,OAAQrG,EAAAA,EACRsG,WAAW,EACXC,MAAO,CAAC,IACRC,WAAW,GAGf,SAASC,GAA8BpU,GACnC,OAAO,SAAUpD,GAKb,YAJmC9P,IAA/BiT,GAAanD,EAAKoD,IAElBY,GADAhE,EAAMyE,GAAUzE,GACEoD,GAEfpD,GAIf,IAAIyX,GAAuB,WACvB,SAASA,KAyRT,OAvRAA,EAAMnX,UAAUoX,OAAS,SAAUxC,EAAMtnB,EAAI+pB,GACzC,IAAIrC,EAAQze,KAAK+gB,KAAOlL,GAAI4I,MACxBuC,EAAYhhB,KAAKvD,KACrB,SAASwkB,EAAwBrd,EAAS0T,EAAQmH,GAC9C,IAAKA,EAAMyC,OAAOF,GACd,MAAM,IAAIvP,GAAW0P,SAAS,SAAWH,EAAY,4BACzD,OAAOjqB,EAAG0nB,EAAM2C,SAAU3C,GAE9B,IAAIrF,EAAcvB,KAClB,IACI,OAAO4G,GAASA,EAAML,KAAOpe,KAAKoe,GAC9BK,IAAU5I,GAAI4I,MACVA,EAAMtG,SAASkG,EAAM4C,EAAyBH,GAC9CjG,IAAS,WAAc,OAAO4D,EAAMtG,SAASkG,EAAM4C,EAAyBH,KAAiB,CAAErC,MAAOA,EAAO4C,UAAWxL,GAAIwL,WAAaxL,KAC7IsI,GAAgBne,KAAKoe,GAAIC,EAAM,CAACre,KAAKvD,MAAOwkB,WAG5C7H,GACApB,OAGZ4I,EAAMnX,UAAUsB,IAAM,SAAUuW,EAAWtmB,GACvC,IAAIkc,EAAQlX,KACZ,OAAIshB,GAAaA,EAAUxT,cAAgB7W,OAChC+I,KAAKuhB,MAAMD,GAAWE,MAAMxmB,GAChCgF,KAAK6gB,OAAO,YAAY,SAAUpC,GACrC,OAAOvH,EAAMuK,KAAK1W,IAAI,CAAE0T,MAAOA,EAAOtgB,IAAKmjB,IACtCza,MAAK,SAAUiM,GAAO,OAAOoE,EAAMwK,KAAKC,QAAQC,KAAK9O,SAC3DjM,KAAK7L,IAEZ4lB,EAAMnX,UAAU8X,MAAQ,SAAUM,GAC9B,GAA2B,iBAAhBA,EACP,OAAO,IAAI7hB,KAAKoe,GAAG0D,YAAY9hB,KAAM6hB,GACzC,GAAI7X,GAAQ6X,GACR,OAAO,IAAI7hB,KAAKoe,GAAG0D,YAAY9hB,KAAM,IAAM6hB,EAAYjf,KAAK,KAAO,KACvE,IAAImf,EAAW1Y,GAAKwY,GACpB,GAAwB,IAApBE,EAASroB,OACT,OAAOsG,KACFuhB,MAAMQ,EAAS,IACfC,OAAOH,EAAYE,EAAS,KACrC,IAAIE,EAAgBjiB,KAAKkhB,OAAOgB,QAAQ5U,OAAOtN,KAAKkhB,OAAOiB,SAAS3f,QAAO,SAAU4f,GACjF,OAAOA,EAAGC,UACNN,EAASO,OAAM,SAAU/V,GAAW,OAAO6V,EAAG7V,QAAQ7J,QAAQ6J,IAAY,MAC1E6V,EAAG7V,QAAQ+V,OAAM,SAAU/V,GAAW,OAAOwV,EAASrf,QAAQ6J,IAAY,QAC/E,GACH,GAAI0V,GAAiBjiB,KAAKoe,GAAGmE,UAAYpD,GACrC,OAAOnf,KACFuhB,MAAMU,EAAcxlB,MACpBulB,OAAOC,EAAc1V,QAAQ1E,KAAI,SAAUuF,GAAM,OAAOyU,EAAYzU,QACxE6U,GAAiBzS,IAClByO,QAAQC,KAAK,aAAesE,KAAKC,UAAUZ,GAAe,OAAS7hB,KAAKvD,KAA3D,uCACaslB,EAASnf,KAAK,KAAO,KACnD,IAAI8f,EAAY1iB,KAAKkhB,OAAOwB,UACxBC,EAAM3iB,KAAKoe,GAAGwE,MAAMC,UACxB,SAASb,EAAOvqB,EAAGC,GACf,IACI,OAAyB,IAAlBirB,EAAIG,IAAIrrB,EAAGC,GAEtB,MAAOiI,GACH,OAAO,GAGf,IAAI8T,EAAKsO,EAAS5V,QAAO,SAAUsH,EAAIlH,GACnC,IAAIwW,EAAYtP,EAAG,GAAIuP,EAAevP,EAAG,GACrCnM,EAAQob,EAAUnW,GAClBpS,EAAQ0nB,EAAYtV,GACxB,MAAO,CACHwW,GAAazb,EACbyb,IAAczb,EACV6Y,GAAQ6C,EAAc1b,GAASA,EAAM2b,MACjC,SAAUxsB,GACN,IAAIiU,EAAO4B,GAAa7V,EAAG8V,GAC3B,OAAOvC,GAAQU,IAASA,EAAK4N,MAAK,SAAUlM,GAAQ,OAAO4V,EAAO7nB,EAAOiS,OACzE,SAAU3V,GAAK,OAAOurB,EAAO7nB,EAAOmS,GAAa7V,EAAG8V,MAC1DyW,KAEX,CAAC,KAAM,OAAQE,EAAMzP,EAAG,GAAI0P,EAAiB1P,EAAG,GACnD,OAAOyP,EACHljB,KAAKuhB,MAAM2B,EAAIzmB,MAAMulB,OAAOH,EAAYqB,EAAI3W,UACvC/J,OAAO2gB,GACZlB,EACIjiB,KAAKwC,OAAO2gB,GACZnjB,KAAKuhB,MAAMQ,GAAUC,OAAO,KAExCpB,EAAMnX,UAAUjH,OAAS,SAAU2gB,GAC/B,OAAOnjB,KAAKojB,eAAeC,IAAIF,IAEnCvC,EAAMnX,UAAU6Z,MAAQ,SAAUC,GAC9B,OAAOvjB,KAAKojB,eAAeE,MAAMC,IAErC3C,EAAMnX,UAAU+Z,OAAS,SAAUA,GAC/B,OAAOxjB,KAAKojB,eAAeI,OAAOA,IAEtC5C,EAAMnX,UAAUsP,MAAQ,SAAU0K,GAC9B,OAAOzjB,KAAKojB,eAAerK,MAAM0K,IAErC7C,EAAMnX,UAAUia,KAAO,SAAUxrB,GAC7B,OAAO8H,KAAKojB,eAAeM,KAAKxrB,IAEpC0oB,EAAMnX,UAAUka,QAAU,SAAUJ,GAChC,OAAOvjB,KAAKojB,eAAeO,QAAQJ,IAEvC3C,EAAMnX,UAAU2Z,aAAe,WAC3B,OAAO,IAAIpjB,KAAKoe,GAAGwF,WAAW,IAAI5jB,KAAKoe,GAAG0D,YAAY9hB,QAE1D4gB,EAAMnX,UAAUoa,QAAU,SAAUvc,GAChC,OAAO,IAAItH,KAAKoe,GAAGwF,WAAW,IAAI5jB,KAAKoe,GAAG0D,YAAY9hB,KAAMgK,GAAQ1C,GAChE,IAAMA,EAAM1E,KAAK,KAAO,IACxB0E,KAERsZ,EAAMnX,UAAUqa,QAAU,WACtB,OAAO9jB,KAAKojB,eAAeU,WAE/BlD,EAAMnX,UAAUsa,WAAa,SAAUjW,GACnC9N,KAAKkhB,OAAO8C,YAAclW,EAC1B,IAAImW,EAAW,SAAU9a,GACrB,IAAKA,EACD,OAAOA,EACX,IAAI2J,EAAM7b,OAAOC,OAAO4W,EAAYrE,WACpC,IAAK,IAAI9B,KAAKwB,EACV,GAAIsB,GAAOtB,EAAKxB,GACZ,IACImL,EAAInL,GAAKwB,EAAIxB,GAEjB,MAAOoW,IACf,OAAOjL,GAOX,OALI9S,KAAKkhB,OAAO+C,UACZjkB,KAAK0hB,KAAKC,QAAQ5pB,YAAYiI,KAAKkhB,OAAO+C,UAE9CjkB,KAAKkhB,OAAO+C,SAAWA,EACvBjkB,KAAK0hB,KAAK,UAAWuC,GACdnW,GAEX8S,EAAMnX,UAAUya,YAAc,WAK1B,OAAOlkB,KAAK+jB,YAJZ,SAAeI,GACX/Z,GAAOpK,KAAMmkB,OAKrBvD,EAAMnX,UAAU/H,IAAM,SAAUyH,EAAKhL,GACjC,IAAI+Y,EAAQlX,KACRyT,EAAKzT,KAAKkhB,OAAOiB,QAASiC,EAAO3Q,EAAG2Q,KAAM7X,EAAUkH,EAAGlH,QACvD8X,EAAWlb,EAIf,OAHIoD,GAAW6X,IACXC,EAAW1D,GAA8BpU,EAA9BoU,CAAuCxX,IAE/CnJ,KAAK6gB,OAAO,aAAa,SAAUpC,GACtC,OAAOvH,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO4J,KAAa,MAAPlL,EAAc,CAACA,GAAO,KAAMqc,OAAQ,CAAC6J,QAClGxd,MAAK,SAAUiM,GAAO,OAAOA,EAAIyR,YAAcvO,GAAasB,OAAOxE,EAAI7B,SAAS,IAAM6B,EAAI0R,cACxF3d,MAAK,SAAU2d,GAChB,GAAIjY,EACA,IACIM,GAAa1D,EAAKoD,EAASiY,GAE/B,MAAOzG,IAGX,OAAOyG,MAGf5D,EAAMnX,UAAUtF,OAAS,SAAUsgB,EAAarR,GAC5C,GAA6B,iBAAlBA,GAA8BpJ,GAAQoJ,GAC7C,MAAM,IAAI3B,GAAWiT,gBAAgB,oCACzC,GAA2B,iBAAhBD,GAA6Bza,GAAQya,GAU5C,OAAOzkB,KAAKuhB,MAAM,OAAOS,OAAOyC,GAAaE,OAAOvR,GATpD/J,GAAK+J,GAAe/b,SAAQ,SAAUkV,GAClCM,GAAa4X,EAAalY,EAAS6G,EAAc7G,OAErD,IAAIpO,EAAMmO,GAAamY,EAAazkB,KAAKkhB,OAAOiB,QAAQ5V,SACxD,YAAYlT,IAAR8E,EACOue,GAAU,IAAIjL,GAAWiT,gBAAgB,kDAC7C1kB,KAAKuhB,MAAM,OAAOS,OAAO7jB,GAAKwmB,OAAOvR,IAMpDwN,EAAMnX,UAAUmb,IAAM,SAAUzb,EAAKhL,GACjC,IAAI+Y,EAAQlX,KACRyT,EAAKzT,KAAKkhB,OAAOiB,QAASiC,EAAO3Q,EAAG2Q,KAAM7X,EAAUkH,EAAGlH,QACvD8X,EAAWlb,EAIf,OAHIoD,GAAW6X,IACXC,EAAW1D,GAA8BpU,EAA9BoU,CAAuCxX,IAE/CnJ,KAAK6gB,OAAO,aAAa,SAAUpC,GAAS,OAAOvH,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO+a,OAAQ,CAAC6J,GAAWhb,KAAa,MAAPlL,EAAc,CAACA,GAAO,UACpJ0I,MAAK,SAAUiM,GAAO,OAAOA,EAAIyR,YAAcvO,GAAasB,OAAOxE,EAAI7B,SAAS,IAAM6B,EAAI0R,cAC1F3d,MAAK,SAAU2d,GAChB,GAAIjY,EACA,IACIM,GAAa1D,EAAKoD,EAASiY,GAE/B,MAAOzG,IAGX,OAAOyG,MAGf5D,EAAMnX,UAAUlO,OAAS,SAAU4C,GAC/B,IAAI+Y,EAAQlX,KACZ,OAAOA,KAAK6gB,OAAO,aAAa,SAAUpC,GAAS,OAAOvH,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,SAAU4J,KAAM,CAAClL,QAC9G0I,MAAK,SAAUiM,GAAO,OAAOA,EAAIyR,YAAcvO,GAAasB,OAAOxE,EAAI7B,SAAS,SAAM5X,MAE/FunB,EAAMnX,UAAU3G,MAAQ,WACpB,IAAIoU,EAAQlX,KACZ,OAAOA,KAAK6gB,OAAO,aAAa,SAAUpC,GAAS,OAAOvH,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,cAAeolB,MAAOvE,QACnHzZ,MAAK,SAAUiM,GAAO,OAAOA,EAAIyR,YAAcvO,GAAasB,OAAOxE,EAAI7B,SAAS,SAAM5X,MAE/FunB,EAAMnX,UAAUqb,QAAU,SAAUC,GAChC,IAAI7N,EAAQlX,KACZ,OAAOA,KAAK6gB,OAAO,YAAY,SAAUpC,GACrC,OAAOvH,EAAMuK,KAAKuD,QAAQ,CACtB3b,KAAM0b,EACNtG,MAAOA,IACR5X,MAAK,SAAU5M,GAAU,OAAOA,EAAO4N,KAAI,SAAUiL,GAAO,OAAOoE,EAAMwK,KAAKC,QAAQC,KAAK9O,aAGtG8N,EAAMnX,UAAUwb,QAAU,SAAUC,EAASC,EAAe7nB,GACxD,IAAI4Z,EAAQlX,KACR+kB,EAAUxkB,MAAMyJ,QAAQmb,GAAiBA,OAAgB9rB,EAEzD+rB,GADJ9nB,EAAUA,IAAYynB,OAAU1rB,EAAY8rB,IAChB7nB,EAAQ+nB,aAAUhsB,EAC9C,OAAO2G,KAAK6gB,OAAO,aAAa,SAAUpC,GACtC,IAAIhL,EAAKyD,EAAMgK,OAAOiB,QAASiC,EAAO3Q,EAAG2Q,KAAM7X,EAAUkH,EAAGlH,QAC5D,GAAIA,GAAWwY,EACX,MAAM,IAAItT,GAAWiT,gBAAgB,gEACzC,GAAIK,GAAWA,EAAQrrB,SAAWwrB,EAAQxrB,OACtC,MAAM,IAAI+X,GAAWiT,gBAAgB,wDACzC,IAAIY,EAAaJ,EAAQxrB,OACrB6rB,EAAehZ,GAAW6X,EAC1Bc,EAAQrd,IAAI8Y,GAA8BpU,IAC1C2Y,EACJ,OAAOhO,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO4J,KAAM0b,EAASvK,OAAQ+K,EAAcH,YAAaA,IACnGve,MAAK,SAAU4M,GAChB,IAAI8Q,EAAc9Q,EAAG8Q,YAAajJ,EAAU7H,EAAG6H,QAASkJ,EAAa/Q,EAAG+Q,WAAYvT,EAAWwC,EAAGxC,SAElG,GAAoB,IAAhBsT,EACA,OAFSa,EAAc9J,EAAUkJ,EAGrC,MAAM,IAAInT,GAAU6F,EAAMza,KAAO,eAAiB8nB,EAAc,OAASe,EAAa,qBAAsBruB,OAAOoS,KAAK4H,GAAUpJ,KAAI,SAAU2d,GAAO,OAAOvU,EAASuU,cAInL5E,EAAMnX,UAAUgc,QAAU,SAAUP,EAASC,EAAe7nB,GACxD,IAAI4Z,EAAQlX,KACR+kB,EAAUxkB,MAAMyJ,QAAQmb,GAAiBA,OAAgB9rB,EAEzD+rB,GADJ9nB,EAAUA,IAAYynB,OAAU1rB,EAAY8rB,IAChB7nB,EAAQ+nB,aAAUhsB,EAC9C,OAAO2G,KAAK6gB,OAAO,aAAa,SAAUpC,GACtC,IAAIhL,EAAKyD,EAAMgK,OAAOiB,QAASiC,EAAO3Q,EAAG2Q,KAAM7X,EAAUkH,EAAGlH,QAC5D,GAAIA,GAAWwY,EACX,MAAM,IAAItT,GAAWiT,gBAAgB,gEACzC,GAAIK,GAAWA,EAAQrrB,SAAWwrB,EAAQxrB,OACtC,MAAM,IAAI+X,GAAWiT,gBAAgB,wDACzC,IAAIY,EAAaJ,EAAQxrB,OACrBgsB,EAAenZ,GAAW6X,EAC1Bc,EAAQrd,IAAI8Y,GAA8BpU,IAC1C2Y,EACJ,OAAOhO,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO4J,KAAM0b,EAASvK,OAAQkL,EAAcN,YAAaA,IACnGve,MAAK,SAAU4M,GAChB,IAAI8Q,EAAc9Q,EAAG8Q,YAAajJ,EAAU7H,EAAG6H,QAASkJ,EAAa/Q,EAAG+Q,WAAYvT,EAAWwC,EAAGxC,SAElG,GAAoB,IAAhBsT,EACA,OAFSa,EAAc9J,EAAUkJ,EAGrC,MAAM,IAAInT,GAAU6F,EAAMza,KAAO,eAAiB8nB,EAAc,OAASe,EAAa,qBAAsBruB,OAAOoS,KAAK4H,GAAUpJ,KAAI,SAAU2d,GAAO,OAAOvU,EAASuU,cAInL5E,EAAMnX,UAAUkc,WAAa,SAAUZ,GACnC,IAAI7N,EAAQlX,KACR4lB,EAAUb,EAAQrrB,OACtB,OAAOsG,KAAK6gB,OAAO,aAAa,SAAUpC,GACtC,OAAOvH,EAAMuK,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,SAAU4J,KAAM0b,OAChEle,MAAK,SAAU4M,GACd,IAAI8Q,EAAc9Q,EAAG8Q,YAAaC,EAAa/Q,EAAG+Q,WAAYvT,EAAWwC,EAAGxC,SAC5E,GAAoB,IAAhBsT,EACA,OAAOC,EACX,MAAM,IAAInT,GAAU6F,EAAMza,KAAO,kBAAoB8nB,EAAc,OAASqB,EAAU,qBAAsB3U,OAG7G2P,KAGX,SAASiF,GAAOrtB,GACZ,IAAIstB,EAAM,GACNtZ,EAAK,SAAUuZ,EAAWC,GAC1B,GAAIA,EAAY,CAEZ,IADA,IAAIrsB,EAAI6P,UAAU9P,OAAQ8R,EAAO,IAAIjL,MAAM5G,EAAI,KACtCA,GACL6R,EAAK7R,EAAI,GAAK6P,UAAU7P,GAE5B,OADAmsB,EAAIC,GAAWpuB,UAAUgS,MAAM,KAAM6B,GAC9BhT,EAEN,GAA2B,mBAC5B,OAAOstB,EAAIC,IAGnBvZ,EAAGyZ,aAAevkB,EAClB,IAAK,IAAI/H,EAAI,EAAGmP,EAAIU,UAAU9P,OAAQC,EAAImP,IAAKnP,EAC3C+H,EAAI8H,UAAU7P,IAElB,OAAO6S,EACP,SAAS9K,EAAIqkB,EAAWG,EAAeC,GACnC,GAAyB,iBAAdJ,EACP,OAAOK,EAAoBL,GAC1BG,IACDA,EAAgB7S,IACf8S,IACDA,EAAkB9T,IACtB,IAAI/J,EAAU,CACV+d,YAAa,GACbzE,KAAMuE,EACNxuB,UAAW,SAAUqD,IACwB,IAArCsN,EAAQ+d,YAAY3jB,QAAQ1H,KAC5BsN,EAAQ+d,YAAYhuB,KAAK2C,GACzBsN,EAAQsZ,KAAOsE,EAAc5d,EAAQsZ,KAAM5mB,KAGnDjD,YAAa,SAAUiD,GACnBsN,EAAQ+d,YAAc/d,EAAQ+d,YAAY7jB,QAAO,SAAUzL,GAAM,OAAOA,IAAOiE,KAC/EsN,EAAQsZ,KAAOtZ,EAAQ+d,YAAYla,OAAO+Z,EAAeC,KAIjE,OADAL,EAAIC,GAAavZ,EAAGuZ,GAAazd,EAC1BA,EAEX,SAAS8d,EAAoBE,GACzBjd,GAAKid,GAAKjvB,SAAQ,SAAU0uB,GACxB,IAAIva,EAAO8a,EAAIP,GACf,GAAI/b,GAAQwB,GACR9J,EAAIqkB,EAAWO,EAAIP,GAAW,GAAIO,EAAIP,GAAW,QAEhD,CAAA,GAAa,SAATva,EAaL,MAAM,IAAIiG,GAAWiT,gBAAgB,wBAZrC,IAAIpc,EAAU5G,EAAIqkB,EAAWzT,IAAQ,WAEjC,IADA,IAAI3Y,EAAI6P,UAAU9P,OAAQ8R,EAAO,IAAIjL,MAAM5G,GACpCA,KACH6R,EAAK7R,GAAK6P,UAAU7P,GACxB2O,EAAQ+d,YAAYhvB,SAAQ,SAAUN,GAClC8U,IAAK,WACD9U,EAAG4S,MAAM,KAAM6B,iBAW3C,SAAS+a,GAAqB9c,EAAWqE,GAErC,OADA5C,GAAO4C,GAAatN,KAAK,CAAEiJ,UAAWA,IAC/BqE,EAkBX,SAAS0Y,GAAgBhuB,EAAKiuB,GAC1B,QAASjuB,EAAIgK,QAAUhK,EAAIkuB,WAAaluB,EAAImuB,MACvCF,EAAoBjuB,EAAIouB,WAAapuB,EAAIquB,cAElD,SAASC,GAAUtuB,EAAKzB,GACpByB,EAAIgK,OAAS2d,GAAQ3nB,EAAIgK,OAAQzL,GAErC,SAASgwB,GAAgBvuB,EAAKwuB,EAASC,GACnC,IAAIC,EAAO1uB,EAAIquB,aACfruB,EAAIquB,aAAeK,EAAO,WAAc,OAAO/G,GAAQ+G,IAAQF,MAAgBA,EAC/ExuB,EAAIouB,UAAYK,IAAkBC,EAKtC,SAASC,GAAgB3uB,EAAK4uB,GAC1B,GAAI5uB,EAAI6uB,UACJ,OAAOD,EAAWE,WACtB,IAAIhgB,EAAQ8f,EAAWG,kBAAkB/uB,EAAI8O,OAC7C,IAAKA,EACD,MAAM,IAAImK,GAAW+V,OAAO,WAAahvB,EAAI8O,MAAQ,oBAAsB8f,EAAW3qB,KAAO,mBACjG,OAAO6K,EAEX,SAASmgB,GAAWjvB,EAAKkvB,EAAWjJ,GAChC,IAAInX,EAAQ6f,GAAgB3uB,EAAKkvB,EAAUxG,QAC3C,OAAOwG,EAAUD,WAAW,CACxBhJ,MAAOA,EACPjE,QAAShiB,EAAImvB,SACb7D,QAAqB,SAAZtrB,EAAIovB,IACbC,SAAUrvB,EAAIqvB,OACdC,MAAO,CACHxgB,MAAOA,EACPud,MAAOrsB,EAAIqsB,SAIvB,SAASkD,GAAKvvB,EAAKzB,EAAIixB,EAAWN,GAC9B,IAAIllB,EAAShK,EAAIquB,aAAe1G,GAAQ3nB,EAAIgK,OAAQhK,EAAIquB,gBAAkBruB,EAAIgK,OAC9E,GAAKhK,EAAImuB,GAGJ,CACD,IAAIsB,EAAQ,GACRC,EAAQ,SAAU9b,EAAM+b,EAAQC,GAChC,IAAK5lB,GAAUA,EAAO2lB,EAAQC,GAAS,SAAUnuB,GAAU,OAAOkuB,EAAOE,KAAKpuB,MAAY,SAAU4f,GAAO,OAAOsO,EAAOG,KAAKzO,MAAU,CACpI,IAAIyN,EAAaa,EAAOb,WACpBnpB,EAAM,GAAKmpB,EACH,yBAARnpB,IACAA,EAAM,GAAK,IAAIgQ,WAAWmZ,IACzB7c,GAAOwd,EAAO9pB,KACf8pB,EAAM9pB,IAAO,EACbpH,EAAGqV,EAAM+b,EAAQC,MAI7B,OAAOzkB,QAAQ4W,IAAI,CACf/hB,EAAImuB,GAAG4B,SAASL,EAAOF,GACvBQ,GAAQf,GAAWjvB,EAAKkvB,EAAWM,GAAYxvB,EAAIkuB,UAAWwB,GAAQ1vB,EAAImvB,UAAYnvB,EAAIiwB,eAlB9F,OAAOD,GAAQf,GAAWjvB,EAAKkvB,EAAWM,GAAY7H,GAAQ3nB,EAAIkuB,UAAWlkB,GAASzL,GAAKyB,EAAImvB,UAAYnvB,EAAIiwB,aAsBvH,SAASD,GAAQE,EAAelmB,EAAQzL,EAAI0xB,GACxC,IACIE,EAAYnP,GADDiP,EAAc,SAAUhyB,EAAG6E,EAAG7D,GAAK,OAAOV,EAAG0xB,EAAYhyB,GAAI6E,EAAG7D,IAAQV,GAEvF,OAAO2xB,EAAc7hB,MAAK,SAAUshB,GAChC,GAAIA,EACA,OAAOA,EAAO/hB,OAAM,WAChB,IAAI9K,EAAI,WAAc,OAAO6sB,EAAOS,YAC/BpmB,IAAUA,EAAO2lB,GAAQ,SAAUU,GAAY,OAAOvtB,EAAIutB,KAAa,SAAUpc,GAAO0b,EAAOE,KAAK5b,GAAMnR,EAAI+W,MAAQ,SAAU1S,GAAKwoB,EAAOG,KAAK3oB,GAAIrE,EAAI+W,OAC1JsW,EAAUR,EAAOhuB,MAAOguB,GAAQ,SAAUU,GAAY,OAAOvtB,EAAIutB,KACrEvtB,UAMhB,IAAIsoB,GAA4B,WAC5B,SAASA,KAgXT,OA9WAA,EAAWna,UAAUqf,MAAQ,SAAU/xB,EAAIiE,GACvC,IAAIxC,EAAMwH,KAAK+oB,KACf,OAAOvwB,EAAIwwB,MACPxwB,EAAIywB,MAAMpI,OAAO,KAAMnE,GAAUrV,KAAK,KAAM7O,EAAIwwB,QAChDxwB,EAAIywB,MAAMpI,OAAO,WAAY9pB,GAAI8P,KAAK7L,IAE9C4oB,EAAWna,UAAUyf,OAAS,SAAUnyB,GACpC,IAAIyB,EAAMwH,KAAK+oB,KACf,OAAOvwB,EAAIwwB,MACPxwB,EAAIywB,MAAMpI,OAAO,KAAMnE,GAAUrV,KAAK,KAAM7O,EAAIwwB,QAChDxwB,EAAIywB,MAAMpI,OAAO,YAAa9pB,EAAI,WAE1C6sB,EAAWna,UAAU0f,cAAgB,SAAUpyB,GAC3C,IAAIyB,EAAMwH,KAAK+oB,KACfvwB,EAAIkuB,UAAYvG,GAAQ3nB,EAAIkuB,UAAW3vB,IAE3C6sB,EAAWna,UAAU8e,SAAW,SAAUxxB,EAAIixB,GAC1C,OAAOD,GAAK/nB,KAAK+oB,KAAMhyB,EAAIixB,EAAWhoB,KAAK+oB,KAAKE,MAAMxH,OAE1DmC,EAAWna,UAAU2f,MAAQ,SAAUrN,GACnC,IAAIvP,EAAKvV,OAAOC,OAAO8I,KAAK8N,YAAYrE,WAAYjR,EAAMvB,OAAOC,OAAO8I,KAAK+oB,MAI7E,OAHIhN,GACA3R,GAAO5R,EAAKujB,GAChBvP,EAAGuc,KAAOvwB,EACHgU,GAEXoX,EAAWna,UAAU4f,IAAM,WAEvB,OADArpB,KAAK+oB,KAAKN,YAAc,KACjBzoB,MAEX4jB,EAAWna,UAAUia,KAAO,SAAU3sB,GAClC,IAAIyB,EAAMwH,KAAK+oB,KACf,OAAO/oB,KAAK8oB,OAAM,SAAUrK,GAAS,OAAOsJ,GAAKvvB,EAAKzB,EAAI0nB,EAAOjmB,EAAIywB,MAAMxH,UAE/EmC,EAAWna,UAAU6Z,MAAQ,SAAUtoB,GACnC,IAAIkc,EAAQlX,KACZ,OAAOA,KAAK8oB,OAAM,SAAUrK,GACxB,IAAIjmB,EAAM0e,EAAM6R,KACZrB,EAAYlvB,EAAIywB,MAAMxH,KAC1B,GAAI+E,GAAgBhuB,GAAK,GACrB,OAAOkvB,EAAUpE,MAAM,CACnB7E,MAAOA,EACPqJ,MAAO,CACHxgB,MAAO6f,GAAgB3uB,EAAKkvB,EAAUxG,QACtC2D,MAAOrsB,EAAIqsB,SAEhBhe,MAAK,SAAUyc,GAAS,OAAO9pB,KAAK8vB,IAAIhG,EAAO9qB,EAAIugB,UAGtD,IAAIuK,EAAQ,EACZ,OAAOyE,GAAKvvB,GAAK,WAAuB,QAAP8qB,GAAc,IAAU7E,EAAOiJ,GAC3D7gB,MAAK,WAAc,OAAOyc,QAEpCzc,KAAK7L,IAEZ4oB,EAAWna,UAAU8f,OAAS,SAAUhd,EAASvR,GAC7C,IAAIwuB,EAAQjd,EAAQjK,MAAM,KAAKwhB,UAAW2F,EAAWD,EAAM,GAAIE,EAAYF,EAAM9vB,OAAS,EAC1F,SAASiwB,EAAOxgB,EAAKxP,GACjB,OAAIA,EACOgwB,EAAOxgB,EAAIqgB,EAAM7vB,IAAKA,EAAI,GAC9BwP,EAAIsgB,GAEf,IAAIG,EAA0B,SAAlB5pB,KAAK+oB,KAAKnB,IAAiB,GAAK,EAC5C,SAASiC,EAAOpyB,EAAGC,GACf,IAAIoyB,EAAOH,EAAOlyB,EAAGiyB,GAAYK,EAAOJ,EAAOjyB,EAAGgyB,GAClD,OAAOI,EAAOC,GAAQH,EAAQE,EAAOC,EAAOH,EAAQ,EAExD,OAAO5pB,KAAK2jB,SAAQ,SAAUlsB,GAC1B,OAAOA,EAAEuyB,KAAKH,MACfhjB,KAAK7L,IAEZ4oB,EAAWna,UAAUka,QAAU,SAAU3oB,GACrC,IAAIkc,EAAQlX,KACZ,OAAOA,KAAK8oB,OAAM,SAAUrK,GACxB,IAAIjmB,EAAM0e,EAAM6R,KAChB,GAAgB,SAAZvwB,EAAIovB,KAAkBpB,GAAgBhuB,GAAK,IAASA,EAAIugB,MAAQ,EAAG,CACnE,IAAIkR,EAAgBzxB,EAAIiwB,YACpBnhB,EAAQ6f,GAAgB3uB,EAAKA,EAAIywB,MAAMxH,KAAKP,QAChD,OAAO1oB,EAAIywB,MAAMxH,KAAKqG,MAAM,CACxBrJ,MAAOA,EACP1F,MAAOvgB,EAAIugB,MACXyB,QAAQ,EACRsN,MAAO,CACHxgB,MAAOA,EACPud,MAAOrsB,EAAIqsB,SAEhBhe,MAAK,SAAU4M,GACd,IAAIxZ,EAASwZ,EAAGxZ,OAChB,OAAOgwB,EAAgBhwB,EAAO4N,IAAIoiB,GAAiBhwB,KAIvD,IAAIiwB,EAAM,GACV,OAAOnC,GAAKvvB,GAAK,SAAU4T,GAAQ,OAAO8d,EAAI7xB,KAAK+T,KAAUqS,EAAOjmB,EAAIywB,MAAMxH,MAAM5a,MAAK,WAAc,OAAOqjB,OAEnHlvB,IAEP4oB,EAAWna,UAAU+Z,OAAS,SAAUA,GACpC,IAAIhrB,EAAMwH,KAAK+oB,KACf,OAAIvF,GAAU,IAEdhrB,EAAIgrB,QAAUA,EACVgD,GAAgBhuB,GAChBuuB,GAAgBvuB,GAAK,WACjB,IAAI2xB,EAAa3G,EACjB,OAAO,SAAU2E,EAAQC,GACrB,OAAmB,IAAf+B,IAEe,IAAfA,KACEA,GACK,IAEX/B,GAAQ,WACJD,EAAOC,QAAQ+B,GACfA,EAAa,MAEV,QAKfpD,GAAgBvuB,GAAK,WACjB,IAAI2xB,EAAa3G,EACjB,OAAO,WAAc,QAAU2G,EAAa,OAvBzCnqB,MA4Bf4jB,EAAWna,UAAUsP,MAAQ,SAAU0K,GAUnC,OATAzjB,KAAK+oB,KAAKhQ,MAAQvf,KAAK8vB,IAAItpB,KAAK+oB,KAAKhQ,MAAO0K,GAC5CsD,GAAgB/mB,KAAK+oB,MAAM,WACvB,IAAIqB,EAAW3G,EACf,OAAO,SAAU0E,EAAQC,EAASxkB,GAG9B,QAFMwmB,GAAY,GACdhC,EAAQxkB,GACLwmB,GAAY,MAExB,GACIpqB,MAEX4jB,EAAWna,UAAU4gB,MAAQ,SAAUlH,EAAgBmH,GAUnD,OATAxD,GAAU9mB,KAAK+oB,MAAM,SAAUZ,EAAQC,EAASxkB,GAC5C,OAAIuf,EAAegF,EAAOhuB,SACtBiuB,EAAQxkB,GACD0mB,MAMRtqB,MAEX4jB,EAAWna,UAAU+X,MAAQ,SAAUxmB,GACnC,OAAOgF,KAAK+Y,MAAM,GAAG4K,SAAQ,SAAUlsB,GAAK,OAAOA,EAAE,MAAOoP,KAAK7L,IAErE4oB,EAAWna,UAAU8gB,KAAO,SAAUvvB,GAClC,OAAOgF,KAAK8jB,UAAUtC,MAAMxmB,IAEhC4oB,EAAWna,UAAUjH,OAAS,SAAU2gB,GAjO5C,IAAwB3qB,EAAKzB,EAsOrB,OAJA+vB,GAAU9mB,KAAK+oB,MAAM,SAAUZ,GAC3B,OAAOhF,EAAegF,EAAOhuB,UAnOjB3B,EAqODwH,KAAK+oB,KArOChyB,EAqOKosB,EApO9B3qB,EAAIgyB,QAAUrK,GAAQ3nB,EAAIgyB,QAASzzB,GAqOxBiJ,MAEX4jB,EAAWna,UAAU4Z,IAAM,SAAU7gB,GACjC,OAAOxC,KAAKwC,OAAOA,IAEvBohB,EAAWna,UAAUkd,GAAK,SAAU8D,GAChC,OAAO,IAAIzqB,KAAKoe,GAAG0D,YAAY9hB,KAAK+oB,KAAKE,MAAOwB,EAAWzqB,OAE/D4jB,EAAWna,UAAUqa,QAAU,WAI3B,OAHA9jB,KAAK+oB,KAAKnB,IAAyB,SAAlB5nB,KAAK+oB,KAAKnB,IAAiB,OAAS,OACjD5nB,KAAK0qB,oBACL1qB,KAAK0qB,mBAAmB1qB,KAAK+oB,KAAKnB,KAC/B5nB,MAEX4jB,EAAWna,UAAUkhB,KAAO,WACxB,OAAO3qB,KAAK8jB,WAEhBF,EAAWna,UAAUmhB,QAAU,SAAU5vB,GACrC,IAAIxC,EAAMwH,KAAK+oB,KAEf,OADAvwB,EAAImvB,UAAYnvB,EAAIgyB,QACbxqB,KAAK0jB,MAAK,SAAUjX,EAAK0b,GAAUntB,EAAGmtB,EAAOhqB,IAAKgqB,OAE7DvE,EAAWna,UAAUohB,cAAgB,SAAU7vB,GAE3C,OADAgF,KAAK+oB,KAAKlB,OAAS,SACZ7nB,KAAK4qB,QAAQ5vB,IAExB4oB,EAAWna,UAAUqhB,eAAiB,SAAU9vB,GAC5C,IAAIxC,EAAMwH,KAAK+oB,KAEf,OADAvwB,EAAImvB,UAAYnvB,EAAIgyB,QACbxqB,KAAK0jB,MAAK,SAAUjX,EAAK0b,GAAUntB,EAAGmtB,EAAOb,WAAYa,OAEpEvE,EAAWna,UAAUJ,KAAO,SAAUrO,GAClC,IAAIxC,EAAMwH,KAAK+oB,KACfvwB,EAAImvB,UAAYnvB,EAAIgyB,QACpB,IAAI/yB,EAAI,GACR,OAAOuI,KAAK0jB,MAAK,SAAUtX,EAAM+b,GAC7B1wB,EAAEY,KAAK8vB,EAAOhqB,QACf0I,MAAK,WACJ,OAAOpP,KACRoP,KAAK7L,IAEZ4oB,EAAWna,UAAUshB,YAAc,SAAU/vB,GACzC,IAAIxC,EAAMwH,KAAK+oB,KACf,GAAgB,SAAZvwB,EAAIovB,KAAkBpB,GAAgBhuB,GAAK,IAASA,EAAIugB,MAAQ,EAChE,OAAO/Y,KAAK8oB,OAAM,SAAUrK,GACxB,IAAInX,EAAQ6f,GAAgB3uB,EAAKA,EAAIywB,MAAMxH,KAAKP,QAChD,OAAO1oB,EAAIywB,MAAMxH,KAAKqG,MAAM,CACxBrJ,MAAOA,EACPjE,QAAQ,EACRzB,MAAOvgB,EAAIugB,MACX+O,MAAO,CACHxgB,MAAOA,EACPud,MAAOrsB,EAAIqsB,YAGpBhe,MAAK,SAAU4M,GAEd,OADaA,EAAGxZ,UAEjB4M,KAAK7L,GAEZxC,EAAImvB,UAAYnvB,EAAIgyB,QACpB,IAAI/yB,EAAI,GACR,OAAOuI,KAAK0jB,MAAK,SAAUtX,EAAM+b,GAC7B1wB,EAAEY,KAAK8vB,EAAOb,eACfzgB,MAAK,WACJ,OAAOpP,KACRoP,KAAK7L,IAEZ4oB,EAAWna,UAAUuhB,WAAa,SAAUhwB,GAExC,OADAgF,KAAK+oB,KAAKlB,OAAS,SACZ7nB,KAAKqJ,KAAKrO,IAErB4oB,EAAWna,UAAUwhB,SAAW,SAAUjwB,GACtC,OAAOgF,KAAK+Y,MAAM,GAAG1P,MAAK,SAAU5R,GAAK,OAAOA,EAAE,MAAOoP,KAAK7L,IAElE4oB,EAAWna,UAAUyhB,QAAU,SAAUlwB,GACrC,OAAOgF,KAAK8jB,UAAUmH,SAASjwB,IAEnC4oB,EAAWna,UAAU0hB,SAAW,WAC5B,IAAI3yB,EAAMwH,KAAK+oB,KAAM7F,EAAM1qB,EAAI8O,OAAS9O,EAAIywB,MAAM/H,OAAOwB,UAAUlqB,EAAI8O,OACvE,IAAK4b,IAAQA,EAAID,MACb,OAAOjjB,KACX,IAAI1F,EAAM,GAOV,OANAwsB,GAAU9mB,KAAK+oB,MAAM,SAAUZ,GAC3B,IAAIiD,EAASjD,EAAOb,WAAWvZ,WAC3Bsd,EAAQ5gB,GAAOnQ,EAAK8wB,GAExB,OADA9wB,EAAI8wB,IAAU,GACNC,KAELrrB,MAEX4jB,EAAWna,UAAUkb,OAAS,SAAU2G,GACpC,IAAIpU,EAAQlX,KACRxH,EAAMwH,KAAK+oB,KACf,OAAO/oB,KAAKkpB,QAAO,SAAUzK,GACzB,IAAI8M,EACJ,GAAuB,mBAAZD,EACPC,EAAWD,MAEV,CACD,IAAIvJ,EAAW1Y,GAAKiiB,GAChB1F,EAAU7D,EAASroB,OACvB6xB,EAAW,SAAUnf,GAEjB,IADA,IAAIof,GAAmB,EACd7xB,EAAI,EAAGA,EAAIisB,IAAWjsB,EAAG,CAC9B,IAAI4S,EAAUwV,EAASpoB,GAAI8S,EAAM6e,EAAQ/e,GACrCD,GAAaF,EAAMG,KAAaE,IAChCI,GAAaT,EAAMG,EAASE,GAC5B+e,GAAmB,GAG3B,OAAOA,GAGf,IAAI9D,EAAYlvB,EAAIywB,MAAMxH,KACtBhO,EAAKiU,EAAUxG,OAAOoG,WAAYmE,EAAWhY,EAAGgY,SAAUC,EAAajY,EAAGiY,WAC1E3S,EAAQ,aAAc4S,GAAQ,EAAI,IAClC7I,EAAM5L,EAAMkH,GAAGqD,KAAKqB,IACpB8I,EAAgB,GAChBza,EAAe,EACfC,EAAa,GACbya,EAAoB,SAAUC,EAAehZ,GAC7C,IAAI7B,EAAW6B,EAAI7B,SAAUsT,EAAczR,EAAIyR,YAC/CpT,GAAgB2a,EAAgBvH,EAChC,IAAK,IAAIwH,EAAK,EAAGtY,EAAKpK,GAAK4H,GAAW8a,EAAKtY,EAAG/Z,OAAQqyB,IAAM,CACxD,IAAIvG,EAAM/R,EAAGsY,GACbH,EAAcvzB,KAAK4Y,EAASuU,MAGpC,OAAOtO,EAAMkS,QAAQ2B,cAAclkB,MAAK,SAAUke,GAC9C,IAAIiH,EAAY,SAAUxI,GACtB,IAAIF,EAAQ9pB,KAAK8vB,IAAIvQ,EAAOgM,EAAQrrB,OAAS8pB,GAC7C,OAAOkE,EAAU1C,QAAQ,CAAEvG,MAAOA,EAAOpV,KAAM0b,EAAQnsB,MAAM4qB,EAAQA,EAASF,KAAUzc,MAAK,SAAU2T,GAKnG,IAJA,IAAIyR,EAAY,GACZC,EAAY,GACZC,EAAUV,EAAW,GAAK,KAC1BW,EAAa,GACRzyB,EAAI,EAAGA,EAAI2pB,IAAS3pB,EAAG,CAC5B,IAAI0yB,EAAY7R,EAAO7gB,GACnB2yB,EAAQ,CACRnyB,MAAOyT,GAAUye,GACjBlK,QAAS4C,EAAQvB,EAAS7pB,KAEmB,IAA7C4xB,EAASloB,KAAKipB,EAAOA,EAAMnyB,MAAOmyB,KACf,MAAfA,EAAMnyB,MACNiyB,EAAW/zB,KAAK0sB,EAAQvB,EAAS7pB,IAE3B8xB,GAAoE,IAAxD3I,EAAI4I,EAAWW,GAAYX,EAAWY,EAAMnyB,SAK9D+xB,EAAU7zB,KAAKi0B,EAAMnyB,OACjBsxB,GACAU,EAAQ9zB,KAAK0sB,EAAQvB,EAAS7pB,MANlCyyB,EAAW/zB,KAAK0sB,EAAQvB,EAAS7pB,IACjCsyB,EAAU5zB,KAAKi0B,EAAMnyB,SASjC,OAAOwJ,QAAQC,QAAQqoB,EAAUvyB,OAAS,GACtCguB,EAAUpD,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO+a,OAAQyR,IACjDplB,MAAK,SAAUiM,GAChB,IAAK,IAAI0S,KAAO1S,EAAI7B,SAChBmb,EAAWnjB,OAAOiE,SAASsY,GAAM,GAErCqG,EAAkBI,EAAUvyB,OAAQoZ,OACpCjM,MAAK,SAAUiM,GAAO,OAAOoZ,EAAUxyB,OAAS,GACpDguB,EAAUpD,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,MAAO4J,KAAM8iB,EAAS3R,OAAQ0R,IAChErlB,MAAK,SAAUiM,GAAO,OAAO+Y,EAAkBK,EAAUxyB,OAAQoZ,SAAajM,MAAK,WAAc,OAAOulB,EAAW1yB,OAAS,GACjIguB,EAAUpD,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,SAAU4J,KAAM+iB,IAClDvlB,MAAK,SAAUiM,GAAO,OAAO+Y,EAAkBO,EAAW1yB,OAAQoZ,SAAajM,MAAK,WACzF,OAAOke,EAAQrrB,OAAS8pB,EAASF,GAAS0I,EAAUxI,EAASzK,UAIzE,OAAOiT,EAAU,GAAGnlB,MAAK,WACrB,GAAI+kB,EAAclyB,OAAS,EACvB,MAAM,IAAIwX,GAAY,sCAAuC0a,EAAeza,EAAcC,GAC9F,OAAO2T,EAAQrrB,iBAK/BkqB,EAAWna,UAAUlO,OAAS,WAC1B,IAAI/C,EAAMwH,KAAK+oB,KAAMlE,EAAQrsB,EAAIqsB,MACjC,OAAI2B,GAAgBhuB,KACdA,EAAI6uB,YAAcvH,IAA8C,IAAf+E,EAAMplB,MAElDO,KAAKkpB,QAAO,SAAUzK,GACzB,IAAI6I,EAAa9uB,EAAIywB,MAAMxH,KAAKP,OAAOoG,WACnCiF,EAAY1H,EAChB,OAAOrsB,EAAIywB,MAAMxH,KAAK6B,MAAM,CAAE7E,MAAOA,EAAOqJ,MAAO,CAAExgB,MAAOggB,EAAYzC,MAAO0H,KAAe1lB,MAAK,SAAUyc,GACzG,OAAO9qB,EAAIywB,MAAMxH,KAAK6C,OAAO,CAAE7F,MAAOA,EAAOhf,KAAM,cAAeolB,MAAO0H,IACpE1lB,MAAK,SAAU4M,GACb,IAACxC,EAAWwC,EAAGxC,SAAuBwC,EAAG+Q,WAAsB/Q,EAAG6H,YAASiJ,EAAc9Q,EAAG8Q,YAC/F,GAAIA,EACA,MAAM,IAAIrT,GAAY,+BAAgCja,OAAOoS,KAAK4H,GAAUpJ,KAAI,SAAU2d,GAAO,OAAOvU,EAASuU,MAAUlC,EAAQiB,GACvI,OAAOjB,EAAQiB,WAKxBvkB,KAAK2kB,QAAO,SAAUxqB,EAAO3B,GAAO,OAAOA,EAAI2B,MAAQ,SAE3DypB,KAuCX,SAAS4I,GAAc/0B,EAAGC,GACtB,OAAOD,EAAIC,GAAK,EAAID,IAAMC,EAAI,EAAI,EAEtC,SAAS+0B,GAAqBh1B,EAAGC,GAC7B,OAAOD,EAAIC,GAAK,EAAID,IAAMC,EAAI,EAAI,EAGtC,SAAS4wB,GAAKoE,EAAyB7S,EAAK8S,GACxC,IAAIC,EAAaF,aAAmC5K,GAChD,IAAI4K,EAAwB9I,WAAW8I,GACvCA,EAEJ,OADAE,EAAW7D,KAAKC,MAAQ2D,EAAI,IAAIA,EAAE9S,GAAO,IAAI7H,UAAU6H,GAChD+S,EAEX,SAASC,GAAgBC,GACrB,OAAO,IAAIA,EAAYlJ,WAAWkJ,GAAa,WAAc,OAAOC,GAAW,OAAQhU,MAAM,GAYjG,SAASiU,GAAW7uB,EAAK8uB,EAAUC,EAAaC,EAAarK,EAAK8E,GAG9D,IAFA,IAAIluB,EAASF,KAAK8vB,IAAInrB,EAAIzE,OAAQyzB,EAAYzzB,QAC1C0zB,GAAO,EACFzzB,EAAI,EAAGA,EAAID,IAAUC,EAAG,CAC7B,IAAI0zB,EAAaJ,EAAStzB,GAC1B,GAAI0zB,IAAeF,EAAYxzB,GAC3B,OAAImpB,EAAI3kB,EAAIxE,GAAIuzB,EAAYvzB,IAAM,EACvBwE,EAAIyO,OAAO,EAAGjT,GAAKuzB,EAAYvzB,GAAKuzB,EAAYtgB,OAAOjT,EAAI,GAClEmpB,EAAI3kB,EAAIxE,GAAIwzB,EAAYxzB,IAAM,EACvBwE,EAAIyO,OAAO,EAAGjT,GAAKwzB,EAAYxzB,GAAKuzB,EAAYtgB,OAAOjT,EAAI,GAClEyzB,GAAO,EACAjvB,EAAIyO,OAAO,EAAGwgB,GAAOH,EAASG,GAAOF,EAAYtgB,OAAOwgB,EAAM,GAClE,KAEPtK,EAAI3kB,EAAIxE,GAAI0zB,GAAc,IAC1BD,EAAMzzB,GAEd,OAAID,EAASyzB,EAAYzzB,QAAkB,SAARkuB,EACxBzpB,EAAM+uB,EAAYtgB,OAAOzO,EAAIzE,QACpCA,EAASyE,EAAIzE,QAAkB,SAARkuB,EAChBzpB,EAAIyO,OAAO,EAAGsgB,EAAYxzB,QAC7B0zB,EAAM,EAAI,KAAOjvB,EAAIyO,OAAO,EAAGwgB,GAAOD,EAAYC,GAAOF,EAAYtgB,OAAOwgB,EAAM,GAE9F,SAASE,GAAuBR,EAAaS,EAAOC,EAASC,GACzD,IAAIhN,EAAOF,EAAOmN,EAASC,EAAcC,EAAcjpB,EAAWkpB,EAAeC,EAAaN,EAAQ9zB,OACtG,IAAK8zB,EAAQlL,OAAM,SAAU/Y,GAAK,MAAoB,iBAANA,KAC5C,OAAO+e,GAAKwE,EAAatN,IAE7B,SAASuO,EAAcnG,GACnBnH,EAvCR,SAAsBmH,GAClB,MAAe,SAARA,EACH,SAAUre,GAAK,OAAOA,EAAEykB,eACxB,SAAUzkB,GAAK,OAAOA,EAAE0kB,eAoChBC,CAAatG,GACrBrH,EAnCR,SAAsBqH,GAClB,MAAe,SAARA,EACH,SAAUre,GAAK,OAAOA,EAAE0kB,eACxB,SAAU1kB,GAAK,OAAOA,EAAEykB,eAgChBG,CAAavG,GACrB8F,EAAmB,SAAR9F,EAAiB4E,GAAgBC,GAC5C,IAAI2B,EAAeZ,EAAQ3lB,KAAI,SAAUwmB,GACrC,MAAO,CAAE9N,MAAOA,EAAM8N,GAAS5N,MAAOA,EAAM4N,OAC7CrE,MAAK,SAAUvyB,EAAGC,GACjB,OAAOg2B,EAAQj2B,EAAE8oB,MAAO7oB,EAAE6oB,UAE9BoN,EAAeS,EAAavmB,KAAI,SAAUymB,GAAM,OAAOA,EAAG7N,SAC1DmN,EAAeQ,EAAavmB,KAAI,SAAUymB,GAAM,OAAOA,EAAG/N,SAC1D5b,EAAYijB,EACZiG,EAAyB,SAARjG,EAAiB,GAAK6F,EAE3CM,EAAc,QACd,IAAIzyB,EAAI,IAAIwxB,EAAYlJ,WAAWkJ,GAAa,WAAc,OAAOyB,GAAYZ,EAAa,GAAIC,EAAaE,EAAa,GAAKL,MACjInyB,EAAEovB,mBAAqB,SAAU/lB,GAC7BopB,EAAcppB,IAElB,IAAI6pB,EAAsB,EA4B1B,OA3BAlzB,EAAE6tB,eAAc,SAAUhB,EAAQC,EAASxkB,GACvC,IAAIzF,EAAMgqB,EAAOhqB,IACjB,GAAmB,iBAARA,EACP,OAAO,EACX,IAAI8uB,EAAW1M,EAAMpiB,GACrB,GAAIovB,EAAMN,EAAUW,EAAcY,GAC9B,OAAO,EAIP,IADA,IAAIC,EAAuB,KAClB90B,EAAI60B,EAAqB70B,EAAIm0B,IAAcn0B,EAAG,CACnD,IAAI+0B,EAAS1B,GAAW7uB,EAAK8uB,EAAUU,EAAah0B,GAAIi0B,EAAaj0B,GAAI+zB,EAAS/oB,GACnE,OAAX+pB,GAA4C,OAAzBD,EACnBD,EAAsB70B,EAAI,GACI,OAAzB80B,GAAiCf,EAAQe,EAAsBC,GAAU,KAC9ED,EAAuBC,GAS/B,OALItG,EADyB,OAAzBqG,EACQ,WAActG,EAAOS,SAAS6F,EAAuBZ,IAGrDjqB,IAEL,KAGRtI,EAEX,SAASizB,GAAYhO,EAAOE,EAAOD,EAAWE,GAC1C,MAAO,CACHjhB,KAAM,EACN8gB,MAAOA,EACPE,MAAOA,EACPD,UAAWA,EACXE,UAAWA,GAGnB,SAASqM,GAAW5yB,GAChB,MAAO,CACHsF,KAAM,EACN8gB,MAAOpmB,EACPsmB,MAAOtmB,GAIf,IAAI2nB,GAA6B,WAC7B,SAASA,KAmOT,OAjOA7qB,OAAO4T,eAAeiX,EAAYrY,UAAW,aAAc,CACvDsB,IAAK,WACD,OAAO/K,KAAK+oB,KAAKE,MAAM7K,GAAGwF,YAE9B+K,YAAY,EACZ3jB,cAAc,IAElB8W,EAAYrY,UAAUmlB,QAAU,SAAUrO,EAAOE,EAAOoO,EAAcC,GAClED,GAAgC,IAAjBA,EACfC,GAAgC,IAAjBA,EACf,IACI,OAAK9uB,KAAK+uB,KAAKxO,EAAOE,GAAS,GACE,IAA5BzgB,KAAK+uB,KAAKxO,EAAOE,KAAiBoO,GAAgBC,MAAmBD,IAAgBC,GAC/EjC,GAAgB7sB,MACpB,IAAIA,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,GAAYhO,EAAOE,GAAQoO,GAAeC,MAEpG,MAAOnvB,GACH,OAAO2oB,GAAKtoB,KAAMuf,MAG1BuC,EAAYrY,UAAUuY,OAAS,SAAU7nB,GACrC,OAAa,MAATA,EACOmuB,GAAKtoB,KAAMuf,IACf,IAAIvf,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAO+sB,GAAW5yB,OAErE2nB,EAAYrY,UAAUulB,MAAQ,SAAU70B,GACpC,OAAa,MAATA,EACOmuB,GAAKtoB,KAAMuf,IACf,IAAIvf,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,GAAYp0B,OAAOd,GAAW,OAExFyoB,EAAYrY,UAAUwlB,aAAe,SAAU90B,GAC3C,OAAa,MAATA,EACOmuB,GAAKtoB,KAAMuf,IACf,IAAIvf,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,GAAYp0B,OAAOd,GAAW,OAExFyoB,EAAYrY,UAAUylB,MAAQ,SAAU/0B,GACpC,OAAa,MAATA,EACOmuB,GAAKtoB,KAAMuf,IACf,IAAIvf,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,QAAYl1B,EAAWc,GAAO,GAAO,OAE/F2nB,EAAYrY,UAAU0lB,aAAe,SAAUh1B,GAC3C,OAAa,MAATA,EACOmuB,GAAKtoB,KAAMuf,IACf,IAAIvf,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,QAAYl1B,EAAWc,OAEjF2nB,EAAYrY,UAAU2lB,WAAa,SAAU/tB,GACzC,MAAmB,iBAARA,EACAinB,GAAKtoB,KAAMwf,IACfxf,KAAK4uB,QAAQvtB,EAAKA,EAAM8d,IAAW,GAAM,IAEpD2C,EAAYrY,UAAU4lB,qBAAuB,SAAUhuB,GACnD,MAAY,KAARA,EACOrB,KAAKovB,WAAW/tB,GACpBisB,GAAuBttB,MAAM,SAAUvJ,EAAGgB,GAAK,OAA2B,IAApBhB,EAAEiM,QAAQjL,EAAE,MAAc,CAAC4J,GAAM8d,KAElG2C,EAAYrY,UAAU6lB,iBAAmB,SAAUjuB,GAC/C,OAAOisB,GAAuBttB,MAAM,SAAUvJ,EAAGgB,GAAK,OAAOhB,IAAMgB,EAAE,KAAO,CAAC4J,GAAM,KAEvFygB,EAAYrY,UAAU8lB,gBAAkB,WACpC,IAAIj1B,EAAM6U,GAAWxF,MAAMuF,GAAe1F,WAC1C,OAAmB,IAAflP,EAAIZ,OACGmzB,GAAgB7sB,MACpBstB,GAAuBttB,MAAM,SAAUvJ,EAAGgB,GAAK,OAAyB,IAAlBA,EAAEiL,QAAQjM,KAAc6D,EAAK,KAE9FwnB,EAAYrY,UAAU+lB,0BAA4B,WAC9C,IAAIl1B,EAAM6U,GAAWxF,MAAMuF,GAAe1F,WAC1C,OAAmB,IAAflP,EAAIZ,OACGmzB,GAAgB7sB,MACpBstB,GAAuBttB,MAAM,SAAUvJ,EAAGgB,GAAK,OAAOA,EAAE6gB,MAAK,SAAUrY,GAAK,OAAwB,IAAjBxJ,EAAEiM,QAAQzC,QAAiB3F,EAAK6kB,KAE9H2C,EAAYrY,UAAUgmB,MAAQ,WAC1B,IAAIvY,EAAQlX,KACR1F,EAAM6U,GAAWxF,MAAMuF,GAAe1F,WACtCkkB,EAAU1tB,KAAK+uB,KACnB,IACIz0B,EAAI0vB,KAAK0D,GAEb,MAAO/tB,GACH,OAAO2oB,GAAKtoB,KAAMuf,IAEtB,GAAmB,IAAfjlB,EAAIZ,OACJ,OAAOmzB,GAAgB7sB,MAC3B,IAAI1E,EAAI,IAAI0E,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,GAAYj0B,EAAI,GAAIA,EAAIA,EAAIZ,OAAS,OAC5F4B,EAAEovB,mBAAqB,SAAU/lB,GAC7B+oB,EAAyB,SAAd/oB,EACPuS,EAAMwY,WACNxY,EAAMyY,YACVr1B,EAAI0vB,KAAK0D,IAEb,IAAI/zB,EAAI,EAkBR,OAjBA2B,EAAE6tB,eAAc,SAAUhB,EAAQC,EAASxkB,GAEvC,IADA,IAAIzF,EAAMgqB,EAAOhqB,IACVuvB,EAAQvvB,EAAK7D,EAAIX,IAAM,GAE1B,KADEA,IACQW,EAAIZ,OAEV,OADA0uB,EAAQxkB,IACD,EAGf,OAA6B,IAAzB8pB,EAAQvvB,EAAK7D,EAAIX,MAIjByuB,GAAQ,WAAcD,EAAOS,SAAStuB,EAAIX,QACnC,MAGR2B,GAEXwmB,EAAYrY,UAAUmmB,SAAW,SAAUz1B,GACvC,OAAO6F,KAAK6vB,WAAW,CAAC,CAACvQ,GAAQnlB,GAAQ,CAACA,EAAO6F,KAAKoe,GAAGmE,UAAW,CAAEuN,eAAe,EAAOC,eAAe,KAE/GjO,EAAYrY,UAAUumB,OAAS,WAC3B,IAAI11B,EAAM6U,GAAWxF,MAAMuF,GAAe1F,WAC1C,GAAmB,IAAflP,EAAIZ,OACJ,OAAO,IAAIsG,KAAK4jB,WAAW5jB,MAC/B,IACI1F,EAAI0vB,KAAKhqB,KAAK0vB,YAElB,MAAO/vB,GACH,OAAO2oB,GAAKtoB,KAAMuf,IAEtB,IAAI0Q,EAAS31B,EAAI6R,QAAO,SAAU2G,EAAKrG,GAAO,OAAOqG,EACjDA,EAAIxF,OAAO,CAAC,CAACwF,EAAIA,EAAIpZ,OAAS,GAAG,GAAI+S,KACrC,CAAC,CAAC6S,GAAQ7S,MAAU,MAExB,OADAwjB,EAAO53B,KAAK,CAACiC,EAAIA,EAAIZ,OAAS,GAAIsG,KAAKoe,GAAGmE,UACnCviB,KAAK6vB,WAAWI,EAAQ,CAAEH,eAAe,EAAOC,eAAe,KAE1EjO,EAAYrY,UAAUomB,WAAa,SAAUI,EAAQ3yB,GACjD,IAAI4Z,EAAQlX,KACR8iB,EAAM9iB,KAAK+uB,KAAMmB,EAAYlwB,KAAK0vB,WAAYS,EAAanwB,KAAK2vB,YAAarG,EAAMtpB,KAAKowB,KAAM32B,EAAMuG,KAAKqwB,KAC7G,GAAsB,IAAlBJ,EAAOv2B,OACP,OAAOmzB,GAAgB7sB,MAC3B,IAAKiwB,EAAO3N,OAAM,SAAUuC,GACxB,YAAoBxrB,IAAbwrB,EAAM,SACIxrB,IAAbwrB,EAAM,IACNqL,EAAUrL,EAAM,GAAIA,EAAM,KAAO,KAErC,OAAOyD,GAAKtoB,KAAM,6HAA8HyR,GAAWiT,iBAE/J,IAAIoL,GAAiBxyB,IAAqC,IAA1BA,EAAQwyB,cACpCC,EAAgBzyB,IAAqC,IAA1BA,EAAQyyB,cAevC,IAEIz1B,EAFAg2B,EAAgBJ,EACpB,SAASK,EAAY94B,EAAGC,GAAK,OAAO44B,EAAc74B,EAAE,GAAIC,EAAE,IAE1D,KACI4C,EAAM21B,EAAO9jB,QAlBjB,SAAkB8jB,EAAQO,GAEtB,IADA,IAAI72B,EAAI,EAAGmP,EAAImnB,EAAOv2B,OACfC,EAAImP,IAAKnP,EAAG,CACf,IAAIkrB,EAAQoL,EAAOt2B,GACnB,GAAImpB,EAAI0N,EAAS,GAAI3L,EAAM,IAAM,GAAK/B,EAAI0N,EAAS,GAAI3L,EAAM,IAAM,EAAG,CAClEA,EAAM,GAAKyE,EAAIzE,EAAM,GAAI2L,EAAS,IAClC3L,EAAM,GAAKprB,EAAIorB,EAAM,GAAI2L,EAAS,IAClC,OAKR,OAFI72B,IAAMmP,GACNmnB,EAAO53B,KAAKm4B,GACTP,IAMuB,KAC1BjG,KAAKuG,GAEb,MAAOtY,GACH,OAAOqQ,GAAKtoB,KAAMuf,IAEtB,IAAIkR,EAAW,EACXC,EAA0BX,EAC1B,SAAU5xB,GAAO,OAAO+xB,EAAU/xB,EAAK7D,EAAIm2B,GAAU,IAAM,GAC3D,SAAUtyB,GAAO,OAAO+xB,EAAU/xB,EAAK7D,EAAIm2B,GAAU,KAAO,GAC5DE,EAA0Bb,EAC1B,SAAU3xB,GAAO,OAAOgyB,EAAWhyB,EAAK7D,EAAIm2B,GAAU,IAAM,GAC5D,SAAUtyB,GAAO,OAAOgyB,EAAWhyB,EAAK7D,EAAIm2B,GAAU,KAAO,GAIjE,IAAIG,EAAWF,EACXp1B,EAAI,IAAI0E,KAAK4jB,WAAW5jB,MAAM,WAAc,OAAOuuB,GAAYj0B,EAAI,GAAG,GAAIA,EAAIA,EAAIZ,OAAS,GAAG,IAAKo2B,GAAgBC,MAqCvH,OApCAz0B,EAAEovB,mBAAqB,SAAU/lB,GACX,SAAdA,GACAisB,EAAWF,EACXJ,EAAgBJ,IAGhBU,EAAWD,EACXL,EAAgBH,GAEpB71B,EAAI0vB,KAAKuG,IAEbj1B,EAAE6tB,eAAc,SAAUhB,EAAQC,EAASxkB,GAEvC,IADA,IAAIzF,EAAMgqB,EAAOhqB,IACVyyB,EAASzyB,IAEZ,KADEsyB,IACen2B,EAAIZ,OAEjB,OADA0uB,EAAQxkB,IACD,EAGf,QAzBJ,SAA+BzF,GAC3B,OAAQuyB,EAAwBvyB,KAASwyB,EAAwBxyB,GAwB7D0yB,CAAsB1yB,KAGqB,IAAtC+Y,EAAM6X,KAAK5wB,EAAK7D,EAAIm2B,GAAU,KAAmD,IAAtCvZ,EAAM6X,KAAK5wB,EAAK7D,EAAIm2B,GAAU,KAI9ErI,GAAQ,WACAkI,IAAkBJ,EAClB/H,EAAOS,SAAStuB,EAAIm2B,GAAU,IAE9BtI,EAAOS,SAAStuB,EAAIm2B,GAAU,QAP/B,MAYRn1B,GAEXwmB,EAAYrY,UAAUqnB,gBAAkB,WACpC,IAAIx2B,EAAM6U,GAAWxF,MAAMuF,GAAe1F,WAC1C,OAAKlP,EAAIgoB,OAAM,SAAU/Y,GAAK,MAAoB,iBAANA,KAGzB,IAAfjP,EAAIZ,OACGmzB,GAAgB7sB,MACpBA,KAAK6vB,WAAWv1B,EAAIuN,KAAI,SAAUxG,GAAO,MAAO,CAACA,EAAKA,EAAM8d,QAJxDmJ,GAAKtoB,KAAM,8CAMnB8hB,KAsBX,SAASiP,GAAoBzS,GACzB,OAA6B,IAAtBA,EAAW5kB,OAAe4kB,EAAW,GAAKA,EAGrD,SAAS0S,GAAUC,GACf,IAEI,OADAA,EAAYC,KAAK,CAAC,KACX,CAAC,IAEZ,MAAOvxB,GACH,OAAOwf,IAIf,SAASgS,GAAmB7Z,GACxB,OAAOkC,IAAK,SAAUpc,GAGlB,OAFAg0B,GAAeh0B,GACfka,EAAOla,EAAMzB,OAAOqtB,QACb,KAMf,SAASoI,GAAeh0B,GAChBA,EAAMi0B,iBACNj0B,EAAMi0B,kBACNj0B,EAAMg0B,gBACNh0B,EAAMg0B,iBAGd,IAAIE,GAA6B,WAC7B,SAASA,KAmJT,OAjJAA,EAAY7nB,UAAU8nB,MAAQ,WAK1B,OAJA3lB,IAAQiK,GAAI1L,UACVnK,KAAKwxB,UACgB,IAAnBxxB,KAAKwxB,WAAoB3b,GAAI1L,SAC7B0L,GAAI4b,aAAezxB,MAChBA,MAEXsxB,EAAY7nB,UAAUioB,QAAU,WAE5B,GADA9lB,IAAQiK,GAAI1L,QACa,KAAnBnK,KAAKwxB,UAGP,IAFK3b,GAAI1L,SACL0L,GAAI4b,aAAe,MAChBzxB,KAAK2xB,cAAcj4B,OAAS,IAAMsG,KAAK4xB,WAAW,CACrD,IAAIC,EAAW7xB,KAAK2xB,cAAcG,QAClC,IACIhX,GAAO+W,EAAS,GAAIA,EAAS,IAEjC,MAAOlyB,KAGf,OAAOK,MAEXsxB,EAAY7nB,UAAUmoB,QAAU,WAC5B,OAAO5xB,KAAKwxB,WAAa3b,GAAI4b,eAAiBzxB,MAElDsxB,EAAY7nB,UAAUvS,OAAS,SAAUkqB,GACrC,IAAIlK,EAAQlX,KACZ,IAAKA,KAAKqe,KACN,OAAOre,KACX,IAAI+xB,EAAQ/xB,KAAKoe,GAAG2T,MAChBC,EAAchyB,KAAKoe,GAAG3H,OAAOub,YAEjC,GADApmB,IAAQ5L,KAAKohB,WACRA,IAAa2Q,EACd,OAAQC,GAAeA,EAAYv1B,MAC/B,IAAK,sBACD,MAAM,IAAIgV,GAAWf,eAAeshB,GACxC,IAAK,kBACD,MAAM,IAAIvgB,GAAWwgB,WAAWD,EAAY5hB,QAAS4hB,GACzD,QACI,MAAM,IAAIvgB,GAAWygB,WAAWF,GAG5C,IAAKhyB,KAAKY,OACN,MAAM,IAAI6Q,GAAWb,oBAiBzB,OAhBAhF,GAAmC,OAA5B5L,KAAK4e,YAAYnI,SACxB2K,EAAWphB,KAAKohB,SAAWA,GAAY2Q,EAAMI,YAAYpB,GAAoB/wB,KAAKse,YAAate,KAAKqe,OAC3FrL,QAAUwG,IAAK,SAAU4Y,GAC9BhB,GAAegB,GACflb,EAAMmb,QAAQjR,EAAS4H,UAE3B5H,EAASkR,QAAU9Y,IAAK,SAAU4Y,GAC9BhB,GAAegB,GACflb,EAAMtW,QAAUsW,EAAMmb,QAAQ,IAAI5gB,GAAWd,MAAMyQ,EAAS4H,QAC5D9R,EAAMtW,QAAS,EACfsW,EAAMqb,GAAG,SAAS3Q,KAAKwQ,MAE3BhR,EAASoR,WAAahZ,IAAK,WACvBtC,EAAMtW,QAAS,EACfsW,EAAMub,cAEHzyB,MAEXsxB,EAAY7nB,UAAU0O,SAAW,SAAUkG,EAAMtnB,EAAI27B,GACjD,IAAIxb,EAAQlX,KACZ,GAAa,cAATqe,GAAsC,cAAdre,KAAKqe,KAC7B,OAAO3B,GAAU,IAAIjL,GAAWkhB,SAAS,4BAC7C,IAAK3yB,KAAKY,OACN,OAAO8b,GAAU,IAAIjL,GAAWb,qBACpC,GAAI5Q,KAAK4xB,UACL,OAAO,IAAI5b,IAAa,SAAUpS,EAAS0T,GACvCJ,EAAMya,cAAct5B,KAAK,CAAC,WAClB6e,EAAMiB,SAASkG,EAAMtnB,EAAI27B,GAAY7rB,KAAKjD,EAAS0T,IACpDzB,QAGV,GAAI6c,EACL,OAAO7X,IAAS,WACZ,IAAI/gB,EAAI,IAAIkc,IAAa,SAAUpS,EAAS0T,GACxCJ,EAAMqa,QACN,IAAI/kB,EAAKzV,EAAG6M,EAAS0T,EAAQJ,GACzB1K,GAAMA,EAAG3F,MACT2F,EAAG3F,KAAKjD,EAAS0T,MAIzB,OAFAxd,EAAEggB,SAAQ,WAAc,OAAO5C,EAAMwa,aACrC53B,EAAEqc,MAAO,EACFrc,KAIX,IAAIA,EAAI,IAAIkc,IAAa,SAAUpS,EAAS0T,GACxC,IAAI9K,EAAKzV,EAAG6M,EAAS0T,EAAQJ,GACzB1K,GAAMA,EAAG3F,MACT2F,EAAG3F,KAAKjD,EAAS0T,MAGzB,OADAxd,EAAEqc,MAAO,EACFrc,GAGfw3B,EAAY7nB,UAAUmpB,MAAQ,WAC1B,OAAO5yB,KAAKkc,OAASlc,KAAKkc,OAAO0W,QAAU5yB,MAE/CsxB,EAAY7nB,UAAUopB,QAAU,SAAUC,GACtC,IAAIC,EAAO/yB,KAAK4yB,QACZnuB,EAAUuR,GAAapS,QAAQkvB,GACnC,GAAIC,EAAKC,YACLD,EAAKC,YAAcD,EAAKC,YAAYnsB,MAAK,WAAc,OAAOpC,SAE7D,CACDsuB,EAAKC,YAAcvuB,EACnBsuB,EAAKE,cAAgB,GACrB,IAAIr7B,EAAQm7B,EAAK3R,SAAS8R,YAAYH,EAAKzU,WAAW,KACrD,SAAS6U,IAEN,MADEJ,EAAKK,WACAL,EAAKE,cAAcv5B,QACrBq5B,EAAKE,cAAcnB,OAApB,GACAiB,EAAKC,cACLp7B,EAAMmT,KAAKmP,EAAAA,GAAUnH,UAAYogB,GALzC,GAQJ,IAAIE,EAAqBN,EAAKC,YAC9B,OAAO,IAAIhd,IAAa,SAAUpS,EAAS0T,GACvC7S,EAAQoC,MAAK,SAAUiM,GAAO,OAAOigB,EAAKE,cAAc56B,KAAKmhB,GAAK5V,EAAQyD,KAAK,KAAMyL,QAAW,SAAU+G,GAAO,OAAOkZ,EAAKE,cAAc56B,KAAKmhB,GAAKlC,EAAOjQ,KAAK,KAAMwS,QAAWC,SAAQ,WAClLiZ,EAAKC,cAAgBK,IACrBN,EAAKC,YAAc,aAKnC1B,EAAY7nB,UAAU6pB,MAAQ,WAC1BtzB,KAAKY,QAAUZ,KAAKqyB,QAAQ,IAAI5gB,GAAWd,OAC3C3Q,KAAKY,QAAS,GAElB0wB,EAAY7nB,UAAUwf,MAAQ,SAAUjI,GACpC,IAAIuS,EAAkBvzB,KAAKwzB,kBAAoBxzB,KAAKwzB,gBAAkB,IACtE,GAAI/oB,GAAO8oB,EAAgBvS,GACvB,OAAOuS,EAAevS,GAC1B,IAAIyS,EAAczzB,KAAKkhB,OAAOF,GAC9B,IAAKyS,EACD,MAAM,IAAIhiB,GAAW0P,SAAS,SAAWH,EAAY,4BAEzD,IAAI0S,EAAwB,IAAI1zB,KAAKoe,GAAGwC,MAAMI,EAAWyS,EAAazzB,MAGtE,OAFA0zB,EAAsBjS,KAAOzhB,KAAKoe,GAAGqD,KAAKwH,MAAMjI,GAChDuS,EAAevS,GAAa0S,EACrBA,GAEJpC,KAwCX,SAASqC,GAAgBl3B,EAAM8P,EAASsb,EAAQ5E,EAAOmB,EAAM/B,EAAUgF,GACnE,MAAO,CACH5qB,KAAMA,EACN8P,QAASA,EACTsb,OAAQA,EACR5E,MAAOA,EACPmB,KAAMA,EACN/B,SAAUA,EACVzrB,KAAMixB,IAAWR,EAAY,IAAM,KAAOpE,EAAQ,IAAM,KAAOmB,EAAO,KAAO,IAAMwP,GAAgBrnB,IAG3G,SAASqnB,GAAgBrnB,GACrB,MAA0B,iBAAZA,EACVA,EACAA,EAAW,IAAM,GAAG3J,KAAKS,KAAKkJ,EAAS,KAAO,IAAO,GAG7D,SAASsnB,GAAkBp3B,EAAM0lB,EAASD,GACtC,MAAO,CACHzlB,KAAMA,EACN0lB,QAASA,EACTD,QAASA,EACT8B,YAAa,KACbtB,UAAW1W,GAAckW,GAAS,SAAU5a,GAAS,MAAO,CAACA,EAAM7K,KAAM6K,OAIjF,SAASwsB,GAAgBvnB,GACrB,OAAe,MAAXA,EACO,aAEiB,iBAAZA,EAOpB,SAAmCA,GAE/B,OAAqB,IADTA,EAAQjK,MAAM,KAChB5I,OACC,SAAUyP,GAAO,OAAOA,EAAIoD,IAG5B,SAAUpD,GAAO,OAAOmD,GAAanD,EAAKoD,IAZ1CwnB,CAA0BxnB,GAG1B,SAAUpD,GAAO,OAAOmD,GAAanD,EAAKoD,IAazD,SAASynB,GAAiB1M,EAAY2M,GAClC,MAAiB,WAAbA,EAAIx0B,KACGw0B,EAAI5qB,KACR4qB,EAAI5qB,MAAQ4qB,EAAIzZ,OAAO3S,IAAIyf,EAAWoE,YAOjD,SAASwI,GAAS9kB,GACd,MAAO,GAAGxW,MAAMyK,KAAK+L,GAGzB,IAAI+kB,GAAc,EAClB,SAASC,GAAgB7nB,GACrB,OAAkB,MAAXA,EACH,MACmB,iBAAZA,EACHA,EACA,IAAMA,EAAQ3J,KAAK,KAAO,IAEtC,SAASyxB,GAAajW,EAAIyE,EAAWoO,EAAaqD,GAC9C,IAAIxR,EAAMD,EAAUC,IAAIzb,KAAKwb,GAqD7B,SAAS0R,EAAgB1P,GACrB,GAAmB,IAAfA,EAAMplB,KACN,OAAO,KACX,GAAmB,IAAfolB,EAAMplB,KACN,MAAM,IAAIwD,MAAM,4CACpB,IAAIsd,EAAQsE,EAAMtE,MAAOE,EAAQoE,EAAMpE,MAAOD,EAAYqE,EAAMrE,UAAWE,EAAYmE,EAAMnE,UAQ7F,YAPyBrnB,IAAVknB,OACDlnB,IAAVonB,EACI,KACAwQ,EAAYuD,WAAW/T,IAASC,QAC1BrnB,IAAVonB,EACIwQ,EAAYwD,WAAWlU,IAASC,GAChCyQ,EAAY1pB,MAAMgZ,EAAOE,IAASD,IAAaE,GAiR3D,IAAIjN,EAjVJ,SAAuB2K,EAAIK,GACvB,IAAIiW,EAASR,GAAS9V,EAAGuW,kBACzB,MAAO,CACHzT,OAAQ,CACJzkB,KAAM2hB,EAAG3hB,KACTi4B,OAAQA,EAAO7sB,KAAI,SAAUohB,GAAS,OAAOxK,EAAMyU,YAAYjK,MAAWphB,KAAI,SAAUjQ,GACpF,IAAI2U,EAAU3U,EAAM2U,QAASqoB,EAAgBh9B,EAAMg9B,cAC/CvS,EAAWrY,GAAQuC,GACnBkf,EAAsB,MAAXlf,EACXsoB,EAAiB,GACjB56B,EAAS,CACTwC,KAAM7E,EAAM6E,KACZ6qB,WAAY,CACR7qB,KAAM,KACNq4B,cAAc,EACdrJ,SAAUA,EACVpJ,SAAUA,EACV9V,QAASA,EACTqoB,cAAeA,EACf/M,QAAQ,EACR6D,WAAYoI,GAAgBvnB,IAEhC2V,QAASgS,GAASt8B,EAAMm9B,YAAYltB,KAAI,SAAU4iB,GAAa,OAAO7yB,EAAM0P,MAAMmjB,MAC7E5iB,KAAI,SAAUP,GACf,IAAI7K,EAAO6K,EAAM7K,KAAMorB,EAASvgB,EAAMugB,OAAQmN,EAAa1tB,EAAM0tB,WAAYzoB,EAAUjF,EAAMiF,QAEzFtS,EAAS,CACTwC,KAAMA,EACN4lB,SAHWrY,GAAQuC,GAInBA,QAASA,EACTsb,OAAQA,EACRmN,WAAYA,EACZtJ,WAAYoI,GAAgBvnB,IAGhC,OADAsoB,EAAeT,GAAgB7nB,IAAYtS,EACpCA,KAEXstB,kBAAmB,SAAUhb,GAAW,OAAOsoB,EAAeT,GAAgB7nB,MAMlF,OAJAsoB,EAAe,OAAS56B,EAAOqtB,WAChB,MAAX/a,IACAsoB,EAAeT,GAAgB7nB,IAAYtS,EAAOqtB,YAE/CrtB,MAGfg7B,UAAWP,EAAOh7B,OAAS,GAAM,WAAY+kB,EAAMyU,YAAYwB,EAAO,OAC3C,oBAAd/U,WAA6B,SAASjQ,KAAKiQ,UAAUC,aACzD,oBAAoBlQ,KAAKiQ,UAAUC,YACpC,GAAGtS,OAAOqS,UAAUC,UAAU2N,MAAM,kBAAkB,GAAK,MAgSlE2H,CAAc9W,EAAIkW,GAAWpT,EAASzN,EAAGyN,OAAQ+T,EAAYxhB,EAAGwhB,UACrEP,EAASxT,EAAOwT,OAAO7sB,KAAI,SAAU4rB,GAAe,OA/QxD,SAA2BA,GACvB,IAAIzS,EAAYyS,EAAYh3B,KA8M5B,MAAO,CACHA,KAAMukB,EACNE,OAAQuS,EACRnP,OAhNJ,SAAgB7Q,GACZ,IAAIgL,EAAQhL,EAAGgL,MAAOhf,EAAOgU,EAAGhU,KAAMslB,EAAUtR,EAAGpK,KAAMmR,EAAS/G,EAAG+G,OAAQqK,EAAQpR,EAAGoR,MAAOO,EAAc3R,EAAG2R,YAChH,OAAO,IAAIzhB,SAAQ,SAAUC,EAAS0T,GAClC1T,EAAU4V,GAAK5V,GACf,IAAIhM,EAAQ6mB,EAAMyU,YAAYlS,GAC1ByK,EAA4B,MAAjB7zB,EAAM2U,QACjB4oB,EAAsB,QAAT11B,GAA2B,QAATA,EACnC,IAAK01B,GAAuB,WAAT11B,GAA8B,gBAATA,EACpC,MAAM,IAAIwD,MAAM,2BAA6BxD,GACjD,IAAI/F,GAAUqrB,GAAWvK,GAAU,CAAE9gB,OAAQ,IAAKA,OAClD,GAAIqrB,GAAWvK,GAAUuK,EAAQrrB,SAAW8gB,EAAO9gB,OAC/C,MAAM,IAAIuJ,MAAM,iEAEpB,GAAe,IAAXvJ,EACA,OAAOkK,EAAQ,CAAE2gB,YAAa,EAAGtT,SAAU,GAAIqK,QAAS,GAAIkJ,gBAAYnrB,IAC5E,IAGI46B,EAHA3Y,EAAU8J,GAAexb,GAAgBmb,GAEzCiP,GAAiBP,EAAYnM,WAAY,CAAE7nB,KAAMA,EAAM4J,KAAM0b,EAASvK,OAAQA,KAE9EvJ,EAAW,GACXsT,EAAc,EACd6Q,EAAe,SAAUh4B,KACvBmnB,EACF6M,GAAeh0B,GACXke,IACAA,EAAQle,EAAMzB,OAAO05B,aAAUh8B,GACnC4X,EAAS7T,EAAMzB,OAAO05B,QAAUj4B,EAAMzB,OAAOqtB,OAE7CsM,EAAY,SAAU7hB,GACtB,IAAI9X,EAAS8X,EAAG9X,OAChB2f,EAAQ3f,EAAO05B,QAAU15B,EAAO1B,QAEpC,GAAa,gBAATwF,EAAwB,CACxB,GAAmB,IAAfolB,EAAMplB,KACN,OAAOmE,EAAQ,CAAE2gB,YAAaA,EAAatT,SAAUA,EAAUqK,QAASA,EAASkJ,gBAAYnrB,IAE7F46B,EADe,IAAfpP,EAAMplB,KACA7H,EAAMkL,QAENlL,EAAM2D,OAAOg5B,EAAgB1P,QAEtC,CACD,IAAIpR,EAAK0hB,EACL1J,EACI,CAACjR,EAAQuK,GACT,CAACvK,EAAQ,MACb,CAACuK,EAAS,MAAOwQ,EAAQ9hB,EAAG,GAAI+hB,EAAQ/hB,EAAG,GAC/C,GAAI0hB,EACA,IAAK,IAAIx7B,EAAI,EAAGA,EAAID,IAAUC,GAC1Bs6B,EAAOuB,QAAsBn8B,IAAbm8B,EAAM77B,GAClB/B,EAAM6H,GAAM81B,EAAM57B,GAAI67B,EAAM77B,IAC5B/B,EAAM6H,GAAM81B,EAAM57B,KAClB07B,OAAS17B,EACT2hB,QAA0BjiB,IAAfiiB,EAAQ3hB,KACnBs6B,EAAIlhB,UAAYuiB,GAEpBrB,EAAIjhB,QAAUoiB,OAIlB,IAASz7B,EAAI,EAAGA,EAAID,IAAUC,GAC1Bs6B,EAAMr8B,EAAM6H,GAAM81B,EAAM57B,KACpB07B,OAAS17B,EACbs6B,EAAIjhB,QAAUoiB,EAI1B,IAAI9lB,EAAO,SAAUlS,GACjB,IAAIonB,EAAapnB,EAAMzB,OAAO1B,OAC1BqhB,IACAA,EAAQ5hB,EAAS,GAAK8qB,GAC1B5gB,EAAQ,CACJ2gB,YAAaA,EACbtT,SAAUA,EACVqK,QAASA,EACTkJ,WAAYA,KAGpByP,EAAIjhB,QAAU,SAAU5V,GACpBg4B,EAAah4B,GACbkS,EAAKlS,IAET62B,EAAIlhB,UAAYzD,MAgIpB0V,QAAS,SAAUvR,GACf,IAAIgL,EAAQhL,EAAGgL,MAAOsG,EAAUtR,EAAGpK,KACnC,OAAO,IAAI1F,SAAQ,SAAUC,EAAS0T,GAClC1T,EAAU4V,GAAK5V,GAgBf,IAfA,IAMIqwB,EANAr8B,EAAQ6mB,EAAMyU,YAAYlS,GAC1BtnB,EAASqrB,EAAQrrB,OACjBO,EAAS,IAAIsG,MAAM7G,GACnB+7B,EAAW,EACXC,EAAgB,EAGhBC,EAAiB,SAAUv4B,GAC3B,IAAI62B,EAAM72B,EAAMzB,OACX1B,EAAOg6B,EAAI2B,MAAQ3B,EAAIh6B,SAEtBy7B,IAAkBD,GACpB7xB,EAAQ3J,IAEZm7B,EAAejE,GAAmB7Z,GAC7B3d,EAAI,EAAGA,EAAID,IAAUC,EAEf,MADDorB,EAAQprB,MAEds6B,EAAMr8B,EAAMmT,IAAIga,EAAQprB,KACpBi8B,KAAOj8B,EACXs6B,EAAIlhB,UAAY4iB,EAChB1B,EAAIjhB,QAAUoiB,IACZK,GAGO,IAAbA,GACA7xB,EAAQ3J,OAGpB8Q,IAAK,SAAU0I,GACX,IAAIgL,EAAQhL,EAAGgL,MAAOtgB,EAAMsV,EAAGtV,IAC/B,OAAO,IAAIwF,SAAQ,SAAUC,EAAS0T,GAClC1T,EAAU4V,GAAK5V,GACf,IACIqwB,EADQxV,EAAMyU,YAAYlS,GACdjW,IAAI5M,GACpB81B,EAAIlhB,UAAY,SAAU3V,GAAS,OAAOwG,EAAQxG,EAAMzB,OAAO1B,SAC/Dg6B,EAAIjhB,QAAUme,GAAmB7Z,OAGzCwQ,MAtFJ,SAAemN,GACX,OAAO,SAAUY,GACb,OAAO,IAAIlyB,SAAQ,SAAUC,EAAS0T,GAClC1T,EAAU4V,GAAK5V,GACf,IAAI6a,EAAQoX,EAAQpX,MAAOjE,EAASqb,EAAQrb,OAAQzB,EAAQ8c,EAAQ9c,MAAO+O,EAAQ+N,EAAQ/N,MACvFgO,EAAkB/c,IAAUmB,EAAAA,OAAW7gB,EAAY0f,EACnDzR,EAAQwgB,EAAMxgB,MAAOud,EAAQiD,EAAMjD,MACnCjtB,EAAQ6mB,EAAMyU,YAAYlS,GAC1B+U,EAASzuB,EAAMwtB,aAAel9B,EAAQA,EAAM0P,MAAMA,EAAM7K,MACxDu5B,EAAczB,EAAgB1P,GAClC,GAAc,IAAV9L,EACA,OAAOnV,EAAQ,CAAE3J,OAAQ,KAC7B,GAAIg7B,EAAW,CACX,IAAIhB,EAAMzZ,EACNub,EAAOE,OAAOD,EAAaF,GAC3BC,EAAOG,WAAWF,EAAaF,GACnC7B,EAAIlhB,UAAY,SAAU3V,GAAS,OAAOwG,EAAQ,CAAE3J,OAAQmD,EAAMzB,OAAO1B,UACzEg6B,EAAIjhB,QAAUme,GAAmB7Z,OAEhC,CACD,IAAI6e,EAAU,EACVC,EAAQ5b,KAAY,kBAAmBub,GACvCA,EAAOtO,WAAWuO,GAClBD,EAAOM,cAAcL,GACrBM,EAAW,GACfF,EAAMrjB,UAAY,SAAU3V,GACxB,IAAI+qB,EAASiO,EAAMn8B,OACnB,OAAKkuB,GAELmO,EAASj+B,KAAKmiB,EAAS2N,EAAOhuB,MAAQguB,EAAOb,cACvC6O,IAAYpd,EACPnV,EAAQ,CAAE3J,OAAQq8B,SAC7BnO,EAAOS,YAJIhlB,EAAQ,CAAE3J,OAAQq8B,KAMjCF,EAAMpjB,QAAUme,GAAmB7Z,QAoDxCwQ,CAAMmN,GACbxN,WAzKJ,SAAoBhU,GAChB,IAAIgL,EAAQhL,EAAGgL,MAAOjE,EAAS/G,EAAG+G,OAAQsN,EAAQrU,EAAGqU,MAAOhE,EAAUrQ,EAAGqQ,QAAS+D,EAASpU,EAAGoU,OAC9F,OAAO,IAAIlkB,SAAQ,SAAUC,EAAS0T,GAClC1T,EAAU4V,GAAK5V,GACf,IAAI0D,EAAQwgB,EAAMxgB,MAAOud,EAAQiD,EAAMjD,MACnCjtB,EAAQ6mB,EAAMyU,YAAYlS,GAC1B+U,EAASzuB,EAAMwtB,aACfl9B,EACAA,EAAM0P,MAAMA,EAAM7K,MAClBkI,EAAYmf,EACZ+D,EACI,aACA,OACJA,EACI,aACA,OACJoM,EAAMzZ,KAAY,kBAAmBub,GACrCA,EAAOtO,WAAW8M,EAAgB1P,GAAQlgB,GAC1CoxB,EAAOM,cAAc9B,EAAgB1P,GAAQlgB,GACjDsvB,EAAIjhB,QAAUme,GAAmB7Z,GACjC2c,EAAIlhB,UAAYyG,IAAK,SAAU4Y,GAC3B,IAAIjK,EAAS8L,EAAIh6B,OACjB,GAAKkuB,EAAL,CAIAA,EAAOoO,QAAUpC,GACjBhM,EAAO7Y,MAAO,EACd,IAAIknB,EAAkBrO,EAAOS,SAASvhB,KAAK8gB,GACvCsO,EAA4BtO,EAAOuO,mBACnCD,IACAA,EAA4BA,EAA0BpvB,KAAK8gB,IAC/D,IAAIwO,EAAiBxO,EAAOC,QAAQ/gB,KAAK8gB,GAErCyO,EAAyB,WAAc,MAAM,IAAI3zB,MAAM,uBAC3DklB,EAAO1J,MAAQA,EACf0J,EAAOE,KAAOF,EAAOS,SAAWT,EAAOuO,mBAAqBvO,EAAOC,QAHnC,WAAc,MAAM,IAAInlB,MAAM,uBAI9DklB,EAAOG,KAAO9O,GAAKlC,GACnB6Q,EAAO5lB,KAAO,WACV,IAAI2U,EAAQlX,KACR62B,EAAS,EACb,OAAO72B,KAAKoG,OAAM,WAAc,OAAOywB,IAAW3f,EAAM0R,WAAa1R,EAAMmR,UAAWxhB,MAAK,WAAc,OAAOqQ,MAEpHiR,EAAO/hB,MAAQ,SAAUlO,GACrB,IAAI4+B,EAAmB,IAAInzB,SAAQ,SAAUozB,EAAkBC,GAC3DD,EAAmBvd,GAAKud,GACxB9C,EAAIjhB,QAAUme,GAAmB6F,GACjC7O,EAAOG,KAAO0O,EACd7O,EAAOE,KAAO,SAAUluB,GACpBguB,EAAOE,KAAOF,EAAOS,SAAWT,EAAOuO,mBAAqBvO,EAAOC,QAAUwO,EAC7EG,EAAiB58B,OAGrB88B,EAAkB,WAClB,GAAIhD,EAAIh6B,OACJ,IACI/B,IAEJ,MAAO2hB,GACHsO,EAAOG,KAAKzO,QAIhBsO,EAAO7Y,MAAO,EACd6Y,EAAO/hB,MAAQ,WAAc,MAAM,IAAInD,MAAM,6BAC7CklB,EAAOE,QAWf,OARA4L,EAAIlhB,UAAYyG,IAAK,SAAU4Y,GAC3B6B,EAAIlhB,UAAYkkB,EAChBA,OAEJ9O,EAAOS,SAAW4N,EAClBrO,EAAOuO,mBAAqBD,EAC5BtO,EAAOC,QAAUuO,EACjBM,IACOH,GAEXlzB,EAAQukB,QAvDJvkB,EAAQ,QAwDb0T,OA2FPgM,MAAO,SAAU7P,GACb,IAAIqU,EAAQrU,EAAGqU,MAAOrJ,EAAQhL,EAAGgL,MAC7BnX,EAAQwgB,EAAMxgB,MAAOud,EAAQiD,EAAMjD,MACvC,OAAO,IAAIlhB,SAAQ,SAAUC,EAAS0T,GAClC,IAAI1f,EAAQ6mB,EAAMyU,YAAYlS,GAC1B+U,EAASzuB,EAAMwtB,aAAel9B,EAAQA,EAAM0P,MAAMA,EAAM7K,MACxDu5B,EAAczB,EAAgB1P,GAC9BoP,EAAM+B,EAAcD,EAAOzS,MAAM0S,GAAeD,EAAOzS,QAC3D2Q,EAAIlhB,UAAYyG,IAAK,SAAU4Y,GAAM,OAAOxuB,EAAQwuB,EAAGz2B,OAAO1B,WAC9Dg6B,EAAIjhB,QAAUme,GAAmB7Z,QAMc4f,CAAkBzD,MAC7E0D,EAAW,GAEf,OADAzC,EAAOr9B,SAAQ,SAAU4xB,GAAS,OAAOkO,EAASlO,EAAMxsB,MAAQwsB,KACzD,CACHlZ,MAAO,SACPoiB,YAAa/T,EAAG+T,YAAY9qB,KAAK+W,GACjC6K,MAAO,SAAUxsB,GAEb,IADa06B,EAAS16B,GAElB,MAAM,IAAIwG,MAAM,UAAYxG,EAAO,eACvC,OAAO06B,EAAS16B,IAEpBqmB,IAAKA,EACLsU,SAAUld,EAAAA,EACVmd,QAASrG,GAAUC,GACnB/P,OAAQA,GAUhB,SAASoW,GAAuBC,EAAaxF,EAAOte,EAAI6gB,GACpD,IAAIkD,EAAc/jB,EAAG+jB,YAErB,MAAO,CACHC,OAVR,SAA+BC,EAAWH,GACtC,OAAOA,EAAYprB,QAAO,SAAUwrB,EAAMlkB,GACtC,IAAIvc,EAASuc,EAAGvc,OAChB,OAAQoS,GAASA,GAAS,GAAIquB,GAAOzgC,EAAOygC,MAC7CD,GAIUE,CAAsBvD,GAAatC,EADFte,EAAGoP,UACiB2U,EAAalD,GAAWiD,EAAYE,SAK1G,SAASI,GAAyBzZ,EAAIkW,GAClC,IAAIvC,EAAQuC,EAASlW,GACjBtF,EAASwe,GAAuBlZ,EAAG0Z,aAAc/F,EAAO3T,EAAGwE,MAAO0R,GACtElW,EAAGqD,KAAO3I,EAAO2e,OACjBrZ,EAAGsW,OAAOr9B,SAAQ,SAAU4xB,GACxB,IAAIjI,EAAYiI,EAAMxsB,KAClB2hB,EAAGqD,KAAKP,OAAOwT,OAAOpc,MAAK,SAAUyf,GAAO,OAAOA,EAAIt7B,OAASukB,OAChEiI,EAAMxH,KAAOrD,EAAGqD,KAAKwH,MAAMjI,GACvB5C,EAAG4C,aAAsB5C,EAAGwC,QAC5BxC,EAAG4C,GAAWS,KAAOwH,EAAMxH,UAM3C,SAASuW,GAAc5Z,EAAI6Z,EAAMC,EAAYC,GACzCD,EAAW7gC,SAAQ,SAAU2pB,GACzB,IAAIE,EAASiX,EAASnX,GACtBiX,EAAK5gC,SAAQ,SAAU8R,GACnB,IAAIivB,EAAW9sB,GAAsBnC,EAAK6X,KACrCoX,GAAa,UAAWA,QAA+B/+B,IAAnB++B,EAASj+B,SAC1CgP,IAAQiV,EAAGkT,YAAY7nB,WAAaN,aAAeiV,EAAGkT,YACtD1mB,GAAQzB,EAAK6X,EAAW,CACpBjW,IAAK,WAAc,OAAO/K,KAAKipB,MAAMjI,IACrC1mB,IAAK,SAAUH,GACX0Q,GAAe7K,KAAMghB,EAAW,CAAE7mB,MAAOA,EAAO8Q,UAAU,EAAMD,cAAc,EAAM2jB,YAAY,OAKxGxlB,EAAI6X,GAAa,IAAI5C,EAAGwC,MAAMI,EAAWE,UAM7D,SAASmX,GAAgBja,EAAI6Z,GACzBA,EAAK5gC,SAAQ,SAAU8R,GACnB,IAAK,IAAIhL,KAAOgL,EACRA,EAAIhL,aAAgBigB,EAAGwC,cAChBzX,EAAIhL,MAI3B,SAASm6B,GAAkB7gC,EAAGC,GAC1B,OAAOD,EAAE8gC,KAAKC,QAAU9gC,EAAE6gC,KAAKC,QAEnC,SAASC,GAAara,EAAIsa,EAAYC,EAAiBrhB,GACnD,IAAIshB,EAAexa,EAAGO,UAClBF,EAAQL,EAAGM,mBAAmB,YAAaN,EAAGya,YAAaD,GAC/Dna,EAAMvnB,OAAOyhC,GACbla,EAAMG,YAAYhF,MAAMtC,GACxB,IAAIwhB,EAAoBra,EAAM4T,QAAQhrB,KAAKoX,GACvC4C,EAAYxL,GAAIwL,WAAaxL,GACjCgF,IAAS,WACLhF,GAAI4I,MAAQA,EACZ5I,GAAIwL,UAAYA,EACG,IAAfqX,GACArvB,GAAKuvB,GAAcvhC,SAAQ,SAAU2pB,GACjC+X,GAAYJ,EAAiB3X,EAAW4X,EAAa5X,GAAWmB,QAASyW,EAAa5X,GAAWkB,YAErG2V,GAAyBzZ,EAAIua,GAC7B3iB,GAAagF,QAAO,WAAc,OAAOoD,EAAGmU,GAAGyG,SAASpX,KAAKnD,MAAW7E,MAAMkf,IAM1F,SAAgC1a,EAAIsa,EAAYja,EAAOka,GACnD,IAAIM,EAAQ,GACRC,EAAW9a,EAAG+a,UACdP,EAAexa,EAAGO,UAAYya,GAAkBhb,EAAIA,EAAG2T,MAAO4G,GAC9DU,GAA2B,EAmE/B,SAASC,IACL,OAAOL,EAAMv/B,OAASsc,GAAapS,QAAQq1B,EAAMnH,OAANmH,CAAcxa,EAAM2C,WAAWva,KAAKyyB,GAC3EtjB,GAAapS,UAErB,OAtEgBs1B,EAAS12B,QAAO,SAAU0L,GAAK,OAAOA,EAAEqqB,KAAKC,SAAWE,KAC9DrhC,SAAQ,SAAUmhC,GACxBS,EAAM5gC,MAAK,WACP,IAAIkhC,EAAYX,EACZY,EAAYhB,EAAQD,KAAKJ,SAC7BsB,GAA2Brb,EAAImb,EAAWZ,GAC1Cc,GAA2Brb,EAAIob,EAAWb,GAC1CC,EAAexa,EAAGO,UAAY6a,EAC9B,IAAIE,EAAOC,GAAcJ,EAAWC,GACpCE,EAAKh4B,IAAIrK,SAAQ,SAAUuiC,GACvBb,GAAYJ,EAAiBiB,EAAM,GAAIA,EAAM,GAAGzX,QAASyX,EAAM,GAAG1X,YAEtEwX,EAAKG,OAAOxiC,SAAQ,SAAUwiC,GAC1B,GAAIA,EAAOC,SACP,MAAM,IAAIroB,GAAWsoB,QAAQ,4CAG7B,IAAIC,EAAUrB,EAAgBzF,YAAY2G,EAAOp9B,MACjDo9B,EAAOn4B,IAAIrK,SAAQ,SAAU6rB,GAAO,OAAO+W,GAASD,EAAS9W,MAC7D2W,EAAOA,OAAOxiC,SAAQ,SAAU6rB,GAC5B8W,EAAQE,YAAYhX,EAAIzmB,MACxBw9B,GAASD,EAAS9W,MAEtB2W,EAAOM,IAAI9iC,SAAQ,SAAU+iC,GAAW,OAAOJ,EAAQE,YAAYE,SAG3E,IAAIC,EAAiB7B,EAAQD,KAAK8B,eAClC,GAAIA,GAAkB7B,EAAQD,KAAKC,QAAUE,EAAY,CACrDb,GAAyBzZ,EAAIua,GAC7Bla,EAAM+U,gBAAkB,GACxB6F,GAA2B,EAC3B,IAAIiB,EAAkBjtB,GAAamsB,GACnCE,EAAKS,IAAI9iC,SAAQ,SAAU4xB,GACvBqR,EAAgBrR,GAASsQ,EAAUtQ,MAEvCoP,GAAgBja,EAAI,CAACA,EAAGkT,YAAY7nB,YACpCuuB,GAAc5Z,EAAI,CAACA,EAAGkT,YAAY7nB,WAAYJ,GAAKixB,GAAkBA,GACrE7b,EAAMyC,OAASoZ,EACf,IAIIC,EAJAC,EAA0BjrB,GAAgB8qB,GAC1CG,GACAhe,KAGJ,IAAIie,EAAkBzkB,GAAagF,QAAO,WAEtC,IADAuf,EAAgBF,EAAe5b,KAEvB+b,EAAyB,CACzB,IAAIE,EAAcrjB,GAAwBhQ,KAAK,KAAM,MACrDkzB,EAAc1zB,KAAK6zB,EAAaA,OAI5C,OAAQH,GAA+C,mBAAvBA,EAAc1zB,KAC1CmP,GAAapS,QAAQ22B,GAAiBE,EAAgB5zB,MAAK,WAAc,OAAO0zB,SAG5FtB,EAAM5gC,MAAK,SAAU+oB,GACZiY,GAA6BxZ,IAsF9C,SAA6B2Z,EAAWpY,GACpC,IAAK,IAAIznB,EAAI,EAAGA,EAAIynB,EAAShD,GAAGuW,iBAAiBj7B,SAAUC,EAAG,CAC1D,IAAIghC,EAAYvZ,EAAShD,GAAGuW,iBAAiBh7B,GACjB,MAAxB6/B,EAAUmB,IACVvZ,EAAShD,GAAGwc,kBAAkBD,IAxF1BE,CADgBrC,EAAQD,KAAKJ,SACE/W,GAEnCiX,GAAgBja,EAAI,CAACA,EAAGkT,YAAY7nB,YACpCuuB,GAAc5Z,EAAI,CAACA,EAAGkT,YAAY7nB,WAAY2U,EAAGya,YAAaza,EAAGO,WACjEF,EAAMyC,OAAS9C,EAAGO,gBAOnB2a,IAAWzyB,MAAK,WAkE3B,IAA6B2yB,EAAWpY,EAAAA,EAjEEuX,EAkEtCtvB,GADyBmwB,EAjEDZ,GAkERvhC,SAAQ,SAAU2pB,GACzBI,EAAShD,GAAGuW,iBAAiBmG,SAAS9Z,IACvC+X,GAAY3X,EAAUJ,EAAWwY,EAAUxY,GAAWmB,QAASqX,EAAUxY,GAAWkB,eAnJpF6Y,CAAuB3c,EAAIsa,EAAYja,EAAOka,GAAiB/e,MAAMkf,MAkFjF,SAASa,GAAcJ,EAAWC,GAC9B,IAKIvQ,EALAyQ,EAAO,CACPS,IAAK,GACLz4B,IAAK,GACLm4B,OAAQ,IAGZ,IAAK5Q,KAASsQ,EACLC,EAAUvQ,IACXyQ,EAAKS,IAAI9hC,KAAK4wB,GAEtB,IAAKA,KAASuQ,EAAW,CACrB,IAAIwB,EAASzB,EAAUtQ,GAAQgS,EAASzB,EAAUvQ,GAClD,GAAK+R,EAGA,CACD,IAAInB,EAAS,CACTp9B,KAAMwsB,EACNiS,IAAKD,EACLnB,UAAU,EACVK,IAAK,GACLz4B,IAAK,GACLm4B,OAAQ,IAEZ,GACA,IAAMmB,EAAO7Y,QAAQ5V,SAAW,KAAU,IAAM0uB,EAAO9Y,QAAQ5V,SAAW,KACrEyuB,EAAO7Y,QAAQiC,OAAS6W,EAAO9Y,QAAQiC,OAAS1E,GAEjDma,EAAOC,UAAW,EAClBJ,EAAKG,OAAOxhC,KAAKwhC,OAEhB,CACD,IAAIsB,EAAaH,EAAOtY,UACpB0Y,EAAaH,EAAOvY,UACpB0X,OAAU,EACd,IAAKA,KAAWe,EACPC,EAAWhB,IACZP,EAAOM,IAAI9hC,KAAK+hC,GAExB,IAAKA,KAAWgB,EAAY,CACxB,IAAIC,EAASF,EAAWf,GAAUkB,EAASF,EAAWhB,GACjDiB,EAEIA,EAAOzkC,MAAQ0kC,EAAO1kC,KAC3BijC,EAAOA,OAAOxhC,KAAKijC,GAFnBzB,EAAOn4B,IAAIrJ,KAAKijC,IAIpBzB,EAAOM,IAAIzgC,OAAS,GAAKmgC,EAAOn4B,IAAIhI,OAAS,GAAKmgC,EAAOA,OAAOngC,OAAS,IACzEggC,EAAKG,OAAOxhC,KAAKwhC,SAlCzBH,EAAKh4B,IAAIrJ,KAAK,CAAC4wB,EAAOgS,IAuC9B,OAAOvB,EAEX,SAASX,GAAY3X,EAAUJ,EAAWmB,EAASD,GAC/C,IAAItqB,EAAQwpB,EAAShD,GAAGmd,kBAAkBva,EAAWmB,EAAQ5V,QACzD,CAAEA,QAAS4V,EAAQ5V,QAASqoB,cAAezS,EAAQiC,MACnD,CAAEwQ,cAAezS,EAAQiC,OAE7B,OADAlC,EAAQ7qB,SAAQ,SAAU6rB,GAAO,OAAO+W,GAASriC,EAAOsrB,MACjDtrB,EAiBX,SAASqiC,GAASriC,EAAOsrB,GACrBtrB,EAAM4jC,YAAYtY,EAAIzmB,KAAMymB,EAAI3W,QAAS,CAAEsb,OAAQ3E,EAAI2E,OAAQmN,WAAY9R,EAAID,QAEnF,SAASmW,GAAkBhb,EAAI2T,EAAOuC,GAClC,IAAIsE,EAAe,GAenB,OAdmBhgC,GAAMm5B,EAAM4C,iBAAkB,GACpCt9B,SAAQ,SAAUsjC,GAK3B,IAJA,IAAI/iC,EAAQ08B,EAASpB,YAAYyH,GAC7BpuB,EAAU3U,EAAM2U,QAChB4V,EAAUwR,GAAgBC,GAAgBrnB,GAAUA,GAAW,IAAI,GAAO,IAAS3U,EAAMg9B,cAAeroB,GAA8B,iBAAZA,GAAsB,GAChJ2V,EAAU,GACLpY,EAAI,EAAGA,EAAIlS,EAAMm9B,WAAWr7B,SAAUoQ,EAAG,CAC9C,IAAI2xB,EAAW7jC,EAAM0P,MAAM1P,EAAMm9B,WAAWjrB,IAC5CyC,EAAUkvB,EAASlvB,QACnB,IAAIjF,EAAQqsB,GAAgB8H,EAASh/B,KAAM8P,IAAWkvB,EAAS5T,SAAU4T,EAASzG,YAAY,EAAOzoB,GAA8B,iBAAZA,GAAsB,GAC7I2V,EAAQ7pB,KAAKiP,GAEjBsxB,EAAa+B,GAAa9G,GAAkB8G,EAAWxY,EAASD,MAE7D0W,EAaX,SAASa,GAA2Brb,EAAI8C,EAAQE,GAE5C,IADA,IAAI9C,EAAa8C,EAAShD,GAAGuW,iBACpBh7B,EAAI,EAAGA,EAAI2kB,EAAW5kB,SAAUC,EAAG,CACxC,IAAIghC,EAAYrc,EAAW3kB,GACvB/B,EAAQwpB,EAAS8R,YAAYyH,GACjCvc,EAAGsd,WAAa,WAAY9jC,EAC5B,IAAK,IAAIkS,EAAI,EAAGA,EAAIlS,EAAMm9B,WAAWr7B,SAAUoQ,EAAG,CAC9C,IAAI2gB,EAAY7yB,EAAMm9B,WAAWjrB,GAC7ByC,EAAU3U,EAAM0P,MAAMmjB,GAAWle,QACjCovB,EAA+B,iBAAZpvB,EAAuBA,EAAU,IAAM3T,GAAM2T,GAAS3J,KAAK,KAAO,IACzF,GAAIse,EAAOyZ,GAAY,CACnB,IAAIiB,EAAY1a,EAAOyZ,GAAWjY,UAAUiZ,GACxCC,IACAA,EAAUn/B,KAAOguB,SACVvJ,EAAOyZ,GAAWjY,UAAUiZ,GACnCza,EAAOyZ,GAAWjY,UAAU+H,GAAamR,KAKhC,oBAAdjc,WAA6B,SAASjQ,KAAKiQ,UAAUC,aAC3D,oBAAoBlQ,KAAKiQ,UAAUC,YACpC3V,GAAQ4xB,mBAAqB5xB,cAAmBA,GAAQ4xB,mBACxD,GAAGvuB,OAAOqS,UAAUC,UAAU2N,MAAM,kBAAkB,GAAK,MAC3DnP,EAAGsd,YAAa,GAYxB,IA2DII,GA3DAC,GAAyB,WACzB,SAASA,KA0CT,OAxCAA,EAAQtyB,UAAUuyB,iBAAmB,SAAUC,EAAQC,GACnD7yB,GAAK4yB,GAAQ5kC,SAAQ,SAAU2pB,GAC3B,GAA0B,OAAtBib,EAAOjb,GAAqB,CAC5B,IAAIkB,EAA2B+Z,EAAOjb,GAdzB1e,MAAM,KAAKuF,KAAI,SAAUP,EAAO60B,GAErD,IAAI1/B,GADJ6K,EAAQA,EAAM80B,QACGC,QAAQ,eAAgB,IACrC9vB,EAAU,MAAMmD,KAAKjT,GAAQA,EAAK8wB,MAAM,cAAc,GAAGjrB,MAAM,KAAO7F,EAC1E,OAAOk3B,GAAgBl3B,EAAM8P,GAAW,KAAM,KAAKmD,KAAKpI,GAAQ,KAAKoI,KAAKpI,GAAQ,OAAOoI,KAAKpI,GAAQ0C,GAAQuC,GAAuB,IAAb4vB,MAW5Gha,EAAUD,EAAQ4P,QACtB,GAAI3P,EAAQc,MACR,MAAM,IAAIxR,GAAW+V,OAAO,sCAChCtF,EAAQ7qB,SAAQ,SAAU6rB,GACtB,GAAIA,EAAIkB,KACJ,MAAM,IAAI3S,GAAW+V,OAAO,wDAChC,IAAKtE,EAAI3W,QACL,MAAM,IAAIkF,GAAW+V,OAAO,2DAEpC0U,EAAUlb,GAAa6S,GAAkB7S,EAAWmB,EAASD,QAIzE6Z,EAAQtyB,UAAUwyB,OAAS,SAAUA,GACjC,IAAI7d,EAAKpe,KAAKoe,GACdpe,KAAKu4B,KAAK+D,aAAet8B,KAAKu4B,KAAK+D,aAC/BlyB,GAAOpK,KAAKu4B,KAAK+D,aAAcL,GAC/BA,EACJ,IAAI/C,EAAW9a,EAAG+a,UACdoD,EAAa,GACbpE,EAAW,GAUf,OATAe,EAAS7hC,SAAQ,SAAUmhC,GACvBpuB,GAAOmyB,EAAY/D,EAAQD,KAAK+D,cAChCnE,EAAYK,EAAQD,KAAKJ,SAAW,GACpCK,EAAQwD,iBAAiBO,EAAYpE,MAEzC/Z,EAAGO,UAAYwZ,EACfE,GAAgBja,EAAI,CAACA,EAAGoe,WAAYpe,EAAIA,EAAGkT,YAAY7nB,YACvDuuB,GAAc5Z,EAAI,CAACA,EAAGoe,WAAYpe,EAAIA,EAAGkT,YAAY7nB,UAAWzJ,KAAKu4B,KAAK7D,QAASrrB,GAAK8uB,GAAWA,GACnG/Z,EAAGya,YAAcxvB,GAAK8uB,GACfn4B,MAEX+7B,EAAQtyB,UAAUgzB,QAAU,SAAUC,GAElC,OADA18B,KAAKu4B,KAAK8B,eAAiBqC,EACpB18B,MAEJ+7B,KAkDX,SAASY,GAAI5lC,GACT,OAAO8jB,IAAS,WAEZ,OADAhF,GAAI2I,YAAa,EACVznB,OAIf,SAAS6lC,GAAUxe,GACf,IAAIye,EAAQze,EAAG3H,OACXoM,EAAYzE,EAAGwE,MAAMC,UACzB,GAAIga,EAAMhe,eAAiBT,EAAG2T,MAC1B,OAAO8K,EAAM5d,eAAepY,MAAK,WAAc,OAAOg2B,EAAM7K,YACxDtV,GAAUmgB,EAAM7K,aAChB5T,KACR5O,KAAUqtB,EAAMC,cAAcxmB,aAAetG,MAC7C6sB,EAAMhe,eAAgB,EACtBge,EAAM7K,YAAc,KACpB6K,EAAMte,cAAe,EACrB,IAAIwe,EAAiBF,EAAMG,eAC3BC,EAAqB,KACrB,OAAOjnB,GAAa2E,KAAK,CAACkiB,EAAMC,cAAe,IAAI9mB,IAAa,SAAUpS,EAAS0T,GAC3E,IAAKuL,EACD,MAAM,IAAIpR,GAAWwgB,WAAW,6KAEpC,IAAIiL,EAAS9e,EAAG3hB,KACZw3B,EAAM4I,EAAMM,WACZta,EAAU7D,KAAKke,GACfra,EAAU7D,KAAKke,EAAQ1jC,KAAK4jC,MAAiB,GAAXhf,EAAGif,QACzC,IAAKpJ,EACD,MAAM,IAAIxiB,GAAWwgB,WAAW,+BACpCgC,EAAIjhB,QAAUme,GAAmB7Z,GACjC2c,EAAIqJ,UAAY9jB,GAAK4E,EAAGmf,gBACxBtJ,EAAIuJ,gBAAkBhkB,IAAK,SAAU7Z,GAEjC,GADAs9B,EAAqBhJ,EAAI9B,YACrB0K,EAAMM,aAAe/e,EAAGU,SAAS2e,aAAc,CAC/CxJ,EAAIjhB,QAAUoe,GACd6L,EAAmB3J,QACnBW,EAAIh6B,OAAOyjC,QACX,IAAIC,EAAS9a,EAAU+a,eAAeV,GACtCS,EAAO5qB,UAAY4qB,EAAO3qB,QAAUwG,IAAK,WACrClC,EAAO,IAAI7F,GAAWosB,eAAe,YAAcX,EAAS,yBAG/D,CACDD,EAAmBjqB,QAAUme,GAAmB7Z,GAChD,IAAIwmB,EAASn+B,EAAE+4B,WAAal/B,KAAKukC,IAAI,EAAG,IAAM,EAAIp+B,EAAE+4B,WACpDta,EAAG2T,MAAQkC,EAAIh6B,OACfw+B,GAAara,EAAI0f,EAAS,GAAIb,EAAoB3lB,MAEvDA,GACH2c,EAAIlhB,UAAYyG,IAAK,WACjByjB,EAAqB,KACrB,IAAIlL,EAAQ3T,EAAG2T,MAAQkC,EAAIh6B,OACvB06B,EAAmB/7B,GAAMm5B,EAAM4C,kBACnC,GAAIA,EAAiBj7B,OAAS,EAC1B,IACI,IAAI46B,EAAWvC,EAAMI,YAAYpB,GAAoB4D,GAAmB,YACpEkI,EAAMM,WArMlC,SAA0B/e,EAAI2T,EAAOuC,GACjClW,EAAGif,MAAQtL,EAAMyG,QAAU,GAC3B,IAAII,EAAexa,EAAGO,UAAYya,GAAkBhb,EAAI2T,EAAOuC,GAC/DlW,EAAGya,YAAcjgC,GAAMm5B,EAAM4C,iBAAkB,GAC/CqD,GAAc5Z,EAAI,CAACA,EAAGoe,YAAanzB,GAAKuvB,GAAeA,GAkM/BoF,CAAiB5f,EAAI2T,EAAOuC,IAE5BmF,GAA2Brb,EAAIA,EAAGO,UAAW2V,GAlMzE,SAA+BlW,EAAIkW,GAC/B,IACIoF,EAAOC,GADWP,GAAkBhb,EAAIA,EAAG2T,MAAOuC,GACZlW,EAAGO,WAC7C,QAAS+a,EAAKh4B,IAAIhI,QAAUggC,EAAKG,OAAOvhB,MAAK,SAAU2lB,GAAM,OAAOA,EAAGv8B,IAAIhI,QAAUukC,EAAGpE,OAAOngC,WAgMlEwkC,CAAsB9f,EAAIkW,IAC3BrW,QAAQC,KAAK,uHAGrB2Z,GAAyBzZ,EAAIkW,GAEjC,MAAO30B,IAEX8f,GAAYpnB,KAAK+lB,GACjB2T,EAAMoM,gBAAkB3kB,IAAK,SAAU4Y,GACnCyK,EAAMuB,SAAU,EAChBhgB,EAAGmU,GAAG,iBAAiB3Q,KAAKwQ,MAEhC0J,GAAmBp6B,IAAIw7B,GACvBt5B,MACD0T,QACFzQ,MAAK,WAEV,OADAg2B,EAAMwB,kBAAoB,GACnBroB,GAAapS,QAAQ+4B,GAAIve,EAAGmU,GAAG9pB,MAAMmZ,OAAO/a,MAAK,SAASy3B,IAC7D,GAAIzB,EAAMwB,kBAAkB3kC,OAAS,EAAG,CACpC,IAAI6kC,EAAa1B,EAAMwB,kBAAkBlyB,OAAOmH,GAAiBjB,IAEjE,OADAwqB,EAAMwB,kBAAoB,GACnBroB,GAAapS,QAAQ+4B,GAAI4B,IAAa13B,KAAKy3B,UAG3DxkB,SAAQ,WACP+iB,EAAMwB,kBAAoB,QAC3Bx3B,MAAK,WAEJ,OADAg2B,EAAMhe,eAAgB,EACfT,KACRxE,OAAM,SAAUC,GACf,IACIojB,GAAsBA,EAAmB3J,QAE7C,MAAO3zB,IAIP,OAHAk9B,EAAMhe,eAAgB,EACtBT,EAAGsf,QACHb,EAAM7K,YAAcnY,EACb6C,GAAUmgB,EAAM7K,gBACxBlY,SAAQ,WACP+iB,EAAMte,cAAe,EACrBwe,OAIR,SAASyB,GAAcxvB,GACnB,IAAIyvB,EAAW,SAAUxkC,GAAU,OAAO+U,EAASzM,KAAKtI,IAA0EykC,EAAYx9B,EAAKu9B,GAAWE,EAAUz9B,GAA1F,SAAU8nB,GAAS,OAAOha,EAAS4vB,MAAM5V,MACvH,SAAS9nB,EAAK29B,GACV,OAAO,SAAUpyB,GACb,IAAIlK,EAAOs8B,EAAQpyB,GAAMtS,EAAQoI,EAAKpI,MACtC,OAAOoI,EAAK+M,KAAOnV,EACbA,GAA+B,mBAAfA,EAAM0M,KAEpB1M,EAAM0M,KAAK63B,EAAWC,GADtB30B,GAAQ7P,GAASwJ,QAAQ4W,IAAIpgB,GAAO0M,KAAK63B,EAAWC,GAAWD,EAAUvkC,IAIzF,OAAO+G,EAAKu9B,EAALv9B,GAGX,SAAS49B,GAAuBzgB,EAAM0gB,EAAaC,GAC/C,IAAIrlC,EAAI6P,UAAU9P,OAClB,GAAIC,EAAI,EACJ,MAAM,IAAI8X,GAAWiT,gBAAgB,qBAEzC,IADA,IAAIlZ,EAAO,IAAIjL,MAAM5G,EAAI,KAChBA,GACL6R,EAAK7R,EAAI,GAAK6P,UAAU7P,GAC5BqlC,EAAYxzB,EAAKpH,MACjB,IAAIswB,EAASnnB,GAAQ/B,GACrB,MAAO,CAAC6S,EAAMqW,EAAQsK,GAE1B,SAASC,GAAsB7gB,EAAIC,EAAMC,EAAY4gB,EAAmBF,GACpE,OAAOhpB,GAAapS,UAAUiD,MAAK,WAC/B,IAAIwa,EAAYxL,GAAIwL,WAAaxL,GAC7B4I,EAAQL,EAAGM,mBAAmBL,EAAMC,EAAYF,EAAGO,UAAWugB,GAC9DjkB,EAAY,CACZwD,MAAOA,EACP4C,UAAWA,GAEX6d,EACAzgB,EAAM2C,SAAW8d,EAAkB9d,SAGnC3C,EAAMvnB,SAEV,IAIIioC,EAJAC,EAAmB7vB,GAAgByvB,GACnCI,GACA5iB,KAGJ,IAAIie,EAAkBzkB,GAAagF,QAAO,WAEtC,GADAmkB,EAAcH,EAAU37B,KAAKob,EAAOA,GAEhC,GAAI2gB,EAAkB,CAClB,IAAI1E,EAAcrjB,GAAwBhQ,KAAK,KAAM,MACrD83B,EAAYt4B,KAAK6zB,EAAaA,OAEG,mBAArByE,EAAY58B,MAAoD,mBAAtB48B,EAAYP,QAClEO,EAAcX,GAAcW,MAGrClkB,GACH,OAAQkkB,GAA2C,mBAArBA,EAAYt4B,KACtCmP,GAAapS,QAAQu7B,GAAat4B,MAAK,SAAUpQ,GAAK,OAAOgoB,EAAM7d,OAC/DnK,EACEimB,GAAU,IAAIjL,GAAW4tB,gBAAgB,kEAC7C5E,EAAgB5zB,MAAK,WAAc,OAAOs4B,MAAiBt4B,MAAK,SAAUpQ,GAG5E,OAFIyoC,GACAzgB,EAAMgU,WACHhU,EAAMG,YAAY/X,MAAK,WAAc,OAAOpQ,QACpDmjB,OAAM,SAAUja,GAEf,OADA8e,EAAM4T,QAAQ1yB,GACP+c,GAAU/c,SAK7B,SAAS2/B,GAAI7nC,EAAG0C,EAAOmpB,GAEnB,IADA,IAAIrpB,EAAS+P,GAAQvS,GAAKA,EAAEmB,QAAU,CAACnB,GAC9BkC,EAAI,EAAGA,EAAI2pB,IAAS3pB,EACzBM,EAAO5B,KAAK8B,GAChB,OAAOF,EAuGX,IAAIslC,GAAyB,CACzBxvB,MAAO,SACPtT,KAAM,yBACN+iC,MAAO,EACPtoC,OAzGJ,SAAsCygC,GAClC,OAAOruB,GAASA,GAAS,GAAIquB,GAAO,CAAE1O,MAAO,SAAUjI,GAC/C,IAAIiI,EAAQ0O,EAAK1O,MAAMjI,GACnBE,EAAS+H,EAAM/H,OACfue,EAAc,GACdC,EAAoB,GACxB,SAASC,EAAkBpzB,EAASqzB,EAASC,GACzC,IAAIC,EAAe1L,GAAgB7nB,GAC/BwzB,EAAaN,EAAYK,GAAgBL,EAAYK,IAAiB,GACtEE,EAAuB,MAAXzzB,EAAkB,EAAuB,iBAAZA,EAAuB,EAAIA,EAAQ7S,OAC5EumC,EAAYL,EAAU,EACtBM,EAAe52B,GAASA,GAAS,GAAIu2B,GAAgB,CAAEI,UAAWA,EAAWnL,cAAemL,GAAaJ,EAAc/K,aAAc8K,QAASA,EAC9II,UAAWA,EAAWtU,WAAYoI,GAAgBvnB,GAAUsb,QAASoY,GAAaJ,EAAchY,UACpGkY,EAAU1nC,KAAK6nC,GACVA,EAAapL,cACd4K,EAAkBrnC,KAAK6nC,GAEvBF,EAAY,IAIZL,EAHmC,IAAdK,EACjBzzB,EAAQ,GACRA,EAAQ3T,MAAM,EAAGonC,EAAY,GACCJ,EAAU,EAAGC,GAGnD,OADAE,EAAU/V,MAAK,SAAUvyB,EAAGC,GAAK,OAAOD,EAAEmoC,QAAUloC,EAAEkoC,WAC/CM,EAEX,IAAI5Y,EAAaqY,EAAkBze,EAAOoG,WAAW/a,QAAS,EAAG2U,EAAOoG,YACxEmY,EAAY,OAAS,CAACnY,GACtB,IAAK,IAAIyE,EAAK,EAAGtY,EAAKyN,EAAOgB,QAAS6J,EAAKtY,EAAG/Z,OAAQqyB,IAAM,CACxD,IAAIzkB,EAAQmM,EAAGsY,GACf4T,EAAkBr4B,EAAMiF,QAAS,EAAGjF,GAiBxC,SAAS64B,EAAiBlM,GACtB,IAZoBpP,EAAO+a,EAYvBt4B,EAAQ2sB,EAAInM,MAAMxgB,MACtB,OAAOA,EAAM24B,UAAY32B,GAASA,GAAS,GAAI2qB,GAAM,CAAEnM,MAAO,CACtDxgB,MAAOA,EACPud,OAfYA,EAeUoP,EAAInM,MAAMjD,MAfb+a,EAeoBt4B,EAAMs4B,QAd9C,CACHngC,KAAqB,IAAfolB,EAAMplB,KACR,EACAolB,EAAMplB,KACV8gB,MAAO+e,GAAIza,EAAMtE,MAAOsE,EAAMrE,UAAYmX,EAAKN,QAAUM,EAAKP,QAASwI,GACvEpf,WAAW,EACXC,MAAO6e,GAAIza,EAAMpE,MAAOoE,EAAMnE,UAAYiX,EAAKP,QAAUO,EAAKN,QAASuI,GACvElf,WAAW,OAQJuT,EA8Cf,OA5Ca3qB,GAASA,GAAS,GAAI2f,GAAQ,CAAE/H,OAAQ5X,GAASA,GAAS,GAAI4X,GAAS,CAAEoG,WAAYA,EAAYpF,QAASwd,EAAmBnY,kBAtB1I,SAAuBhb,GACnB,IAAItS,EAASwlC,EAAYrL,GAAgB7nB,IACzC,OAAOtS,GAAUA,EAAO,MAoBmJqpB,MAAO,SAAU2Q,GACxL,OAAOhL,EAAM3F,MAAM6c,EAAiBlM,KAExCnM,MAAO,SAAUmM,GACb,OAAOhL,EAAMnB,MAAMqY,EAAiBlM,KAExCxM,WAAY,SAAUwM,GAClB,IAAIxgB,EAAKwgB,EAAInM,MAAMxgB,MAAOs4B,EAAUnsB,EAAGmsB,QAASK,EAAYxsB,EAAGwsB,UAAWD,EAAYvsB,EAAGusB,UACzF,IAAKC,EACD,OAAOhX,EAAMxB,WAAWwM,GAgC5B,OAAOhL,EAAMxB,WAAW0Y,EAAiBlM,IACpCptB,MAAK,SAAUshB,GAAU,OAAOA,GAhCrC,SAA6BA,GA6BzB,OArBoBlxB,OAAOC,OAAOixB,EAAQ,CACtCS,SAAU,CAAEzuB,MARhB,SAAmBgE,GACR,MAAPA,EACIgqB,EAAOS,SAAS0W,GAAInhC,EAAK81B,EAAInQ,QAAU6T,EAAKN,QAAUM,EAAKP,QAASwI,IACpE3L,EAAIpM,OACAM,EAAOS,SAAS0W,GAAInX,EAAOhqB,IAAK81B,EAAInQ,QAAU6T,EAAKP,QAAUO,EAAKN,QAASuI,IAC3EzX,EAAOS,aAIf8N,mBAAoB,CAChBv8B,MAAO,SAAUgE,EAAKmpB,GAClBa,EAAOuO,mBAAmB4I,GAAInhC,EAAKw5B,EAAKN,QAASuI,GAAUtY,KAGnEnpB,IAAK,CACD4M,IAAK,WACD,IAAI5M,EAAMgqB,EAAOhqB,IACjB,OAAqB,IAAd6hC,EACH7hC,EAAI,GACJA,EAAIvF,MAAM,EAAGonC,KAGzB7lC,MAAO,CACH4Q,IAAK,WACD,OAAOod,EAAOhuB,UAOiBimC,CAAoBjY,cAYnFkY,GAAkB,CAClBtwB,MAAO,SACPtT,KAAM,kBACN+iC,MAAO,EACPtoC,OAAQ,SAAUopC,GAAY,OAAQh3B,GAASA,GAAS,GAAIg3B,GAAW,CAAErX,MAAO,SAAUjI,GAClF,IAAIuf,EAAYD,EAASrX,MAAMjI,GAC3BsG,EAAaiZ,EAAUrf,OAAOoG,WA8GlC,OA7GsBhe,GAASA,GAAS,GAAIi3B,GAAY,CAAEjc,OAAQ,SAAU2P,GACpE,IAAIuM,EAAU3qB,GAAI4I,MACdhL,EAAK+sB,EAAQvX,MAAMjI,GAAWU,KAAM+e,EAAWhtB,EAAGgtB,SAAUC,EAAWjtB,EAAGitB,SAAUC,EAAWltB,EAAGktB,SACtG,OAAQ1M,EAAIx0B,MACR,IAAK,MACD,GAAIihC,EAAS9e,OAASvP,GAClB,MACJ,OAAOmuB,EAAQroB,SAAS,aAAa,WAAc,OAAOyoB,EAAe3M,MAAS,GACtF,IAAK,MACD,GAAIyM,EAAS9e,OAASvP,IAAOsuB,EAAS/e,OAASvP,GAC3C,MACJ,OAAOmuB,EAAQroB,SAAS,aAAa,WAAc,OAAOyoB,EAAe3M,MAAS,GACtF,IAAK,SACD,GAAIwM,EAAS7e,OAASvP,GAClB,MACJ,OAAOmuB,EAAQroB,SAAS,aAAa,WAAc,OAAOyoB,EAAe3M,MAAS,GACtF,IAAK,cACD,GAAIwM,EAAS7e,OAASvP,GAClB,MACJ,OAAOmuB,EAAQroB,SAAS,aAAa,WAAc,OAsE3D,SAAqB8b,GACjB,OAAO4M,EAAgB5M,EAAIxV,MAAOwV,EAAIpP,MAAO,KAvEiBic,CAAY7M,MAAS,GAEvF,OAAOsM,EAAUjc,OAAO2P,GACxB,SAAS2M,EAAe3M,GACpB,IAAIuM,EAAU3qB,GAAI4I,MACdsG,EAAUkP,EAAI5qB,MAAQ2qB,GAAiB1M,EAAY2M,GACvD,IAAKlP,EACD,MAAM,IAAI9hB,MAAM,gBAOpB,MAJiB,YAFjBgxB,EAAmB,QAAbA,EAAIx0B,MAA+B,QAAbw0B,EAAIx0B,KAAiB6J,GAASA,GAAS,GAAI2qB,GAAM,CAAE5qB,KAAM0b,EAASK,aAAa,IAC1G9b,GAAS,GAAI2qB,IACNx0B,OACJw0B,EAAIzZ,OAAS5Q,GAAeqqB,EAAIzZ,SAChCyZ,EAAI5qB,OACJ4qB,EAAI5qB,KAAOO,GAAeqqB,EAAI5qB,OAhlC1D,SAA2B4f,EAAOgL,EAAK8M,GACnC,MAAoB,QAAb9M,EAAIx0B,KAAiBkE,QAAQC,QAAQ,IAAIrD,MAAM0zB,EAAIzZ,OAAO9gB,SAC7DuvB,EAAMjE,QAAQ,CAAEvG,MAAOwV,EAAIxV,MAAOpV,KAAM03B,IA+kCjBC,CAAkBT,EAAWtM,EAAKlP,GAASle,MAAK,SAAUo6B,GAC7D,IAAIC,EAAWnc,EAAQld,KAAI,SAAU1J,EAAKxE,GACtC,IAAIwnC,EAAgBF,EAAetnC,GAC/BnB,EAAM,CAAEwa,QAAS,KAAMD,UAAW,MACtC,GAAiB,WAAbkhB,EAAIx0B,KACJghC,EAAS7e,KAAKve,KAAK7K,EAAK2F,EAAKgjC,EAAeX,QAE3C,GAAiB,QAAbvM,EAAIx0B,WAAoCpG,IAAlB8nC,EAA6B,CACxD,IAAIC,EAAsBV,EAAS9e,KAAKve,KAAK7K,EAAK2F,EAAK81B,EAAIzZ,OAAO7gB,GAAI6mC,GAC3D,MAAPriC,GAAsC,MAAvBijC,IACfjjC,EAAMijC,EACNnN,EAAI5qB,KAAK1P,GAAKwE,EACTmpB,EAAWmE,UACZ5e,GAAaonB,EAAIzZ,OAAO7gB,GAAI2tB,EAAW/a,QAASpO,QAIvD,CACD,IAAIkjC,EAAa7yB,GAAc2yB,EAAelN,EAAIzZ,OAAO7gB,IACrD2nC,EAAsBX,EAAS/e,KAAKve,KAAK7K,EAAK6oC,EAAYljC,EAAKgjC,EAAeX,GAClF,GAAIc,EAAqB,CACrB,IAAIC,EAAmBtN,EAAIzZ,OAAO7gB,GAClC1C,OAAOoS,KAAKi4B,GAAqBjqC,SAAQ,SAAUkV,GAC3C9B,GAAO82B,EAAkBh1B,GACzBg1B,EAAiBh1B,GAAW+0B,EAAoB/0B,GAGhDM,GAAa00B,EAAkBh1B,EAAS+0B,EAAoB/0B,QAK5E,OAAO/T,KAEX,OAAO+nC,EAAUjc,OAAO2P,GAAKptB,MAAK,SAAU4M,GAExC,IADA,IAAIxC,EAAWwC,EAAGxC,SAAUqK,EAAU7H,EAAG6H,QAASiJ,EAAc9Q,EAAG8Q,YAAaC,EAAa/Q,EAAG+Q,WACvF7qB,EAAI,EAAGA,EAAIorB,EAAQrrB,SAAUC,EAAG,CACrC,IAAIwoB,EAAU7G,EAAUA,EAAQ3hB,GAAKorB,EAAQprB,GACzCnB,EAAM0oC,EAASvnC,GACJ,MAAXwoB,EACA3pB,EAAIwa,SAAWxa,EAAIwa,QAAQ/B,EAAStX,IAGpCnB,EAAIua,WAAava,EAAIua,UAAuB,QAAbkhB,EAAIx0B,MAAkBwhC,EAAetnC,GAChEs6B,EAAIzZ,OAAO7gB,GACXwoB,GAIZ,MAAO,CAAElR,SAAUA,EAAUqK,QAASA,EAASiJ,YAAaA,EAAaC,WAAYA,MACtF5K,OAAM,SAAUoP,GAEf,OADAkY,EAAS7pC,SAAQ,SAAUmB,GAAO,OAAOA,EAAIwa,SAAWxa,EAAIwa,QAAQgW,MAC7DrlB,QAAQ2T,OAAO0R,SAOlC,SAAS6X,EAAgBpiB,EAAOoG,EAAO9L,GACnC,OAAOwnB,EAAUzY,MAAM,CAAErJ,MAAOA,EAAOjE,QAAQ,EAAOsN,MAAO,CAAExgB,MAAOggB,EAAYzC,MAAOA,GAAS9L,MAAOA,IACpGlS,MAAK,SAAU4M,GAChB,IAAIxZ,EAASwZ,EAAGxZ,OAChB,OAAO2mC,EAAe,CAAEnhC,KAAM,SAAU4J,KAAMpP,EAAQwkB,MAAOA,IAAS5X,MAAK,SAAUiM,GACjF,OAAIA,EAAIyR,YAAc,EACX5gB,QAAQ2T,OAAOxE,EAAI7B,SAAS,IACnChX,EAAOP,OAASqf,EACT,CAAE9H,SAAU,GAAIsT,YAAa,EAAGC,gBAAYnrB,GAG5CwnC,EAAgBpiB,EAAOnV,GAASA,GAAS,GAAIub,GAAQ,CAAEtE,MAAOtmB,EAAOA,EAAOP,OAAS,GAAI8mB,WAAW,IAASzH,kBAUpJ4S,GAAuB,WACvB,SAASA,EAAMlvB,EAAMa,GACjB,IAAI4Z,EAAQlX,KACZA,KAAK83B,aAAe,GACpB93B,KAAKq9B,MAAQ,EACb,IAAImE,EAAO7V,EAAM8V,aACjBzhC,KAAK8e,SAAWxhB,EAAUgM,GAAS,CAC/Bo4B,OAAQ/V,EAAM+V,OAAQ3iB,UAAU,EAChC8D,UAAW2e,EAAK3e,UAAW2U,YAAagK,EAAKhK,aAAel6B,GAChE0C,KAAK4iB,MAAQ,CACTC,UAAWvlB,EAAQulB,UACnB2U,YAAal6B,EAAQk6B,aAEzB,IAAIkK,EAASpkC,EAAQokC,OACrB1hC,KAAK2e,UAAY,GACjB3e,KAAKm5B,UAAY,GACjBn5B,KAAK64B,YAAc,GACnB74B,KAAKw8B,WAAa,GAClBx8B,KAAK+xB,MAAQ,KACb,IA31D6B3T,EA21DzBye,EAAQ,CACR7K,YAAa,KACbnT,eAAe,EACfwf,kBAAmB,KACnB9f,cAAc,EACdye,eAAgB3qB,GAChB4M,eAAgB,KAChB0iB,WAAYtvB,GACZyqB,cAAe,KACfK,YAAY,GAEhBN,EAAM5d,eAAiB,IAAIjJ,IAAa,SAAUpS,GAC9Ci5B,EAAMG,eAAiBp5B,KAE3Bi5B,EAAMC,cAAgB,IAAI9mB,IAAa,SAAU+H,EAAGzG,GAChDulB,EAAM8E,WAAarqB,KAEvBtX,KAAKyW,OAASomB,EACd78B,KAAKvD,KAAOA,EACZuD,KAAKuyB,GAAK1M,GAAO7lB,KAAM,WAAY,UAAW,gBAAiB,CAAEyI,MAAO,CAAC6K,GAAiBjB,MAC1FrS,KAAKuyB,GAAG9pB,MAAM9Q,UAAY8T,GAASzL,KAAKuyB,GAAG9pB,MAAM9Q,WAAW,SAAUA,GAClE,OAAO,SAAUquB,EAAY4b,GACzBjW,EAAMgR,KAAI,WACN,IAAIE,EAAQ3lB,EAAMT,OAClB,GAAIomB,EAAMte,aACDse,EAAM7K,aACPhc,GAAapS,UAAUiD,KAAKmf,GAC5B4b,GACAjqC,EAAUquB,QAEb,GAAI6W,EAAMwB,kBACXxB,EAAMwB,kBAAkBhmC,KAAK2tB,GACzB4b,GACAjqC,EAAUquB,OAEb,CACDruB,EAAUquB,GACV,IAAI6b,EAAO3qB,EACN0qB,GACDjqC,GAAU,SAASI,IACf8pC,EAAKtP,GAAG9pB,MAAM1Q,YAAYiuB,GAC1B6b,EAAKtP,GAAG9pB,MAAM1Q,YAAYA,cAMlDiI,KAAK4jB,YA14DwBxF,EA04DiBpe,KAz4D3CumB,GAAqB3C,GAAWna,WAAW,SAAuBqjB,EAAagV,GAClF9hC,KAAKoe,GAAKA,EACV,IAAI2jB,EAAWzhB,GAAU0I,EAAQ,KACjC,GAAI8Y,EACA,IACIC,EAAWD,IAEf,MAAO7pB,GACH+Q,EAAQ/Q,EAEhB,IAAI+pB,EAAWlV,EAAY/D,KACvBE,EAAQ+Y,EAAS/Y,MACjBgZ,EAAchZ,EAAMvH,KAAKC,QAAQC,KACrC5hB,KAAK+oB,KAAO,CACRE,MAAOA,EACP3hB,MAAO06B,EAAS16B,MAChB+f,WAAa2a,EAAS16B,OAAU2hB,EAAM/H,OAAOiB,QAAQ5V,SAAWy1B,EAAS16B,QAAU2hB,EAAM/H,OAAOiB,QAAQ1lB,KACxGooB,MAAOkd,EACPpa,UAAU,EACVC,IAAK,OACLC,OAAQ,GACRnB,UAAW,KACXlkB,OAAQ,KACRqkB,aAAc,KACdD,WAAW,EACX4D,QAAS,KACThH,OAAQ,EACRzK,MAAOmB,EAAAA,EACP8O,MAAOA,EACPrC,GAAIqb,EAASrb,GACb8B,YAAawZ,IAAgB3vB,GAAS2vB,EAAc,UA42DxDjiC,KAAK4gB,MA11Eb,SAAgCxC,GAC5B,OAAOmI,GAAqB3F,GAAMnX,WAAW,SAAkBhN,EAAMg3B,EAAahV,GAC9Eze,KAAKoe,GAAKA,EACVpe,KAAK+gB,IAAMtC,EACXze,KAAKvD,KAAOA,EACZuD,KAAKkhB,OAASuS,EACdzzB,KAAK0hB,KAAOtD,EAAGoe,WAAW//B,GAAQ2hB,EAAGoe,WAAW//B,GAAMilB,KAAOmE,GAAO,KAAM,CACtE6a,SAAY,CAAC7tB,GAAmBR,IAChCsP,QAAW,CAACpP,GAAmBD,IAC/BquB,SAAY,CAACxtB,GAAmBd,IAChCouB,SAAY,CAACvtB,GAAmBb,SAg1EvB6vB,CAAuBliC,MACpCA,KAAKsxB,YA/zCb,SAAsClT,GAClC,OAAOmI,GAAqB+K,GAAY7nB,WAAW,SAAwB4U,EAAMC,EAAY6Z,EAAUjc,GACnG,IAAIhF,EAAQlX,KACZA,KAAKoe,GAAKA,EACVpe,KAAKqe,KAAOA,EACZre,KAAKse,WAAaA,EAClBte,KAAKkhB,OAASiX,EACdn4B,KAAKohB,SAAW,KAChBphB,KAAKuyB,GAAK1M,GAAO7lB,KAAM,WAAY,QAAS,SAC5CA,KAAKkc,OAASA,GAAU,KACxBlc,KAAKY,QAAS,EACdZ,KAAKwxB,UAAY,EACjBxxB,KAAK2xB,cAAgB,GACrB3xB,KAAKyyB,SAAW,KAChBzyB,KAAKqyB,QAAU,KACfryB,KAAKgzB,YAAc,KACnBhzB,KAAKizB,cAAgB,KACrBjzB,KAAKozB,WAAa,EAClBpzB,KAAK4e,YAAc,IAAI5I,IAAa,SAAUpS,EAAS0T,GACnDJ,EAAMub,SAAW7uB,EACjBsT,EAAMmb,QAAU/a,KAEpBtX,KAAK4e,YAAY/X,MAAK,WAClBqQ,EAAMtW,QAAS,EACfsW,EAAMqb,GAAG4P,SAASvgB,UACnB,SAAUjiB,GACT,IAAIyiC,EAAYlrB,EAAMtW,OAMtB,OALAsW,EAAMtW,QAAS,EACfsW,EAAMqb,GAAGvJ,MAAMpH,KAAKjiB,GACpBuX,EAAMgF,OACFhF,EAAMgF,OAAOmW,QAAQ1yB,GACrByiC,GAAalrB,EAAMkK,UAAYlK,EAAMkK,SAASkS,QAC3C5W,GAAU/c,SA+xCF0iC,CAA6BriC,MAChDA,KAAK+7B,QA/gBb,SAAkC3d,GAC9B,OAAOmI,GAAqBwV,GAAQtyB,WAAW,SAAoB64B,GAC/DtiC,KAAKoe,GAAKA,EACVpe,KAAKu4B,KAAO,CACRC,QAAS8J,EACThG,aAAc,KACdnE,SAAU,GACVzD,OAAQ,GACR2F,eAAgB,SAugBLkI,CAAyBviC,MACxCA,KAAK8hB,YA1gDb,SAAsC1D,GAClC,OAAOmI,GAAqBzE,GAAYrY,WAAW,SAAwBwf,EAAO3hB,EAAOk7B,GACrFxiC,KAAKoe,GAAKA,EACVpe,KAAK+oB,KAAO,CACRE,MAAOA,EACP3hB,MAAiB,QAAVA,EAAkB,KAAOA,EAChCqf,GAAI6b,GAER,IAAI3f,EAAYzE,EAAGwE,MAAMC,UACzB,IAAKA,EACD,MAAM,IAAIpR,GAAWwgB,WAAW,yBACpCjyB,KAAK+uB,KAAO/uB,KAAK0vB,WAAa7M,EAAUC,IAAIzb,KAAKwb,GACjD7iB,KAAK2vB,YAAc,SAAUl4B,EAAGC,GAAK,OAAOmrB,EAAUC,IAAIprB,EAAGD,IAC7DuI,KAAKqwB,KAAO,SAAU54B,EAAGC,GAAK,OAAOmrB,EAAUC,IAAIrrB,EAAGC,GAAK,EAAID,EAAIC,GACnEsI,KAAKowB,KAAO,SAAU34B,EAAGC,GAAK,OAAOmrB,EAAUC,IAAIrrB,EAAGC,GAAK,EAAID,EAAIC,GACnEsI,KAAKyiC,aAAerkB,EAAGwE,MAAM4U,eA2/CVkL,CAA6B1iC,MAChDA,KAAKuyB,GAAG,iBAAiB,SAAUH,GAC3BA,EAAGuQ,WAAa,EAChB1kB,QAAQC,KAAK,iDAAmDhH,EAAMza,KAAO,4CAE7EwhB,QAAQC,KAAK,gDAAkDhH,EAAMza,KAAO,mDAChFya,EAAMwmB,WAEV19B,KAAKuyB,GAAG,WAAW,SAAUH,IACpBA,EAAGuQ,YAAcvQ,EAAGuQ,WAAavQ,EAAGsG,WACrCza,QAAQC,KAAK,iBAAmBhH,EAAMza,KAAO,kBAE7CwhB,QAAQC,KAAK,YAAchH,EAAMza,KAAO,iDAAmD21B,EAAGsG,WAAa,OAEnH14B,KAAKuiB,QAAUyO,GAAU1zB,EAAQk6B,aACjCx3B,KAAK0e,mBAAqB,SAAUL,EAAMC,EAAY6Z,EAAU+G,GAAqB,OAAO,IAAIhoB,EAAMoa,YAAYjT,EAAMC,EAAY6Z,EAAU+G,IAC9Il/B,KAAKu9B,eAAiB,SAAUnL,GAC5Blb,EAAMqb,GAAG,WAAW3Q,KAAKwQ,GACzB3S,GACKjd,QAAO,SAAUlH,GAAK,OAAOA,EAAEmB,OAASya,EAAMza,MAAQnB,IAAM4b,IAAU5b,EAAEmb,OAAO2nB,WAC/Ev2B,KAAI,SAAUvM,GAAK,OAAOA,EAAEi3B,GAAG,iBAAiB3Q,KAAKwQ,OAE9DpyB,KAAK4iC,IAAIrD,IACTv/B,KAAK4iC,IAAIvC,IACTqB,EAAOrqC,SAAQ,SAAUwrC,GAAS,OAAOA,EAAM3rB,MAmMnD,OAjMAyU,EAAMliB,UAAU+uB,QAAU,SAAU8J,GAChC,GAAIr1B,MAAMq1B,IAAkBA,EAAgB,GACxC,MAAM,IAAI7wB,GAAWM,KAAK,0CAE9B,GADAuwB,EAAgB9oC,KAAK4jC,MAAsB,GAAhBkF,GAAsB,GAC7CtiC,KAAK+xB,OAAS/xB,KAAKyW,OAAOoI,cAC1B,MAAM,IAAIpN,GAAW+V,OAAO,4CAChCxnB,KAAKq9B,MAAQ7jC,KAAKC,IAAIuG,KAAKq9B,MAAOiF,GAClC,IAAIpJ,EAAWl5B,KAAKm5B,UAChB2J,EAAkB5J,EAAS12B,QAAO,SAAU0L,GAAK,OAAOA,EAAEqqB,KAAKC,UAAY8J,KAAkB,GACjG,OAAIQ,IAEJA,EAAkB,IAAI9iC,KAAK+7B,QAAQuG,GACnCpJ,EAAS7gC,KAAKyqC,GACd5J,EAASlP,KAAKsO,IACdwK,EAAgB7G,OAAO,IACvBj8B,KAAKyW,OAAO0mB,YAAa,EAClB2F,IAEXnX,EAAMliB,UAAUs5B,WAAa,SAAUhsC,GACnC,IAAImgB,EAAQlX,KACZ,OAAOA,KAAKyW,OAAO8H,cAAgB1I,GAAI2I,WAAaznB,IAAO,IAAIif,IAAa,SAAUpS,EAAS0T,GAC3F,IAAKJ,EAAMT,OAAOoI,cAAe,CAC7B,IAAK3H,EAAM4H,SAASC,SAEhB,YADAzH,EAAO,IAAI7F,GAAWf,gBAG1BwG,EAAM8H,OAAOpF,MAAMvH,IAEvB6E,EAAMT,OAAOwI,eAAepY,KAAKjD,EAAS0T,MAC3CzQ,KAAK9P,IAEZ40B,EAAMliB,UAAUm5B,IAAM,SAAUnvB,GAC5B,IAAI1D,EAAQ0D,EAAG1D,MAAO7Y,EAASuc,EAAGvc,OAAQsoC,EAAQ/rB,EAAG+rB,MAAO/iC,EAAOgX,EAAGhX,KAClEA,GACAuD,KAAKgjC,MAAM,CAAEjzB,MAAOA,EAAOtT,KAAMA,IACrC,IAAI86B,EAAcv3B,KAAK83B,aAAa/nB,KAAW/P,KAAK83B,aAAa/nB,GAAS,IAG1E,OAFAwnB,EAAYl/B,KAAK,CAAE0X,MAAOA,EAAO7Y,OAAQA,EAAQsoC,MAAgB,MAATA,EAAgB,GAAKA,EAAO/iC,KAAMA,IAC1F86B,EAAYvN,MAAK,SAAUvyB,EAAGC,GAAK,OAAOD,EAAE+nC,MAAQ9nC,EAAE8nC,SAC/Cx/B,MAEX2rB,EAAMliB,UAAUu5B,MAAQ,SAAUvvB,GAC9B,IAAI1D,EAAQ0D,EAAG1D,MAAOtT,EAAOgX,EAAGhX,KAAMvF,EAASuc,EAAGvc,OAQlD,OAPI6Y,GAAS/P,KAAK83B,aAAa/nB,KAC3B/P,KAAK83B,aAAa/nB,GAAS/P,KAAK83B,aAAa/nB,GAAOvN,QAAO,SAAUygC,GACjE,OAAO/rC,EAAS+rC,EAAG/rC,SAAWA,IAC1BuF,GAAOwmC,EAAGxmC,OAASA,MAIxBuD,MAEX2rB,EAAMliB,UAAUuV,KAAO,WACnB,OAAO4d,GAAU58B,OAErB2rB,EAAMliB,UAAUi0B,MAAQ,WACpB,IAAIxa,EAAMzD,GAAY/c,QAAQ1C,MAAO68B,EAAQ78B,KAAKyW,OAGlD,GAFIyM,GAAO,GACPzD,GAAYxW,OAAOia,EAAK,GACxBljB,KAAK+xB,MAAO,CACZ,IACI/xB,KAAK+xB,MAAM2L,QAEf,MAAO/9B,IACPK,KAAK+xB,MAAQ,KAEjB/xB,KAAK8e,SAASC,UAAW,EACzB8d,EAAM7K,YAAc,IAAIvgB,GAAWf,eAC/BmsB,EAAMhe,eACNge,EAAM8E,WAAW9E,EAAM7K,aAC3B6K,EAAM5d,eAAiB,IAAIjJ,IAAa,SAAUpS,GAC9Ci5B,EAAMG,eAAiBp5B,KAE3Bi5B,EAAMC,cAAgB,IAAI9mB,IAAa,SAAU+H,EAAGzG,GAChDulB,EAAM8E,WAAarqB,MAG3BqU,EAAMliB,UAAUlO,OAAS,WACrB,IAAI2b,EAAQlX,KACRkjC,EAAe15B,UAAU9P,OAAS,EAClCmjC,EAAQ78B,KAAKyW,OACjB,OAAO,IAAIT,IAAa,SAAUpS,EAAS0T,GACvC,IAAI6rB,EAAW,WACXjsB,EAAMwmB,QACN,IAAIzJ,EAAM/c,EAAM0L,MAAMC,UAAU+a,eAAe1mB,EAAMza,MACrDw3B,EAAIlhB,UAAYyG,IAAK,WACjBsiB,GAAmBsH,OAAOlsB,EAAMza,MAChCmH,OAEJqwB,EAAIjhB,QAAUme,GAAmB7Z,GACjC2c,EAAIqJ,UAAYpmB,EAAMqmB,gBAE1B,GAAI2F,EACA,MAAM,IAAIzxB,GAAWiT,gBAAgB,wCACrCmY,EAAMhe,cACNge,EAAM5d,eAAepY,KAAKs8B,GAG1BA,QAIZxX,EAAMliB,UAAU45B,UAAY,WACxB,OAAOrjC,KAAK+xB,OAEhBpG,EAAMliB,UAAU65B,OAAS,WACrB,OAAsB,OAAftjC,KAAK+xB,OAEhBpG,EAAMliB,UAAU85B,cAAgB,WAC5B,IAAIvR,EAAchyB,KAAKyW,OAAOub,YAC9B,OAAOA,GAAqC,mBAArBA,EAAYv1B,MAEvCkvB,EAAMliB,UAAU+5B,UAAY,WACxB,OAAmC,OAA5BxjC,KAAKyW,OAAOub,aAEvBrG,EAAMliB,UAAUg6B,kBAAoB,WAChC,OAAOzjC,KAAKyW,OAAO0mB,YAEvBlmC,OAAO4T,eAAe8gB,EAAMliB,UAAW,SAAU,CAC7CsB,IAAK,WACD,IAAImM,EAAQlX,KACZ,OAAOqJ,GAAKrJ,KAAKw8B,YAAY30B,KAAI,SAAUpL,GAAQ,OAAOya,EAAMslB,WAAW//B,OAE/EkyB,YAAY,EACZ3jB,cAAc,IAElB2gB,EAAMliB,UAAU0oB,YAAc,WAC1B,IAAI3mB,EAAOszB,GAAuBn1B,MAAM3J,KAAMwJ,WAC9C,OAAOxJ,KAAK0jC,aAAa/5B,MAAM3J,KAAMwL,IAEzCmgB,EAAMliB,UAAUi6B,aAAe,SAAUrlB,EAAMqW,EAAQsK,GACnD,IAAI9nB,EAAQlX,KACRk/B,EAAoBrpB,GAAI4I,MACvBygB,GAAqBA,EAAkB9gB,KAAOpe,OAA+B,IAAvBqe,EAAK3b,QAAQ,OACpEw8B,EAAoB,MACxB,IAEIyE,EAASrlB,EAFTslB,GAA0C,IAAvBvlB,EAAK3b,QAAQ,KACpC2b,EAAOA,EAAKge,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAE1C,IAOI,GANA/d,EAAaoW,EAAO7sB,KAAI,SAAUohB,GAC9B,IAAI0R,EAAY1R,aAAiB/R,EAAM0J,MAAQqI,EAAMxsB,KAAOwsB,EAC5D,GAAyB,iBAAd0R,EACP,MAAM,IAAI3oB,UAAU,mFACxB,OAAO2oB,KAEC,KAARtc,GAAeA,IAAS4B,GACxB0jB,EAAU1jB,OACT,CAAA,GAAY,MAAR5B,GAAgBA,GAAQ6B,GAG7B,MAAM,IAAIzO,GAAWiT,gBAAgB,6BAA+BrG,GAFpEslB,EAAUzjB,GAGd,GAAIgf,EAAmB,CACnB,GAAIA,EAAkB7gB,OAAS4B,IAAY0jB,IAAYzjB,GAAW,CAC9D,IAAI0jB,EAIA,MAAM,IAAInyB,GAAWoyB,eAAe,0FAHpC3E,EAAoB,KAKxBA,GACA5gB,EAAWjnB,SAAQ,SAAUsjC,GACzB,GAAIuE,IAA0E,IAArDA,EAAkB5gB,WAAW5b,QAAQi4B,GAAmB,CAC7E,IAAIiJ,EAIA,MAAM,IAAInyB,GAAWoyB,eAAe,SAAWlJ,EAC3C,wCAJJuE,EAAoB,SAQhC0E,GAAoB1E,IAAsBA,EAAkBt+B,SAC5Ds+B,EAAoB,OAIhC,MAAOv/B,GACH,OAAOu/B,EACHA,EAAkB/mB,SAAS,MAAM,SAAU4F,EAAGzG,GAAUA,EAAO3X,MAC/D+c,GAAU/c,GAElB,IAAImkC,EAAmB7E,GAAsB53B,KAAK,KAAMrH,KAAM2jC,EAASrlB,EAAY4gB,EAAmBF,GACtG,OAAQE,EACJA,EAAkB/mB,SAASwrB,EAASG,EAAkB,QACtDjuB,GAAI4I,MACA3D,GAAOjF,GAAIwL,WAAW,WAAc,OAAOnK,EAAM6rB,WAAWe,MAC5D9jC,KAAK+iC,WAAWe,IAE5BnY,EAAMliB,UAAUwf,MAAQ,SAAUjI,GAC9B,IAAKvW,GAAOzK,KAAKw8B,WAAYxb,GACzB,MAAM,IAAIvP,GAAWsyB,aAAa,SAAW/iB,EAAY,mBAE7D,OAAOhhB,KAAKw8B,WAAWxb,IAEpB2K,KAGPqY,GAAUrY,GACd3xB,GAAMgqC,GAAS16B,GAASA,GAAS,GAAI8I,IAAqB,CACtD7W,OAAQ,SAAU0oC,GAEd,OADS,IAAID,GAAQC,GACX1oC,UAEd2oC,OAAQ,SAAUznC,GACd,OAAO,IAAIunC,GAAQvnC,EAAM,CAAEilC,OAAQ,KAAM1iB,OAAOnY,MAAK,SAAUuX,GAE3D,OADAA,EAAGsf,SACI,KACR9jB,MAAM,uBAAuB,WAAc,OAAO,MAEzDuqB,iBAAkB,SAAUnpC,GACxB,OAAO8gC,GACHA,GAAmBqI,mBAAmBt9B,KAAK7L,GAC3Cgb,GAAapS,QAAQ,KAE7BsgB,YAAa,WAIT,OAHA,SAAeC,GACX/Z,GAAOpK,KAAMmkB,KAIrBigB,kBAAmB,SAAUpF,GACzB,OAAOnpB,GAAI4I,MACP3D,GAAOjF,GAAIwL,UAAW2d,GACtBA,KAERrC,IAAKA,GAAK0H,MAAO,SAAUC,GACvB,OAAO,WACH,IACI,IAAI93B,EAAKgyB,GAAc8F,EAAY36B,MAAM3J,KAAMwJ,YAC/C,OAAKgD,GAAyB,mBAAZA,EAAG3F,KAEd2F,EADIwJ,GAAapS,QAAQ4I,GAGpC,MAAO7M,GACH,OAAO+c,GAAU/c,MAG1B4kC,MAAO,SAAUD,EAAa94B,EAAM+H,GACnC,IACI,IAAI/G,EAAKgyB,GAAc8F,EAAY36B,MAAM4J,EAAM/H,GAAQ,KACvD,OAAKgB,GAAyB,mBAAZA,EAAG3F,KAEd2F,EADIwJ,GAAapS,QAAQ4I,GAGpC,MAAO7M,GACH,OAAO+c,GAAU/c,KAGzB6kC,mBAAoB,CAChBz5B,IAAK,WAAc,OAAO8K,GAAI4I,OAAS,OACxCoU,QAAS,SAAU4R,EAAmBC,GACrC,IAAIjgC,EAAUuR,GAAapS,QAAqC,mBAAtB6gC,EACtCT,GAAQI,kBAAkBK,GAC1BA,GACCzqB,QAAQ0qB,GAAmB,KAChC,OAAO7uB,GAAI4I,MACP5I,GAAI4I,MAAMoU,QAAQpuB,GAClBA,GAERd,QAASqS,GACTxG,MAAO,CACHzE,IAAK,WAAc,OAAOyE,IAC1BlV,IAAK,SAAUH,GACXyV,GAASzV,EAAiB,UAAVA,EAAoB,WAAc,OAAO,GAAU4lB,MAG3E7U,OAAQA,GAAQd,OAAQA,GAAQpQ,MAAOA,GAAOyR,SAAUA,GACxDoa,OAAQA,GACRvZ,aAAcA,GAAcO,aAAcA,GAAcM,aAAcA,GAAcE,aAAcA,GAAcO,UAAWA,GAAWY,cAAeA,GAAe3C,KAAMA,GAC1KyT,OAAQA,GACRoiB,OAAQ,GACRjiB,YAAaA,GACblO,SAAUA,GACVkwB,aAAc,WACV,IACI,MAAO,CACH5e,UAAW5Y,GAAQ4Y,WAAa5Y,GAAQ06B,cAAgB16B,GAAQ26B,iBAAmB36B,GAAQ46B,YAC3FrN,YAAavtB,GAAQutB,aAAevtB,GAAQ66B,mBAGpD,MAAOnlC,GACH,MAAO,CAAEkjB,UAAW,KAAM2U,YAAa,OARjC,GAWduN,OAAQ7lB,GAAesZ,QAAStZ,GAAc5c,MAAM,KAC/CuF,KAAI,SAAU5H,GAAK,OAAOiN,SAASjN,MACnCkM,QAAO,SAAUrS,EAAGwB,EAAG3B,GAAK,OAAOG,EAAKwB,EAAI9B,KAAKukC,IAAI,GAAQ,EAAJpkC,MAC9DqrC,QAAShB,GACTrY,MAAOqY,MACXA,GAAQiB,OAASjU,GAAUgT,GAAQvC,aAAajK,aAlyBhD,SAAgC3U,GAC5B,IACIiZ,GA5BR,SAA4BjZ,GACxB,IACIqiB,EADAC,EAAqBtiB,GAA4C,mBAAxBA,EAAUuiB,UAEvD,IAAKD,EAAoB,CACrB,IAAI/mB,EAAK,IAAIuN,GAAM3L,GAAY,CAAE0hB,OAAQ,KACzCtjB,EAAGoa,QAAQ,GAAGyD,OAAO,CAAEoJ,QAAS,SAChCH,EAAe9mB,EAAG6K,MAAM,WAE5B,MAAO,CACHkb,iBAAkB,WACd,OAAOgB,EAECnvB,GAAapS,QAAQif,EAAUuiB,aAAav+B,MAAK,SAAUy+B,GAAS,OAAOA,EACtEz9B,KAAI,SAAU09B,GAAQ,OAAOA,EAAK9oC,QAClC+F,QAAO,SAAU/F,GAAQ,OAAOA,IAASujB,SAE9CklB,EAAa9hB,eAAe2H,eAExCrpB,IAAK,SAAUjF,GACX,OAAQ0oC,GAAsB1oC,IAASujB,IAAcklB,EAAatgB,IAAI,CAAEnoB,KAAMA,IAAQmd,MAAMvH,KAEhG+wB,OAAQ,SAAU3mC,GACd,OAAQ0oC,GAAsB1oC,IAASujB,IAAcklB,EAAa3pC,OAAOkB,GAAMmd,MAAMvH,MAMpEmzB,CAAmB3iB,GAE5C,MAAOljB,KAgyBX8lC,CAAuB9Z,GAAM8V,aAAa5e,WAC1C7M,GAAad,gBA/2Hb,SAAkBwwB,EAAUt1B,GACxB,IAAKs1B,GAAYA,aAAoB70B,IAAc60B,aAAoB1zB,WAAa0zB,aAAoB5zB,cAAgB4zB,EAASjpC,OAAS0V,GAAauzB,EAASjpC,MAC5J,OAAOipC,EACX,IAAIl5B,EAAK,IAAI2F,GAAauzB,EAASjpC,MAAM2T,GAAWs1B,EAASt1B,QAASs1B,GAMtE,MALI,UAAWA,GACX96B,GAAQ4B,EAAI,QAAS,CAAEzB,IAAK,WACpB,OAAO/K,KAAK4R,MAAM7B,SAGvBvD,GAu2HXoD,GAASJ,GAAOuQ,ICh0IT,MAAM4lB,GAAmB,CAC9BC,KAAoB,EAEpBC,MAAmB,EACnBC,MAAmB,EACnBC,MAAmB,EACnBC,MAAmB,EACnBC,MAAmB,EACnBC,MAAmB,EACnBC,OAAkB,EAClBC,OAAkB,EAClBC,UAAe,EACfC,MAAmB,EACnBC,MAAmB,EACnBC,OAAkB,EAClBC,KAAoB,EACpBC,OAAkB,EAClBC,MAAmB,EACnBC,QAAiB,EACjBC,SAAgB,EAChBC,KAAoB,EACpBC,UAAe,EACfC,UAAe,EACfC,UAAe,EACfC,UAAe,EACfC,UAAe,EACfC,MAAmB,EACnBC,OAAkB,EAClBC,QAAiB,EACjBC,SAAgB,EAChBC,QAAiB,EACjBC,OAAkB,EAClBC,UAAe,EACfC,OAAkB,EAClBC,QAAiB,EACjBC,OAAkB,EAClBC,OAAkB,EAClBC,OAAkB,EAClBC,OAAkB,EAElBC,KAAoB,EACpBC,OAAkB,EAClBC,KAAoB,EACpBC,UAAiB,EACjBC,WAAc,EACdC,OAAkB,EAClBC,OAAkB,EAClBC,QAAiB,EACjBC,MAAmB,EACnBC,UAAe,EACfC,MAAmB,EACnBC,MAAmB,EACnBC,MAAqB,EACrBC,MAAmB,EACnBC,OAAkB,EAClBC,SAAkB,EAClBC,SAAgB,EAChBC,OAAkB,EAClBC,KAAoB,EACpBC,KAAoB,EACpBC,OAAkB,EAClBC,OAAkB,EAClBC,MAAmB,EACnBC,KAAoB,EACpBC,KAAoB,EACpBC,OAAkB,EAClBC,WAAc,EACdC,QAAiB,EACjBC,QAAiB,EACjBC,OAAkB,EAClBC,SAAgB,EAChBC,OAAkB,EAClBC,KAAoB,EACpBC,KAAoB,EACpBC,OAAkB,EAClBC,KAAoB,EACpBC,UAAe,EACfC,OAAkB,EAClBC,MAAmB,EACnBC,OAAkB,EAClBC,MAAmB,EACnBC,SAAgB,EAChBC,MAAmB,EACnBC,OAAkB,EAClBC,OAAkB,EAClBC,SAAgB,EAChBC,SAAgB,EAChBC,SAAgB,EAChBC,OAAkB,EAClBC,KAAoB,EACpBC,OAAkB,EAClBC,MAAmB,EAEnBC,KAAoB,EACpBC,SAAgB,EAChBC,SAAgB,EAChBC,QAAiB,EACjBC,OAAkB,EAClBC,YAAa,EACbC,YAAa,EACbC,WAAc,EACdC,OAAkB,EAClBC,SAAgB,EAChBC,MAAmB,EACnBC,KAAoB,EACpBC,IAAqB,GCrGR,MAAMC,GACnBnsC,WAAa,EACbA,UAAa,EAEbA,GAAY,KACZA,UAAY,KACZA,OAAY,KAEZA,eAAiB,SAGjBA,YAAY2F,EAAS,IACnB,MAAMymC,WAACA,GAAczmC,EAEhBymC,IACHnsC,KAAKosC,eAAiB,cAGxBpsC,KAAKqsC,QAIPtsC,IAAI+nB,EAAOwkB,GACT,OAAO,IAAI3oC,SAAQ,CAACC,EAAS0T,KAC3BtX,KAAKoe,GAAG+T,aACNoa,GAAMA,EAAGC,WACP1kB,EACAwkB,GACA,CAACC,EAAItyC,IAAW2J,EAAQ,CAAC2oC,GAAAA,EAAItyC,OAAAA,MAC7B,IAAIuR,IAAS8L,EAAO9L,UAO5BzL,cACEC,KAAKoe,GAAKquB,aAAa,uBAAwB,GAAI,uBAAwB,WACrEzsC,KAAK0sC,qBACL1sC,KAAK2sC,IAAI,eAAe3sC,KAAKosC,oDAAoDxyB,OAAM,SAE7F5Z,KAAK4sC,UAAY,IAAIjhB,GAAM3rB,KAAKosC,gBAChCpsC,KAAK4sC,UAAUpU,QAAQ,GAAGyD,OAAO,CAAC4Q,OAAQ,SAE1C7sC,KAAK8sC,mBAIP/sC,oBACQC,KAAK2sC,IAAI,wBAAwB3sC,KAAKosC,wBACtCpsC,KAAK0sC,eAIb3sC,qBAAqBgtC,GACnB,MAAMvyB,EAASuyB,EACRllC,KAAIvM,IACH,MAAM0xC,EAAQzsC,MAAMyJ,QAAQ1O,EAAE0xC,OAAc1xC,EAAE0xC,MAAMpqC,KAAK,MACxB,iBAAZtH,EAAE0xC,MAAqB1xC,EAAE0xC,MAAM3Q,QAAQ,KAAM,MACtB/gC,EAAE0xC,MAExCC,EAAQ3xC,EAAE4xC,UAAY,IAAI5xC,EAAE4xC,aAAe,OAEjD,MAAO,IAAM,CACX,IAAI5xC,EAAE6xC,OAAO,MACb7xC,EAAE8xC,YAAY,GACd,IAAI9xC,EAAE6xC,OAAO,MACb7xC,EAAE8xC,YAAY,GACdJ,EACAC,GACArqC,KAAK,MAAQ,OAEhBA,KAAK,OAEZqb,QAAQovB,IAAI7yB,SACNxa,KAAK2sC,IAAI,yBAAyB3sC,KAAKosC,yBAAyB5xB,KAEtExa,KAAK8sC,mBAIP/sC,mBAAmB+nB,GACjB,MAAMykB,GAACA,EAAEtyC,OAAEA,SAAgB+F,KAAK2sC,IAAI7kB,GACpC,OAAO7tB,EAAOqzC,KAIhBvtC,2BACQC,KAAK2sC,IAAI,8BAA8B3sC,KAAKosC,kZAW5CpsC,KAAK2sC,IAAI,+BAA+B3sC,KAAKosC,6BAA6BpsC,KAAKosC,6CAC/EpsC,KAAK2sC,IAAI,+BAA+B3sC,KAAKosC,6BAA6BpsC,KAAKosC,6CAC/EpsC,KAAK2sC,IAAI,+BAA+B3sC,KAAKosC,6BAA6BpsC,KAAKosC,uCAIvFrsC,oBAAoBtD,GAClB,MAAMxC,QAAe+F,KAAK4sC,UAAUC,OAAO9hC,IAAItO,GAG/C,OAFY8wC,GAAGC,aAAavzC,EAAOqzC,KAAMrzC,EAAOwzC,KAAMxzC,EAAOwF,KAAMxF,EAAO8C,MAM5EgD,8BAA8B2tC,GAM5B,MAAMC,EAAK,GACLC,EAAsB,GAE5B,IAAKD,EAAG,GAAKD,EAAMN,YAAY,GAAIO,EAAG,IAAM,EAAGA,EAAG,KAChD,IAAKA,EAAG,GAAKD,EAAMN,YAAY,GAAIO,EAAG,IAAM,EAAGA,EAAG,KAAM,CAGtD,MAAME,EAAmC,IAAIttC,MAAMP,KAAK8tC,YAAYzkC,QAAQxB,KAAIlO,GAAK+zC,EAAMN,YAAYzzC,GAAKg0C,EAAGh0C,KAM/G,GAHgCk0C,EAAiC1hC,SAAS1U,EAAGC,IAAMD,EAAIC,GAAI,GAG5Dg2C,EAAMV,MAAMxqC,QAAO7I,GAAKA,IAAGD,OAASsG,KAAK+tC,UAEtE,MAGF,MAAMC,EAAgB,IACjBN,EAAMV,SACNzsC,MAAMC,KAAM,CAAC9G,OAAQm0C,EAAiC,KAAK,IAAMlI,GAAiB+H,EAAMP,OAAO,SAC/F5sC,MAAMC,KAAM,CAAC9G,OAAQm0C,EAAiC,KAAK,IAAMlI,GAAiB+H,EAAMP,OAAO,OAClG3qC,QAAO7I,GAAKA,IAAGqwB,OAAOlG,UAKlBmqB,EAAmB,CAFCN,EAAG,GAAK,cAAcD,EAAMP,OAAO,0BAA0BQ,EAAG,MAAQ,GACxEA,EAAG,GAAK,cAAcD,EAAMP,OAAO,0BAA0BQ,EAAG,MAAQ,IAClCnrC,QAAO7I,GAAKA,IAAGiJ,KAAK,SAI9EsrC,EAAuB,CAFAP,EAAG,GAAK,cAAcD,EAAMP,OAAO,0BAA0BQ,EAAG,MAAQ,GACxEA,EAAG,GAAK,cAAcD,EAAMP,OAAO,0BAA0BQ,EAAG,MAAQ,IAC3BnrC,QAAO7I,GAAKA,IAAGiJ,KAAK,SAExFurC,EAAKF,EAAiBv0C,OACpB,IAAM,CAAC,IAAIu0C,KAAqB,IAAIC,MAAwB1rC,QAAO7I,GAAKA,IAAGiJ,KAAK,QAAU,SAC1F,GAEFklB,EAAO,uBAAuB9nB,KAAKosC,wBAAwB+B,cAAeH,EAAc,IAAM,kBAAkBA,EAAc,IAAM,kBAAkBA,EAAc,IAAM,KAE1K/zC,OAACA,SAAgB+F,KAAK2sC,IAAI7kB,GAGhC8lB,EAAoBv1C,QACf,IAAI4B,EAAOqzC,MAAM9qC,QAAO7I,IAAMqG,KAAKouC,aAAapuC,KAAKquC,SAAS10C,GAAI+zC,MAM3E,OAAOE,EAAoB5jB,MAAK,CAACvyB,EAAGC,IAAOD,EAAE62C,MAAQ52C,EAAE42C,OAAU,EAAK72C,EAAE62C,MAAQ52C,EAAE42C,MAAS,EAAI,IAIjGvuC,yBACEC,KAAK+sC,OAAS,UACF/sC,KAAKuuC,aAAa,uBAAuBvuC,KAAKosC,mBACxDvkC,KAAI2mC,IACJA,EAAIC,WAAa9I,GAAiB6I,EAAIE,QAAUF,EAAIG,YACnChJ,GAAiB6I,EAAII,QAAUJ,EAAIK,YACnCL,EAAIM,MACJN,EAAIO,MACJP,EAAIQ,MACdR,KAGTxuC,KAAKivC,4BAIPlvC,kCACE,KAA4C,mBAA7BmvC,OAAOC,yBACd,IAAIxrC,SAAQsB,GAAK8G,WAAW9G,EAAG,OAGvC,MAAM6N,EAAMo8B,OAAOC,kBAAmB3sB,KAAKC,UAAUziB,KAAK+sC,SACpDqC,EAAc5sB,KAAK6sB,MAAMv8B,GAE/B,IAAK,MAAMnZ,KAAKqG,KAAK+sC,OAAQ,CAC3B,MAAOuC,EAAQC,GAAYH,EAAY,IAAM,CAACI,OAAOC,iBAAkB,IAElEzvC,KAAK+sC,OAAOpzC,GAAG20C,MAAQgB,EAC1BrxB,QAAQovB,IAAI,kBAEJrtC,KAAK+sC,OAAOpzC,GAAG20C,MAAQgB,EAC/BtvC,KAAK+sC,OAAOpzC,GAAGi0C,oBAAsB,IAGrC5tC,KAAK+sC,OAAOpzC,GAAGi0C,oBAAsB2B,EAAS1nC,KAAI6nC,GAAK1vC,KAAK+sC,OAAO2C,EAAI,KACvEN,EAAYtd,UAoBlB/xB,SAASyuC,GACP,MAAO,CACLrB,OAAa,CAACqB,EAAIE,OAAQF,EAAII,QAC9BxB,YAAa,CAACoB,EAAIG,YAAaH,EAAIK,aACnC7B,MAAa,CAACwB,EAAIM,MAAON,EAAIO,MAAOP,EAAIQ,QAI5CjvC,aAAatI,EAAGC,GACd,OAAO8qB,KAAKC,UAAUhrB,KAAO+qB,KAAKC,UAAU/qB,IChPzC,SAASi4C,GAAWC,GACzB,OAAO,IAAIjsC,SAASC,IAClB,MAAMisC,EAAM,IAAIC,MAChBD,EAAIj5C,IAAMg5C,EAEVC,EAAIE,OAAS,KAEX,MAAMC,EAASzC,GAAG0C,OAAOJ,GAC1BjsC,EAAQosC,OAMN,SAASE,GAAsBjD,EAAOkD,EAAeC,EAAOC,EAAqBC,GACtF,MAAM70C,EAAO,IAAI8xC,GAAGgD,KAAKJ,EAAc1C,KAAM0C,EAAc7C,MACrDkD,EAAO,IAAIjD,GAAGkD,KAAKL,EAAO30C,GAC1Bi1C,EAAUzD,EAAM0D,IAAIH,GAEpBI,EAAe,IAAIrD,GAAGsD,IAC5BtD,GAAGuD,UAAUX,EAAeS,EAAcP,EAAqB,IAAK9C,GAAGwD,eAEvE,MAAMC,EAAS,IAAIzD,GAAGsD,IACtBH,EAAQO,OAAOD,EAAQJ,GAEvB,MAAMlX,EAAO,IAAI6T,GAAGsD,IACpBtD,GAAG2D,QAAQf,EAAea,EAAQtX,GAClC6T,GAAG4D,SAASzX,EAAMA,EAAM6T,GAAG6D,gBAE3B,MAAMn3C,EAAS,IAAIszC,GAAGsD,IAStB,OARAtD,GAAGuD,UAAUpX,EAAMz/B,EAAQq2C,EAAqB,IAAK/C,GAAGwD,eAGxDrX,EAAKn+B,SACLy1C,EAAOz1C,SACPq1C,EAAar1C,SACbm1C,EAAQn1C,SAEDtB,EAIF,SAASo3C,GAAoBpE,EAAOqE,EAAWlB,EAAOC,EAAsB,GAAIC,EAAsB,GAAI9gC,EAAQ,UACvH,IAAI+hC,EAAe/B,OAAOC,iBACtB+B,EAAY,KAGhB,IAAK,MAAO/0C,EAAMg1C,KAAax6C,OAAOy6C,QAAQJ,GAAY,CACxD,MAAM5X,EAAOwW,GAAsBjD,EAAOwE,EAAUrB,EAAOC,EAAqBC,GAChF9gC,EAAMkqB,EAAMj9B,GACZ,MAAMk1C,EAAYpE,GAAGqE,aAAalY,GAE7B6X,EAAeI,IAClBJ,EAAeI,EACfH,EAAY/0C,GAGdi9B,EAAKn+B,SAGP,OAAOi2C,EAKF,SAASK,GAAoB13C,GAClC,OAAIA,aAAiBwJ,QACZxJ,EAGLoG,MAAMyJ,QAAQ7P,GACTwJ,QAAQ4W,IAAIpgB,EAAM0N,IAAIgqC,KAGV,iBAAV13C,EAOb,SAAuB23C,GACrB,MAAMC,EAAW96C,OAAOoS,KAAKyoC,GAAQjqC,KAAI1J,GAChC0zC,GAAoBC,EAAO3zC,IAAM0I,MAAK1M,KAAYgE,IAAAA,EAAKhE,MAAAA,QAGhE,OAAOwJ,QAAQ4W,IAAIw3B,GAAUlrC,MAAKyU,GACzBA,EAAQnP,QAAO,CAAChD,EAAK6oC,KAC1B7oC,EAAI6oC,EAAK7zC,KAAO6zC,EAAK73C,MACdgP,IACN,MAfI8oC,CAAc93C,GAGhBwJ,QAAQC,QAAQzJ,GC3EV,MAAM+3C,GACnBnyC,SAAW,GACXA,iBAAmB,GACnBA,cAAmB,EAEnBA,aAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,YAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,aAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,aAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,mBAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,mBAAqB,IAAIwtC,GAAG4E,MAAM,KAAM,KACxCpyC,WAAqB,IAAIwtC,GAAG4E,MAAM,IAAK,KAEvCpyC,0BAA4B,IAAIwtC,GAAG4E,MAAM,IAAK,KAC9CpyC,gBAA4B,IAAIwtC,GAAGgD,KAAK,IAAK,KAE7CxwC,UAAY,KACZA,QAAU,EACVA,OAAS,GACTA,UAAY,KAMZA,aACEC,KAAKsxC,UAAY,CACfjhC,MAAOs/B,GAAW,2BAClByC,KAAM,CACJC,EAAsB1C,GAAW,4BACjC2C,EAAsB3C,GAAW,4BACjC4C,EAAsB5C,GAAW,4BACjC6C,EAAsB7C,GAAW,6BAEnC8C,IAAK,CACHC,EAAsB/C,GAAW,2BACjCgD,EAAsBhD,GAAW,2BACjCiD,EAAsBjD,GAAW,2BACjCkD,EAAsBlD,GAAW,2BACjC6C,EAAsB7C,GAAW,2BACjC4C,EAAsB5C,GAAW,4BAEnC72C,KAAM,CACJg6C,QAAsBnD,GAAW,4BACjCoD,QAAsBpD,GAAW,4BACjCqD,QAAsBrD,GAAW,6BACjCsD,QAAsBtD,GAAW,8BACjCuD,QAAsBvD,GAAW,4BACjCwD,QAAsBxD,GAAW,6BACjCyD,QAAsBzD,GAAW,8BACjC0D,QAAsB1D,GAAW,6BACjC2D,QAAsB3D,GAAW,8BACjC4D,QAAsB5D,GAAW,4BACjC6D,QAAsB7D,GAAW,6BACjC8D,QAAsB9D,GAAW,8BACjC+D,QAAsB/D,GAAW,6BACjCgE,QAAsBhE,GAAW,+BAEnCiE,MAAO,CACL/K,MAAqB8G,GAAW,+BAChC1D,IAAqB0D,GAAW,6BAChC1H,KAAoB0H,GAAW,8BAC/BxH,KAAoBwH,GAAW,8BAC/B3D,KAAoB2D,GAAW,8BAC/B1F,KAAoB0F,GAAW,8BAC/BnG,KAAoBmG,GAAW,8BAC/BzE,KAAoByE,GAAW,8BAC/BlG,KAAoBkG,GAAW,8BAC/B/J,KAAoB+J,GAAW,8BAC/BvF,KAAoBuF,GAAW,8BAC/BvG,KAAoBuG,GAAW,8BAC/BtE,KAAoBsE,GAAW,8BAC/BxG,KAAoBwG,GAAW,8BAC/B7I,KAAoB6I,GAAW,8BAC/BlJ,KAAoBkJ,GAAW,8BAC/BzF,KAAoByF,GAAW,8BAC/BvI,MAAmBuI,GAAW,+BAC9BpJ,MAAmBoJ,GAAW,+BAC9B/G,MAAmB+G,GAAW,+BAC9BlF,MAAmBkF,GAAW,+BAC9BlH,MAAmBkH,GAAW,+BAC9BrJ,MAAmBqJ,GAAW,+BAC9BzJ,MAAmByJ,GAAW,+BAC9B3J,MAAmB2J,GAAW,+BAC9B7J,MAAmB6J,GAAW,+BAC9BhJ,MAAmBgJ,GAAW,+BAC9B1J,MAAmB0J,GAAW,+BAC9BhH,MAAmBgH,GAAW,+BAC9B7G,MAAmB6G,GAAW,+BAC9BpG,MAAmBoG,GAAW,+BAC9BpF,MAAmBoF,GAAW,+BAC9BhF,MAAmBgF,GAAW,+BAC9BvE,MAAmBuE,GAAW,+BAC9B5J,MAAmB4J,GAAW,+BAC9B5D,MAAmB4D,GAAW,+BAC9B9J,MAAmB8J,GAAW,+BAC9B9H,OAAkB8H,GAAW,gCAC7BxF,OAAkBwF,GAAW,gCAC7BzH,OAAkByH,GAAW,gCAC7B1E,OAAkB0E,GAAW,gCAC7B9E,OAAkB8E,GAAW,gCAC7B3H,OAAkB2H,GAAW,gCAC7BlI,OAAkBkI,GAAW,gCAC7B5G,OAAkB4G,GAAW,gCAC7BpH,OAAkBoH,GAAW,gCAC7BnF,OAAkBmF,GAAW,gCAC7BjG,OAAkBiG,GAAW,gCAC7BxE,OAAkBwE,GAAW,gCAC7BrF,OAAkBqF,GAAW,gCAC7B/E,OAAkB+E,GAAW,gCAC7B7H,OAAkB6H,GAAW,gCAC7BzG,OAAkByG,GAAW,gCAC7BjJ,OAAkBiJ,GAAW,gCAC7BtI,OAAkBsI,GAAW,gCAC7B3F,OAAkB2F,GAAW,gCAC7BvJ,OAAkBuJ,GAAW,gCAC7B7F,OAAkB6F,GAAW,gCAC7BrH,OAAkBqH,GAAW,gCAC7BlE,OAAkBkE,GAAW,gCAC7B5H,OAAkB4H,GAAW,gCAC7B9D,OAAkB8D,GAAW,gCAC7BtG,OAAkBsG,GAAW,gCAC7BhI,OAAkBgI,GAAW,gCAC7BnJ,OAAkBmJ,GAAW,gCAC7BrG,OAAkBqG,GAAW,gCAC7BxJ,OAAkBwJ,GAAW,gCAC7B3G,SAAkB2G,GAAW,kCAC7B/H,QAAiB+H,GAAW,iCAC5B9F,QAAiB8F,GAAW,iCAC5B/F,QAAiB+F,GAAW,iCAC5BnE,QAAiBmE,GAAW,iCAC5BrI,QAAiBqI,GAAW,iCAC5BnI,QAAiBmI,GAAW,iCAC5BnH,QAAiBmH,GAAW,iCAC5B/I,QAAiB+I,GAAW,iCAC5BvH,UAAiBuH,GAAW,mCAC5BpE,SAAgBoE,GAAW,kCAC3B7D,SAAgB6D,GAAW,kCAC3BpI,SAAgBoI,GAAW,kCAC3BjF,SAAgBiF,GAAW,kCAC3B9I,SAAgB8I,GAAW,kCAC3B1G,SAAgB0G,GAAW,kCAC3BrE,SAAgBqE,GAAW,kCAC3B3E,SAAgB2E,GAAW,kCAC3B5F,SAAgB4F,GAAW,kCAC3B5E,SAAgB4E,GAAW,kCAC3B7E,SAAgB6E,GAAW,kCAC3BtF,UAAesF,GAAW,mCAC1BjH,UAAeiH,GAAW,mCAC1BzI,UAAeyI,GAAW,mCAC1B3I,UAAe2I,GAAW,mCAC1BxI,UAAewI,GAAW,mCAC1BtJ,UAAesJ,GAAW,mCAC1BjI,UAAeiI,GAAW,mCAC1B1I,UAAe0I,GAAW,mCAC1B5I,UAAe4I,GAAW,mCAC1BtH,WAAcsH,GAAW,oCACzBhG,WAAcgG,GAAW,oCACzB/D,WAAc+D,GAAW,oCACzBhE,YAAagE,GAAW,qCACxBjE,YAAaiE,GAAW,uCAI5B3vC,KAAKsxC,UAAUuC,KAAO,GACtB,IAAK,IAAIl6C,EAAI,EAAGA,GAAKqG,KAAK8zC,SAAUn6C,IAClCqG,KAAKsxC,UAAUuC,KAAKl6C,GAAKg2C,GAAW,sBAAsBh2C,SAG5DqG,KAAKsxC,gBAAkBO,GAAoB7xC,KAAKsxC,WAChDtxC,KAAK+zC,QAEL/zC,KAAK4sC,UAAY,IAAIjhB,GAAM,UAC3B3rB,KAAK4sC,UAAUpU,QAAQ,GAAGyD,OAAO,CAAC4Q,OAAQ,SAG5C9sC,QACEC,KAAKg0C,QAAU,EACfh0C,KAAK+sC,OAAS,GACd,IAAK,IAAIjzC,EAAI,EAAGA,GAAKkG,KAAK8zC,SAAUh6C,IAAK,CACvCkG,KAAK+sC,OAAOjzC,GAAK,GACjB,IAAK,IAAImL,EAAI,EAAGA,GAAKjF,KAAKi0C,cAAehvC,IACvCjF,KAAK+sC,OAAOjzC,GAAGmL,GAAK,IAK1BlF,SAAS8zC,EAAMrF,EAAK0F,GAClB,OAAsC,MAA/Bl0C,KAAK+sC,OAAO8G,GAAMrF,GAAK0F,GAGhCn0C,MAAMo0C,EAAWC,GACf,MAAMP,KAACA,EAAIrF,IAAEA,EAAG0F,IAAEA,GAAOC,GACnBE,WAACA,EAAUC,UAAEA,GAAaF,EAE1B33C,EAAO,GAAG63C,KAAaT,KAAQrF,KAAO0F,IAG5Cl0C,KAAK4sC,UAAUC,OAAOjoB,IAAI,CACxBnoB,KAAAA,EACA6wC,KAAM+G,EAAW/G,KACjBG,KAAM4G,EAAW5G,KACjBhuC,KAAM40C,EAAW50C,OACjB1C,KAAMs3C,EAAWt3C,KAAKnE,MAAM,KAE9BoH,KAAK+sC,OAAO8G,GAAMrF,GAAK0F,GAAO,IAAIC,EAAWjH,UAAWzwC,GACxDuD,KAAKg0C,UAGPj0C,KAAKs0C,EAAYC,GACf,MAAMT,EAAgB7zC,KAAKu0C,gBAAgBF,IACpC7uB,EAAK+H,GAAUvtB,KAAKw0C,oBAAoBH,GAE/C,GAAK9mB,EAAQ,IAGX,OAAO,KAGT,MAAO2mB,EAAK1F,GAAUhpB,EAEtB,GAAIxlB,KAAKy0C,SAASZ,EAAMrF,EAAK0F,GAE3B,OAAO,KAGT,MAAMQ,EAAgB10C,KAAK20C,WAAWN,GAChCrH,EAAgBhtC,KAAK40C,UAAUP,GAC/BlH,EAAgBntC,KAAK60C,WAAWR,GAChCjH,EAAgBptC,KAAK80C,gBAAgBT,GAK3Cr0C,KAAKpI,MAAM,CAACi8C,KAAAA,EAAMrF,IAAAA,EAAK0F,IAAAA,EAAKQ,OAAAA,EAAQ1H,MAAAA,EAAOG,OAAAA,EAAQC,YAAAA,GAAc,CAACiH,WAAAA,EAAYC,UAAAA,IAGhFv0C,cACE,OAAOC,KAAKg0C,QAGdj0C,uBACE,MAAMg1C,EAAM,GAEZ,IAAK,IAAIj7C,EAAI,EAAGA,GAAKkG,KAAK8zC,SAAUh6C,IAClC,IAAK,IAAImL,EAAI,EAAGA,GAAKjF,KAAKi0C,cAAehvC,IACvC,IAAK,IAAI3J,EAAI,EAAGA,GAAK0E,KAAKg1C,iBAAkB15C,IAAK,CAC/C,MAAMoyC,EAAQ1tC,KAAK+sC,OAAOjzC,GAAGmL,GAAG3J,GAClB,MAAToyC,GAGLqH,EAAI18C,KAAK,CACP48C,QAAiBvH,EAAMP,OAAO,GAC9B+H,YAAaxH,EAAMN,YAAY,GAC/B+H,QAAiBzH,EAAMP,OAAO,GAC9BiI,YAAa1H,EAAMN,YAAY,GAC/BiI,OAAkB3H,EAAMV,QAMhC,MAAO,kBAAkBxqB,KAAKC,UAAUsyB,4XAc1Ch1C,eACE,MAAMg1C,EAAM,GAEZ,IAAK,IAAIj7C,EAAI,EAAGA,GAAKkG,KAAK8zC,SAAUh6C,IAClC,IAAK,IAAImL,EAAI,EAAGA,GAAKjF,KAAKi0C,cAAehvC,IACvC,IAAK,IAAI3J,EAAI,EAAGA,GAAK0E,KAAKg1C,iBAAkB15C,IAAK,CAC/C,MAAMoyC,EAAQ1tC,KAAK+sC,OAAOjzC,GAAGmL,GAAG3J,GAClB,MAAToyC,GAELqH,EAAI18C,KAAK,GAAGq1C,EAAMP,OAAO,MAAMO,EAAMN,YAAY,MAAMM,EAAMP,OAAO,MAAMO,EAAMN,YAAY,MAAMM,EAAMV,MAAM3Q,QAAQ,KAAM,QAKlI,OAAO0Y,EAAInyC,KAAK,MAGlB7C,YACE,MAAMg1C,EAAM,GAEZ,IAAK,IAAIj7C,EAAI,EAAGA,GAAKkG,KAAK8zC,SAAUh6C,IAClC,IAAK,IAAImL,EAAI,EAAGA,GAAKjF,KAAKi0C,cAAehvC,IACvC,IAAK,IAAI3J,EAAI,EAAGA,GAAK0E,KAAKg1C,iBAAkB15C,IAAK,CAC/C,MAAMoyC,EAAQ1tC,KAAK+sC,OAAOjzC,GAAGmL,GAAG3J,GAClB,MAAToyC,GAELqH,EAAI18C,KAAKq1C,GAKf,OAAOqH,EAGTh1C,WAAWs0C,GACT,OAAOhD,GAAoBgD,EAAYr0C,KAAKsxC,UAAUc,KAAMpyC,KAAKs1C,aAAc,GAAI,IAGrFv1C,UAAUs0C,GACR,OAAOhD,GAAoBgD,EAAYr0C,KAAKsxC,UAAUx4C,KAAMkH,KAAKu1C,YAAa,EAAG,IAGnFx1C,WAAWs0C,GACT,MAAO,CACLhD,GAAoBgD,EAAYr0C,KAAKsxC,UAAUsC,MAAO5zC,KAAKw1C,aAAc,EAAG,IAC5EnE,GAAoBgD,EAAYr0C,KAAKsxC,UAAUsC,MAAO5zC,KAAKy1C,aAAc,EAAG,KAIhF11C,gBAAgBs0C,GAKd,MAAO,CACLhD,GAAoBgD,EAAYr0C,KAAKsxC,UAAUmB,IAAKzyC,KAAK01C,mBAAoB,EAAG,KAChFrE,GAAoBgD,EAAYr0C,KAAKsxC,UAAUmB,IAAKzyC,KAAK21C,mBAAoB,EAAG,MAIpF51C,gBAAgBs0C,GACd,OAAOhD,GAAoBgD,EAAYr0C,KAAKsxC,UAAUuC,KAAM7zC,KAAK41C,WAAY,GAAI,IAInF71C,oBAAoBs0C,GAClB,MAAM7D,EAAO,IAAIjD,GAAGkD,KAAKzwC,KAAK61C,0BAA2B71C,KAAK81C,iBACxDpF,EAAU2D,EAAW1D,IAAIH,GAEzBv2C,EAAS,IAAIszC,GAAGsD,IACtBtD,GAAGwI,cAAcrF,EAAS1wC,KAAKsxC,UAAUjhC,MAAOpW,EAAQszC,GAAGyI,kBAE3D,MAAMC,OAACA,EAAMC,OAAEA,GAAU3I,GAAG4I,UAAUl8C,GAMtC,OAHAA,EAAOsB,SACPm1C,EAAQn1C,SAED,CACL,CACE,EAAI/B,KAAK48C,MAAM,GAAMH,EAAOx/C,EAAI,IAChC,EAAI+C,KAAK48C,MAAM,GAAMH,EAAOI,EAAI,KAElCH,irBCnWmC19C,wGAAAA,qEAN5B8qC,GAAS,qEAMmBA,mOCGzB9qC,qCAAyBA,yCAAoDA,mMAA7EA,iEAAyBA,8CAAoDA,2IARnFkM,EAAWtB,yBAENkzC,EAAmB,sBACnBC,EAAiB,eACjBC,GAAU,0MAGe9xC,EAAS,yHCoDjD,SAAS+xC,GAASr2C,GACd,MAAM5E,EAAI4E,EAAI,EACd,OAAO5E,EAAIA,EAAIA,EAAI,ECrBvB,SAASk7C,GAAK96C,GAAMmF,MAAEA,EAAQ,EAACD,SAAEA,EAAW,IAAG0F,OAAEA,EAASmwC,GAAW,IACjE,MAAMpxC,GAAKqxC,iBAAiBh7C,GAAMi7C,QAClC,MAAO,CACH91C,MAAAA,EACAD,SAAAA,EACA0F,OAAAA,EACAE,IAAKtG,GAAK,YAAYA,EAAImF,GAGlC,SAASuxC,GAAIl7C,GAAMmF,MAAEA,EAAQ,EAACD,SAAEA,EAAW,IAAG0F,OAAEA,EAASiwC,GAAQhgD,EAAEA,EAAI,EAAC4/C,EAAEA,EAAI,EAACQ,QAAEA,EAAU,GAAM,IAC7F,MAAMz4C,EAAQw4C,iBAAiBh7C,GACzBm7C,GAAkB34C,EAAMy4C,QACxBG,EAAgC,SAApB54C,EAAM44C,UAAuB,GAAK54C,EAAM44C,UACpDC,EAAKF,GAAkB,EAAIF,GACjC,MAAO,CACH91C,MAAAA,EACAD,SAAAA,EACA0F,OAAAA,EACAE,IAAK,CAACtG,EAAGsvC,IAAM,sBACPsH,gBAAwB,EAAI52C,GAAK3J,SAAS,EAAI2J,GAAKi2C,yBACrDU,EAAkBE,EAAKvH,KAGrC,SAASwH,GAAMt7C,GAAMmF,MAAEA,EAAQ,EAACD,SAAEA,EAAW,IAAG0F,OAAEA,EAASiwC,IAAa,IACpE,MAAMr4C,EAAQw4C,iBAAiBh7C,GACzBi7C,GAAWz4C,EAAMy4C,QACjBM,EAASC,WAAWh5C,EAAM+4C,QAC1BE,EAAcD,WAAWh5C,EAAMk5C,YAC/BC,EAAiBH,WAAWh5C,EAAMo5C,eAClCC,EAAaL,WAAWh5C,EAAMs5C,WAC9BC,EAAgBP,WAAWh5C,EAAMw5C,cACjCC,EAAmBT,WAAWh5C,EAAM05C,gBACpCC,EAAsBX,WAAWh5C,EAAM45C,mBAC7C,MAAO,CACHj3C,MAAAA,EACAD,SAAAA,EACA0F,OAAAA,EACAE,IAAKtG,GACD,6BAAY5G,KAAK8vB,IAAQ,GAAJlpB,EAAQ,GAAKy2C,aACvBz2C,EAAI+2C,oBACC/2C,EAAIi3C,uBACDj3C,EAAIm3C,mBACRn3C,EAAIq3C,sBACDr3C,EAAIu3C,yBACDv3C,EAAIy3C,4BACDz3C,EAAI23C,yIC5E8Bv/C,yCAD1D,0BAA4BA,2JAC8BA,uDAD1D,0BAA4BA,mGAR9BkM,EAAWtB,aAEN3H,EAAO,eACP2C,EAAQ,qBACR65C,EAAgB,qBAChBC,EAAgB,uLAIFxzC,EAAS,0RCDalM,0IAAAA,yIAFjCA,KAAM5B,+BAAU4B,KAAM2/C,mBAAY3/C,KAAM4F,qBAAc5F,KAAM4/C,gDAA5D5/C,KAAM5B,+BAAU4B,KAAM2/C,+BAAY3/C,KAAM4F,mCAAc5F,KAAM4/C,sHADrE5/C,KAAM5B,gJADuD4B,sOAAAA,8HALvDy0C,iBACAuJ,GAAU,eACV6B,GAAW,gSCgBP7/C,KAAY,8DAAOA,uEAAnBA,KAAY,uBAAOA,uDAF7BA,2FAPG,0BAA4BA,+EAEzBA,+BAGAA,uDAHAA,wBAGAA,MAENA,8EAPG,0BAA4BA,+HATzB8/C,EAAQ,mBACRC,EAAc,qBACdC,kBACAC,cAEAC,EAAU,aACVt6C,EAAQ,+5BCmCO5F,eAAAA,eAAqBA,iBAAAA,eAAwBA,kBAAAA,kJAK3CA,eAAAA,eAA+BA,qBAAAA,eAAuCA,KAAQkB,yBAARlB,KAAQkB,iBACxElB,qBAAAA,2UAZtBA,oCAAwBA,uRAMVA,8CAAqBA,gDAAwBA,mEAK3CA,oDAA+BA,oDAAuCA,KAAQkB,oDACxElB,oDAZtBA,iEAAwBA,oGAA8BsI,SAAStI,8GAATsI,SAAStI,6IAjCrEkM,EAAWtB,QAgBbu1C,EACAC,gBAXOC,EAAe,kBACfC,EAAa,0BACbC,EAAqB,cACrB9L,iBACAuJ,GAAU,eACV6B,GAAW,YACXC,EAAQ,mBACRC,EAAc,eACdS,kBACAP,mdAKRQ,KAAqBJ,2DACrBF,EAAcL,wBACdM,EAAoBL,uBAEhBS,GAAYV,GAAUC,QACrBI,EAAcK,EAAQP,GAAaH,WACnCM,EAAoBI,EAAQP,GAAaF,mDAWhB7zC,EAAS,qBAEhBuoC,wBAAqBuJ,wBAAwB6B,wBAK3CM,sDAA+BC,qEAAuCI,EAAQt/C,YAARs/C,EAAQt/C,8BACxE++C,gBAVgB/zC,EAAS,kBAFsDA,EAAS,0oBCN/D,IAAhBlM,6RAaJA,OAAgBA,MAAQkB,OAAO,6NAbpDlB,kBAaAA,wCAbyC,IAAhBA,sFAaJA,OAAgBA,MAAQkB,OAAO,qIAzClEw/C,EACArM,0CAFO4L,EAAc,oIAItB5L,EAASqM,GAAarwC,yBAErBoV,QAAQovB,WAAWR,GACfA,GAAU4L,EAAc5L,EAAOnzC,QAC/BzC,OAAOujB,OAAOqyB,GAAQx1C,SAAQw4C,IAC1BA,EAAIsJ,QAAS,EACNtJ,SAEXhD,EAAO4L,GAAaU,QAAS,MACtBtM,GAAU4L,GAAe5L,EAAOnzC,QACvCukB,QAAQ+K,MAAM,wFAKlByvB,iBAIAA,oDAcYS,+FCnCpB,MAAME,GAAmB,GAgBzB,SAASnuC,GAAS9Q,EAAOiM,EAAQ7P,GAC7B,IAAI8xB,EACJ,MAAMhC,EAAc,GACpB,SAAS/rB,EAAI++C,GACT,GAAI7hD,EAAe2C,EAAOk/C,KACtBl/C,EAAQk/C,EACJhxB,GAAM,CACN,MAAMixB,GAAaF,GAAiB1/C,OACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI0sB,EAAY3sB,OAAQC,GAAK,EAAG,CAC5C,MAAM4P,EAAI8c,EAAY1sB,GACtB4P,EAAE,KACF6vC,GAAiB/gD,KAAKkR,EAAGpP,GAE7B,GAAIm/C,EAAW,CACX,IAAK,IAAI3/C,EAAI,EAAGA,EAAIy/C,GAAiB1/C,OAAQC,GAAK,EAC9Cy/C,GAAiBz/C,GAAG,GAAGy/C,GAAiBz/C,EAAI,IAEhDy/C,GAAiB1/C,OAAS,IA0B1C,MAAO,CAAEY,IAAAA,EAAK6J,OArBd,SAAgBpN,GACZuD,EAAIvD,EAAGoD,KAoBWxC,UAlBtB,SAAmBb,EAAKyiD,EAAahjD,GACjC,MAAMyvB,EAAa,CAAClvB,EAAKyiD,GAMzB,OALAlzB,EAAYhuB,KAAK2tB,GACU,IAAvBK,EAAY3sB,SACZ2uB,EAAOjiB,EAAM9L,IAAQ/D,GAEzBO,EAAIqD,GACG,KACH,MAAMmN,EAAQ+e,EAAY3jB,QAAQsjB,IACnB,IAAX1e,GACA+e,EAAYpd,OAAO3B,EAAO,GAEH,IAAvB+e,EAAY3sB,SACZ2uB,IACAA,EAAO,wlBCId7vB,OAAaA,g1CAUDA,6BAA0BA,0BAAuBA,iiEACzDA,QAEKA,8sBAd0DA,aAQvEA,6IAVsBA,6PAUtBA,+TA5DU89C,EAAmB,sBACnBC,EAAiB,oBAEjBsC,EAAe,kBACfC,EAAa,mBAEbL,EAAc,cAEdO,GAAU,YACVV,EAAQ,mBACRC,EAAc,0BAEdQ,EAAqB,gBAErBvC,GAAU,YAEVvJ,kBAEAoL,GAAW,eAEXmB,GAAW,gBACXC,GAAY,KAEnBC,GAAU,MAQVC,SAGJz2C,YACQ02C,EAAkBl9C,SAASm9C,KAAKz7C,MAAM07C,SAC1CH,OAEQj9C,SAASm9C,KAAKz7C,MAAM07C,SADpBJ,EAC+B,SAEAE,4nBAdvCF,GAAWA,GACPF,GACAG,KAiBah6C,IACN,WAAXA,EAAEo6C,WAAqBL,GAAU,mqMCvDlC,SAASM,GAAM9wC,EAAS+wC,GAC7B,IAAI5wC,EAAO,CAAC,WAAY,UAAW,WAAWiE,OAAO2sC,GACrD,MAAMvxC,EAAO,GACb,IAAK,MAAMvK,KAAOlH,OAAOoS,KAAKH,GACtBG,EAAK6wC,SAAS/7C,KAClBuK,EAAKvK,GAAO+K,EAAQ/K,IAGxB,OAAOuK,EAuBF,SAASyxC,GAAkBC,GAChC19C,SAASm9C,KAAKz7C,MAAMi8C,aAAeD,EAAU,EAAI,GAAGA,MAAc,KAY7D,SAASE,KACd,MAAMC,EA5BD,WACL,IAAIC,EAAY99C,SAASC,cAAc,OAEvC69C,EAAUp8C,MAAMq8C,SAAW,WAC3BD,EAAUp8C,MAAMs8C,IAAM,UACtBF,EAAUp8C,MAAMu8C,MAAQ,OACxBH,EAAUp8C,MAAM+4C,OAAS,OACzBqD,EAAUp8C,MAAM07C,SAAW,SAC3Bp9C,SAASm9C,KAAKh+C,YAAY2+C,GAC1B,MAAMD,EAAiBC,EAAUI,YAAcJ,EAAUK,YAEzD,OADAn+C,SAASm9C,KAAK19C,YAAYq+C,GACnBD,EAiBgBO,GAEjBC,EAAer+C,SAASs+C,iBAC5B,qDACA,GACIC,EAAcF,EAChB7tC,SAAS6tC,EAAa38C,MAAMi8C,cAAgB,EAAG,IAC/C,EAhBG1/C,QAAS+B,SAASm9C,KAAKgB,YAAclgD,OAAOugD,YAmBjDf,GAAkBc,EAAcV,GA4BpC,SAASY,GAAMC,GACb,IAAIvkD,EAAGw/C,EAAGh1C,EAAM,GAChB,GAAI+5C,EACF,GAAmB,iBAARA,EACT,GAAI76C,MAAMyJ,QAAQoxC,GAChB,IAAKvkD,EAAI,EAAGA,EAAIukD,EAAI1hD,OAAQ7C,IACtBukD,EAAIvkD,KAAOw/C,EAAI8E,GAAMC,EAAIvkD,OAC3BwK,IAAQA,GAAO,KACfA,GAAOg1C,QAIX,IAAKx/C,KAAKukD,EACJA,EAAIvkD,KAAOw/C,EAAI8E,GAAMtkD,MACvBwK,IAAQA,GAAO,KACfA,GAAOg1C,OAIW,kBAAR+E,GAAsBA,EAAI/3C,OAC1ChC,IAAQA,GAAO,KACfA,GAAO+5C,GAGX,OAAO/5C,EAGF,SAASg6C,KACd,IAAW5kD,EAAPkD,EAAI,EAAM0H,EAAM,GACpB,KAAO1H,EAAI6P,UAAU9P,SACfjD,EAAI0kD,GAAM3xC,UAAU7P,SACtB0H,IAAQA,GAAO,KACfA,GAAO5K,GAGX,OAAO4K,EASF,SAASi6C,GAAqBrjD,EAAWsjD,EAAmB,IACjE,MAAMC,EAAS,CACb,QAAS,OAAQ,SAAU,QAAS,SAAS,SAC7C,mBAAoB,kBAAmB,SACvC,MAAO,OAAQ,QACf,UAAW,WAAY,QACvB,WAAY,QAAS,cAAe,WAAY,YAAa,aAAc,aAAc,YAAa,YAAa,WAAY,UAAW,oBAAqB,mBAAoB,SAAU,QAC7L,OAAQ,UAAW,YAAa,YAAa,YAAa,WAAY,OACtE,cAAe,WAAY,YAAa,aACxC,cAAe,eAAgB,cAAe,cAAe,YAAa,gBAAiB,aAAc,eAAgB,oBAAqB,wBAC3ID,GAGL,SAASE,EAAQ97C,IjBqiBnB,SAAgB1H,EAAWmF,GACvB,MAAMvF,EAAYI,EAAUE,GAAGN,UAAUuF,EAAMqC,MAC3C5H,GACAA,EAAUe,QAAQvB,SAAQN,GAAMA,EAAGqG,KiBviBvCs+C,CAAOzjD,EAAW0H,GAGpB,OAAO/D,IACL,MAAM+/C,EAAc,GAEpB,IAAK,IAAIhiD,EAAI,EAAGA,EAAI6hD,EAAO9hD,OAAQC,IACjCgiD,EAAYtjD,KAAK8E,EAAOvB,EAAM4/C,EAAO7hD,GAAI8hD,IAG3C,MAAO,CACLhhD,QAAS,KACP,IAAK,IAAId,EAAI,EAAGA,EAAIgiD,EAAYjiD,OAAQC,IACtCgiD,EAAYhiD,2JC/EXnB,OAEKA,8TAZUA,YAChBA,aACCA,mDAGKA,MAAaA,8RALHA,wBAChBA,0BACCA,8EAGKA,MAAaA,4NAbpBA,sCANiBA,aACfA,kDAGKA,MAAaA,uUAJHA,0BACfA,6EAGKA,MAAaA,uYAuBpBA,wCAAAA,4aApBFA,wCAAAA,qGATFA,mXA7CGojD,EAAgBN,GAAqB36C,OAgBvCk7C,SAfFC,EAAY,cAEHl7C,GAAS,YACTwE,GAAQ,eACRyD,YACA60B,GAAQ,YACRqe,eACAC,GAAW,WACXv8C,EAAO,kBACPkQ,EAAO,eACPssC,GAAU,WACVxgD,EAAO,aACP2C,EAAQ,aACRjE,EAAQ,gBACR+hD,cAEAC,KAERA,IACD/9C,EAAM,sBAAsBA,GAGzB29C,IACIA,EAAPpsC,EAAe,UAAoB,iBAG/B3V,EAAQggD,GAAM9wC,GAAU,QAAS,WAAY,QAAS,QAAS,6iBAGlEkzC,EAAYlzC,EAAQ,uCAEpBwvC,EAAU2C,GACXS,GACCpe,MAAAA,GACDA,GAAS,+BACTwe,KAAcA,aAAsBxe,SAAeue,EAAU,WAAa,MAAMF,MAChFtgD,UAAcA,MACd2J,GAAQ,aACPxE,OAAAA,wBAGAy7C,EAAmB3e,EAAQ,QAAU,qGA0B3Bme,wSCnDYrjD,6BAA2BA,KAAeoK,KAAK,oOAA/CpK,sKAlBnBojD,EAAgBN,GAAqB36C,GAErC3G,EAAQggD,GAAM9wC,eACTzN,eACA6gD,KAEPC,GAAkBD,EAAW,qBAAuB,oBAMpD7gD,GACF8gD,EAAelkD,kBAAkBoD,weCsPnB4/C,GAAK,gBAAiB7iD,mBADxBA,mDARIA,kBACTA,iEAgBA6iD,IAAMmB,iBAAkBhkD,MAAW,OAAQA,iIAbrCA,sBACAA,mBACHA,uBACIA,gJAEA6iD,GAAK,gBAAiB7iD,qDADxBA,2CARIA,mCACTA,6BAgBA6iD,IAAMmB,iBAAkBhkD,MAAW,OAAQA,0EAlBtB/B,EAAG+B,KAAc69C,EAAE79C,KAAesI,SAAUtI,MAAQA,+CAiBnDsI,SAAUtI,MAAQA,kEAjBnB/B,EAAG+B,KAAc69C,EAAE79C,KAAesI,SAAUtI,MAAQA,mCAiBnDsI,SAAUtI,MAAQA,wJAnB9CA,OAAcA,gFAAdA,OAAcA,8LAzPbikD,GAAY,QAmNVC,GAAkB,mEApMFpB,GAAqB36C,aAEvCm7C,EAAY,cAELxY,gBACAqZ,GAAY,eACZC,GAAW,eACX97C,EAAW,yBACX+7C,EAAmB/7C,iBACnBg8C,GAAa,WACbrhD,EAAO,cACP6D,iBACAy9C,EAAa,gBACbC,GAAW,cACXC,aACAC,eACAC,wBAEAC,6BAEAC,EAAgB,sBAChBC,EAAiB,yBACjBC,EAAoB,wBACpBC,EAAmB,YACnB9G,GAAO,aACP+G,EAAS,wBACTC,GAAiB,4BACjBC,GAAwB,oBACxBC,EAAgB,oBAChBC,gBACAC,eACArD,EAAW,kBACXsD,YACA1tC,KACG2pC,GAAM9wC,GAAU,SAAU,YAAa,WAAY,WAAY,mBAAoB,aAC/F,OAAQ,SAAU,aAAc,SAAU,UAAW,SAAU,WAAY,WAAY,gBACvF,iBAAkB,oBAAqB,mBAAoB,OAAQ,SAAU,iBAC7E,wBAAyB,OAAQ,WAAY,QAAS,iBAIpD80C,EACAC,EAGAC,EACAC,EACAC,EACAvF,EATAwF,GAAY,EACZC,GAAa,EAGbC,EAAcjb,EACdkb,EAAiBH,EpBwlBvB,IAAmBtnD,WoB1iBR0nD,IAELP,GACAA,EAAQhiD,YAC4B,mBAA7BgiD,EAAQhiD,WAAWwiD,OAE1BR,EAAQhiD,WAAWwiD,iBAIdz4C,QAEL+3C,EAAqBthD,SAASiiD,oBACvB9kC,GACPmkC,EAAqB,KAGvBC,EHhHG,WACL,MAAM7/C,EAAQzD,OAASA,OAAOi8C,iBAAiBl6C,SAASm9C,KAAM,MAAQ,GAEtE,OAAO3sC,SAAU9O,GAASA,EAAMwgD,iBAAiB,kBAAqB,EAAG,IG6GhDC,GACvBvE,KACkB,IAAdmC,KACF//C,SAASm9C,KAAKiC,UAAYT,GAAK3+C,SAASm9C,KAAKiC,UAAW,iBAGxDW,QACF6B,GAAa,YAGNQ,KACHd,IAEoC,mBAA7BA,EAAmBU,OAC1Bf,GAEAK,EAAmBU,QAGrBV,EAAqB,eAIhBvjD,KACPqkD,cAGOphB,QACH+e,IAAa,SAETsC,MAA8BC,eADT,qBAI3BtiD,SAASm9C,KAAKiC,UAAYp/C,SAASm9C,KAAKiC,UACrCzf,QAAQ0iB,EAAyB,KACjC3iB,OAGL0iB,KACArC,GAAYjjD,KAAKC,IAAI,EAAGgjD,GAAY,GAEpCtC,GAAkB8D,UAlGpB/6C,QACMogC,IACFr9B,IACAo4C,GAAY,GAGS,mBAAZpB,GACTA,IAGEoB,GAAa1B,GACf8B,OpBukBa1nD,OoBlkBO,mBAAXmmD,GACTA,IAGFziD,KACI4jD,GACF3gB,MpB6jBF16B,IAAwB7K,GAAGC,WAAWC,KAAKtB,GAJ/C,SAAqBA,GACjBiM,IAAwB7K,GAAGqM,aAAanM,KAAKtB,GoBtjB/CkoD,OACM3b,IAAWib,IACbt4C,IACAo4C,GAAY,GAGV1B,GAAa0B,IAAcG,GAC7BC,IAGFF,EAAcjb,EACdkb,EAAiBH,MA0HgB,IAA/B5D,EAAS/3C,QAAQ,WACnBk7C,EAAgB,IACZG,IAAYF,EAAgB,KAGA,IAA9BpD,EAAS/3C,QAAQ,UACnBk7C,GAAiB,IACbG,IAAYF,EAAgB,KAID,IAA7BpD,EAAS/3C,QAAQ,SACnBm7C,GAAiB,IACbE,IAAYH,EAAgB,KAGE,IAAhCnD,EAAS/3C,QAAQ,YACnBm7C,EAAgB,IACZE,IAAYH,EAAgB,IAGlC/E,EAAewC,GAAK,QAAS,OAAQiC,8sCAhClC5E,EAAU2C,GAAKqB,GAAiBZ,aAErBrgD,KAASA,0BACcmhD,4BACEE,EACnCoC,aAAcpB,EACdqB,oBAAqBpB,EACrBqB,cAAe/uC,YACLoqC,KAAaA,mDAvDE96C,MACvBA,EAAEhE,SAAWwiD,MACfx+C,EAAE0xB,mBACGiS,IAAW0Z,eAIVqC,EAAenB,EAAUA,EAAQhiD,WAAa,KAChDmjD,GAAgB1/C,EAAEhE,SAAW0jD,GAAgB//C,GAC/CA,EAAOK,gBAMXy+C,EHjHG,SAAsBziD,KAAW6P,GAGtC,OAFA7P,EAAO4B,oBAAoBiO,GAEpB,IAAM7P,EAAO6B,uBAAuBgO,GG8GpB8zC,CAAa5iD,SAAU,WAAWU,IACjDA,EAAMe,KAAqB,WAAdf,EAAMe,KACrBmB,EAAOlC,MAIX+/C,gBAIAC,IAEIgB,GACFA,IAGEV,GACFjjD,KAEFijC,KACI4gB,IACFD,GAAY,QAEdC,GAAa,aAGkB3+C,GAC/Bw+C,EAAoBx+C,EAAEhE,0FAoD0BuiD,miBCxPzB1lD,YAAcA,oOAAdA,uBAAcA,iJAVjCojD,EAAgBN,GAAqB36C,aAEvCm7C,EAAY,YAGV9hD,EAAQggD,GAAM9wC,6IAEjBwvC,EAAU2C,GAAKS,EAAW,6YCcxBtjD,wCAAAA,oGAY2BA,2FADdA,qEAFFA,OAAAA,yDAGgBA,4BADdA,8GAZXA,6FAOkB,mBAAXA,2EAAW,mBAAXA,4GATWA,YAAcA,8cAAdA,wBAAcA,wKAjBjCojD,EAAgBN,GAAqB36C,aAEvCm7C,EAAY,cAELx8C,qBACAigD,EAAiB,qBACjBC,EAAW,iBACX32C,WAEL7O,EAAQggD,GAAM9wC,gSAEjBu2C,EACmB,iBAAbD,EAAwBpgC,OAAOC,aAAamgC,GAAYA,uBAE9D9G,EAAU2C,GAAKS,EAAW,oPCLJtjD,YAAcA,oOAAdA,uBAAcA,iJAVjCojD,EAAgBN,GAAqB36C,aAEvCm7C,EAAY,YAGV9hD,EAAQggD,GAAM9wC,6IAEjBwvC,EAAU2C,GAAKS,EAAW,+NCkD1BtjD,wCAAAA,0DAGmDA,wCAAAA,8JAArCA,6DAA2BA,0GACAA,gIAD3BA,sTALOA,qtBADRA,YAAgBA,iIAAhBA,8JA1CZ4X,EACAsvC,EACAC,EACAC,EAAkB,UAClBC,EAAkB,KAElBvc,GAAS,gCAsBXA,GAAUA,mBAIVA,GAAS,GACTqc,cAGeG,OACfxc,GAAS,GACToc,EAAOI,IA9Bep6C,OACX/B,UAASC,EAAS0T,SAC3BlH,EAAkB1K,EAAO0K,SAAmB,QAC5CwvC,EAAkBl6C,EAAOk6C,iBAAmB,eAC5CC,EAAkBn6C,EAAOm6C,iBAAmB,MAE5CH,EAAYK,KACTr6C,EAAOg6C,SAAcK,QAAuBA,GAC7Cn8C,GAAQ,IAEV+7C,QACGj6C,EAAOi6C,sBACRroC,EAAO,eAGTgsB,GAAS,sHCpCR,MAAM0c,GAAe/0C,GAAS,MCDxBg1C,GAAmB5+C,GAAQA,EAAIg7B,QAAQ,gBAAgB9yB,GAAK6V,OAAOC,aAAa9V,EAAEhI,WAAW,GAAK,2FC6FtG/I,MAAEunD,+EAAFvnD,MAAEunD,kKAFavnD,MAAE0nD,mFACF1nD,MAAE2nD,UAAF3nD,MAAE2nD,uHADF3nD,MAAE0nD,4KANjBH,MAAO,SAAcG,gBAAyCC,QAAS3nD,OACvEunD,MAAO,UAAaG,gBAA8EC,eAClGJ,MAAO,WAAYG,iBAA8EC,4OAFjGJ,MAAO,SAAcG,gBAAyCC,QAAS3nD,OACvEunD,MAAO,UAAaG,gBAA8EC,eAClGJ,MAAO,WAAYG,iBAA8EC,6yBANrE3nD,oGAAAA,uUAlFpB4nD,EAAApgD,MAAAA,KAAAogD,oBAAAC,EAAAC,EAAAC,EAAAC,2RAUTC,GACJC,OAAW,SACXC,UAAW,iBAMTC,EADAC,EAAwB,YAIbC,QAAcziC,gDACtBwiC,EAAczkB,OAAO1iC,QAAU,cAClCukB,QAAQovB,IAAI,cAIThvB,IAASoiC,EAAYC,QAAUriC,IAASoiC,EAAYE,sBACvD1iC,QAAQovB,IAAI,wBAIRpzC,QAAe2mD,GACnBxwC,QAAiBiO,IAASoiC,EAAYE,UAAY,oDAAsD,iBACxGf,gBAAiB,SAElBF,cACCC,kBAEF1hC,QAAQovB,IAAIpzC,GAEPokB,IAASoiC,EAAYE,kBAClBI,EAAchN,SAGtB91B,QAAQovB,IAAI0T,EAAchU,cAEpBA,EAAkB8T,EAAczkB,OAAO95B,MAAM,MAAMuF,KAAIm5C,UACpDC,EAAIC,EAAKC,EAAIC,EAAKtS,EAAOC,EAAOC,KAAUtmC,GAAQs4C,EAAK1+C,MAAM,eACpE2b,QAAQovB,KAAK4T,GAAAA,EAAIC,IAAAA,EAAKC,GAAAA,EAAIC,IAAAA,EAAKtS,MAAAA,EAAOC,MAAAA,EAAOC,MAAAA,KAG3C7B,QAAc8T,EAAIE,GAAIt5C,KAAIlO,GAAW,KAANA,EAAW,KAAuBA,EDpD7B0iC,QAAQ,gBAAgB9yB,GAAK6V,OAAOC,aAAa9V,EAAEhI,WAAW,GAAK,WCqDvG6rC,aAAc8T,EAAKE,GAAKv5C,KAAIlO,GAAKuT,SAASvT,KAC1CqzC,OAAc8B,EAAOC,EAAOC,GAAOnnC,KAAIlO,GAAKuT,SAASvT,SAGzDskB,QAAQovB,IAAIN,GAEZgU,EAAcM,eAAetU,+EAM7B8T,EAAgBE,EAAchU,OAAOllC,KAAK2mC,iBACjCE,EAAMC,YAAEA,EAAWC,OAAEA,EAAMC,YAAEA,EAAWC,MAAEA,EAAKC,MAAEA,EAAKC,MAAEA,GAASR,SAEtEyR,GAA2B,OAAXvR,EAAkB,GAAKA,GAASC,EAChDsR,GAA2B,OAAXrR,EAAkB,GAAKA,GAASC,EAChDC,EAAOC,EAAOC,GACdpsC,KAAK,QACNA,KAAK,sBAUyBi+C,yBAI4B,MAAjBE,MACgB,MAAjBA,GAAyD,IAAhCF,EAAczkB,OAAO1iC,WAA6BonD,GAAcziC,KAAMoiC,EAAYC,aAC3F,MAAjBK,GAAyD,IAAhCF,EAAczkB,OAAO1iC,WAA6BonD,GAAcziC,KAAMoiC,EAAYE,wOCisBnInoD,MAAS4T,WACR5T,MAAS8oD,YAAc9oD,MAAS8oD,YAAYvB,MAAQvnD,MAASunD,mKAnBhEvnD,qJAsC6BA,2CAAAA,qVA/BpCA,2BAALkB,+EAwBGlB,KAAuB,GAAKA,MAAkBkB,OAASlB,qNAxBrDA,cAALkB,kIAAAA,iCAwBGlB,KAAuB,GAAKA,MAAkBkB,OAASlB,oGAxB1DkB,iKAEOlB,iFAAAA,6SAWMA,MAAS8oD,0UATe9oD,QAAMA,MAAiB,WAAa,uQAApCA,QAAMA,MAAiB,WAAa,8IAYxDA,MAASunD,6FAATvnD,MAASunD,oEAFTvnD,MAAS8oD,YAAYvB,6FAArBvnD,MAAS8oD,YAAYvB,oEAbjCvnD,QAAaA,MAAwB,GAAKA,MAAIA,iFAA9CA,QAAaA,MAAwB,GAAKA,MAAIA,0NAyB7CA,MAAkBkB,OAASlB,0MAA3BA,MAAkBkB,OAASlB,oFAlClCA,yDAOEA,OAAqBA,MAAkBkB,OAAS,IA8B3ClB,oJAnDFA,KAAiBA,KAAiB,yDACtCA,KAAUA,KAAU,yBACVA,KAAoB,KAAO,kGAgBjCA,KAAoBA,KAAoB,2BAAuBA,MAAW,GAAK,4DAvBjFA,KAAYA,KAAY,YAC/BA,MAAY,yBAA2B,YACvCA,MAAY,aAAe,yCAAsCA,4DAWpDA,oGAmDSA,sCAlDXA,mBACAA,qBACEA,mBACFA,sBACGA,4CAbLA,KAAiBA,KAAiB,oFACtCA,KAAUA,KAAU,wCACVA,KAAoB,KAAO,iMAM7BA,WAAAA,OAMTA,qPAIKA,KAAoBA,KAAoB,2BAAuBA,MAAW,GAAK,sFAvBjFA,KAAYA,KAAY,YAC/BA,MAAY,yBAA2B,YACvCA,MAAY,aAAe,yCAAsCA,gKAjnBzD+oD,GAAmBC,EAAaC,OAMnCC,EALuB,mBAAhBF,GACTvjC,QAAQ+K,MACN,mBAAqBw4B,EAAc,eAAiBC,OAKtDC,EAAiBF,EAAYC,SACtBz4B,GACP/K,QAAQC,KACN,mDACEujC,EACA,cACAD,OAGFvnD,EAASynD,SACTznD,MAAAA,IACFA,EAAS,IAEW,iBAAXA,IACTA,EAASA,EAAO8T,YAEX9T,6DA1JE0nD,wBAGAC,GAAiB,qBAGjBC,wBACAC,EAAoBD,qBACpBE,oBAEAC,WAAyB51C,UAC9BA,MAAAA,EACK,GAEFy1C,EAAiBz1C,EAAKy1C,GAAkBz1C,wBAGtC61C,WAA4B71C,UACjCA,MAAAA,EACK,GAEF01C,EAAoB11C,EAAK01C,GAAqBE,EAAc51C,sBAG1D81C,WAAyB91C,UAC9BA,MAAAA,EACKA,EAEF21C,EAAiB31C,EAAK21C,GAAkB31C,6BAGtC+1C,WAAiCC,UACnCA,yBAGEC,WAA6BC,UAC/BA,oBAGEC,WAAwBC,EAAiBC,UAC3C,gBAEEC,WAAoBD,4BAGpBE,GAAqB,4BACrBC,EAAwB,2BACxBC,EAAuB,YAGvB9hD,EAAQ,qBAGR+hD,GAAiB,oBAIjBC,EAAgB,mCAGhBC,gBAGAlH,qBAIAmH,cAEAC,WAEAzmD,YAEA67C,wBAEA6K,wBAGAC,gBAGAC,GAAY,gBAGZC,GAAY,eAGZtH,GAAW,YAEXxsC,GAAQ,mBAKR+zC,YACAppD,WAGLqpD,EAAW,iBAAmBhqD,KAAK48C,MAAsB,IAAhB58C,KAAKiqD,cAGhDhlD,EACAilD,EAKA5mD,EAIA6mD,EAIAC,EAVAC,GAAS,EACTC,GAAkB,EAElBC,EAAqB,EAIrBC,cA6CKC,EAAkB73C,UAGlBm1C,GAAmBS,EAAe51C,YAGlC83C,EAAqB93C,SAEtBg2C,EAAWb,GAAmBU,EAAkB71C,OAClDnS,EAASsnD,GAAmBY,EAAuBC,UACvDnoD,EAASA,EAAOg0B,cAAcmO,OAC1B5sB,GACFyO,QAAQovB,IACN,wBACEpzC,EACA,gBACAuoB,KAAKC,UAAUrW,IAGdnS,WAGAkqD,QACHC,EACA50C,IACF40C,EAASvpD,YAAYD,MACrBqjB,QAAQovB,IAAI,2BACZpvB,QAAQovB,IAAI,UAAY7qB,KAAKC,UAAUk/B,KAGpCphD,MAAMyJ,QAAQ23C,KACjB1jC,QAAQC,KACN,gEACAyjC,QAEFA,aAGIjoD,EAASioD,EAAQA,EAAMjoD,OAAS,KACtCsqD,MAAgBzjD,MAAM7G,GAElBA,EAAS,GACXioD,EAAMtqD,UAAS+U,EAAMzS,WACb0qD,WAmBSj4C,UAGjBg2C,SAAU8B,EAAqB93C,GAE/B2zC,MAAOkE,EAAkB73C,GAEnBA,KAAAA,GA1Bak4C,CAAYl4C,GACb/S,MAAZgrD,GACFpmC,QAAQovB,IAAI,uBAAwBjhC,GAEtC43C,EAAUrqD,GAAK0qD,KAIf70C,SACI+0C,EAAO1pD,YAAYD,MACzBqjB,QAAQovB,IACN2W,EAAUtqD,OACR,iCACC6qD,EAAOH,GACR,iCAkDOI,QACTJ,EACA50C,IACF40C,EAASvpD,YAAYD,MACrBqjB,QAAQovB,IAAI,iCAAmCvwC,EAAO,YAGlD2nD,WAvCwBnC,MAC1BA,MAAAA,QACK,SAGHmC,EAAenC,EAClBjmB,QAAQ,4BAA6B,KACrCD,eAEH2nB,EAAqBU,EAAa/qD,QAE9BkpD,EAAwB,GACtBmB,EAAqBnB,QAChB,SAKL8B,EADuBrC,EAAkBoC,GACIx2B,cAAcmO,cAE7D5sB,GACFyO,QAAQovB,IACN,6BACEiV,EACA,WACAoC,EACA,KAGCA,EAUcC,CAAuB7nD,MAEvB,KAAjB2nD,cACFd,EAAoBK,GACpBY,UACIp1C,GACFyO,QAAQovB,IACN,sEAaFwX,KANAjD,SACFD,QAAcC,EAAe6C,IAC7BN,KAKErB,SACIgC,EAAcL,EAAaniD,MAAM,KAEvCuiD,EAAwBb,EAAUxhD,QAAO6hD,QAClCA,SACI,QAEHU,EAAeV,EAASjC,aAE1B4C,EAAU,SACdF,EAAYztD,SAAQ4tD,IACdF,EAAa7K,SAAS+K,IACxBD,OAIGA,GAAWF,EAAYprD,eAGhCmrD,EAAwBb,QAGpBkB,EAAWC,GAAgBV,GAAe,UAC1CW,EAA+BP,EAAsBh9C,IAAIq9C,WAE/DvB,EAAoByB,GACpBR,KACIp1C,SACI+0C,EAAO1pD,YAAYD,MACzBqjB,QAAQovB,IACN,gBACGkX,EAAOH,GACR,wBACAT,EAAkBjqD,OAClB,oBAOC2rD,GAAehB,MAClB70C,GACFyO,QAAQovB,IAAI,uBAEV,IAAuBgX,SACrB70C,GACFyO,QAAQovB,gBAAgB1zC,oCAEnB,QAEH8oD,EAAkB4B,EAASj4C,YAC7Bm2C,EAAagB,EAAcd,SAC7Bc,EAAed,IAEV,WAGA6C,KACH91C,GACFyO,QAAQovB,IAAI,cAGVgY,GADa1B,EAAkBG,KAEjCpmB,cAIK6nB,KACH/1C,GACFyO,QAAQovB,IAAI,MAGdruB,KACI8kC,EAAiB,QAAGA,OACxB0B,cAGO7tB,KACHnoB,GACFyO,QAAQovB,IAAI,QAGdruB,KACI8kC,EAAiBH,EAAkBjqD,OAAS,QAAGoqD,OACnD0B,cAGOA,KACHh2C,GACFyO,QAAQovB,IAAI,mBAGRvlB,EAAQ,YACVtY,GACFyO,QAAQovB,IAAI,sCAA4CqW,SAEpD+B,EAAK/B,GAAQA,EAAKtkD,cAAc0oB,GAClC29B,EACuC,mBAA9BA,EAAGC,wBACRl2C,GACFyO,QAAQovB,IAAI,qCAEdoY,EAAGC,0BAECl2C,GACFyO,QAAQC,KACN,kFAKF1O,GACFyO,QAAQC,KAAK,wDAKVynC,GAAgBtB,GACnB70C,GACFyO,QAAQovB,IAAI,mBAGVgY,GAAehB,IACjB3mB,cAuEKkoB,KACPpB,SACAV,EAAiB,GACjB9kC,cAUO6mC,GAAMlmD,GACT6P,GACFyO,QAAQovB,IAAI,SAId1tC,EAAE0xB,kBACEwyB,IACFplD,EAAMigD,QACNhhB,eAYKooB,QACHt2C,GACFyO,QAAQovB,IAAI,mCAGdsW,EAAoBK,GAEpBhlC,KAGIukC,GACE/zC,GACFyO,QAAQovB,IACN,sCAAwC7qB,KAAKC,UAAU8gC,YAGlD5pD,EAAI,EAAGA,EAAIqqD,EAAUtqD,OAAQC,WAC9B0qD,EAAWL,EAAUrqD,WACvB,IAAuB0qD,MAMvB70C,GACFyO,QAAQovB,IAAI,QAAU1zC,EAAI,KAAO6oB,KAAKC,UAAU4hC,IAE9Cd,GAAgBc,EAASj4C,WAC3B03C,EAAiBnqD,GACb6V,GACFyO,QAAQovB,IACN,wBAA0B1zC,EAAI,KAAO6oB,KAAKC,UAAU4hC,IAGxDmB,iBAfIh2C,GACFyO,QAAQovB,gBAAgB1zC,wCAqBzBqlB,KACHxP,GACFyO,QAAQovB,IAAI,QAIV0Y,WAIJlC,GAAS,YAGFnmB,KACHluB,GACFyO,QAAQovB,IAAI,cAEdwW,GAAS,IAEJ/mD,GAAQ6lD,IACXwC,GAAkB,EAClBG,eAIKS,YAELnD,EAAwB,GAAKmB,EAAqBnB,WAI7CgC,KACHmB,MACFroB,cAyBKynB,GAAgBa,EAAGC,SACpBC,EAAK,IAAMF,EAAE5pB,OAAOC,QAAQ,MAAO,UAAY,IAC/C8pB,MAAUnH,OAAOkH,EAAI,UACvBjmD,EAAI,QACF1G,EAAM2sD,EAAG5jD,MAAM,MAAM5I,OAAS,MAChC0sD,EAAO,QACJnmD,EAAI1G,EAAK0G,IAAKmmD,GAAQnmD,EAAI,SAAWA,YAAcA,WAEnDtG,UACC0sD,EAAOpvD,OAAOP,QAAS4qD,gBAAmB3nD,UAC5CssD,GACFA,EAAO5uD,SAAQmE,IACR6qD,EAAK7qD,KACV6qD,EAAK/E,YAAY9lD,GAAK6qD,EAAK7qD,GAAG6gC,QAAQ8pB,EAAKC,OAGxCC,o8CArgBTlsD,EAAQ+nD,EAAcqB,SACtBzmD,EAAOmnD,EAAkBV,IACzBb,EAASa,uDAKR+C,EACDzC,IAAYlC,GAASA,EAAMjoD,OAAS,GAAMqqD,EAAqB,6BAuGvDI,0DA8LexkD,GACnB6P,GACFyO,QAAQovB,IAAI,oBAAsB7qB,KAAKC,UAAU9iB,EAAEhE,SAEjDgE,EAAEhE,OAAO4qD,QAAQ,IAAM/C,IACrBh0C,GACFyO,QAAQovB,IAAI,0BAGdmY,OAEIh2C,GACFyO,QAAQovB,IAAI,2BAEd3P,gBAIe/9B,GACb6P,GACFyO,QAAQovB,IAAI,iBAGVlvC,EAAMwB,EAAExB,IACA,QAARA,GAAiBwB,EAAE6mD,WAAUroD,EAAM,kBAQjCpH,GANJ0vD,IAAK5C,EAASlsB,GAAKtwB,KAAKrH,MAAQ,KAChC0mD,SAAU7C,EAAS0B,GAAGl+C,KAAKrH,MAAQ,KACnC2mD,UAAWhvB,GAAKtwB,KAAKrH,MACrB4mD,QAASrB,GAAGl+C,KAAKrH,MACjB6mD,OAAQhB,GAAMx+C,KAAKrH,OAEJ7B,GACC,mBAAPpH,IACT4I,EAAEyxB,iBACFr6B,EAAG4I,cAIaA,GACd6P,GACFyO,QAAQovB,IAAI,cAGA,UAAV1tC,EAAExB,MACJwB,EAAEyxB,iBACFk0B,gBAIa3lD,GACX6P,GACFyO,QAAQovB,IAAI,gBAGdvwC,EAAO6C,EAAEhE,OAAOxB,OACZypD,GACFvpC,aAAaupC,GAGX7iD,EACF6iD,EAAoB73C,WAAW65C,GAAc7kD,GAE7C6kD,iBAWEp2C,GACFyO,QAAQovB,IAAI,gBAEdyY,iBAiBIt2C,GACFyO,QAAQovB,IAAI,WAGdyY,iBAkFIt2C,GACFyO,QAAQovB,IAAI,cAGdvwC,EAAO,SACPymD,OAAelqD,GAEf0S,iBACEtN,EAAMigD,QACNhhB,+FA4JSj/B,2BACC3B,yBAmBc6oD,GAAgBtB,YAE9BP,EAAiBnqD,4CATlB+pD,isBC/kBmBlrD,QAAQA,2GApBdA,QAAQA,kIA7BDA,YAAmBA,wKAT/BA,MAAaA,MAAI2F,0BAAtBzE,2JADaL,oCADqCb,MAAcA,kCAAhDA,KAAiBA,MAAI2F,mFAArB3F,KAAiBA,MAAI2F,wEAEhC3F,MAAaA,MAAI2F,aAAtBzE,+HAAAA,0BAFkDlB,MAAcA,wDAAhDA,KAAiBA,MAAI2F,6IAFtB3F,KAAiBA,MAAI2F,kEAArB3F,KAAiBA,MAAI2F,UAArB3F,KAAiBA,MAAI2F,0DAKN3F,MAAOiE,oDAAtBjE,MAAO2B,0EAAQ3B,MAAOiE,mCAAtBjE,MAAO2B,2GANHd,IAApBb,MAAIsuD,oBAE2BztD,IAA1Bb,MAAaA,MAAI2F,kPA6BxB3F,MAAI8/C,WACA9/C,OAAWA,MAAI2F,4EAHb3F,MAAIuuD,2GAEVvuD,MAAI8/C,kBACA9/C,OAAWA,MAAI2F,+EAHb3F,MAAIuuD,2GAPVvuD,MAAI8/C,WACA9/C,OAAWA,MAAI2F,sHAHb3F,OAAe,aAAcA,MAAIuuD,4IAEvCvuD,MAAI8/C,kBACA9/C,OAAWA,MAAI2F,+EAHb3F,OAAe,aAAcA,MAAIuuD,2GAatB,IAAdvuD,KAAkBA,KAAUA,qEAAd,IAAdA,KAAkBA,KAAUA,0DATd,IAAdA,KAAkBA,KAAUA,qEAAd,IAAdA,KAAkBA,KAAUA,8EAP/BA,MAAIwuD,mNAwCIxuD,MAAIyuD,YAAczuD,MAAIyuD,YAAYzuD,OAAOA,MAAI2B,MAAM3B,8FAAnDA,MAAIyuD,YAAczuD,MAAIyuD,YAAYzuD,OAAOA,MAAI2B,MAAM3B,uFALSA,MAAI0uD,gBAAgBltD,eAChFxB,YACAA,cAFCA,MAAI0uD,gBAAgBjvD,WAAaO,MAAI0uD,sOAAsB1uD,MAAI0uD,gBAAgBltD,2BAChFxB,oBACAA,sBAFCA,MAAI0uD,gBAAgBjvD,WAAaO,MAAI0uD,0WAF1C1uD,MAAI0uD,4IAFF1uD,OAAeA,MAAI4/C,MAAO5/C,2QAA1BA,OAAeA,MAAI4/C,MAAO5/C,iNAH9BA,0BAALkB,6LADgDlB,MAAcA,8JACzDA,aAALkB,0HAAAA,0DADgDlB,MAAcA,wEAC9DkB,6gBAjDHlB,2BAEMA,0BAALkB,uOAAKlB,aAALkB,+HAAAA,mGAkBKlB,0BAALkB,wNAAKlB,aAALkB,+HAAAA,yCA0BClB,2BAALkB,8MA/CUlB,MAAcA,yCA8CdA,MAAcA,yCA/ChBA,MAAcA,+JAEnBA,qHADOA,MAAcA,qEA+CnBA,cAALkB,0HAAAA,yDADUlB,MAAcA,iEA/ChBA,MAAcA,+EAgDtBkB,2MAtKEgL,EAAWtB,gBACN+jD,WACA7Z,aACA/jB,EAAS,iBACT69B,EAAY,cACZC,EAAU,iBACVC,EAAW,uBACXC,EAAiB,sBACjBC,EAAiB,sBACjBC,EAAiB,uBACjBC,EAAkB,oBAClBC,EAAe,qBACfC,EAAgB,wBAChBC,oBAEAC,EAAa,kBACbC,EAAa,6BACbC,GAAsB,KAE7BC,MAAqB,GACrBC,GAAoBF,GAAuBb,EAAQ7uC,MAAKhd,QAE/BjC,IAApBiC,EAAE6sD,oBAAiD9uD,IAAlBiC,EAAEwrD,cAExCsB,KAEAC,KACJlB,EAAQ9vD,SAAQ68C,SACdmU,EAAYnU,EAAI/1C,KAAO+1C,cAiEnBoU,GAAkBlrD,EAAO82C,KAPNqU,IAAAA,EAAAA,EAQPrU,EAAI/1C,QANlBipD,EADEmB,IAAWh/B,GACa,IAAd69B,GAAmB,EAEnB,OAKd79B,EAAS2qB,EAAI/1C,KACbuG,EAAS,YAAatH,MAAAA,EAAO82C,IAAAA,EAAK/1C,IAAI+1C,EAAI/1C,OAEtCqqD,GAAkBprD,EAAOoxC,KAC7B9pC,EAAS,YAAatH,MAAAA,EAAOoxC,IAAAA,KAEzBia,GAAmBrrD,EAAOoxC,EAAKrwC,KACnCuG,EAAS,aAActH,MAAAA,EAAOoxC,IAAAA,EAAKrwC,IAAAA,gvBA3B/B+1C,EAAMmU,EAAY9+B,QACVlwB,IAAR66C,IAAsC,IAAjBA,EAAI8S,UAA0C,mBAAd9S,EAAI/5C,YAC3D8tD,EAAehjD,GAAKivC,EAAI/5C,MAAM8K,iCA/C/ByjD,EAASpb,EACT9qC,QAAOyC,GAEChO,OAAOoS,KAAKw+C,GAAkBvlC,OAAM9mB,GAGb,KAAxBqsD,EAAiBrsD,IAChB6sD,EAAY7sD,GAAGsrD,cACbuB,EAAY7sD,GAAGsrD,YAAY7hD,GAAK,IAC9B0jD,oBACAjmD,SAASmlD,EAAiBrsD,GAAK,IAAImtD,sBAAwB,QAKxCtvD,IAAxBwuD,EAAiBrsD,IAEjBqsD,EAAiBrsD,MACwB,mBAA/B6sD,EAAY7sD,GAAGotD,YACnBP,EAAY7sD,GAAGotD,YAAY3jD,GAC3BojD,EAAY7sD,GAAGrB,MAAM8K,QAKlC4C,KAAI5C,GAAMhO,OAAOP,UAAWuO,GAAI4jD,QAASZ,EAAahjD,OACtD+kB,OAAMvyB,EAAGC,IACJD,EAAEoxD,QAAUnxD,EAAEmxD,QAAgBzB,EACzB3vD,EAAEoxD,QAAUnxD,EAAEmxD,SAAiBzB,EACjC,IAERxuD,MAAMkvD,GAAc,EAAGC,QAAY1uD,0BAqBhC6uD,GAAoBf,GAAW7Z,SAlBnC8a,MACAjB,EAAQ9vD,SAAQiE,IACiB,mBAApBA,EAAE6sD,mBACXC,EAAa9sD,EAAE6C,KAAO7C,EAAE6sD,cAAc7a,MAC7B/sC,MAAMyJ,QAAQ1O,EAAE6sD,qBAEzBC,EAAa9sD,EAAE6C,KAAO7C,EAAE6sD,cAActgD,KAAI4E,KAAShQ,KAAKgQ,EAAKtS,MAAMsS,6CARlDyB,MAASZ,OAAOY,GAAG1L,QAAO0L,GAAkB,iBAANA,GAAwB,KAANA,IAAUtL,KAAK,uCA+D/DilD,EAAiB3T,EAAI/1C,mDAEpB0pD,EAAiB3T,EAAI/1C,uCAgB9BwB,IAAM2oD,EAAe3oD,EAAGu0C,QA4BxBv0C,KAAK8oD,EAAgB9oD,EAAG6uC,EAAK0F,EAAI/1C,SAHnCwB,KAAK6oD,EAAe7oD,EAAG6uC,oTC/CvC,MAAMsa,GAAkB,CAE7B,CAAErsD,KAAM,WAAcssD,SAAU,cAAyBC,kBAAmB,qBAC5E,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,QAAiBssD,SAAU,YAA2BC,kBAAmB,gBACjF,CAAEvsD,KAAM,MAAmBssD,SAAU,SAA8BC,kBAAmB,cAEtF,CAAEvsD,KAAM,QAAiBssD,SAAU,UAA6BC,kBAAmB,eACnF,CAAEvsD,KAAM,QAAiBssD,SAAU,UAA6BC,kBAAmB,eACnF,CAAEvsD,KAAM,UAAessD,SAAU,aAA0BC,kBAAmB,qBAC9E,CAAEvsD,KAAM,SAAkBssD,SAAU,YAA2BE,kBAAmB,kBAClF,CAAExsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,eACpF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,iBACpF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,mBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,SAA8BC,kBAAmB,eACrF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,QAAiBssD,SAAU,aAA0BC,kBAAmB,qBAChF,CAAEvsD,KAAM,UAAessD,SAAU,mBAAoBC,kBAAmB,gCACxE,CAAEvsD,KAAM,MAAmBssD,SAAU,WAA4BC,kBAAmB,kBACpF,CAAEvsD,KAAM,YAAassD,SAAU,kBAAqBC,kBAAmB,2BACvE,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,SAAgBssD,SAAU,UAA6BC,kBAAmB,iBAClF,CAAEvsD,KAAM,KAAoBssD,SAAU,SAA8BC,kBAAmB,aACvF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,MAAqBssD,SAAU,UAA6BE,kBAAmB,aACvF,CAAExsD,KAAM,MAAmBssD,SAAU,QAA+BC,kBAAmB,YACvF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,SACzF,CAAEvsD,KAAM,QAAiBssD,SAAU,YAA2BC,kBAAmB,kBACjF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,WACzF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,eACpF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,iBACnF,CAAEvsD,KAAM,UAAessD,SAAU,cAAyBC,kBAAmB,sBAC7E,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,eACrF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,UAEzF,CAAEvsD,KAAM,MAAmBssD,SAAU,QAA+BC,kBAAmB,aACvF,CAAEvsD,KAAM,WAAcssD,SAAU,gBAAuBC,kBAAmB,wBAC1E,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,OAAkBssD,SAAU,YAA2BC,kBAAmB,iBAClF,CAAEvsD,KAAM,SAAgBssD,SAAU,WAA4BC,kBAAmB,gBACjF,CAAEvsD,KAAM,KAAoBssD,SAAU,SAA8BC,kBAAmB,YACvF,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,gBACrF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,UACzF,CAAEvsD,KAAM,SAAgBssD,SAAU,eAAwBC,kBAAmB,uBAC7E,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,WAAcssD,SAAU,gBAAuBC,kBAAmB,2BAC1E,CAAEvsD,KAAM,SAAgBssD,SAAU,WAA4BC,kBAAmB,kBACjF,CAAEvsD,KAAM,QAAiBssD,SAAU,UAA6BC,kBAAmB,gBACnF,CAAEvsD,KAAM,QAAiBssD,SAAU,UAA6BC,kBAAmB,gBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,YAA2BC,kBAAmB,kBAClF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,iBACnF,CAAEvsD,KAAM,UAAessD,SAAU,cAAyBC,kBAAmB,uBAE7E,CAAEvsD,KAAM,KAAoBssD,SAAU,QAA+BC,kBAAmB,WACxF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,UACzF,CAAEvsD,KAAM,UAAiBssD,SAAU,kBAAqBE,kBAAmB,2BAC3E,CAAExsD,KAAM,IAAqBssD,SAAU,MAAiCC,kBAAmB,UAC3F,CAAEvsD,KAAM,MAAmBssD,SAAU,SAA8BC,kBAAmB,cACtF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,kBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,kBACnF,CAAEvsD,KAAM,MAAmBssD,SAAU,QAA+BC,kBAAmB,cACvF,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,cACrF,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,cACrF,CAAEvsD,KAAM,YAAassD,SAAU,mBAAoBC,kBAAmB,4BACtE,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,iBACnF,CAAEvsD,KAAM,UAAessD,SAAU,cAAyBC,kBAAmB,uBAC7E,CAAEvsD,KAAM,SAAgBssD,SAAU,eAAwBC,kBAAmB,wBAC7E,CAAEvsD,KAAM,QAAiBssD,SAAU,aAA0BC,kBAAmB,qBAChF,CAAEvsD,KAAM,MAAmBssD,SAAU,SAA8BC,kBAAmB,cACtF,CAAEvsD,KAAM,OAAkBssD,SAAU,OAAgCC,kBAAmB,YACvF,CAAEvsD,KAAM,OAAkBssD,SAAU,SAA8BC,kBAAmB,cAErF,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,cACrF,CAAEvsD,KAAM,OAAkBssD,SAAU,SAA8BC,kBAAmB,cAErF,CAAEvsD,KAAM,MAAmBssD,SAAU,QAA+BC,kBAAmB,WACvF,CAAEvsD,KAAM,SAAgBssD,SAAU,WAA4BC,kBAAmB,mBACjF,CAAEvsD,KAAM,SAAgBssD,SAAU,WAA4BC,kBAAmB,kBACjF,CAAEvsD,KAAM,SAAgBssD,SAAU,cAAyBC,kBAAmB,uBAC9E,CAAEvsD,KAAM,UAAessD,SAAU,aAA0BC,kBAAmB,sBAC9E,CAAEvsD,KAAM,SAAgBssD,SAAU,aAA0BC,kBAAmB,oBAC/E,CAAEvsD,KAAM,SAAgBssD,SAAU,YAA2BC,kBAAmB,kBAChF,CAAEvsD,KAAM,MAAmBssD,SAAU,OAAgCC,kBAAmB,WACxF,CAAEvsD,KAAM,QAAiBssD,SAAU,WAA4BC,kBAAmB,kBAClF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,UAAessD,SAAU,gBAAuBC,kBAAmB,0BAC3E,CAAEvsD,KAAM,MAAmBssD,SAAU,QAA+BC,kBAAmB,YACvF,CAAEvsD,KAAM,QAAiBssD,SAAU,UAA6BC,kBAAmB,gBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,QAAiBssD,SAAU,WAA4BC,kBAAmB,gBAClF,CAAEvsD,KAAM,QAAiBssD,SAAU,WAA4BC,kBAAmB,iBAClF,CAAEvsD,KAAM,KAAoBssD,SAAU,MAAiCC,kBAAmB,UAC1F,CAAEvsD,KAAM,SAAgBssD,SAAU,SAA8BC,kBAAmB,cACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,SAA8BC,kBAAmB,eACrF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,eACpF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,UACzF,CAAEvsD,KAAM,KAAoBssD,SAAU,QAA+BC,kBAAmB,WACxF,CAAEvsD,KAAM,OAAkBssD,SAAU,WAA4BC,kBAAmB,gBACnF,CAAEvsD,KAAM,OAAkBssD,SAAU,UAA6BC,kBAAmB,gBACpF,CAAEvsD,KAAM,MAAmBssD,SAAU,MAAiCC,kBAAmB,SAEzF,CAAEvsD,KAAM,SAAgBssD,SAAU,aAA0BC,kBAAmB,qBAC/E,CAAEvsD,KAAM,OAAkBssD,SAAU,SAA8BC,kBAAmB,cACrF,CAAEvsD,KAAM,MAAmBssD,SAAU,SAA8BC,kBAAmB,cACtF,CAAEvsD,KAAM,MAAmBssD,SAAU,MAAiCC,kBAAmB,UACzF,CAAEvsD,KAAM,UAAessD,SAAU,iBAAsBC,kBAAmB,4BAC1E,CAAEvsD,KAAM,MAAmBssD,SAAU,SAA8BC,kBAAmB,cACtF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,WAEzF,CAAEvsD,KAAM,UAAessD,SAAU,eAAwBC,kBAAmB,wBAC5E,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,UAEzF,CAAEvsD,KAAM,QAAiBssD,SAAU,WAA4BC,kBAAmB,gBAClF,CAAEvsD,KAAM,OAAkBssD,SAAU,OAAgCC,kBAAmB,UACvF,CAAEvsD,KAAM,UAAessD,SAAU,kBAAqBC,kBAAmB,4BACzE,CAAEvsD,KAAM,MAAmBssD,SAAU,UAA6BC,kBAAmB,cAErF,CAAEvsD,KAAM,KAAoBssD,SAAU,OAAgCC,kBAAmB,yJC5DxExwD,MAAIyuD,YAAczuD,MAAIyuD,YAAYzuD,OAAOA,MAAI2B,MAAM3B,8FAAnDA,MAAIyuD,YAAczuD,MAAIyuD,YAAYzuD,OAAOA,MAAI2B,MAAM3B,uFALSA,MAAI0uD,gBAAgBltD,eAChFxB,YACAA,cAFCA,MAAI0uD,gBAAgBjvD,WAAaO,MAAI0uD,qOAAsB1uD,MAAI0uD,gBAAgBltD,2BAChFxB,mBACAA,sBAFCA,MAAI0uD,gBAAgBjvD,WAAaO,MAAI0uD,qaAF1C1uD,MAAI0uD,iFAFC1uD,MAAI4/C,OAAOx1C,KAAK,2NAFvBpK,0BAALkB,wTAAKlB,aAALkB,0HAAAA,+DAAAA,yMAkBgC,MAA3BlB,MAAIo1C,sBAEoC,IAAnCp1C,MAAIo1C,oBAAoBl0C,gVAIzBlB,MAAIo1C,yCAATl0C,4NAAKlB,MAAIo1C,4BAATl0C,+HAAAA,0CAD8CoH,SAAU,iDAAVA,SAAU,8UAGrDtI,MAAE81C,WAAS91C,MAAEk2C,YAAQl2C,MAAEm2C,iBAAen2C,MAAEo2C,YAAQp2C,MAAEq2C,iBAAer2C,MAAEs2C,WAAQt2C,MAAEu2C,WAAQv2C,MAAEw2C,oWAAvFx2C,MAAE81C,oCAAS91C,MAAEk2C,qCAAQl2C,MAAEm2C,0CAAen2C,MAAEo2C,qCAAQp2C,MAAEq2C,0CAAer2C,MAAEs2C,oCAAQt2C,MAAEu2C,oCAAQv2C,MAAEw2C,iIAS/Dx2C,MAAI81C,kLAAJ91C,MAAI81C,qEADwCxtC,SAAU,iDAAVA,SAAU,mFAjBlFtI,KAA2BA,MAAI81C,gBAgB/B91C,KAAkBA,MAAI81C,kHAjBsB91C,MAAI81C,8FAChD91C,KAA2BA,MAAI81C,gHAgB/B91C,KAAkBA,MAAI81C,6JAjBsB91C,MAAI81C,oMA1BlC91C,UACHA,qBACU,qEACA,4DACIA,kWAGRA,8FARKA,2EAEXA,kCAGcA,iLALHA,iKA1JpB0wD,EAAwB,yCACxBlB,GAAwB,sBACxBmB,GAAwB,4BACxBC,GAAwB,aACxBrc,iBAEA+a,eACAC,WAMLsB,EDoO8BP,GAAgBjhD,KAAIlO,GAAKA,EAAE8C,OCnOzD0qD,IAEFhpD,IAAK,KACLm6C,MAAO,KACPn+C,MAAO+T,GAAKA,EAAEogC,MACd0Y,UAAU,EACVmB,cAAe7a,QAGTgc,YACJhc,EAAKj2C,SAAQm3C,QACP/gC,EAAMjU,KAAK48C,MAAM5H,EAAIF,MAJd,SAKOj1C,IAAdiwD,EAAK77C,KACP67C,EAAK77C,IAAShR,QANL,GAMcgR,EAAa,OAN3B,IAMmCA,EAAM,KAAatT,MAAOsT,OAG1E67C,EAAOryD,OAAOy6C,QAAQ4X,GACnBt/B,OACA7d,SAAQ5G,GAAI1O,EAAGqX,MAAS3I,EAAE1O,GAAKqX,EAAI3I,QAC/BtO,OAAOujB,OAAO8uC,IAEvBV,YAAa16C,GAAK1U,KAAK48C,OAAOloC,EAAEogC,MAAQ,GAAK,MAG7CnwC,IAAe,SACfm6C,MAAe,OACfn+C,MAAe+T,GAAKA,EAAEwgC,OACtByZ,cAAekB,EACfrC,UAAe,IAGf7oD,IAAe,cACfm6C,MAAe,UACfn+C,MAAe+T,GAAKA,EAAEygC,YACtBwZ,eAAgB,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC9BnB,UAAe,IAGf7oD,IAAe,SACfm6C,MAAe,OACfn+C,MAAe+T,GAAKA,EAAE0gC,OACtBuZ,cAAekB,EACfrC,UAAe,IAGf7oD,IAAe,cACfm6C,MAAe,UACfn+C,MAAe+T,GAAKA,EAAE2gC,YACtBsZ,eAAgB,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC9BnB,UAAe,MAEdzmD,MAAMC,MAAM9G,OAtDQ,KAsDoBqkB,EAAGpkB,IAAMA,EAAI,IAAGkO,KAAIlO,KAC7DwE,WAAsBxE,IACtB2+C,aAAsB3+C,IACtBQ,MAAe+T,GAAKA,SAASvU,KAC7BstD,YAAe/4C,GAAKA,SAASvU,MAAQ,IACrCqtD,UAAe,EACfmB,eAAgB,EAAE,EAAE,EAAE,QAGtBhqD,IAAe,aACfm6C,MAAe,OACfn+C,MAAe+T,GAAKA,EAAEugC,YAAc,IAEpC0Z,kBAAmB5nD,MAAM,IAAI8I,QAC7B29C,UAAe,IAGf7oD,IAAe,QACfm6C,MAAe,KACfn+C,MAAe+T,GAAKA,EAAEq7C,UAAY,KAAO,KACzCtC,YAAe/4C,GAAKA,EAAEq7C,UAAY,udAAyd,GAC3fvC,UAAe,EACfmB,eAAgB,KAAM,MACtBhI,0BA0C6BxgD,EAAC6uC,IAAEA,IAClC7uC,EAAE0xB,wBAEI/pB,EAAQknC,EAAIF,MACZkb,GAAWC,EAAkBniD,UACnCmiD,EAAkBniD,GAASkiD,KAEtBA,SAEGnV,QAAmB0M,EAAc2I,cAAclb,EAAI+a,WAGzDhc,GAAGoc,0BAA0BriD,eAAoB+sC,OAnDjDl2C,IAAe,sBACfm6C,MAAe,KACfn+C,MAAe+T,GAAKA,EAAE0/B,qBAAqBl0C,OAAS,KAAO,KAC3DutD,YAAe/4C,GAGmB,MAAzBA,EAAE0/B,oBAFQ,+uBAGV1/B,EAAE0/B,oBAAoBl0C,OAFlB,mZAG4B,GAEzCstD,UAAe,EACfmB,eAAgB,KAAM,QAExB3lD,QAAO7I,WACCA,EAAEwE,SACH,eAA8BgrD,MAC9B,6BAA8BC,iBACA,UAMnCK,KACAG,cAUKC,OAAYrb,UACblnC,EAAQknC,EAAIF,UAClBsb,EAA2BtiD,IAAUsiD,EAA2BtiD,qXAoB/DwiD,EAAY7yD,OAAOy6C,SACpBqY,0BAA2Bb,EAC3Bc,cAAkB,IAAMb,EAAkB,EAAI,IAAMC,EAAwB,EAAI,WAC/EvhD,OAAMhR,EAAGqX,UAAYrX,KAAKqX,MAC1BtL,KAAK,uCA9BN6mD,UACAG,sBA4CmBjqD,KAAYu0C,EAAIiM,SAAUjM,EAAIiM,SAASxgD,EAAAA,EAAG6uC,IAAAA,EAAK0F,IAAAA,EAAK5sC,MAAOrH,QAFjC4pD,GAAYrb,IAAAA,ggBC3C5Bsa,0BACetwD,yFAKLA,MAAE,mGAJAA,KAAaA,wBAAbA,KAAaA,8EASzBA,mCACqBA,0FACTA,KAAkBA,wBAAlBA,KAAkBA,qPAZfA,kCAKLA,MAAE,kCAJAA,KAAaA,iFAUJA,qCACTA,KAAkBA,iPAW5B+H,MAAM,GAAG8I,QAAQxB,4BACVrP,MAAE,yBACCA,qFACFA,KAAMA,wBAANA,KAAMA,sLAANA,KAAMA,kSA2CR,qCAHRA,gBAAAA,6MAaV+H,MAAM/H,MAAQ6Q,6BAAvB3P,6mBApBclB,mFAesB,IAAhBA,KAAoB,WAAa,uFAUjCA,OAAiBA,KAAS,EAAK,WAAa,mMAzBlDA,sOAAAA,8CAOKA,qKAQiB,IAAhBA,KAAoB,WAAa,4CAK5C+H,MAAM/H,MAAQ6Q,gBAAvB3P,4HAAAA,uCAKoBlB,OAAiBA,KAAS,EAAK,WAAa,ohBAHJA,MAAI,mIAD1CA,QAAMA,KAAc,SAAW,wFACOA,MAAI,yCAD1CA,QAAMA,KAAc,SAAW,6GAnFhD+H,MAAM/H,KAAagK,WAAe9I,OAAS,GAAG2P,6BAAvD3P,mFAyBS6G,MAAMwtC,IAAW1kC,6BAA1B3P,qHA6BClB,OAEsB,MAAjBA,OAEyB,IAAzBA,KAAckB,k1BAlEHuwD,+CAQR1pD,MAAM/H,KAAagK,WAAe9I,OAAS,GAAG2P,gBAAvD3P,0HAAAA,yDAyBS6G,MAAMwtC,IAAW1kC,gBAA1B3P,0HAAAA,uMAzBAA,qCAyBAA,0NA9IFq0C,GAAmB,WA2EhBkc,GAAc7sD,MACE,KAAlBA,EAAM8sD,oBACTxtD,SAASm9C,KAAKsQ,aAIP/sD,EAAMgtD,SAAWhtD,EAAMitD,SAAajtD,EAAMgtD,SAAWhtD,EAAMktD,mBAIhEC,KACoB,MAAdntD,EAAMe,IAAgBosD,EAAS,uBACjB,MAAdntD,EAAMe,IAAgBosD,EAAS,6BACjB,MAAdntD,EAAMe,WAAgBosD,EAAS,oBAKnCC,EAAY9tD,SAASiiD,cAAcvpC,MACpCo1C,EAAUp7B,WAAWm7B,UAClBE,EAAgBv9C,SAASs9C,EAAUnuB,QAAQkuB,EAAQ,KACnDG,EAAYhuD,SAASiuD,kBAAkBJ,IAASE,EAAgB,MACpD/tD,SAASiuD,kBAAkBJ,MAC7C7tD,SAASm9C,KAAKsQ,QACdO,EAAUhM,mBAGJgM,EAAYhuD,SAASiuD,kBAAkBJ,MAC7C7tD,SAASm9C,KAAKsQ,QACdO,EAAUhM,kBAa6B/kD,GAAKA,KAON4P,MAAQA,EAAE9M,QAAQ8M,EAAEw/C,YAAYx/C,EAAEy/C,uBAmBtBrvD,GAAKA,EAAI,gEAhJzDixD,MAAuBrqD,MADJ,GAC2B8I,QAAQxB,KAAIlO,GAAKA,EAAI,QAGrEkxD,KACAC,KACA9d,KAEA+d,GAAoB,EACpBC,EAAoB,KAGpBC,EAAsB,EACtBC,EAAsB,qDAabvxD,KAAKkxD,EACTA,EAAalxD,IAA8B,MAAxBmxD,EAAkBnxD,QACxCmxD,EAAkBnxD,GAAK,KAED,MAAnBkxD,EAAalxD,KAChBkxD,EAAa5hD,OAAOtP,EAAG,GACvBmxD,EAAkB7hD,OAAOtP,EAAG,4BAShCoxD,GAAiB,OACjB/d,EAAQA,EAAMxqC,QAAO7I,GAAKA,WAEpBwxD,EAAO3oC,KAAKC,WAChB0qB,OAAQ0d,EAAahjD,KAAIlO,GAAKA,EAAE8C,OAChC2wC,YAAa0d,EACb9d,MAAAA,IAGIwX,WACEqG,EAAanxD,SAAWoxD,EAAkBpxD,SAAWszC,EAAMtzC,uBAC/DsxD,EAAgB,SAIuB,mBAA7B9b,OAAOC,8BACjBpjC,WAAWy4C,EAAQ,WAIf4G,EAAWlc,OAAOmc,eACtB7oC,KAAKC,UAAUs+B,EAAchU,OAAOllC,KAAIlO,8BAC/Bi0C,EAAmB2b,UAAEA,EAAS9a,WAAEA,KAAe/lC,GAAQ/O,SACvD+O,MAETyiD,OAGFH,EAAgBxoC,KAAK6sB,MAAM+b,GAAUvjD,KAAIuN,GAAM2rC,EAAchU,OAAOue,MAAK3xD,GAAKA,EAAE20C,QAAUl5B,QAG5FovC,QACAuG,GAAiB,sBA3DhBQ,EAAS/xD,KAAKgyD,MAAMR,OAAmBtxD,OAASwxD,mBAE5CF,GAAiBO,OACpBN,EAAc,qBAGfQ,EAAsBT,sBACtBlD,EAAaoD,EAAeD,uBAC5BlD,EAAamD,GAAgBD,EAAY,sBAgBzCje,EAAQA,EAAMhjB,OAAMvyB,EAAGC,IAAMA,EAAID,8DAqFOozD,EAAalxD,QAAbkxD,EAAalxD,2CAWbmxD,EAAkBnxD,QAAlBmxD,EAAkBnxD,kDAcpBqzC,EAAMrzC,QAANqzC,EAAMrzC,+CAiCrBuxD,8BAOKO,2NASqBR,cAMEA,EAActxD,WAIhBsxD,glBCrMnC,MAAVzyD,4bAZHu0C,+BAEJ2e,kBACO3e,IAAWgU,GAAehU,YAC7BA,EAASgU,GAAehU,UAEzB,kFCgF4BvzC,KAAK48C,MAAiB,IAAX59C,sKAbzBA,4DAEJA,gCACEmzD,iBACCC,0BACIpzD,oBACLA,KAAiB,GAAK,yBAMlBA,6OAZFA,mCAEJA,0CAGOA,gCACLA,KAAiB,GAAK,gDAMlBA,mBACYgB,KAAK48C,MAAiB,IAAX59C,2DAtFpCmzD,GAAa,KACbC,GAAc,2BAUhBC,EAAWC,EAEXC,EAEAC,WAZOC,YACA3kD,gBACA4kD,gBACAC,qBACAC,GAAiB,mBACjBC,eACAC,KAOPj8C,MAAYk9B,GAAGsD,IAAI+a,GAAaD,GAAYpe,GAAGgf,SAC/CC,EAAW,uBAGH7oD,SAAQsB,GAAKhK,sBAAsBgK,eACnCtB,SAAQsB,OAAK8mD,EAASU,UAAYxnD,OAC5C+mD,MAAcze,GAAGmf,aAAaX,GAE9BF,EAAYvkD,EAAQykD,EAASjrD,SAAWmrD,EACxCH,GAAaxkD,EAAQ,GAAKykD,EAASjrD,SAAWmrD,EAE9CF,EAASxuD,iBAAiB,SAAUovD,GAE/BZ,EAASa,aAAef,MAC3BE,EAASa,YAAcf,KAGvBc,cAIEA,eAGCb,EAAUC,EAASa,YAAc,EAzCrB,iBA8CfJ,EAAY,QAGZF,IAKFN,EAAQa,KAAKx8C,GACbg8C,EAAaS,KAAKz8C,EAAO67C,GAEzBa,EAAW,EAzDM,WA0DjBP,GAAaT,EAASa,YAAcf,IAAcC,EAAUD,KAIxDkB,GAAcC,EAASC,WAEtBC,EAAc,MADCnB,EAASa,YAAcK,EACED,GAAWC,MAGxDlB,EAASa,YAAcpzD,KAAK8vB,IAAIwiC,EAASoB,oVAczBnB,+PCoBKvzD,gKAAAA,wIAML,EAAIg3C,OAAOh3C,WAAoBA,KAAMkB,sKAArC,EAAI81C,OAAOh3C,8BAAoBA,KAAMkB,swBAgB/BlB,oMAvBbA,0BAALkB,gGAIGlB,QAEKA,KAAMkB,OAAS,wDAYpBlB,2KALOA,mMACiCA,wbAdtCA,aAALkB,uHAAAA,uHAaUlB,4BACiCA,mGAd3CkB,oQA9FAyzD,GAAkBxtC,UAAUytC,qBAAuB,GAAK,MAK1DC,EAKAC,EACAC,gBATOlB,oBACAmB,KAGPC,KAGAC,EAAmBziD,eAKnB0iD,GAAoB,EACpBC,GAAiB,EAGjBC,EAAgB,EAChBC,EAAa,YAiERC,MACAT,IAAyBH,IAChCI,GAAsB,gJAzDM5tD,SACtB8tD,EAAQ9tD,EAAEhE,OAAO8xD,SACT,MAATA,aAELG,GAAiB,WAGRj0D,EAAI,EAAGA,EAAI8zD,EAAM/zD,OAAQC,SAChCg0D,EAAmBh0D,SACbq0D,EAAOP,EAAM9zD,GAEnBskB,QAAQovB,IAAI2gB,EAAKvxD,KAAM3B,cAjBzB4yD,EAAmBziD,SACnBqiD,EAAuB,EACvBC,GAAsB,QAmBdU,MAAaC,WACnBD,EAAOE,cAAcH,aACXrqD,SAASC,IAAcqqD,EAAOle,OAASnsC,aAExCjK,EAAI,EAAGA,EAAIwzD,EAAgBxzD,WAC5B2N,EAAQ8mD,EAAkB10D,WAEhC00D,EAAkB9mD,IACTA,MAAAA,EACP4kD,UAAW8B,EAAKvxD,KAChB0vD,UAAW8B,EAAOh0D,OACJoyD,aAAAA,EACdJ,QAASkB,EACTb,SAAUyB,gBAKJpqD,SAASC,GAAY3I,sBAAsB2I,eAE3CD,SAASC,IACjB8nD,sBACEmC,EAAgBxB,EAAagC,mBAC7BP,EAAazB,EAAaiC,gBAErBf,GAAwB3pD,MAC5B,cAGCmpC,EAASsf,EAAakC,kBACtBxN,EAAcM,eAAetU,SAG/BA,EAASsf,EAAakC,YAC5BtwC,QAAQovB,IAAI7qB,KAAKC,UAAUsqB,QAE3B6gB,GAAiB,8EAuCKP,oBACoEA,EAASlD,cAC3EkD,EAASlD,cC3HtBqE,KAEXC,SAAU,SACRx2D,yGACAy2D,UACE,ioBAGFD,SAAU,OACVx2D,0EACAy2D,UACE,wOAGFD,SAAU,WACVx2D,0EACAy2D,UACE,+LAGFD,SAAU,WACVx2D,0EACAy2D,UACE,2RAGFD,SAAU,MACVx2D,4EACAy2D,UACE,wEACA,geCLel2D,mFAGkDA,KAAOi2D,cAJ5Dj2D,KAAOk2D,kCAAbh1D,mQAImBlB,KAAmB,SAAW,8CAV3CA,sBACGA,MAAsBA,KAAI,yBAA2B,qNAElDA,wCAGNA,KAAOk2D,qBAAbh1D,+HAAAA,0BAImBlB,KAAmB,SAAW,sBATxCA,MAAsBA,KAAI,yBAA2B,4HA8B7Cg1D,cAAAh1D,KAAe6zD,aAAA7zD,kBACRA,KAAWA,cAFjBA,KAAOP,qLADdO,MAAsBA,KAAI,UAAY,yFAEhCg1D,cAAAh1D,KAAe6zD,aAAA7zD,wBACRA,KAAWA,sBAFjBA,KAAOP,iMADdO,MAAsBA,KAAI,UAAY,iKA/BpDg2D,wBAAL90D,qCA8BK80D,wBAAL90D,0oBA/BkClB,KAAmB,QAAU,2RAC1Dg2D,WAAL90D,4HAAAA,iCADkClB,KAAmB,QAAU,4BA+B1Dg2D,WAAL90D,0HAAAA,+DAAAA,qKAlDOi1D,oBACAnB,mBACAnB,KAEPuC,EAAqB,EAErBC,qLAEqBlvD,OACvBivD,EAAqBjvD,EAAEmvD,WAAWvI,QAAQ,UAAUnxC,IAE/Cy5C,EAAWD,IACdC,EAAWD,6MCuBWp2D,gBAAAA,mEAYdm2D,iBAAAn2D,KAAkBg1D,cAAAh1D,KAAe6zD,aAAA7zD,qKAXvCu2D,2EAacC,qVAdMx2D,kDAYdm2D,iBAAAn2D,KAAkBg1D,cAAAh1D,KAAe6zD,aAAA7zD,kKA3CvCu2D,GAAU,uBACVC,GAAU,2DAKZ3C,EAFAsC,GAAmB,EACnBnB,GAAoB,SAGxB7yD,OAAO4C,iBAAiB,sBACtB8uD,MAAmBna,SACnB6O,MAAoB7U,YACdmgB,EAAapmD,WACnBunD,GAAgB,yBAmBQmB,oBCrChB,oEAAQ,CAChBhzD,OAAQe,SAASm9C,KACjB7/C,MAAO"}